{"version":3,"file":"292.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACuE;AACC;AACkB;AAC5C;AACA;AAED;;;;;AAStC,IAAMO,qBAAqB;EAA5B,MAAOA,qBAAqB;IAOhCC,YACUC,KAAqB,EACrBC,SAA2B;MAD3B,KAAAD,KAAK,GAALA,KAAK;MACL,KAAAC,SAAS,GAATA,SAAS;MARV,KAAAC,SAAS,GAAgB,IAAI;MAC5B,KAAAC,WAAW,GAAG,IAAIZ,uDAAY,EAAU;MAElD,KAAAa,SAAS,GAAmB,EAAE;MAC9B,KAAAC,KAAK,GAAG,CAAC;IAKN;IAEGC,cAAcA,CAACC,KAAwB;MAAA,IAAAC,KAAA;MAAA,OAAAC,sJAAA;QAC3C,IAAIF,KAAK,CAACG,IAAI,EAAE;UACd,MAAMC,WAAW,SAASH,KAAI,CAACI,YAAY,CAACL,KAAK,CAACG,IAAI,CAAC;UACvDF,KAAI,CAACL,WAAW,CAACU,IAAI,CAACF,WAAW,CAAC;;MACnC;IACH;IAEMG,iBAAiBA,CAACP,KAAY;MAAA,IAAAQ,MAAA;MAAA,OAAAN,sJAAA;QAClC,MAAMO,MAAM,GAAGT,KAAK,CAACS,MAA0B;QAC/C,MAAMC,QAAQ,GAAoBD,MAAM,CAACE,KAAK;QAC9C,IAAID,QAAQ,IAAIA,QAAQ,CAACE,MAAM,GAAG,CAAC,EAAE;UACnC,IAAI,CAACF,QAAQ,CAAC,CAAC,CAAC,CAACG,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,EAAE;YAC1CN,MAAI,CAACO,gBAAgB,CAAC,kBAAkB,CAAC;WAC1C,MAAM;YACLP,MAAI,CAACb,SAAS,GAAGe,QAAQ,CAAC,CAAC,CAAC;;;MAE/B;IACH;IAEAL,YAAYA,CAACF,IAAU;MACrB,OAAO,IAAIa,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;QACrC,MAAMC,MAAM,GAAG,IAAIC,UAAU,EAAE;QAC/BD,MAAM,CAACE,MAAM,GAAG,MAAK;UACnBJ,OAAO,CAACE,MAAM,CAACG,MAAgB,CAAC;QAClC,CAAC;QACDH,MAAM,CAACI,OAAO,GAAGL,MAAM;QACvBC,MAAM,CAACK,aAAa,CAACrB,IAAI,CAAC;MAC5B,CAAC,CAAC;IACJ;IAEA;;;;;IAKAsB,WAAWA,CAAA;MACT,IAAI,CAAC5B,SAAS,GAAG;QACf,GAAG,IAAI,CAACA,SAAS;QACjB6B,MAAM,EAAE,CAAC,IAAI,CAAC7B,SAAS,CAAC6B,MAAM,IAAI,CAAC,IAAI;OACxC;IACH;IAEA;;;;IAIAC,MAAMA,CAAA;MACJ,IAAI,CAAC7B,KAAK,IAAI,GAAG;MACjB,IAAI,CAACD,SAAS,GAAG;QACf,GAAG,IAAI,CAACA,SAAS;QACjBC,KAAK,EAAE,IAAI,CAACA;OACb;IACH;IAEA;;;;IAIA8B,OAAOA,CAAA;MACL,IAAI,IAAI,CAAC9B,KAAK,GAAG,CAAC,EAAE;QAClB,IAAI,CAACA,KAAK,IAAI,GAAG;QACjB,IAAI,CAACD,SAAS,GAAG;UACf,GAAG,IAAI,CAACA,SAAS;UACjBC,KAAK,EAAE,IAAI,CAACA;SACb;;IAEL;IAEA;;;;IAIA+B,cAAcA,CAAA;MACZ,IAAI,CAAChC,SAAS,GAAG;QACf,GAAG,IAAI,CAACA,SAAS;QACjBiC,KAAK,EAAE,CAAC,IAAI,CAACjC,SAAS,CAACiC;OACxB;IACH;IAEQf,gBAAgBA,CAACgB,GAAW;MAClC,IAAI,CAACtC,KAAK,CAACuC,GAAG,CAAC;QACbC,QAAQ,EAAE,OAAO;QACjBC,OAAO,EAAE,IAAI,CAACxC,SAAS,CAACyC,OAAO,CAAC,aAAa,CAAC;QAC9CC,MAAM,EAAE,IAAI,CAAC1C,SAAS,CAACyC,OAAO,CAACJ,GAAG;OACnC,CAAC;IACJ;IAAC,QAAAM,CAAA;uBAjGU9C,qBAAqB,EAAA+C,+DAAA,CAAAE,uDAAA,GAAAF,+DAAA,CAAAG,iEAAA;IAAA;IAAA,QAAAC,EAAA;YAArBnD,qBAAqB;MAAAoD,SAAA;MAAAC,MAAA;QAAAjD,SAAA;MAAA;MAAAkD,OAAA;QAAAjD,WAAA;MAAA;MAAAkD,UAAA;MAAAC,QAAA,GAAAT,iEAAA;MAAAW,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,+BAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;;UChBlChB,4DAAA,aAAoD;UAa9CA,wDAAA,0BAAAoB,qEAAAC,MAAA;YAAA,OAAgBJ,GAAA,CAAAxD,cAAA,CAAA4D,MAAA,CAAsB;UAAA,EAAC;UACxCrB,0DAAA,EAAgB;UAGjBA,4DAAA,aAAqB;UACYA,wDAAA,mBAAAuB,uDAAA;YAAA,OAASN,GAAA,CAAA5B,MAAA,EAAQ;UAAA,EAAC;UAC/CW,4DAAA,EAAmF;UAAnFA,4DAAA,aAAmF;UACjFA,uDAAA,cAEE;UAEJA,0DAAA,EAAM;UAERA,6DAAA,EAAmD;UAAnDA,4DAAA,gBAAmD;UAApBA,wDAAA,mBAAA2B,uDAAA;YAAA,OAASV,GAAA,CAAA3B,OAAA,EAAS;UAAA,EAAC;UAChDU,4DAAA,EAAmF;UAAnFA,4DAAA,aAAmF;UACjFA,uDAAA,eAEE;UAEJA,0DAAA,EAAM;UAERA,6DAAA,EAAuD;UAAvDA,4DAAA,iBAAuD;UAAxBA,wDAAA,mBAAA4B,wDAAA;YAAA,OAASX,GAAA,CAAA9B,WAAA,EAAa;UAAA,EAAC;UACpDa,4DAAA,EAAwF;UAAxFA,4DAAA,cAAwF;UACtFA,uDAAA,gBAEE;UACJA,0DAAA,EAAM;UAERA,6DAAA,EAA0D;UAA1DA,4DAAA,iBAA0D;UAA3BA,wDAAA,mBAAA6B,wDAAA;YAAA,OAASZ,GAAA,CAAA1B,cAAA,EAAgB;UAAA,EAAC;UACvDS,4DAAA,EAAwF;UAAxFA,4DAAA,eAAwF;UACtFA,uDAAA,gBAEE;UACJA,0DAAA,EAAM;UAERA,6DAAA,EAAiE;UAAjEA,4DAAA,iBAAiE;UAAlCA,wDAAA,mBAAA8B,wDAAA;YAAA9B,2DAAA,CAAAgC,GAAA;YAAA,MAAAC,GAAA,GAAAjC,yDAAA;YAAA,OAASA,yDAAA,CAAAiC,GAAA,CAAAG,KAAA,EAAuB;UAAA,EAAC;UAC9DpC,4DAAA,EAAmF;UAAnFA,4DAAA,eAAmF;UACjFA,uDAAA,gBAEE;UACJA,0DAAA,EAAM;UAERA,6DAAA,EAAkH;UAAlHA,4DAAA,qBAAkH;UAAvCA,wDAAA,oBAAAqC,wDAAAhB,MAAA;YAAA,OAAUJ,GAAA,CAAAhD,iBAAA,CAAAoD,MAAA,CAAyB;UAAA,EAAC;UAA/GrB,0DAAA,EAAkH;;;UAlDlHA,uDAAA,GAA+C;UAA/CA,wDAAA,cAAAiB,GAAA,CAAA5D,SAAA,GAAA4D,GAAA,CAAA5D,SAAA,GAAAmF,SAAA,CAA+C,sIAAAvB,GAAA,CAAA1D,SAAA;;;qBDOzCT,wDAAY,EAAED,iEAAkB,EAAA4F,oEAAA,EAAE9F,gEAAe,EAAEI,wDAAY;MAAA2F,MAAA;IAAA;;SAI9DzF,qBAAqB;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEfY;AACA;AACQ;AACL;AAC2C;AAC7B;AAC3B;AAEc;AACL;AAC2B;AACT;AACE;AAC9B;AACY;AACuB;AAEW;AACpC;AAC8B;;;;;;;;;;;;;;;;ICXrE+C,6DAAA,cAA2C;IAC4BA,yDAAA,oBAAAyD,mEAAApC,MAAA;MAAArB,4DAAA,CAAA0D,GAAA;MAAA,MAAAC,MAAA,GAAA3D,4DAAA;MAAA,OAAUA,0DAAA,CAAA2D,MAAA,CAAAE,kBAAA,CAAAxC,MAAA,CAA0B;IAAA,EAAC;IAA1GrB,2DAAA,EAA6G;IAC7GA,6DAAA,iBAWC;IAVCA,yDAAA,qBAAA8D,qEAAA;MAAA9D,4DAAA,CAAA0D,GAAA;MAAA,MAAAK,MAAA,GAAA/D,4DAAA;MAAA,OAAAA,0DAAA,CAAA+D,MAAA,CAAAC,UAAA,GAAwB,KAAK;IAAA,EAAC,sBAAAC,sEAAA;MAAAjE,4DAAA,CAAA0D,GAAA;MAAA,MAAAQ,OAAA,GAAAlE,4DAAA;MAAA,OAAAA,0DAAA,CAAAkE,OAAA,CAAAF,UAAA,GACL,IAAI;IAAA,EADC,uBAAAG,uEAAA;MAAAnE,4DAAA,CAAA0D,GAAA;MAAA,MAAAU,OAAA,GAAApE,4DAAA;MAAA,OAAAA,0DAAA,CAAAoE,OAAA,CAAAJ,UAAA,GAEJ,IAAI;IAAA,EAFA,uBAAAK,uEAAA;MAAArE,4DAAA,CAAA0D,GAAA;MAAA,MAAAY,OAAA,GAAAtE,4DAAA;MAAA,OAAAA,0DAAA,CAAAsE,OAAA,CAAAN,UAAA,GAGJ,KAAK;IAAA,EAHD,wBAAAO,wEAAA;MAAAvE,4DAAA,CAAA0D,GAAA;MAAA,MAAAc,OAAA,GAAAxE,4DAAA;MAAA,OAAAA,0DAAA,CAAAwE,OAAA,CAAAR,UAAA,GAIH,KAAK;IAAA,EAJF,kBAAAS,kEAAApD,MAAA;MAAArB,4DAAA,CAAA0D,GAAA;MAAA,MAAAgB,OAAA,GAAA1E,4DAAA;MAAA,OAKtBA,0DAAA,CAAA0E,OAAA,CAAAC,SAAA,CAAAtD,MAAA,CAAiB;IAAA,EALK,mBAAAuD,mEAAA;MAAA5E,4DAAA,CAAA0D,GAAA;MAAA,MAAAmB,GAAA,GAAA7E,0DAAA;MAAA,OAMrBA,0DAAA,CAAA6E,GAAA,CAAAzC,KAAA,EAAiB;IAAA,EANI;IAW9BpC,6DAAA,EAAsF;IAAtFA,6DAAA,cAAsF;IACpFA,wDAAA,eAEE;IACJA,2DAAA,EAAM;IACNA,8DAAA,EAAsB;IAAtBA,6DAAA,eAAsB;IAAAA,qDAAA,wBAAiB;IAAAA,2DAAA,EAAO;;;;IAR9CA,wDAAA,GAAsC;IAAtCA,yDAAA,YAAAA,8DAAA,IAAAgF,GAAA,EAAAC,MAAA,CAAAjB,UAAA,EAAsC;;;;;;IAW1ChE,6DAAA,UAA2B;IACNA,yDAAA,yBAAAkF,oFAAA7D,MAAA;MAAArB,4DAAA,CAAAmF,IAAA;MAAA,MAAAC,OAAA,GAAApF,4DAAA;MAAA,OAAeA,0DAAA,CAAAoF,OAAA,CAAAC,mBAAA,CAAAhE,MAAA,CAA2B;IAAA,EAAC;IAA6BrB,2DAAA,EAAoB;;;;IAAhDA,wDAAA,EAA2B;IAA3BA,yDAAA,cAAAsF,MAAA,CAAAC,aAAA,CAA2B;;;;;IAxB9FvF,6DAAA,cAAqE;IACnEA,yDAAA,IAAAyF,0CAAA,kBAqBM,IAAAC,0CAAA;IAIR1F,2DAAA,EAAM;;;;IAzBEA,wDAAA,EAAoB;IAApBA,yDAAA,UAAA2F,MAAA,CAAAJ,aAAA,CAAoB;IAsBpBvF,wDAAA,EAAmB;IAAnBA,yDAAA,SAAA2F,MAAA,CAAAJ,aAAA,CAAmB;;;;;;;;;;IAczBvF,8DAAA,EAKC;IALDA,6DAAA,iBAKC;IAHCA,yDAAA,mBAAA4F,sEAAA;MAAA,MAAAC,WAAA,GAAA7F,4DAAA,CAAA8F,IAAA;MAAA,MAAAC,QAAA,GAAAF,WAAA,CAAAG,SAAA;MAAA,MAAAC,OAAA,GAAAjG,4DAAA;MAAA,OAASA,0DAAA,CAAAiG,OAAA,CAAAC,YAAA,CAAAH,QAAA,CAAkB;IAAA,EAAC;IAI5B/F,wDAAA,cAAiE;IACnEA,2DAAA,EAAS;;;;;IAHPA,yDAAA,YAAAA,8DAAA,IAAAmG,GAAA,EAAAC,OAAA,CAAAC,YAAA,KAAAN,QAAA,EAAqD;IAEhD/F,wDAAA,EAAY;IAAZA,yDAAA,QAAA+F,QAAA,EAAA/F,4DAAA,CAAY;;;;;;IAdrBA,6DAAA,cAAmD;IACTA,yDAAA,mBAAAuG,6DAAA;MAAAvG,4DAAA,CAAAwG,IAAA;MAAA,MAAAC,OAAA,GAAAzG,4DAAA;MAAA,OAASA,0DAAA,CAAAyG,OAAA,CAAAC,OAAA,EAAS;IAAA,EAAC;IACzD1G,6DAAA,EAAmF;IAAnFA,6DAAA,cAAmF;IACjFA,wDAAA,eAEE;IACJA,2DAAA,EAAM;IAERA,yDAAA,IAAA2G,6CAAA,qBAOS;IAET3G,8DAAA,EAIC;IAJDA,6DAAA,iBAIC;IAFCA,yDAAA,mBAAA4G,6DAAA;MAAA5G,4DAAA,CAAAwG,IAAA;MAAA,MAAAK,OAAA,GAAA7G,4DAAA;MAAA,OAASA,0DAAA,CAAA6G,OAAA,CAAAX,YAAA,CAAAW,OAAA,CAAAC,WAAA,CAAyB;IAAA,EAAC;IAGnC9G,wDAAA,cAAmE;IACrEA,2DAAA,EAAS;;;;IAtBmDA,wDAAA,EAA4B;IAA5BA,0DAAA,WAAAgH,MAAA,CAAAC,WAAA,CAA4B;IAUrEjH,wDAAA,GAAuD;IAAvDA,yDAAA,YAAAgH,MAAA,CAAAE,UAAA,CAAAC,KAAA,IAAAH,MAAA,CAAAI,IAAA,KAAAJ,MAAA,CAAAK,IAAA,CAAAC,SAAA,UAAuD;IASxEtH,wDAAA,EAA4D;IAA5DA,yDAAA,YAAAA,8DAAA,IAAAmG,GAAA,EAAAa,MAAA,CAAAX,YAAA,KAAAW,MAAA,CAAAF,WAAA,EAA4D;IAEvD9G,wDAAA,EAAmB;IAAnBA,yDAAA,QAAAgH,MAAA,CAAAF,WAAA,EAAA9G,4DAAA,CAAmB;;;;;;IAc1BA,wDAAA,iBAQU;;;;;;IANRA,yDAAA,eAAAA,8DAAA,IAAAwH,GAAA,EAAAC,MAAA,CAAArE,IAAA,CAAAsE,IAAA,EAAAD,MAAA,CAAArE,IAAA,CAAAuE,OAAA,EAAA3H,0DAAA,OAAAyH,MAAA,CAAAI,aAAA,GAA+D,UAAA7H,0DAAA;;;;;;IAQjEA,wDAAA,iBAOU;;;;;IAJRA,yDAAA,eAAAA,8DAAA,IAAA8H,GAAA,EAAAC,MAAA,CAAA3E,IAAA,CAAAsE,IAAA,EAA0B,UAAA1H,0DAAA;;;;ADhE3B,IAAKqH,IAGX,gBAHD,UAAYA,IAAI;EACdA,IAAA,mCAA+B;EAC/BA,IAAA,2BAAuB;EAAA,OAFbA,IAAI;AAGhB,CAAC,CAHWA,IAAI,OAGf;AAoBM,IAAMW,qBAAqB;EAA5B,MAAOA,qBAAqB;IAgBhC9K,YACU+K,KAA+B,EAC/BC,IAAgB,EAChB/K,KAAqB,EACrBC,SAA2B;MAH3B,KAAA6K,KAAK,GAALA,KAAK;MACL,KAAAC,IAAI,GAAJA,IAAI;MACJ,KAAA/K,KAAK,GAALA,KAAK;MACL,KAAAC,SAAS,GAATA,SAAS;MAnBV,KAAAgK,IAAI,GAASC,IAAI,CAACC,SAAS;MAEjB,KAAAlE,IAAI,GAAGA,6CAAI;MAC9B,KAAAY,UAAU,GAAY,KAAK;MAC3B,KAAAmE,YAAY,GAAY,IAAI;MAC5B,KAAAN,aAAa,GAA8B,IAAI,CAACI,KAAK,CAACG,MAAM,CAACvF,iFAAyB,CAAC;MACvF,KAAAwF,UAAU,GAAwB,IAAI,CAACJ,KAAK,CAACG,MAAM,CAACtF,2EAAmB,CAAC;MACxE,KAAAgE,WAAW,GAAW,4BAA4B;MAClD,KAAAI,UAAU,GAAanE,6EAAiB,CAAC,CAAC,EAAE,2CAA2C,EAAE,MAAM,CAAC;MAEhG,KAAAsD,YAAY,GAAkB,IAAI;MAClC,KAAAd,aAAa,GAAgB,IAAI;MACjC,KAAAjI,WAAW,GAAkB,IAAI;MACjC,KAAA2J,WAAW,GAAY,KAAK;MA6ET,KAAAI,IAAI,GAAGA,IAAI;IAtE3B;IAEHnB,YAAYA,CAACoC,SAAiB;MAC5B,IAAI,CAACjC,YAAY,GAAGiC,SAAS;IAC/B;IAEAC,UAAUA,CAAA;MACR,IAAI,CAAChD,aAAa,GAAG,IAAI;MACzB,IAAI,CAACc,YAAY,GAAG,IAAI;MACxB,IAAI,CAAC8B,YAAY,GAAG,CAAC,IAAI,CAACA,YAAY;IACxC;IAEMK,OAAOA,CAAA;MAAA,IAAA7K,KAAA;MAAA,OAAAC,sJAAA;QACX,IAAI;UACF,IAAID,KAAI,CAAC0I,YAAY,IAAI,CAAC1I,KAAI,CAACL,WAAW,EAAE;YAC1C,MAAMmL,GAAG,SAAS7F,oDAAa,CAACjF,KAAI,CAACuK,IAAI,CAACQ,GAAG,CAAC/K,KAAI,CAAC0I,YAAY,EAAE;cAAEsC,YAAY,EAAE;YAAM,CAAE,CAAC,CAAC;YAC3F,MAAMC,YAAY,SAAS1F,6EAAgB,CAACuF,GAAW,CAAC;YACxD9K,KAAI,CAACsK,KAAK,CAACY,QAAQ,CAAC1F,+EAAqB,CAAC;cAAE2F,KAAK,EAAE;gBAAEC,UAAU,EAAEH,YAAY;gBAAEI,OAAO,EAAE;cAAM;YAAE,CAAE,CAAC,CAAC;WACrG,MAAM,IAAI,CAACrL,KAAI,CAAC0I,YAAY,IAAI1I,KAAI,CAACL,WAAW,EAAE;YACjDK,KAAI,CAACsK,KAAK,CAACY,QAAQ,CAAC1F,+EAAqB,CAAC;cAAE2F,KAAK,EAAE;gBAAEC,UAAU,EAAEpL,KAAI,CAACL,WAAW;gBAAE0L,OAAO,EAAE;cAAK;YAAE,CAAE,CAAC,CAAC;;SAE1G,CAAC,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;;MAClD;IACH;IAEAvC,OAAOA,CAAA;MACL,IAAI,CAACO,WAAW,GAAG,IAAI;MACvBkC,UAAU,CAAC,MAAK;QACd,IAAI,CAAClC,WAAW,GAAG,KAAK;QACxB,IAAI,CAACC,UAAU,GAAGnE,6EAAiB,CAAC,CAAC,EAAE,2CAA2C,EAAE,MAAM,CAAC;QAC3F,IAAI,CAACsD,YAAY,GAAG,IAAI;MAC1B,CAAC,EAAE,IAAI,CAAC;IACV;IAEM1B,SAASA,CAACtD,MAAa;MAAA,IAAAnD,MAAA;MAAA,OAAAN,sJAAA;QAC3BM,MAAI,CAAC8F,UAAU,GAAG,KAAK;QACvB9F,MAAI,CAACqH,aAAa,GAAIlE,MAAoB,CAAC+H,YAAY,GAClD/H,MAAoB,CAAC+H,YAAY,EAAE/K,KAAK,CAACgL,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,GACxDhI,MAAM,CAAClD,MAA2B,CAACE,KAAK,EAAEgL,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI;QAC9DH,OAAO,CAACI,GAAG,CAAC,gBAAgB,EAAEpL,MAAI,CAACqH,aAAa,CAAC;QACjDrH,MAAI,CAACmI,YAAY,GAAG,IAAI;MAAC;IAC3B;IAEMxC,kBAAkBA,CAACnG,KAAY;MAAA,IAAA6L,MAAA;MAAA,OAAA3L,sJAAA;QACnC,MAAMO,MAAM,GAAGT,KAAK,CAACS,MAA0B;QAC/C,MAAMC,QAAQ,GAAoBD,MAAM,CAACE,KAAK;QAC9C,IAAID,QAAQ,IAAIA,QAAQ,CAACE,MAAM,GAAG,CAAC,EAAE;UACnC,MAAMkL,IAAI,GAAGpL,QAAQ,CAAC,CAAC,CAAC;UACxB,IAAI,CAACoL,IAAI,CAACjL,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,EAAE;YACnC+K,MAAI,CAAC9K,gBAAgB,CAAC,kBAAkB,CAAC;WAC1C,MAAM;YACL8K,MAAI,CAAChE,aAAa,GAAGiE,IAAI;YACzBD,MAAI,CAAClD,YAAY,GAAG,IAAI;;;MAE3B;IACH;IAEMhB,mBAAmBA,CAACmE,IAAY;MAAA,IAAAC,MAAA;MAAA,OAAA7L,sJAAA;QACpC6L,MAAI,CAACnM,WAAW,GAAGkM,IAAI;MAAC;IAC1B;IAEQ/K,gBAAgBA,CAACgB,GAAW;MAClC,IAAI,CAACtC,KAAK,CAACuC,GAAG,CAAC;QACbC,QAAQ,EAAE,OAAO;QACjBC,OAAO,EAAE,IAAI,CAACxC,SAAS,CAACyC,OAAO,CAAC,aAAa,CAAC;QAC9CC,MAAM,EAAE,IAAI,CAAC1C,SAAS,CAACyC,OAAO,CAACJ,GAAG;OACnC,CAAC;IACJ;IAAC,QAAAM,CAAA;uBAzFUiI,qBAAqB,EAAAhI,gEAAA,CAAAE,+CAAA,GAAAF,gEAAA,CAAAG,6DAAA,GAAAH,gEAAA,CAAAyC,wDAAA,GAAAzC,gEAAA,CAAA0J,kEAAA;IAAA;IAAA,QAAAtJ,EAAA;YAArB4H,qBAAqB;MAAA3H,SAAA;MAAAC,MAAA;QAAA8G,IAAA;MAAA;MAAA5G,UAAA;MAAAC,QAAA,GAAAT,kEAAA;MAAA2J,kBAAA,EAAAC,GAAA;MAAAjJ,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAA+I,+BAAA7I,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;;UC7ClChB,6DAAA,uBAA8D;;UAC5DA,6DAAA,aAAqF;UAGjFA,2DAAA,GAAyB;UAC3BA,2DAAA,EAAM;UAGNA,yDAAA,IAAA+J,oCAAA,iBA0BM,IAAAC,oCAAA;UA8BNhK,6DAAA,aAA2F;UAMvFA,yDAAA,mBAAAiK,uDAAA;YAAA,OAAShJ,GAAA,CAAAsH,UAAA,EAAY;UAAA,EAAC;UACvBvI,2DAAA,EAAS;UAEVA,yDAAA,IAAAkK,uCAAA,qBAQU,KAAAC,wCAAA;UAWVnK,6DAAA,iBAQC;UAPCA,yDAAA,mBAAAoK,wDAAA;YAAA,OAASnJ,GAAA,CAAAuH,OAAA,EAAS;UAAA,EAAC;;UAOpBxI,2DAAA,EAAS;;;UApGDA,yDAAA,cAAa,cAAAA,0DAAA,OAAAiB,GAAA,CAAAoH,UAAA;UAQyBrI,wDAAA,GAAkB;UAAlBA,yDAAA,SAAAiB,GAAA,CAAAkH,YAAA,CAAkB;UA6BrCnI,wDAAA,EAAmB;UAAnBA,yDAAA,UAAAiB,GAAA,CAAAkH,YAAA,CAAmB;UAgC7CnI,wDAAA,GAA0D;UAA1DA,yDAAA,UAAAiB,GAAA,CAAAkH,YAAA,qCAA0D;UAKzDnI,wDAAA,EAA6B;UAA7BA,yDAAA,SAAAiB,GAAA,CAAAmG,IAAA,KAAAnG,GAAA,CAAAoG,IAAA,CAAAC,SAAA,CAA6B;UAW7BtH,wDAAA,EAAiC;UAAjCA,yDAAA,SAAAiB,GAAA,CAAAmG,IAAA,KAAAnG,GAAA,CAAAoG,IAAA,CAAAgD,aAAA,CAAiC;UAalCrK,wDAAA,EAAmC;UAAnCA,yDAAA,UAAAA,0DAAA,wBAAmC,cAAAiB,GAAA,CAAA3D,WAAA,KAAA2D,GAAA,CAAAoF,YAAA;;;qBDnEvCtJ,yDAAY,EAAAuN,mDAAA,EACZxN,yDAAY,EAAA0N,4DAAA,EACZnH,0DAAY,EAAAqH,qDAAA,EAAAA,qDAAA,EAAAA,kDAAA,EAAAA,uDAAA,EACZpH,8EAAkB,EAClBX,iEAAgB,EAEhB1F,yFAAqB,EACrBN,iEAAe,EAAA+M,+DAAA,EACfnG,wDAAU,EACVC,gFAAkB,EAAAwH,sFAAA;MAAAtI,MAAA;IAAA;;SAKTsF,qBAAqB;AAAA;;;;;;;;;;;;;;AE7C5B,SAAUjF,iBAAiBA,CAACmI,KAAa,EAAEC,QAAgB,EAAEC,aAAqB;EACtF,MAAMC,WAAW,GAAG,EAAE;EAEtB,IAAIH,KAAK,GAAGG,WAAW,EAAE;IACvB,MAAM,IAAIC,KAAK,CAAC,mDAAmD,CAAC;;EAGtE,MAAMC,qBAAqB,GAAGA,CAACF,WAAmB,EAAEH,KAAa,KAAc;IAC7E,MAAMM,SAAS,GAAGC,KAAK,CAACC,IAAI,CAAC;MAAEpN,MAAM,EAAE+M;IAAW,CAAE,EAAE,CAACtL,CAAC,EAAE4L,CAAC,KAAKA,CAAC,GAAG,CAAC,CAAC;IACtE,MAAMC,cAAc,GAAGJ,SAAS,CAACK,IAAI,CAAC,MAAMC,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,CAAC;IAChE,OAAOH,cAAc,CAACzE,KAAK,CAAC,CAAC,EAAE+D,KAAK,CAAC;EACvC,CAAC;EAED,MAAMc,cAAc,GAAGT,qBAAqB,CAACF,WAAW,EAAEH,KAAK,CAAC;EAEhE,OAAOc,cAAc,CAACC,GAAG,CAAEC,KAAK,IAAK,GAAGf,QAAQ,GAAGe,KAAK,IAAId,aAAa,EAAE,CAAC;AAC9E;;;;;;;;;;;;;;;AChB+C;AACxC,SAASxI,aAAaA,CAACwJ,MAAM,EAAEC,MAAM,EAAE;EAC1C,MAAMC,SAAS,GAAG,OAAOD,MAAM,KAAK,QAAQ;EAC5C,OAAO,IAAI3N,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,IAAI2N,SAAS,GAAG,KAAK;IACrB,IAAIC,MAAM;IACVJ,MAAM,CAACK,SAAS,CAAC;MACbC,IAAI,EAAGC,KAAK,IAAK;QACbH,MAAM,GAAGG,KAAK;QACdJ,SAAS,GAAG,IAAI;MACpB,CAAC;MACDtD,KAAK,EAAErK,MAAM;MACbgO,QAAQ,EAAEA,CAAA,KAAM;QACZ,IAAIL,SAAS,EAAE;UACX5N,OAAO,CAAC6N,MAAM,CAAC;QACnB,CAAC,MACI,IAAIF,SAAS,EAAE;UAChB3N,OAAO,CAAC0N,MAAM,CAACQ,YAAY,CAAC;QAChC,CAAC,MACI;UACDjO,MAAM,CAAC,IAAIuN,wDAAU,CAAC,CAAC,CAAC;QAC5B;MACJ;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;AACN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBoC;AACqJ;AACzI;AACU;AACR;AACV;AACF;AACS;AAAA,MAAAnH,GAAA;AAAA,MAAAmB,GAAA;AAAA,SAAA4H,qCAAA/M,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IAAA,MAAAgN,GAAA,GA+TgDhO,8DAAE;IAAFA,4DAAE,eAm+Bq5E,CAAC;IAn+Bx5EA,wDAAE,kBAAAkO,yDAAA;MAAFlO,2DAAE,CAAAgO,GAAA;MAAA,MAAA/I,MAAA,GAAFjF,2DAAE;MAAA,OAAFA,yDAAE,CAm+BquEiF,MAAA,CAAAkJ,iBAAA,CAAkB,EAAC;IAAA,CAAC,CAAC,uBAAAC,8DAAA/M,MAAA;MAn+B5vErB,2DAAE,CAAAgO,GAAA;MAAA,MAAAK,MAAA,GAAFrO,2DAAE;MAAA,OAAFA,yDAAE,CAm+B8wEqO,MAAA,CAAAC,SAAA,CAAAjN,MAAA,EAAAgN,MAAA,CAAAE,SAAA,CAAAC,IAAgC,EAAC;IAAA,CAAtD,CAAC,wBAAAC,+DAAApN,MAAA;MAn+B5vErB,2DAAE,CAAAgO,GAAA;MAAA,MAAArK,MAAA,GAAF3D,2DAAE;MAAA,OAAFA,yDAAE,CAm+Bs0E2D,MAAA,CAAA2K,SAAA,CAAAjN,MAAA,EAAAsC,MAAA,CAAA4K,SAAA,CAAAC,IAAgC,EAAC;IAAA,CAA9G,CAAC,mBAAAE,0DAAArN,MAAA;MAn+B5vErB,2DAAE,CAAAgO,GAAA;MAAA,MAAAW,MAAA,GAAF3O,2DAAE;MAAA,OAAFA,yDAAE,CAm+By3E2O,MAAA,CAAAC,cAAA,CAAAvN,MAAqB,EAAC;IAAA,CAAtJ,CAAC;IAn+B5vErB,0DAAE,CAm+Bq5E,CAAC;EAAA;EAAA,IAAAgB,EAAA;IAAA,MAAAgG,MAAA,GAn+Bx5EhH,2DAAE;IAAFA,yDAAE,eAAAgH,MAAA,CAAA8H,YAAA,uBAm+BwkE,CAAC,cAAA9H,MAAA,CAAA+H,kBAAD,CAAC;IAn+B3kE/O,yDAAE,sBAAAgH,MAAA,CAAAgI,QAAA,IAAAhI,MAAA,CAAAiI,cAm+BorE,CAAC;IAn+BvrEjP,wDAAE,QAAAgH,MAAA,CAAAkI,cAAA,EAAFlP,2DAm+B0gE,CAAC;IAn+B3gEA,yDAAE,QAAAgH,MAAA,CAAAoI,YAm+BqtE,CAAC;EAAA;AAAA;AAAA,SAAAC,oDAAArO,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IAAA,MAAAsO,IAAA,GAn+BxtEtP,8DAAE;IAAFA,qEAAE,EAm+Bw4G,CAAC;IAn+B34GA,4DAAE,aAm+BipH,CAAC;IAn+BppHA,wDAAE,uBAAAwP,8EAAAnO,MAAA;MAAFrB,2DAAE,CAAAsP,IAAA;MAAA,MAAApL,OAAA,GAAFlE,2DAAE;MAAA,OAAFA,yDAAE,CAm+B8gHkE,OAAA,CAAAoK,SAAA,CAAAjN,MAAA,EAAA6C,OAAA,CAAAqK,SAAA,CAAAkB,MAAA,EAAoC,SAAS,EAAC;IAAA,CAAC,CAAC,wBAAAC,+EAAArO,MAAA;MAn+BhkHrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAhL,OAAA,GAAFtE,2DAAE;MAAA,OAAFA,yDAAE,CAm+BimHsE,OAAA,CAAAgK,SAAA,CAAAjN,MAAA,EAAAiD,OAAA,CAAAiK,SAAA,CAAAkB,MAAA,EAAoC,SAAS,EAAC;IAAA,CAAlF,CAAC;IAn+BhkHzP,uDAAE,cAm+BwsH,CAAC;IAn+B3sHA,0DAAE,CAm+B6tH,CAAC;IAn+BhuHA,4DAAE,cAm+B8wH,CAAC;IAn+BjxHA,uDAAE,cAm+Bq0H,CAAC;IAn+Bx0HA,0DAAE,CAm+B01H,CAAC;IAn+B71HA,4DAAE,cAm+B8kI,CAAC;IAn+BjlIA,wDAAE,uBAAA2P,8EAAAtO,MAAA;MAAFrB,2DAAE,CAAAsP,IAAA;MAAA,MAAA9K,OAAA,GAAFxE,2DAAE;MAAA,OAAFA,yDAAE,CAm+B+8HwE,OAAA,CAAA8J,SAAA,CAAAjN,MAAA,EAAAmD,OAAA,CAAA+J,SAAA,CAAAkB,MAAA,EAAoC,UAAU,EAAC;IAAA,CAAC,CAAC,wBAAAG,+EAAAvO,MAAA;MAn+BlgIrB,2DAAE,CAAAsP,IAAA;MAAA,MAAA5K,OAAA,GAAF1E,2DAAE;MAAA,OAAFA,yDAAE,CAm+B6hI0E,OAAA,CAAA4J,SAAA,CAAAjN,MAAA,EAAAqD,OAAA,CAAA6J,SAAA,CAAAkB,MAAA,EAAoC,UAAU,EAAC;IAAA,CAA7E,CAAC;IAn+BlgIzP,uDAAE,cAm+BqoI,CAAC;IAn+BxoIA,0DAAE,CAm+B0pI,CAAC;IAn+B7pIA,4DAAE,cAm+B6sI,CAAC;IAn+BhtIA,uDAAE,cAm+BowI,CAAC;IAn+BvwIA,0DAAE,CAm+ByxI,CAAC;IAn+B5xIA,4DAAE,cAm+BshJ,CAAC;IAn+BzhJA,wDAAE,uBAAA6P,8EAAAxO,MAAA;MAAFrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAQ,OAAA,GAAF9P,2DAAE;MAAA,OAAFA,yDAAE,CAm+Bi5I8P,OAAA,CAAAxB,SAAA,CAAAjN,MAAA,EAAAyO,OAAA,CAAAvB,SAAA,CAAAkB,MAAA,EAAoC,aAAa,EAAC;IAAA,CAAC,CAAC,wBAAAM,+EAAA1O,MAAA;MAn+Bv8IrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAlK,OAAA,GAAFpF,2DAAE;MAAA,OAAFA,yDAAE,CAm+Bk+IoF,OAAA,CAAAkJ,SAAA,CAAAjN,MAAA,EAAA+D,OAAA,CAAAmJ,SAAA,CAAAkB,MAAA,EAAoC,aAAa,EAAC;IAAA,CAAhF,CAAC;IAn+Bv8IzP,uDAAE,eAm+B6kJ,CAAC;IAn+BhlJA,0DAAE,CAm+BkmJ,CAAC;IAn+BrmJA,4DAAE,eAm+BspJ,CAAC;IAn+BzpJA,uDAAE,eAm+B6sJ,CAAC;IAn+BhtJA,0DAAE,CAm+BkuJ,CAAC;IAn+BruJA,4DAAE,eAm+B49J,CAAC;IAn+B/9JA,wDAAE,uBAAAgQ,+EAAA3O,MAAA;MAAFrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAW,OAAA,GAAFjQ,2DAAE;MAAA,OAAFA,yDAAE,CAm+By1JiQ,OAAA,CAAA3B,SAAA,CAAAjN,MAAA,EAAA4O,OAAA,CAAA1B,SAAA,CAAAkB,MAAA,EAAoC,YAAY,EAAC;IAAA,CAAC,CAAC,wBAAAS,gFAAA7O,MAAA;MAn+B94JrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAlJ,OAAA,GAAFpG,2DAAE;MAAA,OAAFA,yDAAE,CAm+By6JoG,OAAA,CAAAkI,SAAA,CAAAjN,MAAA,EAAA+E,OAAA,CAAAmI,SAAA,CAAAkB,MAAA,EAAoC,YAAY,EAAC;IAAA,CAA/E,CAAC;IAn+B94JzP,uDAAE,eAm+BmhK,CAAC;IAn+BthKA,0DAAE,CAm+BwiK,CAAC;IAn+B3iKA,4DAAE,eAm+B0lK,CAAC;IAn+B7lKA,uDAAE,eAm+BipK,CAAC;IAn+BppKA,0DAAE,CAm+BsqK,CAAC;IAn+BzqKA,4DAAE,eAm+B+4K,CAAC;IAn+Bl5KA,wDAAE,uBAAAmQ,+EAAA9O,MAAA;MAAFrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAc,OAAA,GAAFpQ,2DAAE;MAAA,OAAFA,yDAAE,CAm+B0xKoQ,OAAA,CAAA9B,SAAA,CAAAjN,MAAA,EAAA+O,OAAA,CAAA7B,SAAA,CAAAkB,MAAA,EAAoC,KAAK,EAAC;IAAA,CAAC,CAAC,wBAAAY,gFAAAhP,MAAA;MAn+Bx0KrB,2DAAE,CAAAsP,IAAA;MAAA,MAAArJ,OAAA,GAAFjG,2DAAE;MAAA,OAAFA,yDAAE,CAm+Bm2KiG,OAAA,CAAAqI,SAAA,CAAAjN,MAAA,EAAA4E,OAAA,CAAAsI,SAAA,CAAAkB,MAAA,EAAoC,KAAK,EAAC;IAAA,CAAxE,CAAC;IAn+Bx0KzP,0DAAE,CAm+Bo6K,CAAC;IAn+Bv6KA,4DAAE,eAm+BmpL,CAAC;IAn+BtpLA,wDAAE,uBAAAsQ,+EAAAjP,MAAA;MAAFrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAiB,OAAA,GAAFvQ,2DAAE;MAAA,OAAFA,yDAAE,CAm+B0hLuQ,OAAA,CAAAjC,SAAA,CAAAjN,MAAA,EAAAkP,OAAA,CAAAhC,SAAA,CAAAkB,MAAA,EAAoC,OAAO,EAAC;IAAA,CAAC,CAAC,wBAAAe,gFAAAnP,MAAA;MAn+B1kLrB,2DAAE,CAAAsP,IAAA;MAAA,MAAA7I,OAAA,GAAFzG,2DAAE;MAAA,OAAFA,yDAAE,CAm+BqmLyG,OAAA,CAAA6H,SAAA,CAAAjN,MAAA,EAAAoF,OAAA,CAAA8H,SAAA,CAAAkB,MAAA,EAAoC,OAAO,EAAC;IAAA,CAA1E,CAAC;IAn+B1kLzP,0DAAE,CAm+BwqL,CAAC;IAn+B3qLA,4DAAE,eAm+B05L,CAAC;IAn+B75LA,wDAAE,uBAAAyQ,+EAAApP,MAAA;MAAFrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAoB,OAAA,GAAF1Q,2DAAE;MAAA,OAAFA,yDAAE,CAm+B+xL0Q,OAAA,CAAApC,SAAA,CAAAjN,MAAA,EAAAqP,OAAA,CAAAnC,SAAA,CAAAkB,MAAA,EAAoC,QAAQ,EAAC;IAAA,CAAC,CAAC,wBAAAkB,gFAAAtP,MAAA;MAn+Bh1LrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAzI,OAAA,GAAF7G,2DAAE;MAAA,OAAFA,yDAAE,CAm+B22L6G,OAAA,CAAAyH,SAAA,CAAAjN,MAAA,EAAAwF,OAAA,CAAA0H,SAAA,CAAAkB,MAAA,EAAoC,QAAQ,EAAC;IAAA,CAA3E,CAAC;IAn+Bh1LzP,0DAAE,CAm+B+6L,CAAC;IAn+Bl7LA,4DAAE,eAm+B2pM,CAAC;IAn+B9pMA,wDAAE,uBAAA4Q,+EAAAvP,MAAA;MAAFrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAuB,OAAA,GAAF7Q,2DAAE;MAAA,OAAFA,yDAAE,CAm+BoiM6Q,OAAA,CAAAvC,SAAA,CAAAjN,MAAA,EAAAwP,OAAA,CAAAtC,SAAA,CAAAkB,MAAA,EAAoC,MAAM,EAAC;IAAA,CAAC,CAAC,wBAAAqB,gFAAAzP,MAAA;MAn+BnlMrB,2DAAE,CAAAsP,IAAA;MAAA,MAAAyB,OAAA,GAAF/Q,2DAAE;MAAA,OAAFA,yDAAE,CAm+B8mM+Q,OAAA,CAAAzC,SAAA,CAAAjN,MAAA,EAAA0P,OAAA,CAAAxC,SAAA,CAAAkB,MAAA,EAAoC,MAAM,EAAC;IAAA,CAAzE,CAAC;IAn+BnlMzP,0DAAE,CAm+BgrM,CAAC;IAn+BnrMA,mEAAE,CAm+BqsM,CAAC;EAAA;AAAA;AAAA,SAAAiR,qCAAAjQ,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IAAA,MAAAkQ,IAAA,GAn+BxsMlR,8DAAE;IAAFA,4DAAE,YAm+BmpG,CAAC;IAn+BtpGA,wDAAE,qBAAAmR,4DAAA9P,MAAA;MAAFrB,2DAAE,CAAAkR,IAAA;MAAA,MAAAE,OAAA,GAAFpR,2DAAE;MAAA,OAAFA,yDAAE,CAm+BgmGoR,OAAA,CAAAC,cAAA,CAAAhQ,MAAqB,EAAC;IAAA,CAAC,CAAC;IAn+B1nGrB,4DAAE,YAm+B20G,CAAC;IAn+B90GA,wDAAE,uBAAAsR,8DAAAjQ,MAAA;MAAFrB,2DAAE,CAAAkR,IAAA;MAAA,MAAAK,OAAA,GAAFvR,2DAAE;MAAA,OAAFA,yDAAE,CAm+BorGuR,OAAA,CAAAjD,SAAA,CAAAjN,MAAA,EAAAkQ,OAAA,CAAAhD,SAAA,CAAAiD,IAAgC,EAAC;IAAA,CAAC,CAAC,wBAAAC,+DAAApQ,MAAA;MAn+BztGrB,2DAAE,CAAAkR,IAAA;MAAA,MAAAQ,OAAA,GAAF1R,2DAAE;MAAA,OAAFA,yDAAE,CAm+B8uG0R,OAAA,CAAApD,SAAA,CAAAjN,MAAA,EAAAqQ,OAAA,CAAAnD,SAAA,CAAAiD,IAAgC,EAAC;IAAA,CAAzD,CAAC;IAn+BztGxR,0DAAE,CAm+Bu1G,CAAC;IAn+B11GA,wDAAE,IAAAqP,mDAAA,0BAm+BqsM,CAAC;IAn+BxsMrP,0DAAE,CAm+B+sM,CAAC;EAAA;EAAA,IAAAgB,EAAA;IAAA,MAAAyG,MAAA,GAn+BltMzH,2DAAE;IAAFA,yDAAE,QAAAyH,MAAA,CAAAkK,OAAA,CAAAC,EAAA,MAm+ByyF,CAAC,SAAAnK,MAAA,CAAAkK,OAAA,CAAAE,EAAA,MAAD,CAAC,UAAApK,MAAA,CAAAkK,OAAA,CAAAG,EAAA,GAAArK,MAAA,CAAAkK,OAAA,CAAAE,EAAA,MAAD,CAAC,WAAApK,MAAA,CAAAkK,OAAA,CAAAI,EAAA,GAAAtK,MAAA,CAAAkK,OAAA,CAAAC,EAAA,MAAD,CAAC,gBAAAnK,MAAA,CAAAuK,UAAA,gBAAAvK,MAAA,CAAAwK,UAAA,OAAD,CAAC,eAAAxK,MAAA,CAAAqH,YAAA,uBAAD,CAAC;IAn+B5yF9O,yDAAE,iBAAAyH,MAAA,CAAAyK,YAm+B+sF,CAAC;IAn+BltFlS,yDAAE,eAAAyH,MAAA,CAAA0K,qBAm+BmwF,CAAC;IAn+BtwFnS,uDAAE,EAm+Bq4G,CAAC;IAn+Bx4GA,wDAAE,UAAAyH,MAAA,CAAA2K,iBAm+Bq4G,CAAC;EAAA;AAAA;AAhyCv+G,MAAMC,eAAe,CAAC;EAClBnV,WAAWA,CAAA,EAAG;IACV;IACA,IAAI,CAACoV,MAAM,GAAG,KAAK;IACnB,IAAI,CAACC,MAAM,GAAG,MAAM;IACpB,IAAI,CAACC,mBAAmB,GAAG,IAAI;IAC/B,IAAI,CAACjV,SAAS,GAAG,CAAC,CAAC;IACnB,IAAI,CAACkV,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,4BAA4B,GAAG,IAAI;IACxC,IAAI,CAACC,aAAa,GAAG,CAAC;IACtB,IAAI,CAACC,cAAc,GAAG,CAAC;IACvB,IAAI,CAACC,eAAe,GAAG,CAAC;IACxB,IAAI,CAACC,gBAAgB,GAAG,CAAC;IACzB,IAAI,CAACC,gBAAgB,GAAG,CAAC;IACzB,IAAI,CAACC,eAAe,GAAG,CAAC;IACxB,IAAI,CAACC,kBAAkB,GAAG,CAAC;IAC3B,IAAI,CAACC,mBAAmB,GAAG,CAAC;IAC5B,IAAI,CAACC,cAAc,GAAG,CAAC;IACvB,IAAI,CAACC,eAAe,GAAG,CAAC;IACxB,IAAI,CAAClB,YAAY,GAAG,KAAK;IACzB,IAAI,CAACmB,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACC,wBAAwB,GAAG,KAAK;IACrC,IAAI,CAACrB,iBAAiB,GAAG,KAAK;IAC9B,IAAI,CAACJ,UAAU,GAAG,QAAQ;IAC1B,IAAI,CAACG,qBAAqB,GAAG,YAAY;IACzC;IACA,IAAI,CAACuB,qBAAqB,GAAG,EAAE;IAC/B,IAAI,CAACC,sBAAsB,GAAG,EAAE;IAChC,IAAI,CAACC,qBAAqB,GAAG,EAAE;IAC/B,IAAI,CAACC,sBAAsB,GAAG,EAAE;IAChC,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACV,eAAe;EACxC;EACAW,UAAUA,CAACC,OAAO,EAAE;IAChBC,MAAM,CAACC,IAAI,CAACF,OAAO,CAAC,CACfG,MAAM,CAAEC,CAAC,IAAKA,CAAC,IAAI,IAAI,CAAC,CACxBC,OAAO,CAAED,CAAC,IAAK,IAAI,CAACA,CAAC,CAAC,GAAGJ,OAAO,CAACI,CAAC,CAAC,CAAC;IACzC,IAAI,CAACE,eAAe,CAAC,CAAC;EAC1B;EACAC,qBAAqBA,CAACC,OAAO,EAAE;IAC3BP,MAAM,CAACC,IAAI,CAACM,OAAO,CAAC,CACfL,MAAM,CAAEC,CAAC,IAAKA,CAAC,IAAI,IAAI,CAAC,CACxBC,OAAO,CAAED,CAAC,IAAK,IAAI,CAACA,CAAC,CAAC,GAAGI,OAAO,CAACJ,CAAC,CAAC,CAACK,YAAY,CAAC;IACtD,IAAI,CAACH,eAAe,CAAC,CAAC;EAC1B;EACAA,eAAeA,CAAA,EAAG;IACd,IAAI,IAAI,CAAC9B,mBAAmB,IAAI,CAAC,IAAI,CAACC,WAAW,EAAE;MAC/C,MAAM,IAAInH,KAAK,CAAC,gEAAgE,CAAC;IACrF;EACJ;AACJ;AAEA,IAAIoJ,SAAS,gBACZ,UAAUA,SAAS,EAAE;EAClBA,SAAS,CAAC,MAAM,CAAC,GAAG,MAAM;EAC1BA,SAAS,CAAC,MAAM,CAAC,GAAG,MAAM;EAC1BA,SAAS,CAAC,QAAQ,CAAC,GAAG,QAAQ;EAC9BA,SAAS,CAAC,OAAO,CAAC,GAAG,OAAO;EAAC,OAJtBA,SAAS;AAKpB,CAAC,CAAEA,SAAS,IAAiB,CAAC,CAAE,CANnB;AAQb,SAASC,iBAAiBA,CAAClV,GAAG,EAAE;EAC5B,QAAQA,GAAG;IACP,KAAK,SAAS;MACV,OAAO,KAAK;IAChB,KAAK,YAAY;MACb,OAAO,OAAO;IAClB,KAAK,WAAW;MACZ,OAAO,QAAQ;IACnB,KAAK,WAAW;IAChB;MACI,OAAO,MAAM;EACrB;AACJ;AACA,SAASmV,yBAAyBA,CAACnV,GAAG,EAAE;EACpC,QAAQA,GAAG;IACP,KAAK,SAAS;MACV,OAAO,QAAQ;IACnB,KAAK,YAAY;MACb,OAAO,MAAM;IACjB,KAAK,WAAW;MACZ,OAAO,KAAK;IAChB,KAAK,WAAW;IAChB;MACI,OAAO,OAAO;EACtB;AACJ;AACA,SAASoV,cAAcA,CAACpV,GAAG,EAAEqU,QAAQ,EAAE;EACnC,QAAQrU,GAAG;IACP,KAAK,SAAS;MACV,OAAO;QAAEqV,OAAO,EAAE,CAAC;QAAEC,OAAO,EAAEjB,QAAQ,GAAG,CAAC;MAAE,CAAC;IACjD,KAAK,YAAY;MACb,OAAO;QAAEgB,OAAO,EAAEhB,QAAQ;QAAEiB,OAAO,EAAE;MAAE,CAAC;IAC5C,KAAK,WAAW;MACZ,OAAO;QAAED,OAAO,EAAE,CAAC;QAAEC,OAAO,EAAEjB;MAAS,CAAC;IAC5C,KAAK,WAAW;IAChB;MACI,OAAO;QAAEgB,OAAO,EAAEhB,QAAQ,GAAG,CAAC,CAAC;QAAEiB,OAAO,EAAE;MAAE,CAAC;EACrD;AACJ;;AAEA;AACA;AACA;AACA;AACA,SAASC,YAAYA,CAACC,MAAM,EAAEC,KAAK,EAAEC,MAAM,EAAE;EACzC,MAAMC,YAAY,GAAGH,MAAM,CAACC,KAAK;EACjC,MAAMG,aAAa,GAAGJ,MAAM,CAACE,MAAM;EACnCD,KAAK,GAAGpJ,IAAI,CAACwJ,KAAK,CAACJ,KAAK,CAAC;EACzBC,MAAM,GAAGrJ,IAAI,CAACwJ,KAAK,CAACH,MAAM,CAAC;EAC3B,MAAMI,OAAO,GAAGH,YAAY,GAAGF,KAAK;EACpC,MAAMM,OAAO,GAAGH,aAAa,GAAGF,MAAM;EACtC,MAAMM,YAAY,GAAG3J,IAAI,CAAC4J,IAAI,CAACH,OAAO,GAAG,CAAC,CAAC;EAC3C,MAAMI,YAAY,GAAG7J,IAAI,CAAC4J,IAAI,CAACF,OAAO,GAAG,CAAC,CAAC;EAC3C,MAAMvU,GAAG,GAAGgU,MAAM,CAACW,UAAU,CAAC,IAAI,CAAC;EACnC,IAAI3U,GAAG,EAAE;IACL,MAAM4U,GAAG,GAAG5U,GAAG,CAAC6U,YAAY,CAAC,CAAC,EAAE,CAAC,EAAEV,YAAY,EAAEC,aAAa,CAAC;IAC/D,MAAMU,IAAI,GAAG9U,GAAG,CAAC+U,eAAe,CAACd,KAAK,EAAEC,MAAM,CAAC;IAC/C,MAAMc,IAAI,GAAGJ,GAAG,CAACI,IAAI;IACrB,MAAMC,KAAK,GAAGH,IAAI,CAACE,IAAI;IACvB,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGhB,MAAM,EAAEgB,CAAC,EAAE,EAAE;MAC7B,KAAK,IAAIxK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuJ,KAAK,EAAEvJ,CAAC,EAAE,EAAE;QAC5B,MAAMmG,EAAE,GAAG,CAACnG,CAAC,GAAGwK,CAAC,GAAGjB,KAAK,IAAI,CAAC;QAC9B,MAAMkB,QAAQ,GAAGD,CAAC,GAAGX,OAAO;QAC5B,IAAIa,MAAM,GAAG,CAAC;QACd,IAAIC,OAAO,GAAG,CAAC;QACf,IAAIC,aAAa,GAAG,CAAC;QACrB,IAAIC,IAAI,GAAG,CAAC;QACZ,IAAIC,IAAI,GAAG,CAAC;QACZ,IAAIC,IAAI,GAAG,CAAC;QACZ,IAAIC,IAAI,GAAG,CAAC;QACZ,MAAMC,QAAQ,GAAG9K,IAAI,CAAC+K,KAAK,CAAClL,CAAC,GAAG4J,OAAO,CAAC;QACxC,MAAMuB,QAAQ,GAAGhL,IAAI,CAAC+K,KAAK,CAACV,CAAC,GAAGX,OAAO,CAAC;QACxC,IAAIuB,OAAO,GAAGjL,IAAI,CAAC4J,IAAI,CAAC,CAAC/J,CAAC,GAAG,CAAC,IAAI4J,OAAO,CAAC;QAC1C,IAAIyB,OAAO,GAAGlL,IAAI,CAAC4J,IAAI,CAAC,CAACS,CAAC,GAAG,CAAC,IAAIX,OAAO,CAAC;QAC1CuB,OAAO,GAAGjL,IAAI,CAACmL,GAAG,CAACF,OAAO,EAAE3B,YAAY,CAAC;QACzC4B,OAAO,GAAGlL,IAAI,CAACmL,GAAG,CAACD,OAAO,EAAE3B,aAAa,CAAC;QAC1C,KAAK,IAAI6B,EAAE,GAAGJ,QAAQ,EAAEI,EAAE,GAAGF,OAAO,EAAEE,EAAE,EAAE,EAAE;UACxC,MAAMC,EAAE,GAAGrL,IAAI,CAACsL,GAAG,CAAChB,QAAQ,GAAGc,EAAE,CAAC,GAAGvB,YAAY;UACjD,MAAM0B,QAAQ,GAAG1L,CAAC,GAAG4J,OAAO;UAC5B,MAAM+B,EAAE,GAAGH,EAAE,GAAGA,EAAE,CAAC,CAAC;UACpB,KAAK,IAAII,EAAE,GAAGX,QAAQ,EAAEW,EAAE,GAAGR,OAAO,EAAEQ,EAAE,EAAE,EAAE;YACxC,MAAMC,EAAE,GAAG1L,IAAI,CAACsL,GAAG,CAACC,QAAQ,GAAGE,EAAE,CAAC,GAAG9B,YAAY;YACjD,MAAMgC,CAAC,GAAG3L,IAAI,CAAC4L,IAAI,CAACJ,EAAE,GAAGE,EAAE,GAAGA,EAAE,CAAC;YACjC,IAAIC,CAAC,IAAI,CAAC,EAAE;cACR;cACA;YACJ;YACA;YACApB,MAAM,GAAG,CAAC,GAAGoB,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,CAAC;YACtC,MAAME,KAAK,GAAG,CAAC,IAAIJ,EAAE,GAAGL,EAAE,GAAG9B,YAAY,CAAC;YAC1C;YACAuB,IAAI,IAAIN,MAAM,GAAGJ,IAAI,CAAC0B,KAAK,GAAG,CAAC,CAAC;YAChCpB,aAAa,IAAIF,MAAM;YACvB;YACA,IAAIJ,IAAI,CAAC0B,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG,EACrBtB,MAAM,GAAGA,MAAM,GAAGJ,IAAI,CAAC0B,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG;YAC3CnB,IAAI,IAAIH,MAAM,GAAGJ,IAAI,CAAC0B,KAAK,CAAC;YAC5BlB,IAAI,IAAIJ,MAAM,GAAGJ,IAAI,CAAC0B,KAAK,GAAG,CAAC,CAAC;YAChCjB,IAAI,IAAIL,MAAM,GAAGJ,IAAI,CAAC0B,KAAK,GAAG,CAAC,CAAC;YAChCrB,OAAO,IAAID,MAAM;UACrB;QACJ;QACAH,KAAK,CAACpE,EAAE,CAAC,GAAG0E,IAAI,GAAGF,OAAO;QAC1BJ,KAAK,CAACpE,EAAE,GAAG,CAAC,CAAC,GAAG2E,IAAI,GAAGH,OAAO;QAC9BJ,KAAK,CAACpE,EAAE,GAAG,CAAC,CAAC,GAAG4E,IAAI,GAAGJ,OAAO;QAC9BJ,KAAK,CAACpE,EAAE,GAAG,CAAC,CAAC,GAAG6E,IAAI,GAAGJ,aAAa;MACxC;IACJ;IACAtB,MAAM,CAACC,KAAK,GAAGA,KAAK;IACpBD,MAAM,CAACE,MAAM,GAAGA,MAAM;IACtB;IACAlU,GAAG,CAAC2W,YAAY,CAAC7B,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;EAChC;AACJ;AAEA,SAAS8B,UAAUA,CAACC,OAAO,EAAEC,UAAU,EAAE;EACrC,OAAQD,OAAO,GAAG,GAAG,GAAIC,UAAU;AACvC;AAAC,IAEKC,WAAW;EAAjB,MAAMA,WAAW,CAAC;IACdC,IAAIA,CAACC,WAAW,EAAEvG,OAAO,EAAEwG,QAAQ,EAAE5F,MAAM,EAAE6F,OAAO,EAAE;MAClD,MAAMC,aAAa,GAAG,IAAI,CAACC,gBAAgB,CAACJ,WAAW,EAAEvG,OAAO,EAAEwG,QAAQ,EAAEC,OAAO,CAAC;MACpF,MAAMlD,KAAK,GAAGmD,aAAa,CAACvG,EAAE,GAAGuG,aAAa,CAACxG,EAAE;MACjD,MAAMsD,MAAM,GAAGkD,aAAa,CAACtG,EAAE,GAAGsG,aAAa,CAACzG,EAAE;MAClD,MAAM2G,UAAU,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MACnDF,UAAU,CAACrD,KAAK,GAAGA,KAAK;MACxBqD,UAAU,CAACpD,MAAM,GAAGA,MAAM;MAC1B,MAAMlU,GAAG,GAAGsX,UAAU,CAAC3C,UAAU,CAAC,IAAI,CAAC;MACvC,IAAI,CAAC3U,GAAG,EAAE;QACN,OAAO,IAAI;MACf;MACA,IAAIkX,QAAQ,CAAC3E,eAAe,IAAI,IAAI,EAAE;QAClCvS,GAAG,CAACyX,SAAS,GAAGP,QAAQ,CAAC3E,eAAe;QACxCvS,GAAG,CAAC0X,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEzD,KAAK,EAAEC,MAAM,CAAC;MACrC;MACA,MAAMyD,MAAM,GAAG,CAACT,QAAQ,CAAC5a,SAAS,CAACC,KAAK,IAAI,CAAC,KAAK2a,QAAQ,CAAC5a,SAAS,CAACiC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;MACpF,MAAMqZ,MAAM,GAAG,CAACV,QAAQ,CAAC5a,SAAS,CAACC,KAAK,IAAI,CAAC,KAAK2a,QAAQ,CAAC5a,SAAS,CAACub,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;MACpF,MAAM;QAAEC,UAAU;QAAEC;MAAW,CAAC,GAAG,IAAI,CAACC,kBAAkB,CAACf,WAAW,EAAEC,QAAQ,EAAEC,OAAO,CAAC;MAC1F,MAAMc,gBAAgB,GAAGhB,WAAW,CAACiB,WAAW;MAChDlY,GAAG,CAACmY,YAAY,CAACR,MAAM,EAAE,CAAC,EAAE,CAAC,EAAEC,MAAM,EAAEK,gBAAgB,CAACG,IAAI,CAACnE,KAAK,GAAG,CAAC,GAAG6D,UAAU,EAAEG,gBAAgB,CAACG,IAAI,CAAClE,MAAM,GAAG,CAAC,GAAG6D,UAAU,CAAC;MACnI/X,GAAG,CAAC7D,SAAS,CAAC,CAACib,aAAa,CAACxG,EAAE,GAAG+G,MAAM,EAAE,CAACP,aAAa,CAACzG,EAAE,GAAGiH,MAAM,CAAC;MACrE5X,GAAG,CAAC7B,MAAM,CAAC,CAAC+Y,QAAQ,CAAC5a,SAAS,CAAC6B,MAAM,IAAI,CAAC,IAAI0M,IAAI,CAACwN,EAAE,GAAG,GAAG,CAAC;MAC5DrY,GAAG,CAACsY,SAAS,CAACL,gBAAgB,CAACM,KAAK,EAAE,CAACN,gBAAgB,CAACG,IAAI,CAACnE,KAAK,GAAG,CAAC,EAAE,CAACgE,gBAAgB,CAACG,IAAI,CAAClE,MAAM,GAAG,CAAC,CAAC;MAC1G,MAAMnW,MAAM,GAAG;QACXkW,KAAK;QAAEC,MAAM;QACbkD,aAAa;QACboB,eAAe,EAAE;UAAE,GAAG9H;QAAQ;MAClC,CAAC;MACD,IAAIwG,QAAQ,CAAC1E,wBAAwB,EAAE;QACnCzU,MAAM,CAAC0a,mBAAmB,GAAG,IAAI,CAACC,sBAAsB,CAACzB,WAAW,EAAEvG,OAAO,EAAEwG,QAAQ,EAAEC,OAAO,CAAC;MACrG;MACA,MAAMwB,WAAW,GAAG,IAAI,CAACC,cAAc,CAAC3E,KAAK,EAAEC,MAAM,EAAEgD,QAAQ,CAAC;MAChE,IAAIyB,WAAW,KAAK,CAAC,EAAE;QACnB5a,MAAM,CAACkW,KAAK,GAAGpJ,IAAI,CAACwJ,KAAK,CAACJ,KAAK,GAAG0E,WAAW,CAAC;QAC9C5a,MAAM,CAACmW,MAAM,GAAGgD,QAAQ,CAAC3F,mBAAmB,GACtC1G,IAAI,CAACwJ,KAAK,CAACtW,MAAM,CAACkW,KAAK,GAAGiD,QAAQ,CAAC1F,WAAW,CAAC,GAC/C3G,IAAI,CAACwJ,KAAK,CAACH,MAAM,GAAGyE,WAAW,CAAC;QACtC5E,YAAY,CAACuD,UAAU,EAAEvZ,MAAM,CAACkW,KAAK,EAAElW,MAAM,CAACmW,MAAM,CAAC;MACzD;MACA,IAAI5C,MAAM,KAAK,MAAM,EAAE;QACnB,OAAO,IAAI,CAACuH,UAAU,CAAC9a,MAAM,EAAEuZ,UAAU,EAAEJ,QAAQ,CAAC;MACxD,CAAC,MACI;QACDnZ,MAAM,CAAC+a,MAAM,GAAGxB,UAAU,CAACyB,SAAS,CAAC,QAAQ,GAAG7B,QAAQ,CAAC7F,MAAM,EAAE,IAAI,CAAC2H,UAAU,CAAC9B,QAAQ,CAAC,CAAC;QAC3F,OAAOnZ,MAAM;MACjB;IACJ;IACM8a,UAAUA,CAACvH,MAAM,EAAEgG,UAAU,EAAEJ,QAAQ,EAAE;MAAA,IAAAxa,KAAA;MAAA,OAAAC,sJAAA;QAC3C2U,MAAM,CAAC1U,IAAI,SAAS,IAAIa,OAAO,CAACC,OAAO,IAAI4Z,UAAU,CAAC2B,MAAM,CAACvb,OAAO,EAAE,QAAQ,GAAGwZ,QAAQ,CAAC7F,MAAM,EAAE3U,KAAI,CAACsc,UAAU,CAAC9B,QAAQ,CAAC,CAAC,CAAC;QAC7H,IAAI5F,MAAM,CAAC1U,IAAI,EAAE;UACb0U,MAAM,CAAC4H,SAAS,GAAGC,GAAG,CAACC,eAAe,CAAC9H,MAAM,CAAC1U,IAAI,CAAC;QACvD;QACA,OAAO0U,MAAM;MAAC;IAClB;IACA0G,kBAAkBA,CAACf,WAAW,EAAEC,QAAQ,EAAEC,OAAO,EAAE;MAC/C,IAAID,QAAQ,CAAC5a,SAAS,CAAC+c,aAAa,KAAK,IAAI,EAAE;QAC3C,MAAMC,KAAK,GAAG,IAAI,CAACC,QAAQ,CAACtC,WAAW,EAAEE,OAAO,CAAC;QACjD,OAAO;UACHW,UAAU,EAAE,CAACZ,QAAQ,CAAC5a,SAAS,CAACwb,UAAU,IAAI,CAAC,IAAIwB,KAAK;UACxDvB,UAAU,EAAE,CAACb,QAAQ,CAAC5a,SAAS,CAACyb,UAAU,IAAI,CAAC,IAAIuB;QACvD,CAAC;MACL,CAAC,MACI;QACD,OAAO;UACHxB,UAAU,EAAEZ,QAAQ,CAAC5a,SAAS,CAACwb,UAAU,GAAGlB,UAAU,CAACM,QAAQ,CAAC5a,SAAS,CAACwb,UAAU,EAAEb,WAAW,CAACiB,WAAW,CAACE,IAAI,CAACnE,KAAK,CAAC,GAAG,CAAC;UAC7H8D,UAAU,EAAEb,QAAQ,CAAC5a,SAAS,CAACyb,UAAU,GAAGnB,UAAU,CAACM,QAAQ,CAAC5a,SAAS,CAACyb,UAAU,EAAEd,WAAW,CAACiB,WAAW,CAACE,IAAI,CAAClE,MAAM,CAAC,GAAG;QACjI,CAAC;MACL;IACJ;IACAqF,QAAQA,CAACtC,WAAW,EAAEE,OAAO,EAAE;MAC3B,OAAOF,WAAW,CAACiB,WAAW,CAACE,IAAI,CAACnE,KAAK,GAAGkD,OAAO,CAAClD,KAAK;IAC7D;IACAoD,gBAAgBA,CAACJ,WAAW,EAAEvG,OAAO,EAAEwG,QAAQ,EAAEC,OAAO,EAAE;MACtD,MAAMmC,KAAK,GAAG,IAAI,CAACC,QAAQ,CAACtC,WAAW,EAAEE,OAAO,CAAC;MACjD,MAAMqC,GAAG,GAAG;QACR5I,EAAE,EAAE/F,IAAI,CAACwJ,KAAK,CAAC3D,OAAO,CAACE,EAAE,GAAG0I,KAAK,CAAC;QAClC3I,EAAE,EAAE9F,IAAI,CAACwJ,KAAK,CAAC3D,OAAO,CAACC,EAAE,GAAG2I,KAAK,CAAC;QAClCzI,EAAE,EAAEhG,IAAI,CAACwJ,KAAK,CAAC3D,OAAO,CAACG,EAAE,GAAGyI,KAAK,CAAC;QAClCxI,EAAE,EAAEjG,IAAI,CAACwJ,KAAK,CAAC3D,OAAO,CAACI,EAAE,GAAGwI,KAAK;MACrC,CAAC;MACD,IAAI,CAACpC,QAAQ,CAAC1E,wBAAwB,EAAE;QACpCgH,GAAG,CAAC5I,EAAE,GAAG/F,IAAI,CAAC4O,GAAG,CAACD,GAAG,CAAC5I,EAAE,EAAE,CAAC,CAAC;QAC5B4I,GAAG,CAAC7I,EAAE,GAAG9F,IAAI,CAAC4O,GAAG,CAACD,GAAG,CAAC7I,EAAE,EAAE,CAAC,CAAC;QAC5B6I,GAAG,CAAC3I,EAAE,GAAGhG,IAAI,CAACmL,GAAG,CAACwD,GAAG,CAAC3I,EAAE,EAAEoG,WAAW,CAACiB,WAAW,CAACE,IAAI,CAACnE,KAAK,CAAC;QAC7DuF,GAAG,CAAC1I,EAAE,GAAGjG,IAAI,CAACmL,GAAG,CAACwD,GAAG,CAAC1I,EAAE,EAAEmG,WAAW,CAACiB,WAAW,CAACE,IAAI,CAAClE,MAAM,CAAC;MAClE;MACA,OAAOsF,GAAG;IACd;IACAd,sBAAsBA,CAACzB,WAAW,EAAEvG,OAAO,EAAEwG,QAAQ,EAAEC,OAAO,EAAE;MAC5D,MAAMjF,cAAc,GAAGgF,QAAQ,CAAChF,cAAc,GAAG+E,WAAW,CAACyC,aAAa,CAACvb,MAAM;MACjF,MAAMmb,KAAK,GAAG,IAAI,CAACC,QAAQ,CAACtC,WAAW,EAAEE,OAAO,CAAC;MACjD,IAAIwC,OAAO;MACX,IAAIC,OAAO;MACX,IAAI1H,cAAc,GAAG,CAAC,EAAE;QACpByH,OAAO,GAAG,CAAC1C,WAAW,CAACiB,WAAW,CAACE,IAAI,CAACnE,KAAK,GAAGgD,WAAW,CAAC4C,QAAQ,CAACzB,IAAI,CAAClE,MAAM,IAAI,CAAC;QACrF0F,OAAO,GAAG,CAAC3C,WAAW,CAACiB,WAAW,CAACE,IAAI,CAAClE,MAAM,GAAG+C,WAAW,CAAC4C,QAAQ,CAACzB,IAAI,CAACnE,KAAK,IAAI,CAAC;MACzF,CAAC,MACI;QACD0F,OAAO,GAAG,CAAC1C,WAAW,CAACiB,WAAW,CAACE,IAAI,CAACnE,KAAK,GAAGgD,WAAW,CAAC4C,QAAQ,CAACzB,IAAI,CAACnE,KAAK,IAAI,CAAC;QACpF2F,OAAO,GAAG,CAAC3C,WAAW,CAACiB,WAAW,CAACE,IAAI,CAAClE,MAAM,GAAG+C,WAAW,CAAC4C,QAAQ,CAACzB,IAAI,CAAClE,MAAM,IAAI,CAAC;MAC1F;MACA,MAAMsF,GAAG,GAAG;QACR5I,EAAE,EAAE/F,IAAI,CAACwJ,KAAK,CAAC3D,OAAO,CAACE,EAAE,GAAG0I,KAAK,CAAC,GAAGK,OAAO;QAC5ChJ,EAAE,EAAE9F,IAAI,CAACwJ,KAAK,CAAC3D,OAAO,CAACC,EAAE,GAAG2I,KAAK,CAAC,GAAGM,OAAO;QAC5C/I,EAAE,EAAEhG,IAAI,CAACwJ,KAAK,CAAC3D,OAAO,CAACG,EAAE,GAAGyI,KAAK,CAAC,GAAGK,OAAO;QAC5C7I,EAAE,EAAEjG,IAAI,CAACwJ,KAAK,CAAC3D,OAAO,CAACI,EAAE,GAAGwI,KAAK,CAAC,GAAGM;MACzC,CAAC;MACD,IAAI,CAAC1C,QAAQ,CAAC1E,wBAAwB,EAAE;QACpCgH,GAAG,CAAC5I,EAAE,GAAG/F,IAAI,CAAC4O,GAAG,CAACD,GAAG,CAAC5I,EAAE,EAAE,CAAC,CAAC;QAC5B4I,GAAG,CAAC7I,EAAE,GAAG9F,IAAI,CAAC4O,GAAG,CAACD,GAAG,CAAC7I,EAAE,EAAE,CAAC,CAAC;QAC5B6I,GAAG,CAAC3I,EAAE,GAAGhG,IAAI,CAACmL,GAAG,CAACwD,GAAG,CAAC3I,EAAE,EAAEoG,WAAW,CAACiB,WAAW,CAACE,IAAI,CAACnE,KAAK,CAAC;QAC7DuF,GAAG,CAAC1I,EAAE,GAAGjG,IAAI,CAACmL,GAAG,CAACwD,GAAG,CAAC1I,EAAE,EAAEmG,WAAW,CAACiB,WAAW,CAACE,IAAI,CAAClE,MAAM,CAAC;MAClE;MACA,OAAOsF,GAAG;IACd;IACAZ,cAAcA,CAAC3E,KAAK,EAAEC,MAAM,EAAEgD,QAAQ,EAAE;MACpC,MAAM4C,UAAU,GAAG5C,QAAQ,CAACxF,aAAa,GAAGuC,KAAK;MACjD,MAAM8F,WAAW,GAAG7C,QAAQ,CAACvF,cAAc,GAAGuC,MAAM;MACpD,MAAM8F,MAAM,GAAG,IAAIxP,KAAK,CAAC,CAAC;MAC1B,IAAI0M,QAAQ,CAACxF,aAAa,GAAG,CAAC,EAAE;QAC5BsI,MAAM,CAACC,IAAI,CAACH,UAAU,CAAC;MAC3B;MACA,IAAI5C,QAAQ,CAACvF,cAAc,GAAG,CAAC,EAAE;QAC7BqI,MAAM,CAACC,IAAI,CAACF,WAAW,CAAC;MAC5B;MACA,MAAMhc,MAAM,GAAGic,MAAM,CAAC3c,MAAM,KAAK,CAAC,GAAG,CAAC,GAAGwN,IAAI,CAACmL,GAAG,CAAC,GAAGgE,MAAM,CAAC;MAC5D,IAAIjc,MAAM,GAAG,CAAC,IAAI,CAACmZ,QAAQ,CAAC9E,aAAa,EAAE;QACvC,OAAOrU,MAAM;MACjB;MACA,OAAO8M,IAAI,CAACmL,GAAG,CAACjY,MAAM,EAAE,CAAC,CAAC;IAC9B;IACAib,UAAUA,CAAC9B,QAAQ,EAAE;MACjB,OAAOrM,IAAI,CAACmL,GAAG,CAAC,CAAC,EAAEnL,IAAI,CAAC4O,GAAG,CAAC,CAAC,EAAEvC,QAAQ,CAAC7E,YAAY,GAAG,GAAG,CAAC,CAAC;IAChE;EACJ;EACA0E,WAAW,CAACmD,IAAI,YAAAC,oBAAAC,CAAA;IAAA,YAAAA,CAAA,IAAyFrD,WAAW;EAAA,CAAoD;EACxKA,WAAW,CAACsD,KAAK,kBAD8Etb,gEAAE;IAAAwb,KAAA,EACYxD,WAAW;IAAAyD,OAAA,EAAXzD,WAAW,CAAAmD,IAAA;IAAAO,UAAA,EAAc;EAAM,EAAG;EAAC,OAzI1I1D,WAAW;AAAA;AA0IjB;EAAA,QAAA2D,SAAA,oBAAAA,SAAA;AAAA;AAGc,IAERC,sBAAsB;EAA5B,MAAMA,sBAAsB,CAAC;IACzBC,oBAAoBA,CAACC,WAAW,EAAErC,eAAe,EAAEtB,QAAQ,EAAEC,OAAO,EAAE;MAClE,IAAI,CAAC0D,WAAW,EAAEC,aAAa,EAAE;QAC7B;MACJ;MACA,IAAI5D,QAAQ,CAACjF,mBAAmB,IAAIiF,QAAQ,CAAClF,kBAAkB,EAAE;QAC7DwG,eAAe,CAAC5H,EAAE,GAAG,CAAC;QACtB4H,eAAe,CAAC3H,EAAE,GAAGsG,OAAO,CAAClD,KAAK,GAAGiD,QAAQ,CAAClF,kBAAkB,GAC5DkF,QAAQ,CAAClF,kBAAkB,GAAGmF,OAAO,CAAClD,KAAK;QAC/CuE,eAAe,CAAC7H,EAAE,GAAG,CAAC;QACtB6H,eAAe,CAAC1H,EAAE,GAAGqG,OAAO,CAACjD,MAAM,GAAGgD,QAAQ,CAACjF,mBAAmB,GAC9DiF,QAAQ,CAACjF,mBAAmB,GAAGkF,OAAO,CAACjD,MAAM;MACrD,CAAC,MACI;QACD,MAAM6G,YAAY,GAAGlQ,IAAI,CAACmL,GAAG,CAACkB,QAAQ,CAACvE,qBAAqB,EAAEwE,OAAO,CAAClD,KAAK,CAAC;QAC5E,MAAM+G,aAAa,GAAGnQ,IAAI,CAACmL,GAAG,CAACkB,QAAQ,CAACtE,sBAAsB,EAAEuE,OAAO,CAACjD,MAAM,CAAC;QAC/E,IAAI,CAACgD,QAAQ,CAAC3F,mBAAmB,EAAE;UAC/BiH,eAAe,CAAC5H,EAAE,GAAG,CAAC;UACtB4H,eAAe,CAAC3H,EAAE,GAAGkK,YAAY;UACjCvC,eAAe,CAAC7H,EAAE,GAAG,CAAC;UACtB6H,eAAe,CAAC1H,EAAE,GAAGkK,aAAa;QACtC,CAAC,MACI,IAAI7D,OAAO,CAAClD,KAAK,GAAGiD,QAAQ,CAAC1F,WAAW,GAAG2F,OAAO,CAACjD,MAAM,EAAE;UAC5DsE,eAAe,CAAC5H,EAAE,GAAG,CAAC;UACtB4H,eAAe,CAAC3H,EAAE,GAAGkK,YAAY;UACjC,MAAME,4BAA4B,GAAGF,YAAY,GAAG7D,QAAQ,CAAC1F,WAAW;UACxEgH,eAAe,CAAC7H,EAAE,GAAG,CAACwG,OAAO,CAACjD,MAAM,GAAG+G,4BAA4B,IAAI,CAAC;UACxEzC,eAAe,CAAC1H,EAAE,GAAG0H,eAAe,CAAC7H,EAAE,GAAGsK,4BAA4B;QAC1E,CAAC,MACI;UACDzC,eAAe,CAAC7H,EAAE,GAAG,CAAC;UACtB6H,eAAe,CAAC1H,EAAE,GAAGkK,aAAa;UAClC,MAAME,2BAA2B,GAAGF,aAAa,GAAG9D,QAAQ,CAAC1F,WAAW;UACxEgH,eAAe,CAAC5H,EAAE,GAAG,CAACuG,OAAO,CAAClD,KAAK,GAAGiH,2BAA2B,IAAI,CAAC;UACtE1C,eAAe,CAAC3H,EAAE,GAAG2H,eAAe,CAAC5H,EAAE,GAAGsK,2BAA2B;QACzE;MACJ;IACJ;IACAC,IAAIA,CAAC1e,KAAK,EAAE2e,SAAS,EAAE5C,eAAe,EAAE;MACpC,MAAM6C,KAAK,GAAG,IAAI,CAACC,UAAU,CAAC7e,KAAK,CAAC,GAAG2e,SAAS,CAACvH,OAAO;MACxD,MAAM0H,KAAK,GAAG,IAAI,CAACC,UAAU,CAAC/e,KAAK,CAAC,GAAG2e,SAAS,CAACtH,OAAO;MACxD0E,eAAe,CAAC5H,EAAE,GAAGwK,SAAS,CAACxK,EAAE,GAAGyK,KAAK;MACzC7C,eAAe,CAAC7H,EAAE,GAAGyK,SAAS,CAACzK,EAAE,GAAG4K,KAAK;MACzC/C,eAAe,CAAC3H,EAAE,GAAGuK,SAAS,CAACvK,EAAE,GAAGwK,KAAK;MACzC7C,eAAe,CAAC1H,EAAE,GAAGsK,SAAS,CAACtK,EAAE,GAAGyK,KAAK;IAC7C;IACAE,MAAMA,CAAChf,KAAK,EAAE2e,SAAS,EAAE5C,eAAe,EAAErB,OAAO,EAAED,QAAQ,EAAE;MACzD,MAAMwE,KAAK,GAAG,IAAI,CAACJ,UAAU,CAAC7e,KAAK,CAAC,GAAG2e,SAAS,CAACvH,OAAO;MACxD,MAAM8H,KAAK,GAAG,IAAI,CAACH,UAAU,CAAC/e,KAAK,CAAC,GAAG2e,SAAS,CAACtH,OAAO;MACxD,QAAQsH,SAAS,CAACQ,QAAQ;QACtB,KAAK,MAAM;UACPpD,eAAe,CAAC5H,EAAE,GAAG/F,IAAI,CAACmL,GAAG,CAACnL,IAAI,CAAC4O,GAAG,CAAC2B,SAAS,CAACxK,EAAE,GAAG8K,KAAK,EAAElD,eAAe,CAAC3H,EAAE,GAAGqG,QAAQ,CAACvE,qBAAqB,CAAC,EAAE6F,eAAe,CAAC3H,EAAE,GAAGqG,QAAQ,CAACzE,qBAAqB,CAAC;UACvK;QACJ,KAAK,SAAS;UACV+F,eAAe,CAAC5H,EAAE,GAAG/F,IAAI,CAACmL,GAAG,CAACnL,IAAI,CAAC4O,GAAG,CAAC2B,SAAS,CAACxK,EAAE,GAAG8K,KAAK,EAAElD,eAAe,CAAC3H,EAAE,GAAGqG,QAAQ,CAACvE,qBAAqB,CAAC,EAAE6F,eAAe,CAAC3H,EAAE,GAAGqG,QAAQ,CAACzE,qBAAqB,CAAC;UACvK+F,eAAe,CAAC7H,EAAE,GAAG9F,IAAI,CAACmL,GAAG,CAACnL,IAAI,CAAC4O,GAAG,CAAC2B,SAAS,CAACzK,EAAE,GAAGgL,KAAK,EAAEnD,eAAe,CAAC1H,EAAE,GAAGoG,QAAQ,CAACtE,sBAAsB,CAAC,EAAE4F,eAAe,CAAC1H,EAAE,GAAGoG,QAAQ,CAACxE,sBAAsB,CAAC;UACzK;QACJ,KAAK,KAAK;UACN8F,eAAe,CAAC7H,EAAE,GAAG9F,IAAI,CAACmL,GAAG,CAACnL,IAAI,CAAC4O,GAAG,CAAC2B,SAAS,CAACzK,EAAE,GAAGgL,KAAK,EAAEnD,eAAe,CAAC1H,EAAE,GAAGoG,QAAQ,CAACtE,sBAAsB,CAAC,EAAE4F,eAAe,CAAC1H,EAAE,GAAGoG,QAAQ,CAACxE,sBAAsB,CAAC;UACzK;QACJ,KAAK,UAAU;UACX8F,eAAe,CAAC3H,EAAE,GAAGhG,IAAI,CAAC4O,GAAG,CAAC5O,IAAI,CAACmL,GAAG,CAACoF,SAAS,CAACvK,EAAE,GAAG6K,KAAK,EAAElD,eAAe,CAAC5H,EAAE,GAAGsG,QAAQ,CAACvE,qBAAqB,CAAC,EAAE6F,eAAe,CAAC5H,EAAE,GAAGsG,QAAQ,CAACzE,qBAAqB,CAAC;UACvK+F,eAAe,CAAC7H,EAAE,GAAG9F,IAAI,CAACmL,GAAG,CAACnL,IAAI,CAAC4O,GAAG,CAAC2B,SAAS,CAACzK,EAAE,GAAGgL,KAAK,EAAEnD,eAAe,CAAC1H,EAAE,GAAGoG,QAAQ,CAACtE,sBAAsB,CAAC,EAAE4F,eAAe,CAAC1H,EAAE,GAAGoG,QAAQ,CAACxE,sBAAsB,CAAC;UACzK;QACJ,KAAK,OAAO;UACR8F,eAAe,CAAC3H,EAAE,GAAGhG,IAAI,CAAC4O,GAAG,CAAC5O,IAAI,CAACmL,GAAG,CAACoF,SAAS,CAACvK,EAAE,GAAG6K,KAAK,EAAElD,eAAe,CAAC5H,EAAE,GAAGsG,QAAQ,CAACvE,qBAAqB,CAAC,EAAE6F,eAAe,CAAC5H,EAAE,GAAGsG,QAAQ,CAACzE,qBAAqB,CAAC;UACvK;QACJ,KAAK,aAAa;UACd+F,eAAe,CAAC3H,EAAE,GAAGhG,IAAI,CAAC4O,GAAG,CAAC5O,IAAI,CAACmL,GAAG,CAACoF,SAAS,CAACvK,EAAE,GAAG6K,KAAK,EAAElD,eAAe,CAAC5H,EAAE,GAAGsG,QAAQ,CAACvE,qBAAqB,CAAC,EAAE6F,eAAe,CAAC5H,EAAE,GAAGsG,QAAQ,CAACzE,qBAAqB,CAAC;UACvK+F,eAAe,CAAC1H,EAAE,GAAGjG,IAAI,CAAC4O,GAAG,CAAC5O,IAAI,CAACmL,GAAG,CAACoF,SAAS,CAACtK,EAAE,GAAG6K,KAAK,EAAEnD,eAAe,CAAC7H,EAAE,GAAGuG,QAAQ,CAACtE,sBAAsB,CAAC,EAAE4F,eAAe,CAAC7H,EAAE,GAAGuG,QAAQ,CAACxE,sBAAsB,CAAC;UACzK;QACJ,KAAK,QAAQ;UACT8F,eAAe,CAAC1H,EAAE,GAAGjG,IAAI,CAAC4O,GAAG,CAAC5O,IAAI,CAACmL,GAAG,CAACoF,SAAS,CAACtK,EAAE,GAAG6K,KAAK,EAAEnD,eAAe,CAAC7H,EAAE,GAAGuG,QAAQ,CAACtE,sBAAsB,CAAC,EAAE4F,eAAe,CAAC7H,EAAE,GAAGuG,QAAQ,CAACxE,sBAAsB,CAAC;UACzK;QACJ,KAAK,YAAY;UACb8F,eAAe,CAAC5H,EAAE,GAAG/F,IAAI,CAACmL,GAAG,CAACnL,IAAI,CAAC4O,GAAG,CAAC2B,SAAS,CAACxK,EAAE,GAAG8K,KAAK,EAAElD,eAAe,CAAC3H,EAAE,GAAGqG,QAAQ,CAACvE,qBAAqB,CAAC,EAAE6F,eAAe,CAAC3H,EAAE,GAAGqG,QAAQ,CAACzE,qBAAqB,CAAC;UACvK+F,eAAe,CAAC1H,EAAE,GAAGjG,IAAI,CAAC4O,GAAG,CAAC5O,IAAI,CAACmL,GAAG,CAACoF,SAAS,CAACtK,EAAE,GAAG6K,KAAK,EAAEnD,eAAe,CAAC7H,EAAE,GAAGuG,QAAQ,CAACtE,sBAAsB,CAAC,EAAE4F,eAAe,CAAC7H,EAAE,GAAGuG,QAAQ,CAACxE,sBAAsB,CAAC;UACzK;QACJ,KAAK,QAAQ;UACT,MAAMnW,KAAK,GAAGE,KAAK,CAACF,KAAK;UACzB,MAAMsf,QAAQ,GAAGhR,IAAI,CAACmL,GAAG,CAACnL,IAAI,CAAC4O,GAAG,CAACvC,QAAQ,CAACzE,qBAAqB,EAAG5H,IAAI,CAACsL,GAAG,CAACiF,SAAS,CAACvK,EAAE,GAAGuK,SAAS,CAACxK,EAAE,CAAC,GAAIrU,KAAK,CAAC,EAAE2a,QAAQ,CAACvE,qBAAqB,CAAC;UACpJ,MAAMmJ,SAAS,GAAGjR,IAAI,CAACmL,GAAG,CAACnL,IAAI,CAAC4O,GAAG,CAACvC,QAAQ,CAACxE,sBAAsB,EAAG7H,IAAI,CAACsL,GAAG,CAACiF,SAAS,CAACtK,EAAE,GAAGsK,SAAS,CAACzK,EAAE,CAAC,GAAIpU,KAAK,CAAC,EAAE2a,QAAQ,CAACtE,sBAAsB,CAAC;UACvJ4F,eAAe,CAAC5H,EAAE,GAAGwK,SAAS,CAACvH,OAAO,GAAGgI,QAAQ,GAAG,CAAC;UACrDrD,eAAe,CAAC3H,EAAE,GAAGuK,SAAS,CAACvH,OAAO,GAAGgI,QAAQ,GAAG,CAAC;UACrDrD,eAAe,CAAC7H,EAAE,GAAGyK,SAAS,CAACtH,OAAO,GAAGgI,SAAS,GAAG,CAAC;UACtDtD,eAAe,CAAC1H,EAAE,GAAGsK,SAAS,CAACtH,OAAO,GAAGgI,SAAS,GAAG,CAAC;UACtD,IAAItD,eAAe,CAAC5H,EAAE,GAAG,CAAC,EAAE;YACxB4H,eAAe,CAAC3H,EAAE,IAAI2H,eAAe,CAAC5H,EAAE;YACxC4H,eAAe,CAAC5H,EAAE,GAAG,CAAC;UAC1B,CAAC,MACI,IAAI4H,eAAe,CAAC3H,EAAE,GAAGsG,OAAO,CAAClD,KAAK,EAAE;YACzCuE,eAAe,CAAC5H,EAAE,IAAK4H,eAAe,CAAC3H,EAAE,GAAGsG,OAAO,CAAClD,KAAM;YAC1DuE,eAAe,CAAC3H,EAAE,GAAGsG,OAAO,CAAClD,KAAK;UACtC;UACA,IAAIuE,eAAe,CAAC7H,EAAE,GAAG,CAAC,EAAE;YACxB6H,eAAe,CAAC1H,EAAE,IAAI0H,eAAe,CAAC7H,EAAE;YACxC6H,eAAe,CAAC7H,EAAE,GAAG,CAAC;UAC1B,CAAC,MACI,IAAI6H,eAAe,CAAC1H,EAAE,GAAGqG,OAAO,CAACjD,MAAM,EAAE;YAC1CsE,eAAe,CAAC7H,EAAE,IAAK6H,eAAe,CAAC1H,EAAE,GAAGqG,OAAO,CAACjD,MAAO;YAC3DsE,eAAe,CAAC1H,EAAE,GAAGqG,OAAO,CAACjD,MAAM;UACvC;UACA;MACR;MACA,IAAIgD,QAAQ,CAAC3F,mBAAmB,EAAE;QAC9B,IAAI,CAACwK,gBAAgB,CAACX,SAAS,CAACQ,QAAQ,EAAEpD,eAAe,EAAErB,OAAO,EAAED,QAAQ,CAAC;MACjF;IACJ;IACA6E,gBAAgBA,CAACH,QAAQ,EAAEpD,eAAe,EAAErB,OAAO,EAAED,QAAQ,EAAE;MAC3D,IAAI8E,SAAS,GAAG,CAAC;MACjB,IAAIC,SAAS,GAAG,CAAC;MACjB,QAAQL,QAAQ;QACZ,KAAK,KAAK;UACNpD,eAAe,CAAC3H,EAAE,GAAG2H,eAAe,CAAC5H,EAAE,GAAG,CAAC4H,eAAe,CAAC1H,EAAE,GAAG0H,eAAe,CAAC7H,EAAE,IAAIuG,QAAQ,CAAC1F,WAAW;UAC1GwK,SAAS,GAAGnR,IAAI,CAAC4O,GAAG,CAACjB,eAAe,CAAC3H,EAAE,GAAGsG,OAAO,CAAClD,KAAK,EAAE,CAAC,CAAC;UAC3DgI,SAAS,GAAGpR,IAAI,CAAC4O,GAAG,CAAC,CAAC,GAAGjB,eAAe,CAAC7H,EAAE,EAAE,CAAC,CAAC;UAC/C,IAAIqL,SAAS,GAAG,CAAC,IAAIC,SAAS,GAAG,CAAC,EAAE;YAChCzD,eAAe,CAAC3H,EAAE,IAAKoL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAIC,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS;YACrHxD,eAAe,CAAC7H,EAAE,IAAKsL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAGC,SAAS,GAAGD,SAAS,GAAG9E,QAAQ,CAAC1F,WAAW;UACvH;UACA;QACJ,KAAK,QAAQ;UACTgH,eAAe,CAAC3H,EAAE,GAAG2H,eAAe,CAAC5H,EAAE,GAAG,CAAC4H,eAAe,CAAC1H,EAAE,GAAG0H,eAAe,CAAC7H,EAAE,IAAIuG,QAAQ,CAAC1F,WAAW;UAC1GwK,SAAS,GAAGnR,IAAI,CAAC4O,GAAG,CAACjB,eAAe,CAAC3H,EAAE,GAAGsG,OAAO,CAAClD,KAAK,EAAE,CAAC,CAAC;UAC3DgI,SAAS,GAAGpR,IAAI,CAAC4O,GAAG,CAACjB,eAAe,CAAC1H,EAAE,GAAGqG,OAAO,CAACjD,MAAM,EAAE,CAAC,CAAC;UAC5D,IAAI8H,SAAS,GAAG,CAAC,IAAIC,SAAS,GAAG,CAAC,EAAE;YAChCzD,eAAe,CAAC3H,EAAE,IAAKoL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAIC,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS;YACrHxD,eAAe,CAAC1H,EAAE,IAAKmL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAGC,SAAS,GAAID,SAAS,GAAG9E,QAAQ,CAAC1F,WAAY;UACzH;UACA;QACJ,KAAK,SAAS;UACVgH,eAAe,CAAC7H,EAAE,GAAG6H,eAAe,CAAC1H,EAAE,GAAG,CAAC0H,eAAe,CAAC3H,EAAE,GAAG2H,eAAe,CAAC5H,EAAE,IAAIsG,QAAQ,CAAC1F,WAAW;UAC1GwK,SAAS,GAAGnR,IAAI,CAAC4O,GAAG,CAAC,CAAC,GAAGjB,eAAe,CAAC5H,EAAE,EAAE,CAAC,CAAC;UAC/CqL,SAAS,GAAGpR,IAAI,CAAC4O,GAAG,CAAC,CAAC,GAAGjB,eAAe,CAAC7H,EAAE,EAAE,CAAC,CAAC;UAC/C,IAAIqL,SAAS,GAAG,CAAC,IAAIC,SAAS,GAAG,CAAC,EAAE;YAChCzD,eAAe,CAAC5H,EAAE,IAAKqL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAIC,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS;YACrHxD,eAAe,CAAC7H,EAAE,IAAKsL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAGC,SAAS,GAAGD,SAAS,GAAG9E,QAAQ,CAAC1F,WAAW;UACvH;UACA;QACJ,KAAK,UAAU;UACXgH,eAAe,CAAC7H,EAAE,GAAG6H,eAAe,CAAC1H,EAAE,GAAG,CAAC0H,eAAe,CAAC3H,EAAE,GAAG2H,eAAe,CAAC5H,EAAE,IAAIsG,QAAQ,CAAC1F,WAAW;UAC1GwK,SAAS,GAAGnR,IAAI,CAAC4O,GAAG,CAACjB,eAAe,CAAC3H,EAAE,GAAGsG,OAAO,CAAClD,KAAK,EAAE,CAAC,CAAC;UAC3DgI,SAAS,GAAGpR,IAAI,CAAC4O,GAAG,CAAC,CAAC,GAAGjB,eAAe,CAAC7H,EAAE,EAAE,CAAC,CAAC;UAC/C,IAAIqL,SAAS,GAAG,CAAC,IAAIC,SAAS,GAAG,CAAC,EAAE;YAChCzD,eAAe,CAAC3H,EAAE,IAAKoL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAIC,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS;YACrHxD,eAAe,CAAC7H,EAAE,IAAKsL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAGC,SAAS,GAAGD,SAAS,GAAG9E,QAAQ,CAAC1F,WAAW;UACvH;UACA;QACJ,KAAK,OAAO;QACZ,KAAK,aAAa;UACdgH,eAAe,CAAC1H,EAAE,GAAG0H,eAAe,CAAC7H,EAAE,GAAG,CAAC6H,eAAe,CAAC3H,EAAE,GAAG2H,eAAe,CAAC5H,EAAE,IAAIsG,QAAQ,CAAC1F,WAAW;UAC1GwK,SAAS,GAAGnR,IAAI,CAAC4O,GAAG,CAACjB,eAAe,CAAC3H,EAAE,GAAGsG,OAAO,CAAClD,KAAK,EAAE,CAAC,CAAC;UAC3DgI,SAAS,GAAGpR,IAAI,CAAC4O,GAAG,CAACjB,eAAe,CAAC1H,EAAE,GAAGqG,OAAO,CAACjD,MAAM,EAAE,CAAC,CAAC;UAC5D,IAAI8H,SAAS,GAAG,CAAC,IAAIC,SAAS,GAAG,CAAC,EAAE;YAChCzD,eAAe,CAAC3H,EAAE,IAAKoL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAIC,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS;YACrHxD,eAAe,CAAC1H,EAAE,IAAKmL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAGC,SAAS,GAAGD,SAAS,GAAG9E,QAAQ,CAAC1F,WAAW;UACvH;UACA;QACJ,KAAK,MAAM;QACX,KAAK,YAAY;UACbgH,eAAe,CAAC1H,EAAE,GAAG0H,eAAe,CAAC7H,EAAE,GAAG,CAAC6H,eAAe,CAAC3H,EAAE,GAAG2H,eAAe,CAAC5H,EAAE,IAAIsG,QAAQ,CAAC1F,WAAW;UAC1GwK,SAAS,GAAGnR,IAAI,CAAC4O,GAAG,CAAC,CAAC,GAAGjB,eAAe,CAAC5H,EAAE,EAAE,CAAC,CAAC;UAC/CqL,SAAS,GAAGpR,IAAI,CAAC4O,GAAG,CAACjB,eAAe,CAAC1H,EAAE,GAAGqG,OAAO,CAACjD,MAAM,EAAE,CAAC,CAAC;UAC5D,IAAI8H,SAAS,GAAG,CAAC,IAAIC,SAAS,GAAG,CAAC,EAAE;YAChCzD,eAAe,CAAC5H,EAAE,IAAKqL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAIC,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS;YACrHxD,eAAe,CAAC1H,EAAE,IAAKmL,SAAS,GAAG/E,QAAQ,CAAC1F,WAAW,GAAIwK,SAAS,GAAGC,SAAS,GAAGD,SAAS,GAAG9E,QAAQ,CAAC1F,WAAW;UACvH;UACA;QACJ,KAAK,QAAQ;UACTgH,eAAe,CAAC3H,EAAE,GAAG2H,eAAe,CAAC5H,EAAE,GAAG,CAAC4H,eAAe,CAAC1H,EAAE,GAAG0H,eAAe,CAAC7H,EAAE,IAAIuG,QAAQ,CAAC1F,WAAW;UAC1GgH,eAAe,CAAC1H,EAAE,GAAG0H,eAAe,CAAC7H,EAAE,GAAG,CAAC6H,eAAe,CAAC3H,EAAE,GAAG2H,eAAe,CAAC5H,EAAE,IAAIsG,QAAQ,CAAC1F,WAAW;UAC1G,MAAM0K,UAAU,GAAGrR,IAAI,CAAC4O,GAAG,CAAC,CAAC,GAAGjB,eAAe,CAAC5H,EAAE,EAAE,CAAC,CAAC;UACtD,MAAMuL,UAAU,GAAGtR,IAAI,CAAC4O,GAAG,CAACjB,eAAe,CAAC3H,EAAE,GAAGsG,OAAO,CAAClD,KAAK,EAAE,CAAC,CAAC;UAClE,MAAMmI,UAAU,GAAGvR,IAAI,CAAC4O,GAAG,CAACjB,eAAe,CAAC1H,EAAE,GAAGqG,OAAO,CAACjD,MAAM,EAAE,CAAC,CAAC;UACnE,MAAMmI,UAAU,GAAGxR,IAAI,CAAC4O,GAAG,CAAC,CAAC,GAAGjB,eAAe,CAAC7H,EAAE,EAAE,CAAC,CAAC;UACtD,IAAIuL,UAAU,GAAG,CAAC,IAAIC,UAAU,GAAG,CAAC,IAAIC,UAAU,GAAG,CAAC,IAAIC,UAAU,GAAG,CAAC,EAAE;YACtE7D,eAAe,CAAC5H,EAAE,IAAKwL,UAAU,GAAGlF,QAAQ,CAAC1F,WAAW,GAAI0K,UAAU,GAAIE,UAAU,GAAGlF,QAAQ,CAAC1F,WAAW,GAAI0K,UAAU;YACzH1D,eAAe,CAAC3H,EAAE,IAAKwL,UAAU,GAAGnF,QAAQ,CAAC1F,WAAW,GAAI2K,UAAU,GAAIE,UAAU,GAAGnF,QAAQ,CAAC1F,WAAW,GAAI2K,UAAU;YACzH3D,eAAe,CAAC7H,EAAE,IAAK0L,UAAU,GAAGnF,QAAQ,CAAC1F,WAAW,GAAI2K,UAAU,GAAGE,UAAU,GAAGF,UAAU,GAAGjF,QAAQ,CAAC1F,WAAW;YACvHgH,eAAe,CAAC1H,EAAE,IAAKsL,UAAU,GAAGlF,QAAQ,CAAC1F,WAAW,GAAI0K,UAAU,GAAGE,UAAU,GAAGF,UAAU,GAAGhF,QAAQ,CAAC1F,WAAW;UAC3H;UACA;MACR;IACJ;IACA8J,UAAUA,CAAC7e,KAAK,EAAE;MACd,OAAOA,KAAK,CAAC6f,OAAO,GAAG,CAAC,CAAC,CAACzI,OAAO,IAAIpX,KAAK,CAACoX,OAAO,IAAI,CAAC;IAC3D;IACA2H,UAAUA,CAAC/e,KAAK,EAAE;MACd,OAAOA,KAAK,CAAC6f,OAAO,GAAG,CAAC,CAAC,CAACxI,OAAO,IAAIrX,KAAK,CAACqX,OAAO,IAAI,CAAC;IAC3D;EACJ;EACA6G,sBAAsB,CAACT,IAAI,YAAAqC,+BAAAnC,CAAA;IAAA,YAAAA,CAAA,IAAyFO,sBAAsB;EAAA,CAAoD;EAC9LA,sBAAsB,CAACN,KAAK,kBAvMmEtb,gEAAE;IAAAwb,KAAA,EAuMuBI,sBAAsB;IAAAH,OAAA,EAAtBG,sBAAsB,CAAAT,IAAA;IAAAO,UAAA,EAAc;EAAM,EAAG;EAAC,OAhMhKE,sBAAsB;AAAA;AAiM5B;EAAA,QAAAD,SAAA,oBAAAA,SAAA;AAAA;;AAKA;AACA;AACA;AACA,MAAM8B,2BAA2B,GAAG,wEAAwE,GACxG,wEAAwE,GACxE,wEAAwE,GACxE,wEAAwE,GACxE,wEAAwE,GACxE,2DAA2D;AAC/D,SAASC,yBAAyBA,CAAA,EAAG;EACjC,OAAO,IAAIhf,OAAO,CAAEC,OAAO,IAAK;IAC5B,MAAMkX,GAAG,GAAG,IAAI8H,KAAK,CAAC,CAAC;IACvB9H,GAAG,CAAC9W,MAAM,GAAG,MAAM;MACf;MACA,MAAM6e,SAAS,GAAG/H,GAAG,CAACX,KAAK,KAAK,CAAC,IAAIW,GAAG,CAACV,MAAM,KAAK,CAAC;MACrDxW,OAAO,CAACif,SAAS,CAAC;IACtB,CAAC;IACD/H,GAAG,CAACgI,GAAG,GAAGJ,2BAA2B;EACzC,CAAC,CAAC;AACN;AACA,SAASK,8BAA8BA,CAACC,yBAAyB,EAAE;EAC/D,IAAI,OAAOA,yBAAyB,KAAK,QAAQ,EAAE;IAC/CA,yBAAyB,GAAGC,eAAe,CAACD,yBAAyB,CAAC;EAC1E;EACA,QAAQA,yBAAyB;IAC7B,KAAK,CAAC;MACF,OAAO;QAAE3e,MAAM,EAAE,CAAC;QAAE6e,IAAI,EAAE;MAAK,CAAC;IACpC,KAAK,CAAC;MACF,OAAO;QAAE7e,MAAM,EAAE,CAAC;QAAE6e,IAAI,EAAE;MAAM,CAAC;IACrC,KAAK,CAAC;MACF,OAAO;QAAE7e,MAAM,EAAE,CAAC;QAAE6e,IAAI,EAAE;MAAK,CAAC;IACpC,KAAK,CAAC;MACF,OAAO;QAAE7e,MAAM,EAAE,CAAC;QAAE6e,IAAI,EAAE;MAAK,CAAC;IACpC,KAAK,CAAC;MACF,OAAO;QAAE7e,MAAM,EAAE,CAAC;QAAE6e,IAAI,EAAE;MAAM,CAAC;IACrC,KAAK,CAAC;MACF,OAAO;QAAE7e,MAAM,EAAE,CAAC;QAAE6e,IAAI,EAAE;MAAK,CAAC;IACpC,KAAK,CAAC;MACF,OAAO;QAAE7e,MAAM,EAAE,CAAC;QAAE6e,IAAI,EAAE;MAAM,CAAC;IACrC;MACI,OAAO;QAAE7e,MAAM,EAAE,CAAC;QAAE6e,IAAI,EAAE;MAAM,CAAC;EACzC;AACJ;AACA,SAASD,eAAeA,CAACE,WAAW,EAAE;EAClC,MAAMC,IAAI,GAAG,IAAIC,QAAQ,CAACF,WAAW,CAAC;EACtC,IAAIC,IAAI,CAACE,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,MAAM,EAAE;IACrC,OAAO,CAAC,CAAC;EACb;EACA,MAAM/f,MAAM,GAAG6f,IAAI,CAACG,UAAU;EAC9B,IAAIC,MAAM,GAAG,CAAC;EACd,OAAOA,MAAM,GAAGjgB,MAAM,EAAE;IACpB,IAAI6f,IAAI,CAACE,SAAS,CAACE,MAAM,GAAG,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,EACtC,OAAO,CAAC,CAAC;IACb,MAAMC,MAAM,GAAGL,IAAI,CAACE,SAAS,CAACE,MAAM,EAAE,KAAK,CAAC;IAC5CA,MAAM,IAAI,CAAC;IACX,IAAIC,MAAM,IAAI,MAAM,EAAE;MAClB,IAAIL,IAAI,CAACM,SAAS,CAACF,MAAM,IAAI,CAAC,EAAE,KAAK,CAAC,KAAK,UAAU,EAAE;QACnD,OAAO,CAAC,CAAC;MACb;MACA,MAAMG,MAAM,GAAGP,IAAI,CAACE,SAAS,CAACE,MAAM,IAAI,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM;MAC3DA,MAAM,IAAIJ,IAAI,CAACM,SAAS,CAACF,MAAM,GAAG,CAAC,EAAEG,MAAM,CAAC;MAC5C,MAAMC,IAAI,GAAGR,IAAI,CAACE,SAAS,CAACE,MAAM,EAAEG,MAAM,CAAC;MAC3CH,MAAM,IAAI,CAAC;MACX,KAAK,IAAI5S,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgT,IAAI,EAAEhT,CAAC,EAAE,EAAE;QAC3B,IAAIwS,IAAI,CAACE,SAAS,CAACE,MAAM,GAAI5S,CAAC,GAAG,EAAG,EAAE+S,MAAM,CAAC,IAAI,MAAM,EAAE;UACrD,OAAOP,IAAI,CAACE,SAAS,CAACE,MAAM,GAAI5S,CAAC,GAAG,EAAG,GAAG,CAAC,EAAE+S,MAAM,CAAC;QACxD;MACJ;IACJ,CAAC,MACI,IAAI,CAACF,MAAM,GAAG,MAAM,MAAM,MAAM,EAAE;MACnC;IACJ,CAAC,MACI;MACDD,MAAM,IAAIJ,IAAI,CAACE,SAAS,CAACE,MAAM,EAAE,KAAK,CAAC;IAC3C;EACJ;EACA,OAAO,CAAC,CAAC;AACb;AAAC,IAEKK,gBAAgB;EAAtB,MAAMA,gBAAgB,CAAC;IACnB1hB,WAAWA,CAAA,EAAG;MACV,IAAI,CAAC2hB,mBAAmB,GAAGnB,yBAAyB,CAAC,CAAC;IAC1D;IACMoB,aAAaA,CAACtV,IAAI,EAAEuV,eAAe,EAAE;MAAA,IAAA7gB,MAAA;MAAA,OAAAN,sJAAA;QACvC,MAAMsgB,WAAW,SAAS1U,IAAI,CAAC0U,WAAW,CAAC,CAAC;QAC5C,aAAahgB,MAAI,CAAC8gB,yCAAyC,CAACd,WAAW,EAAE1U,IAAI,CAACjL,IAAI,EAAEwgB,eAAe,CAAC;MAAC;IACzG;IACAC,yCAAyCA,CAACd,WAAW,EAAEe,SAAS,EAAEF,eAAe,EAAE;MAC/E,IAAI,CAAC,IAAI,CAACG,gBAAgB,CAACD,SAAS,CAAC,EAAE;QACnC,OAAOvgB,OAAO,CAACE,MAAM,CAAC,IAAI0M,KAAK,CAAC,oBAAoB,CAAC,CAAC;MAC1D;MACA,OAAO,IAAI,CAAC6T,wBAAwB,CAACjB,WAAW,EAAEa,eAAe,EAAEE,SAAS,CAAC;IACjF;IACAC,gBAAgBA,CAAC3gB,IAAI,EAAE;MACnB,OAAO,uEAAuE,CAAC6gB,IAAI,CAAC7gB,IAAI,CAAC;IAC7F;IACM8gB,gBAAgBA,CAACC,GAAG,EAAEP,eAAe,EAAE;MAAA,IAAAxV,MAAA;MAAA,OAAA3L,sJAAA;QACzC,MAAM6K,GAAG,SAAS8W,KAAK,CAACD,GAAG,CAAC;QAC5B,MAAMzhB,IAAI,SAAS4K,GAAG,CAAC5K,IAAI,CAAC,CAAC;QAC7B,MAAM2hB,MAAM,SAAS3hB,IAAI,CAACqgB,WAAW,CAAC,CAAC;QACvC,aAAa3U,MAAI,CAAC4V,wBAAwB,CAACK,MAAM,EAAET,eAAe,EAAElhB,IAAI,CAACU,IAAI,CAAC;MAAC;IACnF;IACAkhB,eAAeA,CAACC,WAAW,EAAEX,eAAe,EAAE;MAC1C,MAAMb,WAAW,GAAG,IAAI,CAACyB,mBAAmB,CAACD,WAAW,CAAC;MACzD,OAAO,IAAI,CAACP,wBAAwB,CAACjB,WAAW,EAAEa,eAAe,CAAC;IACtE;IACAY,mBAAmBA,CAACD,WAAW,EAAE;MAC7BA,WAAW,GAAGA,WAAW,CAACE,OAAO,CAAC,0BAA0B,EAAE,EAAE,CAAC;MACjE,MAAMC,YAAY,GAAGC,IAAI,CAACJ,WAAW,CAAC;MACtC,MAAMK,GAAG,GAAGF,YAAY,CAACvhB,MAAM;MAC/B,MAAM0hB,KAAK,GAAG,IAAIC,UAAU,CAACF,GAAG,CAAC;MACjC,KAAK,IAAIpU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoU,GAAG,EAAEpU,CAAC,EAAE,EAAE;QAC1BqU,KAAK,CAACrU,CAAC,CAAC,GAAGkU,YAAY,CAACK,UAAU,CAACvU,CAAC,CAAC;MACzC;MACA,OAAOqU,KAAK,CAACR,MAAM;IACvB;IACML,wBAAwBA,CAACjB,WAAW,EAAEa,eAAe,EAAEE,SAAS,EAAE;MAAA,IAAAxV,MAAA;MAAA,OAAA7L,sJAAA;QACpE,MAAM6K,GAAG,SAAS,IAAI/J,OAAO;UAAA,IAAAyhB,IAAA,GAAAviB,sJAAA,CAAC,WAAOe,OAAO,EAAEC,MAAM,EAAK;YACrD,IAAI;cACA,MAAMf,IAAI,GAAG,IAAIuiB,IAAI,CAAC,CAAClC,WAAW,CAAC,EAAEe,SAAS,GAAG;gBAAE1gB,IAAI,EAAE0gB;cAAU,CAAC,GAAGzc,SAAS,CAAC;cACjF,MAAM2X,SAAS,GAAGC,GAAG,CAACC,eAAe,CAACxc,IAAI,CAAC;cAC3C,MAAMwiB,aAAa,GAAG,IAAI1C,KAAK,CAAC,CAAC;cACjC,MAAM2C,KAAK,GAAGrB,SAAS,KAAK,eAAe;cAC3C,MAAMsB,iBAAiB,GAAGD,KAAK,SAAS7W,MAAI,CAAC+W,eAAe,CAAC3iB,IAAI,CAAC,GAAG2E,SAAS;cAC9E6d,aAAa,CAACthB,MAAM,GAAG,MAAMJ,OAAO,CAAC;gBACjC0hB,aAAa;gBACbE,iBAAiB;gBACjBE,iBAAiB,EAAEtG,SAAS;gBAC5BuG,mBAAmB,EAAExC;cACzB,CAAC,CAAC;cACFmC,aAAa,CAACphB,OAAO,GAAGL,MAAM;cAC9ByhB,aAAa,CAACxC,GAAG,GAAG1D,SAAS;YACjC,CAAC,CACD,OAAOwG,CAAC,EAAE;cACN/hB,MAAM,CAAC+hB,CAAC,CAAC;YACb;UACJ,CAAC;UAAA,iBAAAC,EAAA,EAAAC,GAAA;YAAA,OAAAV,IAAA,CAAAW,KAAA,OAAAC,SAAA;UAAA;QAAA,IAAC;QACF,aAAatX,MAAI,CAACuX,6BAA6B,CAACvY,GAAG,EAAEsW,eAAe,EAAEtW,GAAG,CAAC8X,iBAAiB,IAAI,IAAI,CAAC;MAAC;IACzG;IACMC,eAAeA,CAAC3iB,IAAI,EAAE;MAAA,OAAAD,sJAAA;QACxB,MAAMqjB,MAAM,GAAG,IAAIC,SAAS,CAAC,CAAC;QAC9B,MAAMC,GAAG,GAAGF,MAAM,CAACG,eAAe,OAAOvjB,IAAI,CAACwjB,IAAI,CAAC,CAAC,EAAE,eAAe,CAAC;QACtE,MAAMC,UAAU,GAAGH,GAAG,CAACI,aAAa,CAAC,KAAK,CAAC;QAC3C,IAAI,CAACD,UAAU,EAAE;UACb,MAAMhW,KAAK,CAAC,2BAA2B,CAAC;QAC5C;QACA,MAAMkW,SAAS,GAAGF,UAAU,CAACG,YAAY,CAAC,OAAO,CAAC;QAClD,MAAMC,UAAU,GAAGJ,UAAU,CAACG,YAAY,CAAC,QAAQ,CAAC;QACpD,IAAID,SAAS,IAAIE,UAAU,EAAE;UACzB,OAAO,IAAI;QACf;QACA,MAAMC,WAAW,GAAGL,UAAU,CAACG,YAAY,CAAC,SAAS,CAAC,IAC/CH,UAAU,CAACG,YAAY,CAAC,SAAS,CAAC;QACzC,IAAIE,WAAW,EAAE;UACb,MAAMC,OAAO,GAAGD,WAAW,CAACE,KAAK,CAAC,GAAG,CAAC;UACtC,OAAO;YACH3M,KAAK,EAAE,CAAC0M,OAAO,CAAC,CAAC,CAAC;YAClBzM,MAAM,EAAE,CAACyM,OAAO,CAAC,CAAC;UACtB,CAAC;QACL;QACA,MAAMtW,KAAK,CAAC,+EAA+E,CAAC;MAAC;IACjG;IACM0V,6BAA6BA,CAACvY,GAAG,EAAEsW,eAAe,EAAE+C,cAAc,GAAG,KAAK,EAAE;MAAA,IAAAC,MAAA;MAAA,OAAAnkB,sJAAA;QAC9E,MAAMokB,UAAU,SAASD,MAAI,CAAClD,mBAAmB;QACjD,MAAMlE,aAAa,GAAGmD,8BAA8B,CAACkE,UAAU,GAAG,CAAC,CAAC,GAAGvZ,GAAG,CAACiY,mBAAmB,CAAC;QAC/F,IAAI,CAACjY,GAAG,CAAC4X,aAAa,IAAI,CAAC5X,GAAG,CAAC4X,aAAa,CAACzT,QAAQ,EAAE;UACnD,OAAOlO,OAAO,CAACE,MAAM,CAAC,IAAI0M,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACvD;QACA,MAAM4M,WAAW,GAAG;UAChB4C,QAAQ,EAAE;YACNX,SAAS,EAAE1R,GAAG,CAACgY,iBAAiB;YAChCjH,KAAK,EAAE/Q,GAAG,CAAC4X,aAAa;YACxBhH,IAAI,EAAE5Q,GAAG,CAAC8X,iBAAiB,IAAI;cAC3BrL,KAAK,EAAEzM,GAAG,CAAC4X,aAAa,CAAC4B,YAAY;cACrC9M,MAAM,EAAE1M,GAAG,CAAC4X,aAAa,CAAC6B;YAC9B;UACJ,CAAC;UACDvH;QACJ,CAAC;QACD,OAAOoH,MAAI,CAACI,oBAAoB,CAACjK,WAAW,EAAE6G,eAAe,EAAE+C,cAAc,CAAC;MAAC;IACnF;IACMK,oBAAoBA,CAACjK,WAAW,EAAE6G,eAAe,EAAE+C,cAAc,GAAG,KAAK,EAAE;MAAA,IAAAM,MAAA;MAAA,OAAAxkB,sJAAA;QAC7E,MAAMuV,cAAc,GAAG4L,eAAe,CAAC5L,cAAc,GAAG+E,WAAW,CAACyC,aAAa,CAACvb,MAAM;QACxF,MAAMijB,YAAY,GAAGnK,WAAW,CAAC4C,QAAQ,CAACzB,IAAI;QAC9C,IAAI,CAACyI,cAAc,IAAI3O,cAAc,KAAK,CAAC,IAAI,CAAC+E,WAAW,CAACyC,aAAa,CAACsD,IAAI,IAAI,CAACc,eAAe,CAACtL,wBAAwB,EAAE;UACzH,OAAO;YACHqH,QAAQ,EAAE;cACNX,SAAS,EAAEjC,WAAW,CAAC4C,QAAQ,CAACX,SAAS;cACzCX,KAAK,EAAEtB,WAAW,CAAC4C,QAAQ,CAACtB,KAAK;cACjCH,IAAI,EAAE;gBAAE,GAAGgJ;cAAa;YAC5B,CAAC;YACDlJ,WAAW,EAAE;cACTgB,SAAS,EAAEjC,WAAW,CAAC4C,QAAQ,CAACX,SAAS;cACzCX,KAAK,EAAEtB,WAAW,CAAC4C,QAAQ,CAACtB,KAAK;cACjCH,IAAI,EAAE;gBAAE,GAAGgJ;cAAa;YAC5B,CAAC;YACD1H,aAAa,EAAEzC,WAAW,CAACyC;UAC/B,CAAC;QACL;QACA,MAAM2H,eAAe,GAAGF,MAAI,CAACG,kBAAkB,CAACF,YAAY,EAAEnK,WAAW,CAACyC,aAAa,EAAEoE,eAAe,CAAC;QACzG,MAAM9J,MAAM,GAAGuD,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;QAC/CxD,MAAM,CAACC,KAAK,GAAGoN,eAAe,CAACpN,KAAK;QACpCD,MAAM,CAACE,MAAM,GAAGmN,eAAe,CAACnN,MAAM;QACtC,MAAMlU,GAAG,GAAGgU,MAAM,CAACW,UAAU,CAAC,IAAI,CAAC;QACnC3U,GAAG,EAAEmY,YAAY,CAAClB,WAAW,CAACyC,aAAa,CAACsD,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEhJ,MAAM,CAACC,KAAK,GAAG,CAAC,EAAED,MAAM,CAACE,MAAM,GAAG,CAAC,CAAC;QACxGlU,GAAG,EAAE7B,MAAM,CAAC0M,IAAI,CAACwN,EAAE,IAAInG,cAAc,GAAG,CAAC,CAAC,CAAC;QAC3ClS,GAAG,EAAEsY,SAAS,CAACrB,WAAW,CAAC4C,QAAQ,CAACtB,KAAK,EAAE,CAAC6I,YAAY,CAACnN,KAAK,GAAG,CAAC,EAAE,CAACmN,YAAY,CAAClN,MAAM,GAAG,CAAC,CAAC;QAC7F,MAAMtX,IAAI,SAAS,IAAIa,OAAO,CAACC,OAAO,IAAIsW,MAAM,CAACiF,MAAM,CAACvb,OAAO,EAAEogB,eAAe,CAACzM,MAAM,CAAC,CAAC;QACzF,IAAI,CAACzU,IAAI,EAAE;UACP,MAAM,IAAIyN,KAAK,CAAC,2CAA2C,CAAC;QAChE;QACA,MAAM6O,SAAS,GAAGC,GAAG,CAACC,eAAe,CAACxc,IAAI,CAAC;QAC3C,MAAMqb,gBAAgB,SAASkJ,MAAI,CAACI,sBAAsB,CAACrI,SAAS,CAAC;QACrE,OAAO;UACHW,QAAQ,EAAE;YACNX,SAAS,EAAEjC,WAAW,CAAC4C,QAAQ,CAACX,SAAS;YACzCX,KAAK,EAAEtB,WAAW,CAAC4C,QAAQ,CAACtB,KAAK;YACjCH,IAAI,EAAE;cAAE,GAAGgJ;YAAa;UAC5B,CAAC;UACDlJ,WAAW,EAAE;YACTgB,SAAS,EAAEA,SAAS;YACpBX,KAAK,EAAEN,gBAAgB;YACvBG,IAAI,EAAE;cACFnE,KAAK,EAAEgE,gBAAgB,CAAChE,KAAK;cAC7BC,MAAM,EAAE+D,gBAAgB,CAAC/D;YAC7B;UACJ,CAAC;UACDwF,aAAa,EAAEzC,WAAW,CAACyC;QAC/B,CAAC;MAAC;IACN;IACA6H,sBAAsBA,CAACrI,SAAS,EAAE;MAC9B,OAAO,IAAIzb,OAAO,CAAE,CAACC,OAAO,EAAEC,MAAM,KAAK;QACrC,MAAM4a,KAAK,GAAG,IAAImE,KAAK,CAAC,CAAC;QACzBnE,KAAK,CAACza,MAAM,GAAG,MAAMJ,OAAO,CAAC6a,KAAK,CAAC;QACnCA,KAAK,CAACva,OAAO,GAAGL,MAAM;QACtB4a,KAAK,CAACqE,GAAG,GAAG1D,SAAS;MACzB,CAAE,CAAC;IACP;IACAoI,kBAAkBA,CAACF,YAAY,EAAE1H,aAAa,EAAEoE,eAAe,EAAE;MAC7D,MAAM5L,cAAc,GAAG4L,eAAe,CAAC5L,cAAc,GAAGwH,aAAa,CAACvb,MAAM;MAC5E,IAAI2f,eAAe,CAACtL,wBAAwB,EAAE;QAC1C,IAAIN,cAAc,GAAG,CAAC,EAAE;UACpB,MAAMsP,iBAAiB,GAAGJ,YAAY,CAACnN,KAAK,GAAG6J,eAAe,CAACtM,WAAW;UAC1E,MAAMiQ,kBAAkB,GAAGL,YAAY,CAAClN,MAAM,GAAG4J,eAAe,CAACtM,WAAW;UAC5E,OAAO;YACHyC,KAAK,EAAEpJ,IAAI,CAAC4O,GAAG,CAAC2H,YAAY,CAAClN,MAAM,EAAEsN,iBAAiB,CAAC;YACvDtN,MAAM,EAAErJ,IAAI,CAAC4O,GAAG,CAAC2H,YAAY,CAACnN,KAAK,EAAEwN,kBAAkB;UAC3D,CAAC;QACL,CAAC,MACI;UACD,MAAMD,iBAAiB,GAAGJ,YAAY,CAAClN,MAAM,GAAG4J,eAAe,CAACtM,WAAW;UAC3E,MAAMiQ,kBAAkB,GAAGL,YAAY,CAACnN,KAAK,GAAG6J,eAAe,CAACtM,WAAW;UAC3E,OAAO;YACHyC,KAAK,EAAEpJ,IAAI,CAAC4O,GAAG,CAAC2H,YAAY,CAACnN,KAAK,EAAEuN,iBAAiB,CAAC;YACtDtN,MAAM,EAAErJ,IAAI,CAAC4O,GAAG,CAAC2H,YAAY,CAAClN,MAAM,EAAEuN,kBAAkB;UAC5D,CAAC;QACL;MACJ;MACA,IAAIvP,cAAc,GAAG,CAAC,EAAE;QACpB,OAAO;UACHgC,MAAM,EAAEkN,YAAY,CAACnN,KAAK;UAC1BA,KAAK,EAAEmN,YAAY,CAAClN;QACxB,CAAC;MACL;MACA,OAAO;QACHD,KAAK,EAAEmN,YAAY,CAACnN,KAAK;QACzBC,MAAM,EAAEkN,YAAY,CAAClN;MACzB,CAAC;IACL;EACJ;EACAyJ,gBAAgB,CAACzD,IAAI,YAAAwH,yBAAAtH,CAAA;IAAA,YAAAA,CAAA,IAAyFuD,gBAAgB;EAAA,CAAoD;EAClLA,gBAAgB,CAACtD,KAAK,kBA5dyEtb,gEAAE;IAAAwb,KAAA,EA4diBoD,gBAAgB;IAAAnD,OAAA,EAAhBmD,gBAAgB,CAAAzD,IAAA;IAAAO,UAAA,EAAc;EAAM,EAAG;EAAC,OAhMpJkD,gBAAgB;AAAA;AAiMtB;EAAA,QAAAjD,SAAA,oBAAAA,SAAA;AAAA;AAGc,IAER1e,qBAAqB;EAA3B,MAAMA,qBAAqB,CAAC;IACxBC,WAAWA,CAAC0lB,WAAW,EAAEC,sBAAsB,EAAEC,gBAAgB,EAAEC,SAAS,EAAEC,EAAE,EAAEC,IAAI,EAAEC,YAAY,EAAE;MAClG,IAAI,CAACN,WAAW,GAAGA,WAAW;MAC9B,IAAI,CAACC,sBAAsB,GAAGA,sBAAsB;MACpD,IAAI,CAACC,gBAAgB,GAAGA,gBAAgB;MACxC,IAAI,CAACC,SAAS,GAAGA,SAAS;MAC1B,IAAI,CAACC,EAAE,GAAGA,EAAE;MACZ,IAAI,CAACC,IAAI,GAAGA,IAAI;MAChB,IAAI,CAACC,YAAY,GAAGA,YAAY;MAChC,IAAI,CAAC/K,QAAQ,GAAG,IAAI9F,eAAe,CAAC,CAAC;MACrC,IAAI,CAAC8Q,sBAAsB,GAAG,CAAC;MAC/B,IAAI,CAACC,kBAAkB,GAAG,KAAK;MAC/B,IAAI,CAACnR,UAAU,GAAG,KAAK;MACvB,IAAI,CAACmG,OAAO,GAAG;QACXlD,KAAK,EAAE,CAAC;QACRC,MAAM,EAAE;MACZ,CAAC;MACD,IAAI,CAAC5G,SAAS,GAAGmG,SAAS;MAC1B,IAAI,CAAC5F,YAAY,GAAG,KAAK;MACzB,IAAI,CAACqD,qBAAqB,GAAG,IAAI,CAACgG,QAAQ,CAAChG,qBAAqB;MAChE,IAAI,CAACI,MAAM,GAAG,IAAI,CAAC4F,QAAQ,CAAC5F,MAAM;MAClC,IAAI,CAACD,MAAM,GAAG,IAAI,CAAC6F,QAAQ,CAAC7F,MAAM;MAClC,IAAI,CAAC/U,SAAS,GAAG,CAAC,CAAC;MACnB,IAAI,CAACiV,mBAAmB,GAAG,IAAI,CAAC2F,QAAQ,CAAC3F,mBAAmB;MAC5D,IAAI,CAACC,WAAW,GAAG,IAAI,CAAC0F,QAAQ,CAAC1F,WAAW;MAC5C,IAAI,CAACC,4BAA4B,GAAG,IAAI,CAACyF,QAAQ,CAACzF,4BAA4B;MAC9E,IAAI,CAACC,aAAa,GAAG,IAAI,CAACwF,QAAQ,CAACxF,aAAa;MAChD,IAAI,CAACC,cAAc,GAAG,IAAI,CAACuF,QAAQ,CAACvF,cAAc;MAClD,IAAI,CAACC,eAAe,GAAG,IAAI,CAACsF,QAAQ,CAACtF,eAAe;MACpD,IAAI,CAACC,gBAAgB,GAAG,IAAI,CAACqF,QAAQ,CAACrF,gBAAgB;MACtD,IAAI,CAACC,gBAAgB,GAAG,IAAI,CAACoF,QAAQ,CAACpF,gBAAgB;MACtD,IAAI,CAACC,eAAe,GAAG,IAAI,CAACmF,QAAQ,CAACnF,eAAe;MACpD,IAAI,CAACC,kBAAkB,GAAG,IAAI,CAACkF,QAAQ,CAAClF,kBAAkB;MAC1D,IAAI,CAACC,mBAAmB,GAAG,IAAI,CAACiF,QAAQ,CAACjF,mBAAmB;MAC5D,IAAI,CAACC,cAAc,GAAG,IAAI,CAACgF,QAAQ,CAAChF,cAAc;MAClD,IAAI,CAACC,eAAe,GAAG,IAAI,CAAC+E,QAAQ,CAAC/E,eAAe;MACpD,IAAI,CAAClB,YAAY,GAAG,IAAI,CAACiG,QAAQ,CAACjG,YAAY;MAC9C,IAAI,CAACmB,aAAa,GAAG,IAAI,CAAC8E,QAAQ,CAAC9E,aAAa;MAChD,IAAI,CAACC,YAAY,GAAG,IAAI,CAAC6E,QAAQ,CAAC7E,YAAY;MAC9C,IAAI,CAACC,QAAQ,GAAG,IAAI,CAAC4E,QAAQ,CAAC5E,QAAQ;MACtC,IAAI,CAACC,eAAe,GAAG,IAAI,CAAC2E,QAAQ,CAAC3E,eAAe;MACpD,IAAI,CAACC,wBAAwB,GAAG,IAAI,CAAC0E,QAAQ,CAAC1E,wBAAwB;MACtE,IAAI,CAACrB,iBAAiB,GAAG,IAAI,CAAC+F,QAAQ,CAAC/F,iBAAiB;MACxD,IAAI,CAACnD,cAAc,GAAG,KAAK;MAC3B,IAAI,CAAC0C,OAAO,GAAG;QACXE,EAAE,EAAE,CAAC,GAAG;QACRD,EAAE,EAAE,CAAC,GAAG;QACRE,EAAE,EAAE,KAAK;QACTC,EAAE,EAAE;MACR,CAAC;MACD,IAAI,CAACC,UAAU,GAAG,IAAI,CAACmG,QAAQ,CAACnG,UAAU;MAC1C,IAAI,CAAChD,QAAQ,GAAG,KAAK;MACrB,IAAI,CAACqU,MAAM,GAAG,KAAK;MACnB,IAAI,CAACC,YAAY,GAAG,IAAI5mB,uDAAY,CAAC,CAAC;MACtC,IAAI,CAAC6mB,cAAc,GAAG,IAAI7mB,uDAAY,CAAC,CAAC;MACxC,IAAI,CAAC8mB,WAAW,GAAG,IAAI9mB,uDAAY,CAAC,CAAC;MACrC,IAAI,CAAC+mB,YAAY,GAAG,IAAI/mB,uDAAY,CAAC,CAAC;MACtC,IAAI,CAACgnB,eAAe,GAAG,IAAIhnB,uDAAY,CAAC,CAAC;MACzC,IAAI,CAACinB,eAAe,GAAG,IAAIjnB,uDAAY,CAAC,CAAC;MACzC,IAAI,CAACknB,KAAK,CAAC,CAAC;IAChB;IACAC,WAAWA,CAACrP,OAAO,EAAE;MACjB,IAAI,CAACsP,uBAAuB,CAACtP,OAAO,CAAC;MACrC,IAAI,CAACuP,mBAAmB,CAACvP,OAAO,CAAC;MACjC,IAAI,IAAI,CAAC0D,WAAW,EAAE4C,QAAQ,CAACtB,KAAK,CAAC5M,QAAQ,KAAK4H,OAAO,CAAC,0BAA0B,CAAC,IAAIA,OAAO,CAAC,gBAAgB,CAAC,CAAC,EAAE;QACjH,IAAI,CAACsO,gBAAgB,CAChBX,oBAAoB,CAAC,IAAI,CAACjK,WAAW,EAAE,IAAI,CAACC,QAAQ,CAAC,CACrD6L,IAAI,CAAEvb,GAAG,IAAK,IAAI,CAACwb,cAAc,CAACxb,GAAG,CAAC,CAAC,CACvCyb,KAAK,CAAEC,GAAG,IAAK,IAAI,CAACvV,cAAc,CAACuV,GAAG,CAAC,CAAC;MACjD;MACA,IAAI3P,OAAO,CAAC,SAAS,CAAC,IAAIA,OAAO,CAAC,qBAAqB,CAAC,IAAIA,OAAO,CAAC,aAAa,CAAC,EAAE;QAChF,IAAI,CAAC4P,UAAU,CAAC,CAAC;QACjB,IAAI,CAACC,uBAAuB,CAAC,CAAC;QAC9B,IAAI,CAACC,uBAAuB,CAAC,CAAC;QAC9B,IAAI,IAAI,CAAC9R,mBAAmB,KACvB,IAAI,CAACE,4BAA4B,IAAI,CAAC,IAAI,CAAC6R,oBAAoB,CAAC,CAAC,CAAC,KAClE/P,OAAO,CAAC,qBAAqB,CAAC,IAAIA,OAAO,CAAC,aAAa,CAAC,CAAC,EAAE;UAC5D,IAAI,CAACqH,oBAAoB,CAAC,CAAC;QAC/B,CAAC,MACI,IAAIrH,OAAO,CAAC,SAAS,CAAC,EAAE;UACzB,IAAI,CAACgQ,oBAAoB,CAAC,KAAK,CAAC;UAChC,IAAI,CAACC,UAAU,CAAC,CAAC;QACrB;MACJ;MACA,IAAIjQ,OAAO,CAAC,WAAW,CAAC,EAAE;QACtB,IAAI,CAACjX,SAAS,GAAG,IAAI,CAACA,SAAS,IAAI,CAAC,CAAC;QACrC,IAAI,CAACmnB,eAAe,CAAC,CAAC;QACtB,IAAI,CAACD,UAAU,CAAC,CAAC;MACrB;MACA,IAAIjQ,OAAO,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC4O,kBAAkB,IAAI,CAAC,IAAI,CAACC,MAAM,EAAE;QAC9Dla,UAAU,CAAC,MAAM;UACb,IAAI,CAACwb,QAAQ,CAAC,CAAC;UACf,IAAI,CAACvB,kBAAkB,GAAG,KAAK;QACnC,CAAC,CAAC;MACN;IACJ;IACAU,uBAAuBA,CAACtP,OAAO,EAAE;MAC7B,IAAI,CAAC2D,QAAQ,CAAC5D,qBAAqB,CAACC,OAAO,CAAC;MAC5C,IAAI,IAAI,CAAC2D,QAAQ,CAACjF,mBAAmB,IAAI,IAAI,CAACiF,QAAQ,CAAClF,kBAAkB,EAAE;QACvE,IAAI,CAACb,iBAAiB,GAAG,IAAI;QAC7B,IAAI,CAAC+F,QAAQ,CAACpE,UAAU,CAAC;UACrB3B,iBAAiB,EAAE,IAAI;UACvBS,eAAe,EAAE,IAAI,CAACsF,QAAQ,CAAClF,kBAAkB;UACjDH,gBAAgB,EAAE,IAAI,CAACqF,QAAQ,CAACjF,mBAAmB;UACnDH,gBAAgB,EAAE,IAAI,CAACoF,QAAQ,CAACjF,mBAAmB;UACnDF,eAAe,EAAE,IAAI,CAACmF,QAAQ,CAAClF,kBAAkB;UACjDT,mBAAmB,EAAE;QACzB,CAAC,CAAC;MACN;IACJ;IACAuR,mBAAmBA,CAACvP,OAAO,EAAE;MACzB,IAAIA,OAAO,CAAC,mBAAmB,CAAC,IAAIA,OAAO,CAAC,UAAU,CAAC,IAAIA,OAAO,CAAC,aAAa,CAAC,IAAIA,OAAO,CAAC,WAAW,CAAC,EAAE;QACvG,IAAI,CAACoP,KAAK,CAAC,CAAC;MAChB;MACA,IAAIpP,OAAO,CAAC,mBAAmB,CAAC,IAAI,IAAI,CAACoQ,wBAAwB,CAAC,CAAC,EAAE;QACjE,IAAI,CAAC9F,aAAa,CAAC,IAAI,CAAC+F,iBAAiB,CAAC1mB,MAAM,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC;MAC9D;MACA,IAAImW,OAAO,CAAC,UAAU,CAAC,IAAI,IAAI,CAACsQ,QAAQ,EAAE;QACtC,IAAI,CAACzF,gBAAgB,CAAC,IAAI,CAACyF,QAAQ,CAAC;MACxC;MACA,IAAItQ,OAAO,CAAC,aAAa,CAAC,IAAI,IAAI,CAACkL,WAAW,EAAE;QAC5C,IAAI,CAACD,eAAe,CAAC,IAAI,CAACC,WAAW,CAAC;MAC1C;MACA,IAAIlL,OAAO,CAAC,WAAW,CAAC,IAAI,IAAI,CAACuQ,SAAS,EAAE;QACxC,IAAI,CAACjG,aAAa,CAAC,IAAI,CAACiG,SAAS,CAAC;MACtC;IACJ;IACAH,wBAAwBA,CAAA,EAAG;MACvB,OAAO,IAAI,CAACC,iBAAiB,EAAE1mB,MAAM,EAAEE,KAAK,EAAEC,MAAM,GAAG,CAAC;IAC5D;IACAomB,eAAeA,CAAA,EAAG;MACd,MAAMpK,aAAa,GAAG,IAAI,CAAC/c,SAAS,EAAE+c,aAAa,IAAI,GAAG;MAC1D,IAAI,CAACvL,kBAAkB,GAAG,IAAI,CAACgU,SAAS,CAACiC,wBAAwB,CAAE,aAAY,IAAI,CAACznB,SAAS,CAACwb,UAAU,IAAI,CAAE,GAAEuB,aAAc,KAAI,IAAI,CAAC/c,SAAS,CAACyb,UAAU,IAAI,CAAE,GAAEsB,aAAc,GAAE,GAC/K,UAAU,GAAG,CAAC,IAAI,CAAC/c,SAAS,CAACC,KAAK,IAAI,CAAC,KAAK,IAAI,CAACD,SAAS,CAACiC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAChF,UAAU,GAAG,CAAC,IAAI,CAACjC,SAAS,CAACC,KAAK,IAAI,CAAC,KAAK,IAAI,CAACD,SAAS,CAACub,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAChF,UAAU,IAAI,IAAI,CAACvb,SAAS,CAAC6B,MAAM,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC;IAC3D;IACA6lB,QAAQA,CAAA,EAAG;MACP,IAAI,CAAC9M,QAAQ,CAACrE,QAAQ,GAAG,IAAI,CAACV,eAAe;MAC7C,IAAI,CAAC8R,oBAAoB,CAAC,CAAC;IAC/B;IACAtB,KAAKA,CAAA,EAAG;MACJ,IAAI,CAAC9U,YAAY,GAAG,KAAK;MACzB,IAAI,CAACoJ,WAAW,GAAG1V,SAAS;MAC5B,IAAI,CAAC0M,cAAc,GAAG,kCAAkC,GAClD,2DAA2D,GAC3D,2BAA2B;MACjC,IAAI,CAACmN,SAAS,GAAG;QACb8I,MAAM,EAAE,KAAK;QACb5mB,IAAI,EAAE,IAAI;QACVse,QAAQ,EAAE,IAAI;QACdhL,EAAE,EAAE,CAAC;QACLD,EAAE,EAAE,CAAC;QACLE,EAAE,EAAE,CAAC;QACLC,EAAE,EAAE,CAAC;QACL+C,OAAO,EAAE,CAAC;QACVC,OAAO,EAAE;MACb,CAAC;MACD,IAAI,CAACqD,OAAO,GAAG;QACXlD,KAAK,EAAE,CAAC;QACRC,MAAM,EAAE;MACZ,CAAC;MACD,IAAI,CAACxD,OAAO,CAACE,EAAE,GAAG,CAAC,GAAG;MACtB,IAAI,CAACF,OAAO,CAACC,EAAE,GAAG,CAAC,GAAG;MACtB,IAAI,CAACD,OAAO,CAACG,EAAE,GAAG,KAAK;MACvB,IAAI,CAACH,OAAO,CAACI,EAAE,GAAG,KAAK;IAC3B;IACA+M,aAAaA,CAACtV,IAAI,EAAE;MAChB,IAAI,CAACsZ,gBAAgB,CAChBhE,aAAa,CAACtV,IAAI,EAAE,IAAI,CAAC2O,QAAQ,CAAC,CAClC6L,IAAI,CAAEvb,GAAG,IAAK,IAAI,CAACwb,cAAc,CAACxb,GAAG,CAAC,CAAC,CACvCyb,KAAK,CAAEC,GAAG,IAAK,IAAI,CAACvV,cAAc,CAACuV,GAAG,CAAC,CAAC;IACjD;IACA1E,eAAeA,CAACC,WAAW,EAAE;MACzB,IAAI,CAACoD,gBAAgB,CAChBrD,eAAe,CAACC,WAAW,EAAE,IAAI,CAACvH,QAAQ,CAAC,CAC3C6L,IAAI,CAAEvb,GAAG,IAAK,IAAI,CAACwb,cAAc,CAACxb,GAAG,CAAC,CAAC,CACvCyb,KAAK,CAAEC,GAAG,IAAK,IAAI,CAACvV,cAAc,CAACuV,GAAG,CAAC,CAAC;IACjD;IACA9E,gBAAgBA,CAACC,GAAG,EAAE;MAClB,IAAI,CAACwD,gBAAgB,CAChBzD,gBAAgB,CAACC,GAAG,EAAE,IAAI,CAACnH,QAAQ,CAAC,CACpC6L,IAAI,CAAEvb,GAAG,IAAK,IAAI,CAACwb,cAAc,CAACxb,GAAG,CAAC,CAAC,CACvCyb,KAAK,CAAEC,GAAG,IAAK,IAAI,CAACvV,cAAc,CAACuV,GAAG,CAAC,CAAC;IACjD;IACAF,cAAcA,CAAC/L,WAAW,EAAE;MACxB,IAAI,CAACA,WAAW,GAAGA,WAAW;MAC9B,IAAI,CAAChJ,cAAc,GAAG,IAAI,CAAC6T,SAAS,CAACqC,8BAA8B,CAAClN,WAAW,CAACiB,WAAW,CAACgB,SAAS,CAAC;MACtG,IAAI,CAAC6I,EAAE,CAACqC,YAAY,CAAC,CAAC;IAC1B;IACAzW,cAAcA,CAAC3F,KAAK,EAAE;MAClBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpB,IAAI,CAACya,eAAe,CAAC1lB,IAAI,CAAC,CAAC;IAC/B;IACAmQ,iBAAiBA,CAAA,EAAG;MAChB,IAAI,IAAI,CAAC+J,WAAW,IAAI,IAAI,EAAE;QAC1B,IAAI,CAACsL,WAAW,CAACxlB,IAAI,CAAC,IAAI,CAACka,WAAW,CAAC;QACvC,IAAI,CAACiL,sBAAsB,GAAG,CAAC;QAC/Bha,UAAU,CAAC,MAAM,IAAI,CAACmc,4BAA4B,CAAC,CAAC,CAAC;MACzD;IACJ;IACAA,4BAA4BA,CAAA,EAAG;MAC3B,IAAI,IAAI,CAACnC,sBAAsB,GAAG,EAAE,EAAE;QAClC,IAAI,CAACO,eAAe,CAAC1lB,IAAI,CAAC,CAAC;MAC/B,CAAC,MACI,IAAI,IAAI,CAACunB,iBAAiB,CAAC,CAAC,EAAE;QAC/B,IAAI,CAACnB,UAAU,CAAC,CAAC;QACjB,IAAI,CAACC,uBAAuB,CAAC,CAAC;QAC9B,IAAI,CAACC,uBAAuB,CAAC,CAAC;QAC9B,IAAI,CAACzI,oBAAoB,CAAC,CAAC;QAC3B,IAAI,CAAC4H,YAAY,CAACzlB,IAAI,CAAC;UAAE,GAAG,IAAI,CAACoa;QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC4K,EAAE,CAACqC,YAAY,CAAC,CAAC;MAC1B,CAAC,MACI;QACD,IAAI,CAAClC,sBAAsB,EAAE;QAC7Bha,UAAU,CAAC,MAAM,IAAI,CAACmc,4BAA4B,CAAC,CAAC,EAAE,EAAE,CAAC;MAC7D;IACJ;IACAC,iBAAiBA,CAAA,EAAG;MAChB,OAAO,IAAI,CAACzJ,WAAW,EAAEC,aAAa,EAAEyJ,WAAW,GAAG,CAAC;IAC3D;IACAb,QAAQA,CAAA,EAAG;MACP,IAAI,CAAC,IAAI,CAACzM,WAAW,EAAE;QACnB;MACJ;MACA,IAAI,IAAI,CAACmL,MAAM,EAAE;QACb,IAAI,CAACD,kBAAkB,GAAG,IAAI;MAClC,CAAC,MACI;QACD,MAAMqC,UAAU,GAAG;UAAE,GAAG,IAAI,CAACrN;QAAQ,CAAC;QACtC,IAAI,CAACgM,UAAU,CAAC,CAAC;QACjB,IAAI,CAACsB,qBAAqB,CAACD,UAAU,CAAC;QACtC,IAAI,CAACpB,uBAAuB,CAAC,CAAC;QAC9B,IAAI,CAACC,uBAAuB,CAAC,CAAC;MAClC;IACJ;IACMY,oBAAoBA,CAAA,EAAG;MAAA,IAAAS,MAAA;MAAA,OAAA/nB,sJAAA;QACzB;QACA,MAAM+nB,MAAI,CAACzC,YAAY,GAAG,CAAC;QAC3B,MAAM0C,MAAM,GAAGC,MAAM,GAAG,QAAQ,CAAC,IAAI,IAAI;QACzC,IAAID,MAAM,EAAE;UACR,MAAME,MAAM,GAAG,IAAIF,MAAM,CAACD,MAAI,CAACI,OAAO,CAAChK,aAAa,CAAC;UACrD+J,MAAM,CAACpd,GAAG,CAAC,OAAO,CAAC,CAACsd,GAAG,CAAC;YAAEC,MAAM,EAAE;UAAK,CAAC,CAAC;UACzCH,MAAM,CAACI,EAAE,CAAC,WAAW,EAAEP,MAAI,CAACQ,OAAO,CAACC,IAAI,CAACT,MAAI,CAAC,CAAC;UAC/CG,MAAM,CAACI,EAAE,CAAC,UAAU,EAAEP,MAAI,CAACU,SAAS,CAACD,IAAI,CAACT,MAAI,CAAC,CAAC;UAChDG,MAAM,CAACI,EAAE,CAAC,YAAY,EAAEP,MAAI,CAACW,UAAU,CAACF,IAAI,CAACT,MAAI,CAAC,CAAC;QACvD,CAAC,MACI,IAAI5Y,wDAAS,CAAC,CAAC,EAAE;UAClB7D,OAAO,CAACqd,IAAI,CAAC,uEAAuE,CAAC;QACzF;MAAC;IACL;IACAb,qBAAqBA,CAACD,UAAU,EAAE;MAC9B,IAAIA,UAAU,CAACvQ,KAAK,KAAK,IAAI,CAACkD,OAAO,CAAClD,KAAK,IAAIuQ,UAAU,CAACtQ,MAAM,KAAK,IAAI,CAACiD,OAAO,CAACjD,MAAM,EAAE;QACtF,IAAI,CAACxD,OAAO,CAACE,EAAE,GAAG,IAAI,CAACF,OAAO,CAACE,EAAE,GAAG,IAAI,CAACuG,OAAO,CAAClD,KAAK,GAAGuQ,UAAU,CAACvQ,KAAK;QACzE,IAAI,CAACvD,OAAO,CAACG,EAAE,GAAG,IAAI,CAACH,OAAO,CAACG,EAAE,GAAG,IAAI,CAACsG,OAAO,CAAClD,KAAK,GAAGuQ,UAAU,CAACvQ,KAAK;QACzE,IAAI,CAACvD,OAAO,CAACC,EAAE,GAAG,IAAI,CAACD,OAAO,CAACC,EAAE,GAAG,IAAI,CAACwG,OAAO,CAACjD,MAAM,GAAGsQ,UAAU,CAACtQ,MAAM;QAC3E,IAAI,CAACxD,OAAO,CAACI,EAAE,GAAG,IAAI,CAACJ,OAAO,CAACI,EAAE,GAAG,IAAI,CAACqG,OAAO,CAACjD,MAAM,GAAGsQ,UAAU,CAACtQ,MAAM;MAC/E;IACJ;IACA0G,oBAAoBA,CAAA,EAAG;MACnB,IAAI,CAACgH,sBAAsB,CAAChH,oBAAoB,CAAC,IAAI,CAACC,WAAW,EAAE,IAAI,CAACnK,OAAO,EAAE,IAAI,CAACwG,QAAQ,EAAE,IAAI,CAACC,OAAO,CAAC;MAC7G,IAAI,CAACqM,UAAU,CAAC,CAAC;MACjB,IAAI,CAAC3V,YAAY,GAAG,IAAI;IAC5B;IACAuC,cAAcA,CAAC3T,KAAK,EAAE;MAClB,IAAI,CAAC8oB,sBAAsB,CAAC9oB,KAAK,CAAC;MAClC,IAAI,CAAC+oB,mBAAmB,CAAC/oB,KAAK,CAAC;IACnC;IACA8oB,sBAAsBA,CAAC9oB,KAAK,EAAE;MAC1B,MAAM+B,GAAG,GAAG,CAAC/B,KAAK,CAAC+B,GAAG;MACtB,IAAIA,GAAG,IAAI,CAAC,IAAIA,GAAG,IAAI,CAAC,EAAE;QACtB,IAAI,CAAC0Y,QAAQ,CAACrE,QAAQ,GAAGrU,GAAG;MAChC;IACJ;IACAgnB,mBAAmBA,CAAC/oB,KAAK,EAAE;MACvB,MAAMgpB,iBAAiB,GAAG,CAAC,SAAS,EAAE,WAAW,EAAE,YAAY,EAAE,WAAW,CAAC;MAC7E,IAAI,CAAEA,iBAAiB,CAACC,QAAQ,CAACjpB,KAAK,CAAC+B,GAAG,CAAE,EAAE;QAC1C;MACJ;MACA,MAAMmnB,QAAQ,GAAGlpB,KAAK,CAACmpB,QAAQ,GAAGnS,SAAS,CAACjF,MAAM,GAAGiF,SAAS,CAAClD,IAAI;MACnE,MAAMqL,QAAQ,GAAGnf,KAAK,CAACopB,MAAM,GAAGlS,yBAAyB,CAAClX,KAAK,CAAC+B,GAAG,CAAC,GAAGkV,iBAAiB,CAACjX,KAAK,CAAC+B,GAAG,CAAC;MACnG,MAAMsnB,SAAS,GAAGlS,cAAc,CAACnX,KAAK,CAAC+B,GAAG,EAAE,IAAI,CAAC0Y,QAAQ,CAACrE,QAAQ,CAAC;MACnEpW,KAAK,CAACspB,cAAc,CAAC,CAAC;MACtBtpB,KAAK,CAACupB,eAAe,CAAC,CAAC;MACvB,IAAI,CAAC3Y,SAAS,CAAC;QAAEwG,OAAO,EAAE,CAAC;QAAEC,OAAO,EAAE;MAAE,CAAC,EAAE6R,QAAQ,EAAE/J,QAAQ,CAAC;MAC9D,IAAI,CAACqK,eAAe,CAACH,SAAS,CAAC;MAC/B,IAAI,CAACI,aAAa,CAAC,CAAC;IACxB;IACA7Y,SAASA,CAAC5Q,KAAK,EAAEkpB,QAAQ,EAAE/J,QAAQ,GAAG,IAAI,EAAE;MACxC,IAAI,IAAI,CAAC7N,QAAQ,IACV,IAAI,CAACqN,SAAS,EAAE8I,MAAM,IAAI,IAAI,CAAC9I,SAAS,EAAE9d,IAAI,KAAKmW,SAAS,CAAC0S,KAAK,IAClER,QAAQ,KAAKlS,SAAS,CAAClG,IAAI,IAAI,CAAC,IAAI,CAACS,cAAc,EAAE;QACxD;MACJ;MACA,IAAIvR,KAAK,CAACspB,cAAc,EAAE;QACtBtpB,KAAK,CAACspB,cAAc,CAAC,CAAC;MAC1B;MACA,IAAI,CAAC3K,SAAS,GAAG;QACb8I,MAAM,EAAE,IAAI;QACZ5mB,IAAI,EAAEqoB,QAAQ;QACd/J,QAAQ;QACRtf,SAAS,EAAE;UAAE,GAAG,IAAI,CAACA;QAAU,CAAC;QAChCuX,OAAO,EAAE,IAAI,CAAC+N,sBAAsB,CAACtG,UAAU,CAAC7e,KAAK,CAAC;QACtDqX,OAAO,EAAE,IAAI,CAAC8N,sBAAsB,CAACpG,UAAU,CAAC/e,KAAK,CAAC;QACtD,GAAG,IAAI,CAACiU;MACZ,CAAC;MACD,IAAI,CAAC0V,aAAa,CAAC,CAAC;IACxB;IACAA,aAAaA,CAAA,EAAG;MACZxZ,2CAAK,CAACC,+CAAS,CAAC0K,QAAQ,EAAE,WAAW,CAAC,EAAE1K,+CAAS,CAAC0K,QAAQ,EAAE,WAAW,CAAC,CAAC,CAAC8O,IAAI,CAAC3Z,yDAAS,CAACE,2CAAK,CAACC,+CAAS,CAAC0K,QAAQ,EAAE,SAAS,CAAC,EAAE1K,+CAAS,CAAC0K,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC8O,IAAI,CAAC1Z,qDAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAC1KnB,SAAS,CAAC;QACXC,IAAI,EAAGhP,KAAK,IAAK,IAAI,CAACulB,IAAI,CAACsE,GAAG,CAAC,MAAM;UACjC,IAAI,CAACL,eAAe,CAACxpB,KAAK,CAAC;UAC3B,IAAI,CAACslB,EAAE,CAACqC,YAAY,CAAC,CAAC;QAC1B,CAAC,CAAC;QACFzY,QAAQ,EAAEA,CAAA,KAAM,IAAI,CAACqW,IAAI,CAACsE,GAAG,CAAC,MAAM;UAChC,IAAI,CAACJ,aAAa,CAAC,CAAC;UACpB,IAAI,CAACnE,EAAE,CAACqC,YAAY,CAAC,CAAC;QAC1B,CAAC;MACL,CAAC,CAAC;IACN;IACAiB,UAAUA,CAAC5oB,KAAK,EAAE;MACd,IAAI,CAAC,IAAI,CAACwR,cAAc,EAAE;QACtB;MACJ;MACA,IAAIxR,KAAK,CAACspB,cAAc,EAAE;QACtBtpB,KAAK,CAACspB,cAAc,CAAC,CAAC;MAC1B;MACA,IAAI,CAAC3K,SAAS,GAAG;QACb8I,MAAM,EAAE,IAAI;QACZ5mB,IAAI,EAAEmW,SAAS,CAAC0S,KAAK;QACrBvK,QAAQ,EAAE,QAAQ;QAClB/H,OAAO,EAAE,IAAI,CAACnD,OAAO,CAACE,EAAE,GAAG,CAAC,IAAI,CAACF,OAAO,CAACG,EAAE,GAAG,IAAI,CAACH,OAAO,CAACE,EAAE,IAAI,CAAC;QAClEkD,OAAO,EAAE,IAAI,CAACpD,OAAO,CAACC,EAAE,GAAG,CAAC,IAAI,CAACD,OAAO,CAACI,EAAE,GAAG,IAAI,CAACJ,OAAO,CAACC,EAAE,IAAI,CAAC;QAClE,GAAG,IAAI,CAACD;MACZ,CAAC;IACL;IACAuV,eAAeA,CAACxpB,KAAK,EAAE;MACnB,IAAI,IAAI,CAAC2e,SAAS,CAAC8I,MAAM,EAAE;QACvB,IAAIznB,KAAK,CAACupB,eAAe,EAAE;UACvBvpB,KAAK,CAACupB,eAAe,CAAC,CAAC;QAC3B;QACA,IAAIvpB,KAAK,CAACspB,cAAc,EAAE;UACtBtpB,KAAK,CAACspB,cAAc,CAAC,CAAC;QAC1B;QACA,IAAI,IAAI,CAAC3K,SAAS,CAAC9d,IAAI,KAAKmW,SAAS,CAAClD,IAAI,EAAE;UACxC,IAAI,CAACqR,sBAAsB,CAACzG,IAAI,CAAC1e,KAAK,EAAE,IAAI,CAAC2e,SAAS,EAAE,IAAI,CAAC1K,OAAO,CAAC;UACrE,IAAI,CAAC6S,oBAAoB,CAAC,IAAI,CAAC;QACnC,CAAC,MACI,IAAI,IAAI,CAACnI,SAAS,CAAC9d,IAAI,KAAKmW,SAAS,CAACjF,MAAM,EAAE;UAC/C,IAAI,CAAC,IAAI,CAACwD,kBAAkB,IAAI,CAAC,IAAI,CAACC,mBAAmB,EAAE;YACvD,IAAI,CAAC2P,sBAAsB,CAACnG,MAAM,CAAChf,KAAK,EAAE,IAAI,CAAC2e,SAAS,EAAE,IAAI,CAAC1K,OAAO,EAAE,IAAI,CAACyG,OAAO,EAAE,IAAI,CAACD,QAAQ,CAAC;UACxG;UACA,IAAI,CAACqM,oBAAoB,CAAC,KAAK,CAAC;QACpC,CAAC,MACI,IAAI,IAAI,CAACnI,SAAS,CAAC9d,IAAI,KAAKmW,SAAS,CAAClG,IAAI,EAAE;UAC7C,MAAM8N,KAAK,GAAG,IAAI,CAACuG,sBAAsB,CAACtG,UAAU,CAAC7e,KAAK,CAAC,GAAG,IAAI,CAAC2e,SAAS,CAACvH,OAAO;UACpF,MAAM0H,KAAK,GAAG,IAAI,CAACqG,sBAAsB,CAACpG,UAAU,CAAC/e,KAAK,CAAC,GAAG,IAAI,CAAC2e,SAAS,CAACtH,OAAO;UACpF,IAAI,CAACxX,SAAS,GAAG;YACb,GAAG,IAAI,CAACA,SAAS;YACjBwb,UAAU,EAAE,CAAC,IAAI,CAACsD,SAAS,CAAC9e,SAAS,EAAEwb,UAAU,IAAI,CAAC,IAAIuD,KAAK;YAC/DtD,UAAU,EAAE,CAAC,IAAI,CAACqD,SAAS,CAAC9e,SAAS,EAAEyb,UAAU,IAAI,CAAC,IAAIwD;UAC9D,CAAC;UACD,IAAI,CAACkI,eAAe,CAAC,CAAC;QAC1B;MACJ;IACJ;IACAyB,OAAOA,CAACzoB,KAAK,EAAE;MACX,IAAI,IAAI,CAAC2e,SAAS,CAAC8I,MAAM,EAAE;QACvB,IAAIznB,KAAK,CAACupB,eAAe,EAAE;UACvBvpB,KAAK,CAACupB,eAAe,CAAC,CAAC;QAC3B;QACA,IAAIvpB,KAAK,CAACspB,cAAc,EAAE;UACtBtpB,KAAK,CAACspB,cAAc,CAAC,CAAC;QAC1B;QACA,IAAI,IAAI,CAAC3K,SAAS,CAAC9d,IAAI,KAAKmW,SAAS,CAAC0S,KAAK,EAAE;UACzC,IAAI,CAACvE,sBAAsB,CAACnG,MAAM,CAAChf,KAAK,EAAE,IAAI,CAAC2e,SAAS,EAAE,IAAI,CAAC1K,OAAO,EAAE,IAAI,CAACyG,OAAO,EAAE,IAAI,CAACD,QAAQ,CAAC;UACpG,IAAI,CAACqM,oBAAoB,CAAC,KAAK,CAAC;QACpC;QACA,IAAI,CAACxB,EAAE,CAACqC,YAAY,CAAC,CAAC;MAC1B;IACJ;IACAjB,UAAUA,CAAA,EAAG;MACT,IAAI,IAAI,CAACtI,WAAW,EAAE;QAClB,MAAM0L,gBAAgB,GAAGC,gBAAgB,CAAC,IAAI,CAAC3L,WAAW,CAACC,aAAa,CAAC;QACzE,IAAI,CAAC3D,OAAO,CAAClD,KAAK,GAAGwS,UAAU,CAACF,gBAAgB,CAACtS,KAAK,CAAC;QACvD,IAAI,CAACkD,OAAO,CAACjD,MAAM,GAAGuS,UAAU,CAACF,gBAAgB,CAACrS,MAAM,CAAC;QACzD,IAAI,CAAClD,UAAU,GAAG,IAAI,CAAC8Q,SAAS,CAACiC,wBAAwB,CAAC,aAAa,GAAG,IAAI,CAAC5M,OAAO,CAAClD,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC;MAC7G;IACJ;IACAmP,uBAAuBA,CAAA,EAAG;MACtB,IAAI,IAAI,CAACnM,WAAW,EAAEiB,WAAW,EAAEK,KAAK,EAAE;QACtC,IAAI,CAACmO,wBAAwB,CAAC,CAAC;QAC/B,IAAI,CAACC,yBAAyB,CAAC,CAAC;MACpC,CAAC,MACI;QACD,IAAI,CAACzP,QAAQ,CAACzE,qBAAqB,GAAG,EAAE;QACxC,IAAI,CAACyE,QAAQ,CAACxE,sBAAsB,GAAG,EAAE;MAC7C;IACJ;IACAgU,wBAAwBA,CAAA,EAAG;MACvB,IAAI,CAACxP,QAAQ,CAACzE,qBAAqB,GAAG,IAAI,CAACb,eAAe,GAAG,CAAC,GACxD/G,IAAI,CAAC4O,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC7H,eAAe,GAAG,IAAI,CAACqF,WAAW,CAACiB,WAAW,CAACK,KAAK,CAACtE,KAAK,GAAG,IAAI,CAACkD,OAAO,CAAClD,KAAK,CAAC,GAClG,EAAE;IACZ;IACA0S,yBAAyBA,CAAA,EAAG;MACxB,IAAI,IAAI,CAACpV,mBAAmB,EAAE;QAC1B,IAAI,CAAC2F,QAAQ,CAACxE,sBAAsB,GAAG7H,IAAI,CAAC4O,GAAG,CAAC,EAAE,EAAE,IAAI,CAACvC,QAAQ,CAACzE,qBAAqB,GAAG,IAAI,CAACjB,WAAW,CAAC;MAC/G,CAAC,MACI,IAAI,IAAI,CAACK,gBAAgB,GAAG,CAAC,EAAE;QAChC,IAAI,CAACqF,QAAQ,CAACxE,sBAAsB,GAAG7H,IAAI,CAAC4O,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC5H,gBAAgB,GAAG,IAAI,CAACoF,WAAW,CAACiB,WAAW,CAACK,KAAK,CAACrE,MAAM,GAAG,IAAI,CAACiD,OAAO,CAACjD,MAAM,CAAC;MAChJ,CAAC,MACI;QACD,IAAI,CAACgD,QAAQ,CAACxE,sBAAsB,GAAG,EAAE;MAC7C;IACJ;IACA2Q,uBAAuBA,CAAA,EAAG;MACtB,IAAI,IAAI,CAACpM,WAAW,EAAEiB,WAAW,EAAEK,KAAK,EAAE;QACtC,MAAMe,KAAK,GAAG,IAAI,CAACrC,WAAW,CAACiB,WAAW,CAACE,IAAI,CAACnE,KAAK,GAAG,IAAI,CAACkD,OAAO,CAAClD,KAAK;QAC1E,IAAI,CAACiD,QAAQ,CAACvE,qBAAqB,GAAG,IAAI,CAACZ,eAAe,GAAG,EAAE,GAAG,IAAI,CAACA,eAAe,GAAGuH,KAAK,GAAG,IAAI,CAACnC,OAAO,CAAClD,KAAK;QACnH,IAAI,CAACiD,QAAQ,CAACtE,sBAAsB,GAAG,IAAI,CAACd,gBAAgB,GAAG,EAAE,GAAG,IAAI,CAACA,gBAAgB,GAAGwH,KAAK,GAAG,IAAI,CAACnC,OAAO,CAACjD,MAAM;QACvH,IAAI,IAAI,CAAC3C,mBAAmB,EAAE;UAC1B,IAAI,IAAI,CAAC2F,QAAQ,CAACvE,qBAAqB,GAAG,IAAI,CAACuE,QAAQ,CAACtE,sBAAsB,GAAG,IAAI,CAACpB,WAAW,EAAE;YAC/F,IAAI,CAAC0F,QAAQ,CAACvE,qBAAqB,GAAG,IAAI,CAACuE,QAAQ,CAACtE,sBAAsB,GAAG,IAAI,CAACpB,WAAW;UACjG,CAAC,MACI,IAAI,IAAI,CAAC0F,QAAQ,CAACvE,qBAAqB,GAAG,IAAI,CAACuE,QAAQ,CAACtE,sBAAsB,GAAG,IAAI,CAACpB,WAAW,EAAE;YACpG,IAAI,CAAC0F,QAAQ,CAACtE,sBAAsB,GAAG,IAAI,CAACsE,QAAQ,CAACvE,qBAAqB,GAAG,IAAI,CAACnB,WAAW;UACjG;QACJ;MACJ,CAAC,MACI;QACD,IAAI,CAAC0F,QAAQ,CAACvE,qBAAqB,GAAG,IAAI,CAACwE,OAAO,CAAClD,KAAK;QACxD,IAAI,CAACiD,QAAQ,CAACtE,sBAAsB,GAAG,IAAI,CAACuE,OAAO,CAACjD,MAAM;MAC9D;IACJ;IACAqP,oBAAoBA,CAACqD,YAAY,GAAG,KAAK,EAAE;MACvC,IAAI,IAAI,CAAClW,OAAO,CAACE,EAAE,GAAG,CAAC,EAAE;QACrB,IAAI,CAACF,OAAO,CAACG,EAAE,IAAI+V,YAAY,GAAG,IAAI,CAAClW,OAAO,CAACE,EAAE,GAAG,CAAC;QACrD,IAAI,CAACF,OAAO,CAACE,EAAE,GAAG,CAAC;MACvB;MACA,IAAI,IAAI,CAACF,OAAO,CAACC,EAAE,GAAG,CAAC,EAAE;QACrB,IAAI,CAACD,OAAO,CAACI,EAAE,IAAI8V,YAAY,GAAG,IAAI,CAAClW,OAAO,CAACC,EAAE,GAAG,CAAC;QACrD,IAAI,CAACD,OAAO,CAACC,EAAE,GAAG,CAAC;MACvB;MACA,IAAI,IAAI,CAACD,OAAO,CAACG,EAAE,GAAG,IAAI,CAACsG,OAAO,CAAClD,KAAK,EAAE;QACtC,IAAI,CAACvD,OAAO,CAACE,EAAE,IAAIgW,YAAY,GAAI,IAAI,CAAClW,OAAO,CAACG,EAAE,GAAG,IAAI,CAACsG,OAAO,CAAClD,KAAK,GAAI,CAAC;QAC5E,IAAI,CAACvD,OAAO,CAACG,EAAE,GAAG,IAAI,CAACsG,OAAO,CAAClD,KAAK;MACxC;MACA,IAAI,IAAI,CAACvD,OAAO,CAACI,EAAE,GAAG,IAAI,CAACqG,OAAO,CAACjD,MAAM,EAAE;QACvC,IAAI,CAACxD,OAAO,CAACC,EAAE,IAAIiW,YAAY,GAAI,IAAI,CAAClW,OAAO,CAACI,EAAE,GAAG,IAAI,CAACqG,OAAO,CAACjD,MAAM,GAAI,CAAC;QAC7E,IAAI,CAACxD,OAAO,CAACI,EAAE,GAAG,IAAI,CAACqG,OAAO,CAACjD,MAAM;MACzC;IACJ;IACAgS,aAAaA,CAAA,EAAG;MACZ,IAAI,IAAI,CAAC9K,SAAS,CAAC8I,MAAM,EAAE;QACvB,IAAI,CAAC9I,SAAS,CAAC8I,MAAM,GAAG,KAAK;QAC7B,IAAI,IAAI,CAAC9I,SAAS,EAAE9d,IAAI,KAAKmW,SAAS,CAAClG,IAAI,EAAE;UACzC,IAAI,CAACmV,eAAe,CAAC3lB,IAAI,CAAC,IAAI,CAACT,SAAS,CAAC;QAC7C,CAAC,MACI;UACD,IAAI,CAACknB,UAAU,CAAC,CAAC;QACrB;MACJ;IACJ;IACA4B,SAASA,CAAA,EAAG;MACR,IAAI,IAAI,CAAChK,SAAS,CAAC8I,MAAM,EAAE;QACvB,IAAI,CAAC9I,SAAS,CAAC8I,MAAM,GAAG,KAAK;QAC7B,IAAI,CAACV,UAAU,CAAC,CAAC;MACrB;IACJ;IACAA,UAAUA,CAAA,EAAG;MACT,IAAI,IAAI,CAAClR,QAAQ,EAAE;QACf,KAAK,IAAI,CAAC0E,IAAI,CAAC,CAAC;MACpB;IACJ;IACAA,IAAIA,CAAC1F,MAAM,GAAG,IAAI,CAAC4F,QAAQ,CAAC5F,MAAM,EAAE;MAChC,IAAI,IAAI,CAAC2F,WAAW,EAAEiB,WAAW,EAAEK,KAAK,IAAI,IAAI,EAAE;QAC9C,IAAI,CAAC+J,cAAc,CAACvlB,IAAI,CAAC,CAAC;QAC1B,IAAIuU,MAAM,KAAK,MAAM,EAAE;UACnB,OAAO,IAAI,CAACuH,UAAU,CAAC,CAAC;QAC5B,CAAC,MACI,IAAIvH,MAAM,KAAK,QAAQ,EAAE;UAC1B,OAAO,IAAI,CAACuV,YAAY,CAAC,CAAC;QAC9B;MACJ;MACA,OAAO,IAAI;IACf;IACAhO,UAAUA,CAAA,EAAG;MAAA,IAAAiO,MAAA;MACT,OAAO,IAAIrpB,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK,IAAI,CAACqkB,IAAI,CAACsE,GAAG,eAAA3pB,sJAAA,CAAC,aAAY;QAC9D,MAAMoB,MAAM,SAAS+oB,MAAI,CAACnF,WAAW,CAAC3K,IAAI,CAAC8P,MAAI,CAAC7P,WAAW,EAAE6P,MAAI,CAACpW,OAAO,EAAEoW,MAAI,CAAC5P,QAAQ,EAAE,MAAM,EAAE4P,MAAI,CAAC3P,OAAO,CAAC;QAC/G,IAAIpZ,MAAM,EAAE;UACR+oB,MAAI,CAACzE,YAAY,CAACtlB,IAAI,CAACgB,MAAM,CAAC;UAC9BL,OAAO,CAACK,MAAM,CAAC;QACnB,CAAC,MACI;UACDJ,MAAM,CAAC,mBAAmB,CAAC;QAC/B;MACJ,CAAC,EAAC,CAAC;IACP;IACAkpB,YAAYA,CAAA,EAAG;MACX,MAAM9oB,MAAM,GAAG,IAAI,CAAC4jB,WAAW,CAAC3K,IAAI,CAAC,IAAI,CAACC,WAAW,EAAE,IAAI,CAACvG,OAAO,EAAE,IAAI,CAACwG,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACC,OAAO,CAAC;MAC3G,IAAIpZ,MAAM,EAAE;QACR,IAAI,CAACskB,YAAY,CAACtlB,IAAI,CAACgB,MAAM,CAAC;QAC9B,OAAOA,MAAM;MACjB;MACA,OAAO,IAAI;IACf;IACAulB,oBAAoBA,CAAA,EAAG;MACnB,MAAMyD,sBAAsB,GAAG,CAAC,IAAI,CAACrW,OAAO,CAACG,EAAE,GAAG,IAAI,CAACH,OAAO,CAACE,EAAE,KAAK,IAAI,CAACF,OAAO,CAACI,EAAE,GAAG,IAAI,CAACJ,OAAO,CAACC,EAAE,CAAC;MACxG,OAAOoW,sBAAsB,KAAK,IAAI,CAACvV,WAAW;IACtD;EACJ;EACAxV,qBAAqB,CAACke,IAAI,YAAA8M,8BAAA5M,CAAA;IAAA,YAAAA,CAAA,IAAyFpe,qBAAqB,EAl+BzC+C,+DAAE,CAk+ByDgY,WAAW,GAl+BtEhY,+DAAE,CAk+BiF4b,sBAAsB,GAl+BzG5b,+DAAE,CAk+BoH4e,gBAAgB,GAl+BtI5e,+DAAE,CAk+BiJ0J,mEAAe,GAl+BlK1J,+DAAE,CAk+B6KA,4DAAoB,GAl+BnMA,+DAAE,CAk+B8MA,iDAAS,GAl+BzNA,+DAAE,CAk+BoO0N,oEAAa;EAAA,CAA4D;EAC9YzQ,qBAAqB,CAACorB,IAAI,kBAn+BqEroB,+DAAE;IAAAzB,IAAA,EAm+BMtB,qBAAqB;IAAAoD,SAAA;IAAAkoB,SAAA,WAAAC,4BAAAxnB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QAn+B7BhB,yDAAE,CAAAgF,GAAA;QAAFhF,yDAAE,CAAAmG,GAAA;MAAA;MAAA,IAAAnF,EAAA;QAAA,IAAA0nB,EAAA;QAAF1oB,4DAAE,CAAA0oB,EAAA,GAAF1oB,yDAAE,QAAAiB,GAAA,CAAA8kB,OAAA,GAAA2C,EAAA,CAAA9a,KAAA;QAAF5N,4DAAE,CAAA0oB,EAAA,GAAF1oB,yDAAE,QAAAiB,GAAA,CAAA6a,WAAA,GAAA4M,EAAA,CAAA9a,KAAA;MAAA;IAAA;IAAAib,QAAA;IAAAC,YAAA,WAAAC,mCAAA/nB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QAAFhB,wDAAE,oBAAAgpB,gDAAA;UAAA,OAm+BM/nB,GAAA,CAAA0jB,QAAA,CAAS,CAAC;QAAA,UAn+BlB3kB,6DAAE;MAAA;MAAA,IAAAgB,EAAA;QAAFhB,yDAAE,eAAAiB,GAAA,CAAA+Q,UAAA;QAAFhS,yDAAE,aAAAiB,GAAA,CAAA+N,QAAA,mBAAA/N,GAAA,CAAAoiB,MAAA;MAAA;IAAA;IAAA/iB,MAAA;MAAAukB,iBAAA;MAAAC,QAAA;MAAApF,WAAA;MAAAqF,SAAA;MAAA3V,YAAA;MAAA+C,qBAAA;MAAAI,MAAA;MAAAD,MAAA;MAAA/U,SAAA;MAAAiV,mBAAA;MAAAC,WAAA;MAAAC,4BAAA;MAAAC,aAAA;MAAAC,cAAA;MAAAC,eAAA;MAAAC,gBAAA;MAAAC,gBAAA;MAAAC,eAAA;MAAAC,kBAAA;MAAAC,mBAAA;MAAAC,cAAA;MAAAC,eAAA;MAAAlB,YAAA;MAAAmB,aAAA;MAAAC,YAAA;MAAAC,QAAA;MAAAC,eAAA;MAAAC,wBAAA;MAAArB,iBAAA;MAAAnD,cAAA;MAAA0C,OAAA;MAAAK,UAAA;MAAAhD,QAAA;MAAAqU,MAAA;IAAA;IAAA9iB,OAAA;MAAA+iB,YAAA;MAAAC,cAAA;MAAAC,WAAA;MAAAC,YAAA;MAAAC,eAAA;MAAAC,eAAA;IAAA;IAAAljB,QAAA,GAAFT,kEAAE;IAAAW,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,+BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QAAFhB,4DAAE,kBAm+Bo3D,CAAC;QAn+Bv3DA,wDAAE,IAAA+N,oCAAA,gBAm+Bq5E,CAAC;QAn+Bx5E/N,uDAAE,YAm+BimF,CAAC;QAn+BpmFA,wDAAE,IAAAiR,oCAAA,iBAm+B+sM,CAAC;QAn+BltMjR,0DAAE,CAm+ButM,CAAC;MAAA;MAAA,IAAAgB,EAAA;QAn+B1tMhB,yDAAE,eAAAiB,GAAA,CAAA6N,YAAA,IAAA7N,GAAA,CAAAuS,eAm+Bq2D,CAAC;QAn+Bx2DxT,uDAAE,EAm+Bw+D,CAAC;QAn+B3+DA,wDAAE,SAAAiB,GAAA,CAAAiO,cAm+Bw+D,CAAC;QAn+B3+DlP,uDAAE,CAm+Bm+E,CAAC;QAn+Bt+EA,yDAAE,UAAAiB,GAAA,CAAAmX,OAAA,CAAAlD,KAAA,MAm+Bm+E,CAAC,WAAAjU,GAAA,CAAAmX,OAAA,CAAAjD,MAAA,MAAD,CAAC,gBAAAlU,GAAA,CAAA+Q,UAAA,gBAAA/Q,GAAA,CAAAgR,UAAA,OAAD,CAAC;QAn+Bt+EjS,uDAAE,CAm+B+pF,CAAC;QAn+BlqFA,wDAAE,SAAAiB,GAAA,CAAA6N,YAm+B+pF,CAAC;MAAA;IAAA;IAAAqa,YAAA,GAAyiO7e,iDAAO;IAAA5H,MAAA;IAAA0mB,eAAA;EAAA,EAAwH;EAAC,OAjgBp6TnsB,qBAAqB;AAAA;AAkgB3B;EAAA,QAAA0e,SAAA,oBAAAA,SAAA;AAAA;AA0GoB,IAEd9e,kBAAkB;EAAxB,MAAMA,kBAAkB,CAAC;EAEzBA,kBAAkB,CAACse,IAAI,YAAAkO,2BAAAhO,CAAA;IAAA,YAAAA,CAAA,IAAyFxe,kBAAkB;EAAA,CAAkD;EACpLA,kBAAkB,CAACysB,IAAI,kBAnlCwEtpB,8DAAE;IAAAzB,IAAA,EAmlCgB1B;EAAkB,EAAqG;EACxOA,kBAAkB,CAAC2sB,IAAI,kBAplCwExpB,8DAAE;IAAA0pB,OAAA,GAolC8C,CACnIrmB,yDAAY,CACf;EAAA,EAAI;EAAC,OANRxG,kBAAkB;AAAA;AAOxB;EAAA,QAAA8e,SAAA,oBAAAA,SAAA;AAAA;AAeA,SAASgO,YAAYA,CAAC7rB,WAAW,EAAE;EAC/B,MAAM+jB,KAAK,GAAG/jB,WAAW,CAAC+jB,KAAK,CAAC,GAAG,CAAC;EACpC,MAAMtjB,IAAI,GAAGsjB,KAAK,CAAC,CAAC,CAAC,CAACjC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;EACjE,MAAMgK,UAAU,GAAG9J,IAAI,CAAC+B,KAAK,CAAC,CAAC,CAAC,CAAC;EACjC,MAAMgI,EAAE,GAAG,IAAIC,WAAW,CAACF,UAAU,CAACtrB,MAAM,CAAC;EAC7C,MAAMyrB,EAAE,GAAG,IAAI9J,UAAU,CAAC4J,EAAE,CAAC;EAC7B,KAAK,IAAIle,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGie,UAAU,CAACtrB,MAAM,EAAEqN,CAAC,IAAI,CAAC,EAAE;IAC3Coe,EAAE,CAACpe,CAAC,CAAC,GAAGie,UAAU,CAAC1J,UAAU,CAACvU,CAAC,CAAC;EACpC;EACA,OAAO,IAAIyU,IAAI,CAAC,CAACyJ,EAAE,CAAC,EAAE;IAAEtrB;EAAK,CAAC,CAAC;AACnC;;AAEA;AACA;AACA","sources":["./src/app/shared/components/image-cropper/image-cropper.component.ts","./src/app/shared/components/image-cropper/image-cropper.component.html","./src/app/shared/components/set-user-image/set-user-image.component.ts","./src/app/shared/components/set-user-image/set-user-image.component.html","./src/app/shared/utils/generate-image-path.ts","./node_modules/rxjs/dist/esm/internal/lastValueFrom.js","./node_modules/ngx-image-cropper/fesm2020/ngx-image-cropper.mjs"],"sourcesContent":["/* eslint-disable no-debugger */\nimport { Component, Output, EventEmitter, Input } from '@angular/core';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\nimport { ImageCroppedEvent, ImageCropperModule, ImageTransform } from 'ngx-image-cropper';\nimport { ButtonModule } from 'primeng/button';\nimport { RippleModule } from 'primeng/ripple';\nimport { NgIf } from '@angular/common';\nimport { MessageService } from 'primeng/api';\n\n@Component({\n  selector: 'app-image-cropper',\n  standalone: true,\n  imports: [ButtonModule, ImageCropperModule, TranslateModule, RippleModule, NgIf],\n  templateUrl: './image-cropper.component.html',\n  styleUrl: './image-cropper.component.scss',\n})\nexport class ImageCropperComponent {\n  @Input() fileInput: File | null = null;\n  @Output() croppedFile = new EventEmitter<string>();\n\n  transform: ImageTransform = {};\n  scale = 1;\n\n  constructor(\n    private toast: MessageService,\n    private translate: TranslateService,\n  ) {}\n\n  async onImageCropped(event: ImageCroppedEvent) {\n    if (event.blob) {\n      const base64Image = await this.blobToBase64(event.blob);\n      this.croppedFile.emit(base64Image);\n    }\n  }\n\n  async onFileInputChange(event: Event) {\n    const target = event.target as HTMLInputElement;\n    const fileList: FileList | null = target.files;\n    if (fileList && fileList.length > 0) {\n      if (!fileList[0].type.startsWith('image/')) {\n        this.showErrorMessage('ERROR.WRONG_TYPE');\n      } else {\n        this.fileInput = fileList[0];\n      }\n    }\n  }\n\n  blobToBase64(blob: Blob): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        resolve(reader.result as string);\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }\n\n  /**\n   * Rotates the image clockwise (clockwise) in 90 degree increments.\n   * If the transformation is not defined, initializes it as an empty object.\n   * Update the 'rotate' property on the transformation with a 90 degree rotation.\n   */\n  rotateRight() {\n    this.transform = {\n      ...this.transform,\n      rotate: (this.transform.rotate || 0) + 90,\n    };\n  }\n\n  /**\n   * Increases the image zoom level by 10%.\n   * Updates the 'scale' property in the transformation with the new zoom level.\n   */\n  zoomIn() {\n    this.scale += 0.1;\n    this.transform = {\n      ...this.transform,\n      scale: this.scale,\n    };\n  }\n\n  /**\n   * Reduces the image zoom level by 10%.\n   * Updates the 'scale' property in the transformation with the new zoom level.\n   */\n  zoomOut() {\n    if (this.scale > 1) {\n      this.scale -= 0.1;\n      this.transform = {\n        ...this.transform,\n        scale: this.scale,\n      };\n    }\n  }\n\n  /**\n   * Flips the image horizontally.\n   * Will toggle the 'flipH' property in the transform to horizontally mirror the image.\n   */\n  flipHorizontal() {\n    this.transform = {\n      ...this.transform,\n      flipH: !this.transform.flipH,\n    };\n  }\n\n  private showErrorMessage(key: string): void {\n    this.toast.add({\n      severity: 'error',\n      summary: this.translate.instant('ERROR.TITLE'),\n      detail: this.translate.instant(key),\n    });\n  }\n}\n","<div class=\"cropper-wrapper flex flex-column gap-5\">\n  <!-- Image cropper -->\n  <div class=\"relative\">\n    <image-cropper\n      format=\"png\"\n      [imageFile]=\"fileInput ? fileInput : undefined\"\n      [maintainAspectRatio]=\"true\"\n      [resizeToWidth]=\"256\"\n      [cropperMinWidth]=\"128\"\n      [onlyScaleDown]=\"true\"\n      [roundCropper]=\"true\"\n      class=\"cropper\"\n      [transform]=\"transform\"\n      (imageCropped)=\"onImageCropped($event)\"\n    ></image-cropper>\n\n    <!-- Buttons image-cropper -->\n    <div class=\"buttons\">\n      <button class=\"control-button\" (click)=\"zoomIn()\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n          <path\n            d=\"m23.707 22.293-5.969-5.969a10.016 10.016 0 1 0-1.414 1.414l5.969 5.969a1 1 0 0 0 1.414-1.414ZM10 18a8 8 0 1 1 8-8 8.009 8.009 0 0 1-8 8Z\"\n          />\n          <path d=\"M13 9h-2V7a1 1 0 0 0-2 0v2H7a1 1 0 0 0 0 2h2v2a1 1 0 0 0 2 0v-2h2a1 1 0 0 0 0-2Z\" />\n        </svg>\n      </button>\n      <button class=\"control-button\" (click)=\"zoomOut()\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n          <path\n            d=\"m23.707 22.293-5.969-5.969a10.016 10.016 0 1 0-1.414 1.414l5.969 5.969a1 1 0 0 0 1.414-1.414ZM10 18a8 8 0 1 1 8-8 8.009 8.009 0 0 1-8 8Z\"\n          />\n          <path d=\"M13 9H7a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2Z\" />\n        </svg>\n      </button>\n      <button class=\"control-button\" (click)=\"rotateRight()\">\n        <svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 452.64\">\n          <path\n            d=\"M368.35 161.02c-33.05-59.34-90.64-98.27-164.75-89.98-69.06 7.72-131.91 57.64-147.19 131.68-12.78 61.99 10.79 121.11 52.63 161.1 48.87 46.7 122.66 67.32 192.61 36.01 35.84-16.05 60.23-36.5 78.47-62.84 1.86-2.46 4.36-6.41 7.83-9 10.07-7.53 23.32 1.42 21.28 12.44-.43 2.36-1.49 4.88-3.36 7.53-15 23.71-31.64 41.83-53.38 58.4-49.84 37.98-114.27 55.13-178.91 41.8-60.24-12.42-109.19-48.92-139.52-97.8C-18.98 264.9-6.89 162.04 48.32 89.93c34.29-44.79 85.22-77.72 147.5-87.26 105.15-16.11 210.71 42.27 244.52 135.32l42.51-13.6c11.78-3.73 24.36 2.79 28.1 14.57a22.33 22.33 0 0 1-.9 15.89l-48.64 108.53c-5.04 11.3-18.29 16.36-29.59 11.32l-1.65-.82-.02.03-106.62-58.85c-10.86-5.96-14.83-19.6-8.87-30.46 3.15-5.74 8.44-9.55 14.34-11l39.35-12.58z\"\n          />\n        </svg>\n      </button>\n      <button class=\"control-button\" (click)=\"flipHorizontal()\">\n        <svg width=\"22\" height=\"22\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 417.79\">\n          <path\n            d=\"M333.55 16.79 511 392.75c2.46 5.22.22 11.45-4.99 13.91-1.45.68-2.97 1.01-4.46 1l-177.77.03c-5.78 0-10.47-4.7-10.47-10.48V20.58c0-5.78 4.69-10.47 10.47-10.47 4.44 0 8.25 2.77 9.77 6.68zM240.3 402.16c0 18.18 26.25 21.89 30.98 3.74.28-1.29.45-2.4.45-3.74v-9.45c0-18.18-26.25-21.89-30.98-3.74-.28 1.29-.45 2.4-.45 3.74v9.45zm0-72.3c0 18.18 26.25 21.89 30.98 3.74.28-1.29.45-2.4.45-3.74v-31.42c0-18.18-26.25-21.89-30.98-3.74-.28 1.29-.45 2.4-.45 3.74v31.42zm0-94.27c0 18.18 26.25 21.89 30.98 3.74.28-1.29.45-2.4.45-3.74v-31.42c0-18.18-26.25-21.89-30.98-3.73-.28 1.28-.45 2.39-.45 3.73v31.42zm0-94.26c0 18.17 26.25 21.88 30.98 3.73.28-1.28.45-2.39.45-3.73V109.9c0-18.17-26.25-21.89-30.98-3.73-.28 1.28-.45 2.39-.45 3.73v31.43zm0-94.27c0 18.17 26.25 21.89 30.98 3.73.28-1.28.45-2.39.45-3.73V15.63c0-18.17-26.25-21.88-30.98-3.73-.28 1.29-.45 2.39-.45 3.73v31.43zM1.33 392.11 178.79 16.12c2.46-5.21 8.7-7.45 13.91-4.99 3.78 1.78 5.99 5.54 5.99 9.45l.04 376.63c0 5.78-4.7 10.48-10.48 10.48H10.48c-5.79 0-10.48-4.7-10.48-10.48 0-1.85.48-3.59 1.33-5.1zm483.72-5.37L334.26 67.26v319.48h150.79z\"\n          />\n        </svg>\n      </button>\n      <button class=\"control-button\" (click)=\"hiddenFileInput.click()\">\n        <svg width=\"22\" height=\"22\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n          <path\n            d=\"M8.71 7.71 11 5.41V15a1 1 0 0 0 2 0V5.41l2.29 2.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42l-4-4a1 1 0 0 0-.33-.21 1 1 0 0 0-.76 0 1 1 0 0 0-.33.21l-4 4a1 1 0 1 0 1.42 1.42ZM21 12a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6a1 1 0 0 0-2 0v6a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1Z\"\n          />\n        </svg>\n      </button>\n      <input type=\"file\" accept=\"image/*\" #hiddenFileInput style=\"display: none\" (change)=\"onFileInputChange($event)\" />\n    </div>\n  </div>\n</div>\n","import { Component, Input } from '@angular/core';\nimport { RippleModule } from 'primeng/ripple';\nimport { ButtonModule } from 'primeng/button';\nimport { FileUploadModule } from 'primeng/fileupload';\nimport { lastValueFrom, Observable } from 'rxjs';\nimport { selectCurrentUserNickname, selectIsLoadingAuth } from '@store/auth/auth.selectors';\nimport { generateImagePath } from '@utils/generate-image-path';\nimport { Store } from '@ngrx/store';\nimport { AppStateInterface } from '@store/app/app-state.interface';\nimport { HttpClient } from '@angular/common/http';\nimport { MessageService } from 'primeng/api';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\nimport { readFileAsBase64 } from '@utils/read-file-as-base-64';\nimport { updateUserImageAction } from '@store/auth/auth.actions';\nimport { URLS } from '@enums/urls';\nimport { CommonModule } from '@angular/common';\nimport { ContainerComponent } from '../container/container.component';\nimport { ImageComponent } from '@ApiClient/components/image/image.component';\nimport { ImageCropperComponent } from '../image-cropper/image-cropper.component';\nimport { RouterLink } from '@angular/router';\nimport { EventBlockerModule } from '../../directives/event-blocker.module';\n\nexport enum PAGE {\n  WELCOME_PHOTO = 'welcome-photo',\n  SET_PHOTO = 'set-photo',\n}\n\n@Component({\n  selector: 'app-set-user-image',\n  standalone: true,\n  imports: [\n    RippleModule,\n    ButtonModule,\n    CommonModule,\n    ContainerComponent,\n    FileUploadModule,\n    ImageComponent,\n    ImageCropperComponent,\n    TranslateModule,\n    RouterLink,\n    EventBlockerModule,\n  ],\n  templateUrl: 'set-user-image.component.html',\n  styleUrls: ['set-user-image.component.scss'],\n})\nexport class SetUserImageComponent {\n  @Input() page: PAGE = PAGE.SET_PHOTO;\n\n  protected readonly URLS = URLS;\n  isDragover: boolean = false;\n  isUploadMode: boolean = true;\n  userNickname$: Observable<string | null> = this.store.select(selectCurrentUserNickname);\n  isLoading$: Observable<boolean> = this.store.select(selectIsLoadingAuth);\n  noImagePath: string = 'assets/images/no-user.webp';\n  imagePaths: string[] = generateImagePath(8, 'assets/images/welcome-photo/photo-profile', 'webp');\n\n  selectedPath: string | null = null;\n  fileToCropper: File | null = null;\n  croppedFile: string | null = null;\n  isRefreshed: boolean = false;\n\n  constructor(\n    private store: Store<AppStateInterface>,\n    private http: HttpClient,\n    private toast: MessageService,\n    private translate: TranslateService,\n  ) {}\n\n  onImageClick(imagePath: string): void {\n    this.selectedPath = imagePath;\n  }\n\n  changeMode() {\n    this.fileToCropper = null;\n    this.selectedPath = null;\n    this.isUploadMode = !this.isUploadMode;\n  }\n\n  async confirm(): Promise<void> {\n    try {\n      if (this.selectedPath && !this.croppedFile) {\n        const res = await lastValueFrom(this.http.get(this.selectedPath, { responseType: 'blob' }));\n        const base64String = await readFileAsBase64(res as File);\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: base64String, fileExt: 'webp' } }));\n      } else if (!this.selectedPath && this.croppedFile) {\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: this.croppedFile, fileExt: 'png' } }));\n      }\n    } catch (error) {\n      console.error('Error during conformation', error);\n    }\n  }\n\n  refresh() {\n    this.isRefreshed = true;\n    setTimeout(() => {\n      this.isRefreshed = false;\n      this.imagePaths = generateImagePath(8, 'assets/images/welcome-photo/photo-profile', 'webp');\n      this.selectedPath = null;\n    }, 1000);\n  }\n\n  async storeFile($event: Event) {\n    this.isDragover = false;\n    this.fileToCropper = ($event as DragEvent).dataTransfer\n      ? ($event as DragEvent).dataTransfer?.files.item(0) ?? null\n      : ($event.target as HTMLInputElement).files?.item(0) ?? null;\n    console.log('file from drag', this.fileToCropper);\n    this.selectedPath = null;\n  }\n\n  async onSelectFileUpload(event: Event): Promise<void> {\n    const target = event.target as HTMLInputElement;\n    const fileList: FileList | null = target.files;\n    if (fileList && fileList.length > 0) {\n      const file = fileList[0];\n      if (!file.type.startsWith('image/')) {\n        this.showErrorMessage('ERROR.WRONG_TYPE');\n      } else {\n        this.fileToCropper = file;\n        this.selectedPath = null;\n      }\n    }\n  }\n\n  async onSelectCroppedFile(file: string) {\n    this.croppedFile = file;\n  }\n\n  private showErrorMessage(key: string): void {\n    this.toast.add({\n      severity: 'error',\n      summary: this.translate.instant('ERROR.TITLE'),\n      detail: this.translate.instant(key),\n    });\n  }\n\n  protected readonly PAGE = PAGE;\n}\n","<app-container [width]=\"700\" [isLoading]=\"isLoading$ | async\">\n  <div class=\"flex w-full flex-column gap-5 align-items-center justify-content-center\">\n    <!-- Title and Content -->\n    <div class=\"text-center mb-4\">\n      <ng-content></ng-content>\n    </div>\n\n    <!-- File drag or upload -->\n    <div class=\"flex justify-content-center w-full\" *ngIf=\"isUploadMode\">\n      <div *ngIf=\"!fileToCropper\" class=\"w-full\">\n        <input type=\"file\" accept=\"image/*\" #fileInput style=\"display: none\" (change)=\"onSelectFileUpload($event)\" />\n        <button\n          (dragend)=\"isDragover = false\"\n          (dragover)=\"isDragover = true\"\n          (dragenter)=\"isDragover = true\"\n          (dragleave)=\"isDragover = false\"\n          (mouseleave)=\"isDragover = false\"\n          (drop)=\"storeFile($event)\"\n          (click)=\"fileInput.click()\"\n          appEventBlocker\n          [ngClass]=\"{ isDragover: isDragover }\"\n          class=\"upload transition-duration-500\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"80\" height=\"60\" viewBox=\"0 50 512 367\">\n            <path\n              d=\"M470.7 277.2c3-11.2 4.7-22.9 4.7-35 0-75.8-61.4-137.1-137.1-137.1-19.5 0-38 4.1-54.7 11.4-16.8-39-55.6-66.3-100.7-66.3-60.6 0-109.7 49.1-109.7 109.7 0 4.1.8 7.9 1.2 11.9C30.5 192.1 0 236.3 0 287.9c0 70.7 57.3 128 128 128h310.9c40.4 0 73.1-32.7 73.1-73.1 0-29-16.9-53.7-41.3-65.6zm-178.1-25.9v91.4h-73.1v-91.4h-54.9l91.4-91.4 91.4 91.4h-54.8z\"\n            />\n          </svg>\n          <span class=\"text-xl\">Upload your photo</span>\n        </button>\n      </div>\n      <div *ngIf=\"fileToCropper\">\n        <app-image-cropper (croppedFile)=\"onSelectCroppedFile($event)\" [fileInput]=\"fileToCropper\"></app-image-cropper>\n      </div>\n    </div>\n\n    <!--  Templates for choose  -->\n    <div class=\"photos relative\" *ngIf=\"!isUploadMode\">\n      <button class=\"absolute refresh-button\" (click)=\"refresh()\" [class.rotate]=\"isRefreshed\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 32 32\">\n          <path\n            d=\"M29.974 0c-1.12 0-2.026.908-2.026 2.026V6.75C25.664 3.984 23.032 0 15.788 0 7.084 0 0 7.082 0 15.788s7.084 15.788 15.788 15.788a15.77 15.77 0 0 0 15.004-10.864 2.062 2.062 0 1 0-3.92-1.29 11.65 11.65 0 0 1-11.084 8.028c-6.432 0-11.664-5.232-11.664-11.664s5.232-11.64 11.664-11.64c4.554 0 7.084 2.834 9.148 5.806h-5.094a2.026 2.026 0 1 0 0 4.052h10.132A2.021 2.021 0 0 0 32 11.982V2.026A2.027 2.027 0 0 0 29.974 0z\"\n          />\n        </svg>\n      </button>\n      <button\n        class=\"photo-button flex align-items-center m-0 p-0\"\n        (click)=\"onImageClick(path)\"\n        *ngFor=\"let path of imagePaths.slice(0, page === PAGE.SET_PHOTO ? 8 : 9)\"\n        [ngClass]=\"{ 'select-photo': selectedPath === path }\"\n      >\n        <img [src]=\"path\" alt=\"Profile photo\" width=\"180\" height=\"180\" />\n      </button>\n\n      <button\n        class=\"photo-button flex align-items-center m-0 p-0\"\n        (click)=\"onImageClick(noImagePath)\"\n        [ngClass]=\"{ 'select-photo': selectedPath === noImagePath }\"\n      >\n        <img [src]=\"noImagePath\" alt=\"No Image\" width=\"180\" height=\"180\" />\n      </button>\n    </div>\n\n    <!-- Control Buttons -->\n    <div class=\"flex w-full flex-column md:flex-row md:justify-content-center gap-3 flex-wrap\">\n      <button\n        class=\"w-full md:w-auto\"\n        pRipple\n        pButton\n        [label]=\"isUploadMode ? 'Choose Template' : 'Upload file'\"\n        (click)=\"changeMode()\"\n      ></button>\n\n      <button\n        *ngIf=\"page === PAGE.SET_PHOTO\"\n        [routerLink]=\"[URLS.BACK, URLS.PROFILE, userNickname$ | async]\"\n        [label]=\"'BTN.CANCEL' | translate\"\n        icon=\"pi pi-times\"\n        class=\"w-full md:w-auto\"\n        pButton\n        pRipple\n      ></button>\n\n      <button\n        class=\"w-full md:w-auto\"\n        *ngIf=\"page === PAGE.WELCOME_PHOTO\"\n        [routerLink]=\"[URLS.BACK]\"\n        [label]=\"'BTN.CANCEL' | translate\"\n        pButton\n        pRipple\n      ></button>\n\n      <button\n        (click)=\"confirm()\"\n        pButton\n        pRipple\n        icon=\"pi pi-check\"\n        class=\"w-full md:w-auto\"\n        [label]=\"'BTN.CONFIRM' | translate\"\n        [disabled]=\"!croppedFile && !selectedPath\"\n      ></button>\n    </div>\n  </div>\n</app-container>\n","export function generateImagePath(count: number, filePath: string, fileExtension: string): string[] {\n  const totalDigits = 48;\n\n  if (count > totalDigits) {\n    throw new Error('Count should be less than or equal to totalDigits');\n  }\n\n  const getRandomUniqueDigits = (totalDigits: number, count: number): number[] => {\n    const allDigits = Array.from({ length: totalDigits }, (_, i) => i + 1);\n    const shuffledDigits = allDigits.sort(() => Math.random() - 0.5);\n    return shuffledDigits.slice(0, count);\n  };\n\n  const selectedDigits = getRandomUniqueDigits(totalDigits, count);\n\n  return selectedDigits.map((digit) => `${filePath}${digit}.${fileExtension}`);\n}\n","import { EmptyError } from './util/EmptyError';\nexport function lastValueFrom(source, config) {\n    const hasConfig = typeof config === 'object';\n    return new Promise((resolve, reject) => {\n        let _hasValue = false;\n        let _value;\n        source.subscribe({\n            next: (value) => {\n                _value = value;\n                _hasValue = true;\n            },\n            error: reject,\n            complete: () => {\n                if (_hasValue) {\n                    resolve(_value);\n                }\n                else if (hasConfig) {\n                    resolve(config.defaultValue);\n                }\n                else {\n                    reject(new EmptyError());\n                }\n            },\n        });\n    });\n}\n","import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, isDevMode, Component, ChangeDetectionStrategy, Optional, Inject, ViewChild, Input, HostBinding, Output, HostListener, NgModule } from '@angular/core';\nimport * as i4 from '@angular/platform-browser';\nimport { HAMMER_LOADER } from '@angular/platform-browser';\nimport { takeUntil, first } from 'rxjs/operators';\nimport { merge, fromEvent } from 'rxjs';\nimport * as i5 from '@angular/common';\nimport { CommonModule } from '@angular/common';\n\nclass CropperSettings {\n    constructor() {\n        // From options\n        this.format = 'png';\n        this.output = 'blob';\n        this.maintainAspectRatio = true;\n        this.transform = {};\n        this.aspectRatio = 1;\n        this.resetCropOnAspectRatioChange = true;\n        this.resizeToWidth = 0;\n        this.resizeToHeight = 0;\n        this.cropperMinWidth = 0;\n        this.cropperMinHeight = 0;\n        this.cropperMaxHeight = 0;\n        this.cropperMaxWidth = 0;\n        this.cropperStaticWidth = 0;\n        this.cropperStaticHeight = 0;\n        this.canvasRotation = 0;\n        this.initialStepSize = 3;\n        this.roundCropper = false;\n        this.onlyScaleDown = false;\n        this.imageQuality = 92;\n        this.autoCrop = true;\n        this.backgroundColor = null;\n        this.containWithinAspectRatio = false;\n        this.hideResizeSquares = false;\n        this.alignImage = 'center';\n        this.cropperFrameAriaLabel = 'Crop photo';\n        // Internal\n        this.cropperScaledMinWidth = 20;\n        this.cropperScaledMinHeight = 20;\n        this.cropperScaledMaxWidth = 20;\n        this.cropperScaledMaxHeight = 20;\n        this.stepSize = this.initialStepSize;\n    }\n    setOptions(options) {\n        Object.keys(options)\n            .filter((k) => k in this)\n            .forEach((k) => this[k] = options[k]);\n        this.validateOptions();\n    }\n    setOptionsFromChanges(changes) {\n        Object.keys(changes)\n            .filter((k) => k in this)\n            .forEach((k) => this[k] = changes[k].currentValue);\n        this.validateOptions();\n    }\n    validateOptions() {\n        if (this.maintainAspectRatio && !this.aspectRatio) {\n            throw new Error('`aspectRatio` should > 0 when `maintainAspectRatio` is enabled');\n        }\n    }\n}\n\nvar MoveTypes;\n(function (MoveTypes) {\n    MoveTypes[\"Drag\"] = \"drag\";\n    MoveTypes[\"Move\"] = \"move\";\n    MoveTypes[\"Resize\"] = \"resize\";\n    MoveTypes[\"Pinch\"] = \"pinch\";\n})(MoveTypes || (MoveTypes = {}));\n\nfunction getPositionForKey(key) {\n    switch (key) {\n        case 'ArrowUp':\n            return 'top';\n        case 'ArrowRight':\n            return 'right';\n        case 'ArrowDown':\n            return 'bottom';\n        case 'ArrowLeft':\n        default:\n            return 'left';\n    }\n}\nfunction getInvertedPositionForKey(key) {\n    switch (key) {\n        case 'ArrowUp':\n            return 'bottom';\n        case 'ArrowRight':\n            return 'left';\n        case 'ArrowDown':\n            return 'top';\n        case 'ArrowLeft':\n        default:\n            return 'right';\n    }\n}\nfunction getEventForKey(key, stepSize) {\n    switch (key) {\n        case 'ArrowUp':\n            return { clientX: 0, clientY: stepSize * -1 };\n        case 'ArrowRight':\n            return { clientX: stepSize, clientY: 0 };\n        case 'ArrowDown':\n            return { clientX: 0, clientY: stepSize };\n        case 'ArrowLeft':\n        default:\n            return { clientX: stepSize * -1, clientY: 0 };\n    }\n}\n\n/*\n * Hermite resize - fast image resize/resample using Hermite filter.\n * https://github.com/viliusle/Hermite-resize\n */\nfunction resizeCanvas(canvas, width, height) {\n    const width_source = canvas.width;\n    const height_source = canvas.height;\n    width = Math.round(width);\n    height = Math.round(height);\n    const ratio_w = width_source / width;\n    const ratio_h = height_source / height;\n    const ratio_w_half = Math.ceil(ratio_w / 2);\n    const ratio_h_half = Math.ceil(ratio_h / 2);\n    const ctx = canvas.getContext('2d');\n    if (ctx) {\n        const img = ctx.getImageData(0, 0, width_source, height_source);\n        const img2 = ctx.createImageData(width, height);\n        const data = img.data;\n        const data2 = img2.data;\n        for (let j = 0; j < height; j++) {\n            for (let i = 0; i < width; i++) {\n                const x2 = (i + j * width) * 4;\n                const center_y = j * ratio_h;\n                let weight = 0;\n                let weights = 0;\n                let weights_alpha = 0;\n                let gx_r = 0;\n                let gx_g = 0;\n                let gx_b = 0;\n                let gx_a = 0;\n                const xx_start = Math.floor(i * ratio_w);\n                const yy_start = Math.floor(j * ratio_h);\n                let xx_stop = Math.ceil((i + 1) * ratio_w);\n                let yy_stop = Math.ceil((j + 1) * ratio_h);\n                xx_stop = Math.min(xx_stop, width_source);\n                yy_stop = Math.min(yy_stop, height_source);\n                for (let yy = yy_start; yy < yy_stop; yy++) {\n                    const dy = Math.abs(center_y - yy) / ratio_h_half;\n                    const center_x = i * ratio_w;\n                    const w0 = dy * dy; //pre-calc part of w\n                    for (let xx = xx_start; xx < xx_stop; xx++) {\n                        const dx = Math.abs(center_x - xx) / ratio_w_half;\n                        const w = Math.sqrt(w0 + dx * dx);\n                        if (w >= 1) {\n                            //pixel too far\n                            continue;\n                        }\n                        //hermite filter\n                        weight = 2 * w * w * w - 3 * w * w + 1;\n                        const pos_x = 4 * (xx + yy * width_source);\n                        //alpha\n                        gx_a += weight * data[pos_x + 3];\n                        weights_alpha += weight;\n                        //colors\n                        if (data[pos_x + 3] < 255)\n                            weight = weight * data[pos_x + 3] / 250;\n                        gx_r += weight * data[pos_x];\n                        gx_g += weight * data[pos_x + 1];\n                        gx_b += weight * data[pos_x + 2];\n                        weights += weight;\n                    }\n                }\n                data2[x2] = gx_r / weights;\n                data2[x2 + 1] = gx_g / weights;\n                data2[x2 + 2] = gx_b / weights;\n                data2[x2 + 3] = gx_a / weights_alpha;\n            }\n        }\n        canvas.width = width;\n        canvas.height = height;\n        //draw\n        ctx.putImageData(img2, 0, 0);\n    }\n}\n\nfunction percentage(percent, totalValue) {\n    return (percent / 100) * totalValue;\n}\n\nclass CropService {\n    crop(loadedImage, cropper, settings, output, maxSize) {\n        const imagePosition = this.getImagePosition(loadedImage, cropper, settings, maxSize);\n        const width = imagePosition.x2 - imagePosition.x1;\n        const height = imagePosition.y2 - imagePosition.y1;\n        const cropCanvas = document.createElement('canvas');\n        cropCanvas.width = width;\n        cropCanvas.height = height;\n        const ctx = cropCanvas.getContext('2d');\n        if (!ctx) {\n            return null;\n        }\n        if (settings.backgroundColor != null) {\n            ctx.fillStyle = settings.backgroundColor;\n            ctx.fillRect(0, 0, width, height);\n        }\n        const scaleX = (settings.transform.scale || 1) * (settings.transform.flipH ? -1 : 1);\n        const scaleY = (settings.transform.scale || 1) * (settings.transform.flipV ? -1 : 1);\n        const { translateH, translateV } = this.getCanvasTranslate(loadedImage, settings, maxSize);\n        const transformedImage = loadedImage.transformed;\n        ctx.setTransform(scaleX, 0, 0, scaleY, transformedImage.size.width / 2 + translateH, transformedImage.size.height / 2 + translateV);\n        ctx.translate(-imagePosition.x1 / scaleX, -imagePosition.y1 / scaleY);\n        ctx.rotate((settings.transform.rotate || 0) * Math.PI / 180);\n        ctx.drawImage(transformedImage.image, -transformedImage.size.width / 2, -transformedImage.size.height / 2);\n        const result = {\n            width, height,\n            imagePosition,\n            cropperPosition: { ...cropper }\n        };\n        if (settings.containWithinAspectRatio) {\n            result.offsetImagePosition = this.getOffsetImagePosition(loadedImage, cropper, settings, maxSize);\n        }\n        const resizeRatio = this.getResizeRatio(width, height, settings);\n        if (resizeRatio !== 1) {\n            result.width = Math.round(width * resizeRatio);\n            result.height = settings.maintainAspectRatio\n                ? Math.round(result.width / settings.aspectRatio)\n                : Math.round(height * resizeRatio);\n            resizeCanvas(cropCanvas, result.width, result.height);\n        }\n        if (output === 'blob') {\n            return this.cropToBlob(result, cropCanvas, settings);\n        }\n        else {\n            result.base64 = cropCanvas.toDataURL('image/' + settings.format, this.getQuality(settings));\n            return result;\n        }\n    }\n    async cropToBlob(output, cropCanvas, settings) {\n        output.blob = await new Promise(resolve => cropCanvas.toBlob(resolve, 'image/' + settings.format, this.getQuality(settings)));\n        if (output.blob) {\n            output.objectUrl = URL.createObjectURL(output.blob);\n        }\n        return output;\n    }\n    getCanvasTranslate(loadedImage, settings, maxSize) {\n        if (settings.transform.translateUnit === 'px') {\n            const ratio = this.getRatio(loadedImage, maxSize);\n            return {\n                translateH: (settings.transform.translateH || 0) * ratio,\n                translateV: (settings.transform.translateV || 0) * ratio\n            };\n        }\n        else {\n            return {\n                translateH: settings.transform.translateH ? percentage(settings.transform.translateH, loadedImage.transformed.size.width) : 0,\n                translateV: settings.transform.translateV ? percentage(settings.transform.translateV, loadedImage.transformed.size.height) : 0\n            };\n        }\n    }\n    getRatio(loadedImage, maxSize) {\n        return loadedImage.transformed.size.width / maxSize.width;\n    }\n    getImagePosition(loadedImage, cropper, settings, maxSize) {\n        const ratio = this.getRatio(loadedImage, maxSize);\n        const out = {\n            x1: Math.round(cropper.x1 * ratio),\n            y1: Math.round(cropper.y1 * ratio),\n            x2: Math.round(cropper.x2 * ratio),\n            y2: Math.round(cropper.y2 * ratio)\n        };\n        if (!settings.containWithinAspectRatio) {\n            out.x1 = Math.max(out.x1, 0);\n            out.y1 = Math.max(out.y1, 0);\n            out.x2 = Math.min(out.x2, loadedImage.transformed.size.width);\n            out.y2 = Math.min(out.y2, loadedImage.transformed.size.height);\n        }\n        return out;\n    }\n    getOffsetImagePosition(loadedImage, cropper, settings, maxSize) {\n        const canvasRotation = settings.canvasRotation + loadedImage.exifTransform.rotate;\n        const ratio = this.getRatio(loadedImage, maxSize);\n        let offsetX;\n        let offsetY;\n        if (canvasRotation % 2) {\n            offsetX = (loadedImage.transformed.size.width - loadedImage.original.size.height) / 2;\n            offsetY = (loadedImage.transformed.size.height - loadedImage.original.size.width) / 2;\n        }\n        else {\n            offsetX = (loadedImage.transformed.size.width - loadedImage.original.size.width) / 2;\n            offsetY = (loadedImage.transformed.size.height - loadedImage.original.size.height) / 2;\n        }\n        const out = {\n            x1: Math.round(cropper.x1 * ratio) - offsetX,\n            y1: Math.round(cropper.y1 * ratio) - offsetY,\n            x2: Math.round(cropper.x2 * ratio) - offsetX,\n            y2: Math.round(cropper.y2 * ratio) - offsetY\n        };\n        if (!settings.containWithinAspectRatio) {\n            out.x1 = Math.max(out.x1, 0);\n            out.y1 = Math.max(out.y1, 0);\n            out.x2 = Math.min(out.x2, loadedImage.transformed.size.width);\n            out.y2 = Math.min(out.y2, loadedImage.transformed.size.height);\n        }\n        return out;\n    }\n    getResizeRatio(width, height, settings) {\n        const ratioWidth = settings.resizeToWidth / width;\n        const ratioHeight = settings.resizeToHeight / height;\n        const ratios = new Array();\n        if (settings.resizeToWidth > 0) {\n            ratios.push(ratioWidth);\n        }\n        if (settings.resizeToHeight > 0) {\n            ratios.push(ratioHeight);\n        }\n        const result = ratios.length === 0 ? 1 : Math.min(...ratios);\n        if (result > 1 && !settings.onlyScaleDown) {\n            return result;\n        }\n        return Math.min(result, 1);\n    }\n    getQuality(settings) {\n        return Math.min(1, Math.max(0, settings.imageQuality / 100));\n    }\n}\nCropService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nCropService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nclass CropperPositionService {\n    resetCropperPosition(sourceImage, cropperPosition, settings, maxSize) {\n        if (!sourceImage?.nativeElement) {\n            return;\n        }\n        if (settings.cropperStaticHeight && settings.cropperStaticWidth) {\n            cropperPosition.x1 = 0;\n            cropperPosition.x2 = maxSize.width > settings.cropperStaticWidth ?\n                settings.cropperStaticWidth : maxSize.width;\n            cropperPosition.y1 = 0;\n            cropperPosition.y2 = maxSize.height > settings.cropperStaticHeight ?\n                settings.cropperStaticHeight : maxSize.height;\n        }\n        else {\n            const cropperWidth = Math.min(settings.cropperScaledMaxWidth, maxSize.width);\n            const cropperHeight = Math.min(settings.cropperScaledMaxHeight, maxSize.height);\n            if (!settings.maintainAspectRatio) {\n                cropperPosition.x1 = 0;\n                cropperPosition.x2 = cropperWidth;\n                cropperPosition.y1 = 0;\n                cropperPosition.y2 = cropperHeight;\n            }\n            else if (maxSize.width / settings.aspectRatio < maxSize.height) {\n                cropperPosition.x1 = 0;\n                cropperPosition.x2 = cropperWidth;\n                const cropperHeightWithAspectRatio = cropperWidth / settings.aspectRatio;\n                cropperPosition.y1 = (maxSize.height - cropperHeightWithAspectRatio) / 2;\n                cropperPosition.y2 = cropperPosition.y1 + cropperHeightWithAspectRatio;\n            }\n            else {\n                cropperPosition.y1 = 0;\n                cropperPosition.y2 = cropperHeight;\n                const cropperWidthWithAspectRatio = cropperHeight * settings.aspectRatio;\n                cropperPosition.x1 = (maxSize.width - cropperWidthWithAspectRatio) / 2;\n                cropperPosition.x2 = cropperPosition.x1 + cropperWidthWithAspectRatio;\n            }\n        }\n    }\n    move(event, moveStart, cropperPosition) {\n        const diffX = this.getClientX(event) - moveStart.clientX;\n        const diffY = this.getClientY(event) - moveStart.clientY;\n        cropperPosition.x1 = moveStart.x1 + diffX;\n        cropperPosition.y1 = moveStart.y1 + diffY;\n        cropperPosition.x2 = moveStart.x2 + diffX;\n        cropperPosition.y2 = moveStart.y2 + diffY;\n    }\n    resize(event, moveStart, cropperPosition, maxSize, settings) {\n        const moveX = this.getClientX(event) - moveStart.clientX;\n        const moveY = this.getClientY(event) - moveStart.clientY;\n        switch (moveStart.position) {\n            case 'left':\n                cropperPosition.x1 = Math.min(Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth), cropperPosition.x2 - settings.cropperScaledMinWidth);\n                break;\n            case 'topleft':\n                cropperPosition.x1 = Math.min(Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth), cropperPosition.x2 - settings.cropperScaledMinWidth);\n                cropperPosition.y1 = Math.min(Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight), cropperPosition.y2 - settings.cropperScaledMinHeight);\n                break;\n            case 'top':\n                cropperPosition.y1 = Math.min(Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight), cropperPosition.y2 - settings.cropperScaledMinHeight);\n                break;\n            case 'topright':\n                cropperPosition.x2 = Math.max(Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth), cropperPosition.x1 + settings.cropperScaledMinWidth);\n                cropperPosition.y1 = Math.min(Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight), cropperPosition.y2 - settings.cropperScaledMinHeight);\n                break;\n            case 'right':\n                cropperPosition.x2 = Math.max(Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth), cropperPosition.x1 + settings.cropperScaledMinWidth);\n                break;\n            case 'bottomright':\n                cropperPosition.x2 = Math.max(Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth), cropperPosition.x1 + settings.cropperScaledMinWidth);\n                cropperPosition.y2 = Math.max(Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight), cropperPosition.y1 + settings.cropperScaledMinHeight);\n                break;\n            case 'bottom':\n                cropperPosition.y2 = Math.max(Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight), cropperPosition.y1 + settings.cropperScaledMinHeight);\n                break;\n            case 'bottomleft':\n                cropperPosition.x1 = Math.min(Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth), cropperPosition.x2 - settings.cropperScaledMinWidth);\n                cropperPosition.y2 = Math.max(Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight), cropperPosition.y1 + settings.cropperScaledMinHeight);\n                break;\n            case 'center':\n                const scale = event.scale;\n                const newWidth = Math.min(Math.max(settings.cropperScaledMinWidth, (Math.abs(moveStart.x2 - moveStart.x1)) * scale), settings.cropperScaledMaxWidth);\n                const newHeight = Math.min(Math.max(settings.cropperScaledMinHeight, (Math.abs(moveStart.y2 - moveStart.y1)) * scale), settings.cropperScaledMaxHeight);\n                cropperPosition.x1 = moveStart.clientX - newWidth / 2;\n                cropperPosition.x2 = moveStart.clientX + newWidth / 2;\n                cropperPosition.y1 = moveStart.clientY - newHeight / 2;\n                cropperPosition.y2 = moveStart.clientY + newHeight / 2;\n                if (cropperPosition.x1 < 0) {\n                    cropperPosition.x2 -= cropperPosition.x1;\n                    cropperPosition.x1 = 0;\n                }\n                else if (cropperPosition.x2 > maxSize.width) {\n                    cropperPosition.x1 -= (cropperPosition.x2 - maxSize.width);\n                    cropperPosition.x2 = maxSize.width;\n                }\n                if (cropperPosition.y1 < 0) {\n                    cropperPosition.y2 -= cropperPosition.y1;\n                    cropperPosition.y1 = 0;\n                }\n                else if (cropperPosition.y2 > maxSize.height) {\n                    cropperPosition.y1 -= (cropperPosition.y2 - maxSize.height);\n                    cropperPosition.y2 = maxSize.height;\n                }\n                break;\n        }\n        if (settings.maintainAspectRatio) {\n            this.checkAspectRatio(moveStart.position, cropperPosition, maxSize, settings);\n        }\n    }\n    checkAspectRatio(position, cropperPosition, maxSize, settings) {\n        let overflowX = 0;\n        let overflowY = 0;\n        switch (position) {\n            case 'top':\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y1 += (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'bottom':\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y2 -= (overflowY * settings.aspectRatio) > overflowX ? overflowY : (overflowX / settings.aspectRatio);\n                }\n                break;\n            case 'topleft':\n                cropperPosition.y1 = cropperPosition.y2 - (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(0 - cropperPosition.x1, 0);\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x1 += (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y1 += (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'topright':\n                cropperPosition.y1 = cropperPosition.y2 - (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y1 += (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'right':\n            case 'bottomright':\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y2 -= (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'left':\n            case 'bottomleft':\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(0 - cropperPosition.x1, 0);\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x1 += (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y2 -= (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'center':\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                const overflowX1 = Math.max(0 - cropperPosition.x1, 0);\n                const overflowX2 = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                const overflowY1 = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                const overflowY2 = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX1 > 0 || overflowX2 > 0 || overflowY1 > 0 || overflowY2 > 0) {\n                    cropperPosition.x1 += (overflowY1 * settings.aspectRatio) > overflowX1 ? (overflowY1 * settings.aspectRatio) : overflowX1;\n                    cropperPosition.x2 -= (overflowY2 * settings.aspectRatio) > overflowX2 ? (overflowY2 * settings.aspectRatio) : overflowX2;\n                    cropperPosition.y1 += (overflowY2 * settings.aspectRatio) > overflowX2 ? overflowY2 : overflowX2 / settings.aspectRatio;\n                    cropperPosition.y2 -= (overflowY1 * settings.aspectRatio) > overflowX1 ? overflowY1 : overflowX1 / settings.aspectRatio;\n                }\n                break;\n        }\n    }\n    getClientX(event) {\n        return event.touches?.[0].clientX || event.clientX || 0;\n    }\n    getClientY(event) {\n        return event.touches?.[0].clientY || event.clientY || 0;\n    }\n}\nCropperPositionService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropperPositionService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nCropperPositionService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropperPositionService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropperPositionService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\n// Black 2x1 JPEG, with the following meta information set:\n// - EXIF Orientation: 6 (Rotated 90° CCW)\n// Source: https://github.com/blueimp/JavaScript-Load-Image\nconst testAutoOrientationImageURL = 'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' +\n    'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' +\n    'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' +\n    'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x' +\n    'ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA' +\n    'AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==';\nfunction supportsAutomaticRotation() {\n    return new Promise((resolve) => {\n        const img = new Image();\n        img.onload = () => {\n            // Check if browser supports automatic image orientation:\n            const supported = img.width === 1 && img.height === 2;\n            resolve(supported);\n        };\n        img.src = testAutoOrientationImageURL;\n    });\n}\nfunction getTransformationsFromExifData(exifRotationOrArrayBuffer) {\n    if (typeof exifRotationOrArrayBuffer === 'object') {\n        exifRotationOrArrayBuffer = getExifRotation(exifRotationOrArrayBuffer);\n    }\n    switch (exifRotationOrArrayBuffer) {\n        case 2:\n            return { rotate: 0, flip: true };\n        case 3:\n            return { rotate: 2, flip: false };\n        case 4:\n            return { rotate: 2, flip: true };\n        case 5:\n            return { rotate: 1, flip: true };\n        case 6:\n            return { rotate: 1, flip: false };\n        case 7:\n            return { rotate: 3, flip: true };\n        case 8:\n            return { rotate: 3, flip: false };\n        default:\n            return { rotate: 0, flip: false };\n    }\n}\nfunction getExifRotation(arrayBuffer) {\n    const view = new DataView(arrayBuffer);\n    if (view.getUint16(0, false) !== 0xFFD8) {\n        return -2;\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n        if (view.getUint16(offset + 2, false) <= 8)\n            return -1;\n        const marker = view.getUint16(offset, false);\n        offset += 2;\n        if (marker == 0xFFE1) {\n            if (view.getUint32(offset += 2, false) !== 0x45786966) {\n                return -1;\n            }\n            const little = view.getUint16(offset += 6, false) == 0x4949;\n            offset += view.getUint32(offset + 4, little);\n            const tags = view.getUint16(offset, little);\n            offset += 2;\n            for (let i = 0; i < tags; i++) {\n                if (view.getUint16(offset + (i * 12), little) == 0x0112) {\n                    return view.getUint16(offset + (i * 12) + 8, little);\n                }\n            }\n        }\n        else if ((marker & 0xFF00) !== 0xFF00) {\n            break;\n        }\n        else {\n            offset += view.getUint16(offset, false);\n        }\n    }\n    return -1;\n}\n\nclass LoadImageService {\n    constructor() {\n        this.autoRotateSupported = supportsAutomaticRotation();\n    }\n    async loadImageFile(file, cropperSettings) {\n        const arrayBuffer = await file.arrayBuffer();\n        return await this.checkImageTypeAndLoadImageFromArrayBuffer(arrayBuffer, file.type, cropperSettings);\n    }\n    checkImageTypeAndLoadImageFromArrayBuffer(arrayBuffer, imageType, cropperSettings) {\n        if (!this.isValidImageType(imageType)) {\n            return Promise.reject(new Error('Invalid image type'));\n        }\n        return this.loadImageFromArrayBuffer(arrayBuffer, cropperSettings, imageType);\n    }\n    isValidImageType(type) {\n        return /image\\/(png|jpg|jpeg|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(type);\n    }\n    async loadImageFromURL(url, cropperSettings) {\n        const res = await fetch(url);\n        const blob = await res.blob();\n        const buffer = await blob.arrayBuffer();\n        return await this.loadImageFromArrayBuffer(buffer, cropperSettings, blob.type);\n    }\n    loadBase64Image(imageBase64, cropperSettings) {\n        const arrayBuffer = this.base64ToArrayBuffer(imageBase64);\n        return this.loadImageFromArrayBuffer(arrayBuffer, cropperSettings);\n    }\n    base64ToArrayBuffer(imageBase64) {\n        imageBase64 = imageBase64.replace(/^data:([^;]+);base64,/gmi, '');\n        const binaryString = atob(imageBase64);\n        const len = binaryString.length;\n        const bytes = new Uint8Array(len);\n        for (let i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    }\n    async loadImageFromArrayBuffer(arrayBuffer, cropperSettings, imageType) {\n        const res = await new Promise(async (resolve, reject) => {\n            try {\n                const blob = new Blob([arrayBuffer], imageType ? { type: imageType } : undefined);\n                const objectUrl = URL.createObjectURL(blob);\n                const originalImage = new Image();\n                const isSvg = imageType === 'image/svg+xml';\n                const originalImageSize = isSvg ? await this.getSvgImageSize(blob) : undefined;\n                originalImage.onload = () => resolve({\n                    originalImage,\n                    originalImageSize,\n                    originalObjectUrl: objectUrl,\n                    originalArrayBuffer: arrayBuffer\n                });\n                originalImage.onerror = reject;\n                originalImage.src = objectUrl;\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n        return await this.transformImageFromArrayBuffer(res, cropperSettings, res.originalImageSize != null);\n    }\n    async getSvgImageSize(blob) {\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(await blob.text(), 'image/svg+xml');\n        const svgElement = doc.querySelector('svg');\n        if (!svgElement) {\n            throw Error('Failed to parse SVG image');\n        }\n        const widthAttr = svgElement.getAttribute('width');\n        const heightAttr = svgElement.getAttribute('height');\n        if (widthAttr && heightAttr) {\n            return null;\n        }\n        const viewBoxAttr = svgElement.getAttribute('viewBox')\n            || svgElement.getAttribute('viewbox');\n        if (viewBoxAttr) {\n            const viewBox = viewBoxAttr.split(' ');\n            return {\n                width: +viewBox[2],\n                height: +viewBox[3]\n            };\n        }\n        throw Error('Failed to load SVG image. SVG must have width + height or viewBox definition.');\n    }\n    async transformImageFromArrayBuffer(res, cropperSettings, forceTransform = false) {\n        const autoRotate = await this.autoRotateSupported;\n        const exifTransform = getTransformationsFromExifData(autoRotate ? -1 : res.originalArrayBuffer);\n        if (!res.originalImage || !res.originalImage.complete) {\n            return Promise.reject(new Error('No image loaded'));\n        }\n        const loadedImage = {\n            original: {\n                objectUrl: res.originalObjectUrl,\n                image: res.originalImage,\n                size: res.originalImageSize ?? {\n                    width: res.originalImage.naturalWidth,\n                    height: res.originalImage.naturalHeight\n                }\n            },\n            exifTransform\n        };\n        return this.transformLoadedImage(loadedImage, cropperSettings, forceTransform);\n    }\n    async transformLoadedImage(loadedImage, cropperSettings, forceTransform = false) {\n        const canvasRotation = cropperSettings.canvasRotation + loadedImage.exifTransform.rotate;\n        const originalSize = loadedImage.original.size;\n        if (!forceTransform && canvasRotation === 0 && !loadedImage.exifTransform.flip && !cropperSettings.containWithinAspectRatio) {\n            return {\n                original: {\n                    objectUrl: loadedImage.original.objectUrl,\n                    image: loadedImage.original.image,\n                    size: { ...originalSize }\n                },\n                transformed: {\n                    objectUrl: loadedImage.original.objectUrl,\n                    image: loadedImage.original.image,\n                    size: { ...originalSize }\n                },\n                exifTransform: loadedImage.exifTransform\n            };\n        }\n        const transformedSize = this.getTransformedSize(originalSize, loadedImage.exifTransform, cropperSettings);\n        const canvas = document.createElement('canvas');\n        canvas.width = transformedSize.width;\n        canvas.height = transformedSize.height;\n        const ctx = canvas.getContext('2d');\n        ctx?.setTransform(loadedImage.exifTransform.flip ? -1 : 1, 0, 0, 1, canvas.width / 2, canvas.height / 2);\n        ctx?.rotate(Math.PI * (canvasRotation / 2));\n        ctx?.drawImage(loadedImage.original.image, -originalSize.width / 2, -originalSize.height / 2);\n        const blob = await new Promise(resolve => canvas.toBlob(resolve, cropperSettings.format));\n        if (!blob) {\n            throw new Error('Failed to get Blob for transformed image.');\n        }\n        const objectUrl = URL.createObjectURL(blob);\n        const transformedImage = await this.loadImageFromObjectUrl(objectUrl);\n        return {\n            original: {\n                objectUrl: loadedImage.original.objectUrl,\n                image: loadedImage.original.image,\n                size: { ...originalSize }\n            },\n            transformed: {\n                objectUrl: objectUrl,\n                image: transformedImage,\n                size: {\n                    width: transformedImage.width,\n                    height: transformedImage.height\n                }\n            },\n            exifTransform: loadedImage.exifTransform\n        };\n    }\n    loadImageFromObjectUrl(objectUrl) {\n        return new Promise(((resolve, reject) => {\n            const image = new Image();\n            image.onload = () => resolve(image);\n            image.onerror = reject;\n            image.src = objectUrl;\n        }));\n    }\n    getTransformedSize(originalSize, exifTransform, cropperSettings) {\n        const canvasRotation = cropperSettings.canvasRotation + exifTransform.rotate;\n        if (cropperSettings.containWithinAspectRatio) {\n            if (canvasRotation % 2) {\n                const minWidthToContain = originalSize.width * cropperSettings.aspectRatio;\n                const minHeightToContain = originalSize.height / cropperSettings.aspectRatio;\n                return {\n                    width: Math.max(originalSize.height, minWidthToContain),\n                    height: Math.max(originalSize.width, minHeightToContain)\n                };\n            }\n            else {\n                const minWidthToContain = originalSize.height * cropperSettings.aspectRatio;\n                const minHeightToContain = originalSize.width / cropperSettings.aspectRatio;\n                return {\n                    width: Math.max(originalSize.width, minWidthToContain),\n                    height: Math.max(originalSize.height, minHeightToContain)\n                };\n            }\n        }\n        if (canvasRotation % 2) {\n            return {\n                height: originalSize.width,\n                width: originalSize.height\n            };\n        }\n        return {\n            width: originalSize.width,\n            height: originalSize.height\n        };\n    }\n}\nLoadImageService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: LoadImageService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nLoadImageService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: LoadImageService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: LoadImageService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nclass ImageCropperComponent {\n    constructor(cropService, cropperPositionService, loadImageService, sanitizer, cd, zone, hammerLoader) {\n        this.cropService = cropService;\n        this.cropperPositionService = cropperPositionService;\n        this.loadImageService = loadImageService;\n        this.sanitizer = sanitizer;\n        this.cd = cd;\n        this.zone = zone;\n        this.hammerLoader = hammerLoader;\n        this.settings = new CropperSettings();\n        this.setImageMaxSizeRetries = 0;\n        this.resizedWhileHidden = false;\n        this.marginLeft = '0px';\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.moveTypes = MoveTypes;\n        this.imageVisible = false;\n        this.cropperFrameAriaLabel = this.settings.cropperFrameAriaLabel;\n        this.output = this.settings.output;\n        this.format = this.settings.format;\n        this.transform = {};\n        this.maintainAspectRatio = this.settings.maintainAspectRatio;\n        this.aspectRatio = this.settings.aspectRatio;\n        this.resetCropOnAspectRatioChange = this.settings.resetCropOnAspectRatioChange;\n        this.resizeToWidth = this.settings.resizeToWidth;\n        this.resizeToHeight = this.settings.resizeToHeight;\n        this.cropperMinWidth = this.settings.cropperMinWidth;\n        this.cropperMinHeight = this.settings.cropperMinHeight;\n        this.cropperMaxHeight = this.settings.cropperMaxHeight;\n        this.cropperMaxWidth = this.settings.cropperMaxWidth;\n        this.cropperStaticWidth = this.settings.cropperStaticWidth;\n        this.cropperStaticHeight = this.settings.cropperStaticHeight;\n        this.canvasRotation = this.settings.canvasRotation;\n        this.initialStepSize = this.settings.initialStepSize;\n        this.roundCropper = this.settings.roundCropper;\n        this.onlyScaleDown = this.settings.onlyScaleDown;\n        this.imageQuality = this.settings.imageQuality;\n        this.autoCrop = this.settings.autoCrop;\n        this.backgroundColor = this.settings.backgroundColor;\n        this.containWithinAspectRatio = this.settings.containWithinAspectRatio;\n        this.hideResizeSquares = this.settings.hideResizeSquares;\n        this.allowMoveImage = false;\n        this.cropper = {\n            x1: -100,\n            y1: -100,\n            x2: 10000,\n            y2: 10000\n        };\n        this.alignImage = this.settings.alignImage;\n        this.disabled = false;\n        this.hidden = false;\n        this.imageCropped = new EventEmitter();\n        this.startCropImage = new EventEmitter();\n        this.imageLoaded = new EventEmitter();\n        this.cropperReady = new EventEmitter();\n        this.loadImageFailed = new EventEmitter();\n        this.transformChange = new EventEmitter();\n        this.reset();\n    }\n    ngOnChanges(changes) {\n        this.onChangesUpdateSettings(changes);\n        this.onChangesInputImage(changes);\n        if (this.loadedImage?.original.image.complete && (changes['containWithinAspectRatio'] || changes['canvasRotation'])) {\n            this.loadImageService\n                .transformLoadedImage(this.loadedImage, this.settings)\n                .then((res) => this.setLoadedImage(res))\n                .catch((err) => this.loadImageError(err));\n        }\n        if (changes['cropper'] || changes['maintainAspectRatio'] || changes['aspectRatio']) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.setCropperScaledMaxSize();\n            if (this.maintainAspectRatio &&\n                (this.resetCropOnAspectRatioChange || !this.aspectRatioIsCorrect()) &&\n                (changes['maintainAspectRatio'] || changes['aspectRatio'])) {\n                this.resetCropperPosition();\n            }\n            else if (changes['cropper']) {\n                this.checkCropperPosition(false);\n                this.doAutoCrop();\n            }\n        }\n        if (changes['transform']) {\n            this.transform = this.transform || {};\n            this.setCssTransform();\n            this.doAutoCrop();\n        }\n        if (changes['hidden'] && this.resizedWhileHidden && !this.hidden) {\n            setTimeout(() => {\n                this.onResize();\n                this.resizedWhileHidden = false;\n            });\n        }\n    }\n    onChangesUpdateSettings(changes) {\n        this.settings.setOptionsFromChanges(changes);\n        if (this.settings.cropperStaticHeight && this.settings.cropperStaticWidth) {\n            this.hideResizeSquares = true;\n            this.settings.setOptions({\n                hideResizeSquares: true,\n                cropperMinWidth: this.settings.cropperStaticWidth,\n                cropperMinHeight: this.settings.cropperStaticHeight,\n                cropperMaxHeight: this.settings.cropperStaticHeight,\n                cropperMaxWidth: this.settings.cropperStaticWidth,\n                maintainAspectRatio: false\n            });\n        }\n    }\n    onChangesInputImage(changes) {\n        if (changes['imageChangedEvent'] || changes['imageURL'] || changes['imageBase64'] || changes['imageFile']) {\n            this.reset();\n        }\n        if (changes['imageChangedEvent'] && this.isValidImageChangedEvent()) {\n            this.loadImageFile(this.imageChangedEvent.target.files[0]);\n        }\n        if (changes['imageURL'] && this.imageURL) {\n            this.loadImageFromURL(this.imageURL);\n        }\n        if (changes['imageBase64'] && this.imageBase64) {\n            this.loadBase64Image(this.imageBase64);\n        }\n        if (changes['imageFile'] && this.imageFile) {\n            this.loadImageFile(this.imageFile);\n        }\n    }\n    isValidImageChangedEvent() {\n        return this.imageChangedEvent?.target?.files?.length > 0;\n    }\n    setCssTransform() {\n        const translateUnit = this.transform?.translateUnit || '%';\n        this.safeTransformStyle = this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH || 0}${translateUnit}, ${this.transform.translateV || 0}${translateUnit})` +\n            ' scaleX(' + (this.transform.scale || 1) * (this.transform.flipH ? -1 : 1) + ')' +\n            ' scaleY(' + (this.transform.scale || 1) * (this.transform.flipV ? -1 : 1) + ')' +\n            ' rotate(' + (this.transform.rotate || 0) + 'deg)');\n    }\n    ngOnInit() {\n        this.settings.stepSize = this.initialStepSize;\n        this.activatePinchGesture();\n    }\n    reset() {\n        this.imageVisible = false;\n        this.loadedImage = undefined;\n        this.safeImgDataUrl = 'data:image/png;base64,iVBORw0KGg'\n            + 'oAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAU'\n            + 'AAarVyFEAAAAASUVORK5CYII=';\n        this.moveStart = {\n            active: false,\n            type: null,\n            position: null,\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0,\n            clientX: 0,\n            clientY: 0\n        };\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.cropper.x1 = -100;\n        this.cropper.y1 = -100;\n        this.cropper.x2 = 10000;\n        this.cropper.y2 = 10000;\n    }\n    loadImageFile(file) {\n        this.loadImageService\n            .loadImageFile(file, this.settings)\n            .then((res) => this.setLoadedImage(res))\n            .catch((err) => this.loadImageError(err));\n    }\n    loadBase64Image(imageBase64) {\n        this.loadImageService\n            .loadBase64Image(imageBase64, this.settings)\n            .then((res) => this.setLoadedImage(res))\n            .catch((err) => this.loadImageError(err));\n    }\n    loadImageFromURL(url) {\n        this.loadImageService\n            .loadImageFromURL(url, this.settings)\n            .then((res) => this.setLoadedImage(res))\n            .catch((err) => this.loadImageError(err));\n    }\n    setLoadedImage(loadedImage) {\n        this.loadedImage = loadedImage;\n        this.safeImgDataUrl = this.sanitizer.bypassSecurityTrustResourceUrl(loadedImage.transformed.objectUrl);\n        this.cd.markForCheck();\n    }\n    loadImageError(error) {\n        console.error(error);\n        this.loadImageFailed.emit();\n    }\n    imageLoadedInView() {\n        if (this.loadedImage != null) {\n            this.imageLoaded.emit(this.loadedImage);\n            this.setImageMaxSizeRetries = 0;\n            setTimeout(() => this.checkImageMaxSizeRecursively());\n        }\n    }\n    checkImageMaxSizeRecursively() {\n        if (this.setImageMaxSizeRetries > 40) {\n            this.loadImageFailed.emit();\n        }\n        else if (this.sourceImageLoaded()) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.setCropperScaledMaxSize();\n            this.resetCropperPosition();\n            this.cropperReady.emit({ ...this.maxSize });\n            this.cd.markForCheck();\n        }\n        else {\n            this.setImageMaxSizeRetries++;\n            setTimeout(() => this.checkImageMaxSizeRecursively(), 50);\n        }\n    }\n    sourceImageLoaded() {\n        return this.sourceImage?.nativeElement?.offsetWidth > 0;\n    }\n    onResize() {\n        if (!this.loadedImage) {\n            return;\n        }\n        if (this.hidden) {\n            this.resizedWhileHidden = true;\n        }\n        else {\n            const oldMaxSize = { ...this.maxSize };\n            this.setMaxSize();\n            this.resizeCropperPosition(oldMaxSize);\n            this.setCropperScaledMinSize();\n            this.setCropperScaledMaxSize();\n        }\n    }\n    async activatePinchGesture() {\n        // Loads HammerJS via angular APIs if configured\n        await this.hammerLoader?.();\n        const Hammer = window?.['Hammer'] || null;\n        if (Hammer) {\n            const hammer = new Hammer(this.wrapper.nativeElement);\n            hammer.get('pinch').set({ enable: true });\n            hammer.on('pinchmove', this.onPinch.bind(this));\n            hammer.on('pinchend', this.pinchStop.bind(this));\n            hammer.on('pinchstart', this.startPinch.bind(this));\n        }\n        else if (isDevMode()) {\n            console.warn('[NgxImageCropper] Could not find HammerJS - Pinch Gesture won\\'t work');\n        }\n    }\n    resizeCropperPosition(oldMaxSize) {\n        if (oldMaxSize.width !== this.maxSize.width || oldMaxSize.height !== this.maxSize.height) {\n            this.cropper.x1 = this.cropper.x1 * this.maxSize.width / oldMaxSize.width;\n            this.cropper.x2 = this.cropper.x2 * this.maxSize.width / oldMaxSize.width;\n            this.cropper.y1 = this.cropper.y1 * this.maxSize.height / oldMaxSize.height;\n            this.cropper.y2 = this.cropper.y2 * this.maxSize.height / oldMaxSize.height;\n        }\n    }\n    resetCropperPosition() {\n        this.cropperPositionService.resetCropperPosition(this.sourceImage, this.cropper, this.settings, this.maxSize);\n        this.doAutoCrop();\n        this.imageVisible = true;\n    }\n    keyboardAccess(event) {\n        this.changeKeyboardStepSize(event);\n        this.keyboardMoveCropper(event);\n    }\n    changeKeyboardStepSize(event) {\n        const key = +event.key;\n        if (key >= 1 && key <= 9) {\n            this.settings.stepSize = key;\n        }\n    }\n    keyboardMoveCropper(event) {\n        const keyboardWhiteList = ['ArrowUp', 'ArrowDown', 'ArrowRight', 'ArrowLeft'];\n        if (!(keyboardWhiteList.includes(event.key))) {\n            return;\n        }\n        const moveType = event.shiftKey ? MoveTypes.Resize : MoveTypes.Move;\n        const position = event.altKey ? getInvertedPositionForKey(event.key) : getPositionForKey(event.key);\n        const moveEvent = getEventForKey(event.key, this.settings.stepSize);\n        event.preventDefault();\n        event.stopPropagation();\n        this.startMove({ clientX: 0, clientY: 0 }, moveType, position);\n        this.handleMouseMove(moveEvent);\n        this.handleMouseUp();\n    }\n    startMove(event, moveType, position = null) {\n        if (this.disabled\n            || this.moveStart?.active && this.moveStart?.type === MoveTypes.Pinch\n            || moveType === MoveTypes.Drag && !this.allowMoveImage) {\n            return;\n        }\n        if (event.preventDefault) {\n            event.preventDefault();\n        }\n        this.moveStart = {\n            active: true,\n            type: moveType,\n            position,\n            transform: { ...this.transform },\n            clientX: this.cropperPositionService.getClientX(event),\n            clientY: this.cropperPositionService.getClientY(event),\n            ...this.cropper\n        };\n        this.initMouseMove();\n    }\n    initMouseMove() {\n        merge(fromEvent(document, 'mousemove'), fromEvent(document, 'touchmove')).pipe(takeUntil(merge(fromEvent(document, 'mouseup'), fromEvent(document, 'touchend')).pipe(first())))\n            .subscribe({\n            next: (event) => this.zone.run(() => {\n                this.handleMouseMove(event);\n                this.cd.markForCheck();\n            }),\n            complete: () => this.zone.run(() => {\n                this.handleMouseUp();\n                this.cd.markForCheck();\n            })\n        });\n    }\n    startPinch(event) {\n        if (!this.safeImgDataUrl) {\n            return;\n        }\n        if (event.preventDefault) {\n            event.preventDefault();\n        }\n        this.moveStart = {\n            active: true,\n            type: MoveTypes.Pinch,\n            position: 'center',\n            clientX: this.cropper.x1 + (this.cropper.x2 - this.cropper.x1) / 2,\n            clientY: this.cropper.y1 + (this.cropper.y2 - this.cropper.y1) / 2,\n            ...this.cropper\n        };\n    }\n    handleMouseMove(event) {\n        if (this.moveStart.active) {\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n            if (event.preventDefault) {\n                event.preventDefault();\n            }\n            if (this.moveStart.type === MoveTypes.Move) {\n                this.cropperPositionService.move(event, this.moveStart, this.cropper);\n                this.checkCropperPosition(true);\n            }\n            else if (this.moveStart.type === MoveTypes.Resize) {\n                if (!this.cropperStaticWidth && !this.cropperStaticHeight) {\n                    this.cropperPositionService.resize(event, this.moveStart, this.cropper, this.maxSize, this.settings);\n                }\n                this.checkCropperPosition(false);\n            }\n            else if (this.moveStart.type === MoveTypes.Drag) {\n                const diffX = this.cropperPositionService.getClientX(event) - this.moveStart.clientX;\n                const diffY = this.cropperPositionService.getClientY(event) - this.moveStart.clientY;\n                this.transform = {\n                    ...this.transform,\n                    translateH: (this.moveStart.transform?.translateH || 0) + diffX,\n                    translateV: (this.moveStart.transform?.translateV || 0) + diffY\n                };\n                this.setCssTransform();\n            }\n        }\n    }\n    onPinch(event) {\n        if (this.moveStart.active) {\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n            if (event.preventDefault) {\n                event.preventDefault();\n            }\n            if (this.moveStart.type === MoveTypes.Pinch) {\n                this.cropperPositionService.resize(event, this.moveStart, this.cropper, this.maxSize, this.settings);\n                this.checkCropperPosition(false);\n            }\n            this.cd.markForCheck();\n        }\n    }\n    setMaxSize() {\n        if (this.sourceImage) {\n            const sourceImageStyle = getComputedStyle(this.sourceImage.nativeElement);\n            this.maxSize.width = parseFloat(sourceImageStyle.width);\n            this.maxSize.height = parseFloat(sourceImageStyle.height);\n            this.marginLeft = this.sanitizer.bypassSecurityTrustStyle('calc(50% - ' + this.maxSize.width / 2 + 'px)');\n        }\n    }\n    setCropperScaledMinSize() {\n        if (this.loadedImage?.transformed?.image) {\n            this.setCropperScaledMinWidth();\n            this.setCropperScaledMinHeight();\n        }\n        else {\n            this.settings.cropperScaledMinWidth = 20;\n            this.settings.cropperScaledMinHeight = 20;\n        }\n    }\n    setCropperScaledMinWidth() {\n        this.settings.cropperScaledMinWidth = this.cropperMinWidth > 0\n            ? Math.max(20, this.cropperMinWidth / this.loadedImage.transformed.image.width * this.maxSize.width)\n            : 20;\n    }\n    setCropperScaledMinHeight() {\n        if (this.maintainAspectRatio) {\n            this.settings.cropperScaledMinHeight = Math.max(20, this.settings.cropperScaledMinWidth / this.aspectRatio);\n        }\n        else if (this.cropperMinHeight > 0) {\n            this.settings.cropperScaledMinHeight = Math.max(20, this.cropperMinHeight / this.loadedImage.transformed.image.height * this.maxSize.height);\n        }\n        else {\n            this.settings.cropperScaledMinHeight = 20;\n        }\n    }\n    setCropperScaledMaxSize() {\n        if (this.loadedImage?.transformed?.image) {\n            const ratio = this.loadedImage.transformed.size.width / this.maxSize.width;\n            this.settings.cropperScaledMaxWidth = this.cropperMaxWidth > 20 ? this.cropperMaxWidth / ratio : this.maxSize.width;\n            this.settings.cropperScaledMaxHeight = this.cropperMaxHeight > 20 ? this.cropperMaxHeight / ratio : this.maxSize.height;\n            if (this.maintainAspectRatio) {\n                if (this.settings.cropperScaledMaxWidth > this.settings.cropperScaledMaxHeight * this.aspectRatio) {\n                    this.settings.cropperScaledMaxWidth = this.settings.cropperScaledMaxHeight * this.aspectRatio;\n                }\n                else if (this.settings.cropperScaledMaxWidth < this.settings.cropperScaledMaxHeight * this.aspectRatio) {\n                    this.settings.cropperScaledMaxHeight = this.settings.cropperScaledMaxWidth / this.aspectRatio;\n                }\n            }\n        }\n        else {\n            this.settings.cropperScaledMaxWidth = this.maxSize.width;\n            this.settings.cropperScaledMaxHeight = this.maxSize.height;\n        }\n    }\n    checkCropperPosition(maintainSize = false) {\n        if (this.cropper.x1 < 0) {\n            this.cropper.x2 -= maintainSize ? this.cropper.x1 : 0;\n            this.cropper.x1 = 0;\n        }\n        if (this.cropper.y1 < 0) {\n            this.cropper.y2 -= maintainSize ? this.cropper.y1 : 0;\n            this.cropper.y1 = 0;\n        }\n        if (this.cropper.x2 > this.maxSize.width) {\n            this.cropper.x1 -= maintainSize ? (this.cropper.x2 - this.maxSize.width) : 0;\n            this.cropper.x2 = this.maxSize.width;\n        }\n        if (this.cropper.y2 > this.maxSize.height) {\n            this.cropper.y1 -= maintainSize ? (this.cropper.y2 - this.maxSize.height) : 0;\n            this.cropper.y2 = this.maxSize.height;\n        }\n    }\n    handleMouseUp() {\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            if (this.moveStart?.type === MoveTypes.Drag) {\n                this.transformChange.emit(this.transform);\n            }\n            else {\n                this.doAutoCrop();\n            }\n        }\n    }\n    pinchStop() {\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            this.doAutoCrop();\n        }\n    }\n    doAutoCrop() {\n        if (this.autoCrop) {\n            void this.crop();\n        }\n    }\n    crop(output = this.settings.output) {\n        if (this.loadedImage?.transformed?.image != null) {\n            this.startCropImage.emit();\n            if (output === 'blob') {\n                return this.cropToBlob();\n            }\n            else if (output === 'base64') {\n                return this.cropToBase64();\n            }\n        }\n        return null;\n    }\n    cropToBlob() {\n        return new Promise((resolve, reject) => this.zone.run(async () => {\n            const result = await this.cropService.crop(this.loadedImage, this.cropper, this.settings, 'blob', this.maxSize);\n            if (result) {\n                this.imageCropped.emit(result);\n                resolve(result);\n            }\n            else {\n                reject('Crop image failed');\n            }\n        }));\n    }\n    cropToBase64() {\n        const result = this.cropService.crop(this.loadedImage, this.cropper, this.settings, 'base64', this.maxSize);\n        if (result) {\n            this.imageCropped.emit(result);\n            return result;\n        }\n        return null;\n    }\n    aspectRatioIsCorrect() {\n        const currentCropAspectRatio = (this.cropper.x2 - this.cropper.x1) / (this.cropper.y2 - this.cropper.y1);\n        return currentCropAspectRatio === this.aspectRatio;\n    }\n}\nImageCropperComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperComponent, deps: [{ token: CropService }, { token: CropperPositionService }, { token: LoadImageService }, { token: i4.DomSanitizer }, { token: i0.ChangeDetectorRef }, { token: i0.NgZone }, { token: HAMMER_LOADER, optional: true }], target: i0.ɵɵFactoryTarget.Component });\nImageCropperComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.11\", type: ImageCropperComponent, selector: \"image-cropper\", inputs: { imageChangedEvent: \"imageChangedEvent\", imageURL: \"imageURL\", imageBase64: \"imageBase64\", imageFile: \"imageFile\", imageAltText: \"imageAltText\", cropperFrameAriaLabel: \"cropperFrameAriaLabel\", output: \"output\", format: \"format\", transform: \"transform\", maintainAspectRatio: \"maintainAspectRatio\", aspectRatio: \"aspectRatio\", resetCropOnAspectRatioChange: \"resetCropOnAspectRatioChange\", resizeToWidth: \"resizeToWidth\", resizeToHeight: \"resizeToHeight\", cropperMinWidth: \"cropperMinWidth\", cropperMinHeight: \"cropperMinHeight\", cropperMaxHeight: \"cropperMaxHeight\", cropperMaxWidth: \"cropperMaxWidth\", cropperStaticWidth: \"cropperStaticWidth\", cropperStaticHeight: \"cropperStaticHeight\", canvasRotation: \"canvasRotation\", initialStepSize: \"initialStepSize\", roundCropper: \"roundCropper\", onlyScaleDown: \"onlyScaleDown\", imageQuality: \"imageQuality\", autoCrop: \"autoCrop\", backgroundColor: \"backgroundColor\", containWithinAspectRatio: \"containWithinAspectRatio\", hideResizeSquares: \"hideResizeSquares\", allowMoveImage: \"allowMoveImage\", cropper: \"cropper\", alignImage: \"alignImage\", disabled: \"disabled\", hidden: \"hidden\" }, outputs: { imageCropped: \"imageCropped\", startCropImage: \"startCropImage\", imageLoaded: \"imageLoaded\", cropperReady: \"cropperReady\", loadImageFailed: \"loadImageFailed\", transformChange: \"transformChange\" }, host: { listeners: { \"window:resize\": \"onResize()\" }, properties: { \"style.text-align\": \"this.alignImage\", \"class.disabled\": \"this.disabled\", \"class.ngx-ix-hidden\": \"this.hidden\" } }, viewQueries: [{ propertyName: \"wrapper\", first: true, predicate: [\"wrapper\"], descendants: true, static: true }, { propertyName: \"sourceImage\", first: true, predicate: [\"sourceImage\"], descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<div\\n  [style.background]=\\\"imageVisible && backgroundColor\\\"\\n  #wrapper\\n>\\n  <img\\n    #sourceImage\\n    class=\\\"ngx-ic-source-image\\\"\\n    role=\\\"presentation\\\"\\n    *ngIf=\\\"safeImgDataUrl\\\"\\n    [src]=\\\"safeImgDataUrl\\\"\\n    [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n    [style.transform]=\\\"safeTransformStyle\\\"\\n    [class.ngx-ic-draggable]=\\\"!disabled && allowMoveImage\\\"\\n    [attr.alt]=\\\"imageAltText\\\"\\n    (load)=\\\"imageLoadedInView()\\\"\\n    (mousedown)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (touchstart)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (error)=\\\"loadImageError($event)\\\"\\n  >\\n  <div\\n    class=\\\"ngx-ic-overlay\\\"\\n    [style.width.px]=\\\"maxSize.width\\\"\\n    [style.height.px]=\\\"maxSize.height\\\"\\n    [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n  ></div>\\n  <div class=\\\"ngx-ic-cropper\\\"\\n       *ngIf=\\\"imageVisible\\\"\\n       [class.ngx-ic-round]=\\\"roundCropper\\\"\\n       [attr.aria-label]=\\\"cropperFrameAriaLabel\\\"\\n       [style.top.px]=\\\"cropper.y1\\\"\\n       [style.left.px]=\\\"cropper.x1\\\"\\n       [style.width.px]=\\\"cropper.x2 - cropper.x1\\\"\\n       [style.height.px]=\\\"cropper.y2 - cropper.y1\\\"\\n       [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n       [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n       (keydown)=\\\"keyboardAccess($event)\\\"\\n       tabindex=\\\"0\\\"\\n  >\\n    <div\\n      (mousedown)=\\\"startMove($event, moveTypes.Move)\\\"\\n      (touchstart)=\\\"startMove($event, moveTypes.Move)\\\"\\n      class=\\\"ngx-ic-move\\\"\\n      role=\\\"presentation\\\">\\n    </div>\\n    <ng-container *ngIf=\\\"!hideResizeSquares\\\">\\n            <span class=\\\"ngx-ic-resize ngx-ic-topleft\\\"\\n                  role=\\\"presentation\\\"\\n                  (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\"\\n                  (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-top\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-topright\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-right\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomright\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottom\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomleft\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-left\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-top\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'top')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'top')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-right\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'right')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'right')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-bottom\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-left\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'left')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'left')\\\">\\n            </span>\\n    </ng-container>\\n  </div>\\n</div>\\n\", styles: [\":host{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}:host>div{width:100%;position:relative}:host>div img.ngx-ic-source-image{max-width:100%;max-height:100%;transform-origin:center}:host>div img.ngx-ic-source-image.ngx-ic-draggable{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}:host .ngx-ic-overlay{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}:host .ngx-ic-cropper{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){:host .ngx-ic-cropper{outline-width:100vh}}:host .ngx-ic-cropper:after{position:absolute;content:\\\"\\\";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}:host .ngx-ic-cropper .ngx-ic-move{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}:host .ngx-ic-cropper:focus .ngx-ic-move{border-color:#1e90ff;border-width:2px}:host .ngx-ic-cropper .ngx-ic-resize{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize .ngx-ic-square{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topleft{top:-12px;left:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-top{top:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topright{top:-12px;right:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-right{top:calc(50% - 12px);right:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomright{bottom:-12px;right:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottom{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomleft{bottom:-12px;left:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-left{top:calc(50% - 12px);left:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar{position:absolute;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-top{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-right{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-bottom{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-left{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper.ngx-ic-round{outline-color:transparent}:host .ngx-ic-cropper.ngx-ic-round:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){:host .ngx-ic-cropper.ngx-ic-round:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}:host .ngx-ic-cropper.ngx-ic-round .ngx-ic-move{border-radius:100%}:host.disabled .ngx-ic-cropper .ngx-ic-resize,:host.disabled .ngx-ic-cropper .ngx-ic-resize-bar,:host.disabled .ngx-ic-cropper .ngx-ic-move{display:none}:host.ngx-ix-hidden{display:none}\\n\"], directives: [{ type: i5.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'image-cropper', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<div\\n  [style.background]=\\\"imageVisible && backgroundColor\\\"\\n  #wrapper\\n>\\n  <img\\n    #sourceImage\\n    class=\\\"ngx-ic-source-image\\\"\\n    role=\\\"presentation\\\"\\n    *ngIf=\\\"safeImgDataUrl\\\"\\n    [src]=\\\"safeImgDataUrl\\\"\\n    [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n    [style.transform]=\\\"safeTransformStyle\\\"\\n    [class.ngx-ic-draggable]=\\\"!disabled && allowMoveImage\\\"\\n    [attr.alt]=\\\"imageAltText\\\"\\n    (load)=\\\"imageLoadedInView()\\\"\\n    (mousedown)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (touchstart)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (error)=\\\"loadImageError($event)\\\"\\n  >\\n  <div\\n    class=\\\"ngx-ic-overlay\\\"\\n    [style.width.px]=\\\"maxSize.width\\\"\\n    [style.height.px]=\\\"maxSize.height\\\"\\n    [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n  ></div>\\n  <div class=\\\"ngx-ic-cropper\\\"\\n       *ngIf=\\\"imageVisible\\\"\\n       [class.ngx-ic-round]=\\\"roundCropper\\\"\\n       [attr.aria-label]=\\\"cropperFrameAriaLabel\\\"\\n       [style.top.px]=\\\"cropper.y1\\\"\\n       [style.left.px]=\\\"cropper.x1\\\"\\n       [style.width.px]=\\\"cropper.x2 - cropper.x1\\\"\\n       [style.height.px]=\\\"cropper.y2 - cropper.y1\\\"\\n       [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n       [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n       (keydown)=\\\"keyboardAccess($event)\\\"\\n       tabindex=\\\"0\\\"\\n  >\\n    <div\\n      (mousedown)=\\\"startMove($event, moveTypes.Move)\\\"\\n      (touchstart)=\\\"startMove($event, moveTypes.Move)\\\"\\n      class=\\\"ngx-ic-move\\\"\\n      role=\\\"presentation\\\">\\n    </div>\\n    <ng-container *ngIf=\\\"!hideResizeSquares\\\">\\n            <span class=\\\"ngx-ic-resize ngx-ic-topleft\\\"\\n                  role=\\\"presentation\\\"\\n                  (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\"\\n                  (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-top\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-topright\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-right\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomright\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottom\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomleft\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-left\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-top\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'top')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'top')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-right\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'right')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'right')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-bottom\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-left\\\"\\n            role=\\\"presentation\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'left')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'left')\\\">\\n            </span>\\n    </ng-container>\\n  </div>\\n</div>\\n\", styles: [\":host{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}:host>div{width:100%;position:relative}:host>div img.ngx-ic-source-image{max-width:100%;max-height:100%;transform-origin:center}:host>div img.ngx-ic-source-image.ngx-ic-draggable{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}:host .ngx-ic-overlay{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}:host .ngx-ic-cropper{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){:host .ngx-ic-cropper{outline-width:100vh}}:host .ngx-ic-cropper:after{position:absolute;content:\\\"\\\";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}:host .ngx-ic-cropper .ngx-ic-move{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}:host .ngx-ic-cropper:focus .ngx-ic-move{border-color:#1e90ff;border-width:2px}:host .ngx-ic-cropper .ngx-ic-resize{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize .ngx-ic-square{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topleft{top:-12px;left:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-top{top:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topright{top:-12px;right:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-right{top:calc(50% - 12px);right:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomright{bottom:-12px;right:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottom{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomleft{bottom:-12px;left:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-left{top:calc(50% - 12px);left:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar{position:absolute;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-top{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-right{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-bottom{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-left{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper.ngx-ic-round{outline-color:transparent}:host .ngx-ic-cropper.ngx-ic-round:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){:host .ngx-ic-cropper.ngx-ic-round:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}:host .ngx-ic-cropper.ngx-ic-round .ngx-ic-move{border-radius:100%}:host.disabled .ngx-ic-cropper .ngx-ic-resize,:host.disabled .ngx-ic-cropper .ngx-ic-resize-bar,:host.disabled .ngx-ic-cropper .ngx-ic-move{display:none}:host.ngx-ix-hidden{display:none}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: CropService }, { type: CropperPositionService }, { type: LoadImageService }, { type: i4.DomSanitizer }, { type: i0.ChangeDetectorRef }, { type: i0.NgZone }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [HAMMER_LOADER]\n                }] }]; }, propDecorators: { wrapper: [{\n                type: ViewChild,\n                args: ['wrapper', { static: true }]\n            }], sourceImage: [{\n                type: ViewChild,\n                args: ['sourceImage', { static: false }]\n            }], imageChangedEvent: [{\n                type: Input\n            }], imageURL: [{\n                type: Input\n            }], imageBase64: [{\n                type: Input\n            }], imageFile: [{\n                type: Input\n            }], imageAltText: [{\n                type: Input\n            }], cropperFrameAriaLabel: [{\n                type: Input\n            }], output: [{\n                type: Input\n            }], format: [{\n                type: Input\n            }], transform: [{\n                type: Input\n            }], maintainAspectRatio: [{\n                type: Input\n            }], aspectRatio: [{\n                type: Input\n            }], resetCropOnAspectRatioChange: [{\n                type: Input\n            }], resizeToWidth: [{\n                type: Input\n            }], resizeToHeight: [{\n                type: Input\n            }], cropperMinWidth: [{\n                type: Input\n            }], cropperMinHeight: [{\n                type: Input\n            }], cropperMaxHeight: [{\n                type: Input\n            }], cropperMaxWidth: [{\n                type: Input\n            }], cropperStaticWidth: [{\n                type: Input\n            }], cropperStaticHeight: [{\n                type: Input\n            }], canvasRotation: [{\n                type: Input\n            }], initialStepSize: [{\n                type: Input\n            }], roundCropper: [{\n                type: Input\n            }], onlyScaleDown: [{\n                type: Input\n            }], imageQuality: [{\n                type: Input\n            }], autoCrop: [{\n                type: Input\n            }], backgroundColor: [{\n                type: Input\n            }], containWithinAspectRatio: [{\n                type: Input\n            }], hideResizeSquares: [{\n                type: Input\n            }], allowMoveImage: [{\n                type: Input\n            }], cropper: [{\n                type: Input\n            }], alignImage: [{\n                type: HostBinding,\n                args: ['style.text-align']\n            }, {\n                type: Input\n            }], disabled: [{\n                type: HostBinding,\n                args: ['class.disabled']\n            }, {\n                type: Input\n            }], hidden: [{\n                type: HostBinding,\n                args: ['class.ngx-ix-hidden']\n            }, {\n                type: Input\n            }], imageCropped: [{\n                type: Output\n            }], startCropImage: [{\n                type: Output\n            }], imageLoaded: [{\n                type: Output\n            }], cropperReady: [{\n                type: Output\n            }], loadImageFailed: [{\n                type: Output\n            }], transformChange: [{\n                type: Output\n            }], onResize: [{\n                type: HostListener,\n                args: ['window:resize']\n            }] } });\n\nclass ImageCropperModule {\n}\nImageCropperModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nImageCropperModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperModule, declarations: [ImageCropperComponent], imports: [CommonModule], exports: [ImageCropperComponent] });\nImageCropperModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperModule, imports: [[\n            CommonModule\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule\n                    ],\n                    declarations: [\n                        ImageCropperComponent,\n                    ],\n                    exports: [\n                        ImageCropperComponent\n                    ]\n                }]\n        }] });\n\nfunction base64ToFile(base64Image) {\n    const split = base64Image.split(',');\n    const type = split[0].replace('data:', '').replace(';base64', '');\n    const byteString = atob(split[1]);\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i += 1) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], { type });\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CropService, CropperSettings, ImageCropperComponent, ImageCropperModule, LoadImageService, base64ToFile, resizeCanvas };\n"],"names":["EventEmitter","TranslateModule","TranslateService","ImageCropperModule","ButtonModule","RippleModule","MessageService","ImageCropperComponent","constructor","toast","translate","fileInput","croppedFile","transform","scale","onImageCropped","event","_this","_asyncToGenerator","blob","base64Image","blobToBase64","emit","onFileInputChange","_this2","target","fileList","files","length","type","startsWith","showErrorMessage","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsDataURL","rotateRight","rotate","zoomIn","zoomOut","flipHorizontal","flipH","key","add","severity","summary","instant","detail","_","i0","ɵɵdirectiveInject","i1","i2","_2","selectors","inputs","outputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ImageCropperComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","ImageCropperComponent_Template_image_cropper_imageCropped_2_listener","$event","ɵɵelementEnd","ImageCropperComponent_Template_button_click_4_listener","ɵɵnamespaceSVG","ɵɵelement","ɵɵnamespaceHTML","ImageCropperComponent_Template_button_click_8_listener","ImageCropperComponent_Template_button_click_12_listener","ImageCropperComponent_Template_button_click_15_listener","ImageCropperComponent_Template_button_click_18_listener","ɵɵrestoreView","_r1","_r0","ɵɵreference","ɵɵresetView","click","ImageCropperComponent_Template_input_change_21_listener","ɵɵadvance","ɵɵproperty","undefined","i3","styles","FileUploadModule","lastValueFrom","selectCurrentUserNickname","selectIsLoadingAuth","generateImagePath","Store","HttpClient","readFileAsBase64","updateUserImageAction","URLS","CommonModule","ContainerComponent","RouterLink","EventBlockerModule","SetUserImageComponent_div_5_div_1_Template_input_change_1_listener","_r8","ctx_r7","ɵɵnextContext","onSelectFileUpload","SetUserImageComponent_div_5_div_1_Template_button_dragend_3_listener","ctx_r9","isDragover","SetUserImageComponent_div_5_div_1_Template_button_dragover_3_listener","ctx_r10","SetUserImageComponent_div_5_div_1_Template_button_dragenter_3_listener","ctx_r11","SetUserImageComponent_div_5_div_1_Template_button_dragleave_3_listener","ctx_r12","SetUserImageComponent_div_5_div_1_Template_button_mouseleave_3_listener","ctx_r13","SetUserImageComponent_div_5_div_1_Template_button_drop_3_listener","ctx_r14","storeFile","SetUserImageComponent_div_5_div_1_Template_button_click_3_listener","_r6","ɵɵtext","ɵɵpureFunction1","_c0","ctx_r4","SetUserImageComponent_div_5_div_2_Template_app_image_cropper_croppedFile_1_listener","_r17","ctx_r16","onSelectCroppedFile","ctx_r5","fileToCropper","ɵɵtemplate","SetUserImageComponent_div_5_div_1_Template","SetUserImageComponent_div_5_div_2_Template","ctx_r0","SetUserImageComponent_div_6_button_4_Template_button_click_0_listener","restoredCtx","_r21","path_r19","$implicit","ctx_r20","onImageClick","_c1","ctx_r18","selectedPath","ɵɵsanitizeUrl","SetUserImageComponent_div_6_Template_button_click_1_listener","_r23","ctx_r22","refresh","SetUserImageComponent_div_6_button_4_Template","SetUserImageComponent_div_6_Template_button_click_5_listener","ctx_r24","noImagePath","ɵɵclassProp","ctx_r1","isRefreshed","imagePaths","slice","page","PAGE","SET_PHOTO","ɵɵpureFunction3","_c2","ctx_r2","BACK","PROFILE","ɵɵpipeBind1","userNickname$","_c3","ctx_r3","SetUserImageComponent","store","http","isUploadMode","select","isLoading$","imagePath","changeMode","confirm","res","get","responseType","base64String","dispatch","photo","dataBase64","fileExt","error","console","setTimeout","dataTransfer","item","log","_this3","file","_this4","i4","ngContentSelectors","_c4","SetUserImageComponent_Template","ɵɵprojection","SetUserImageComponent_div_5_Template","SetUserImageComponent_div_6_Template","SetUserImageComponent_Template_button_click_8_listener","SetUserImageComponent_button_9_Template","SetUserImageComponent_button_10_Template","SetUserImageComponent_Template_button_click_11_listener","WELCOME_PHOTO","i5","Ripple","i6","ButtonDirective","i7","NgClass","NgForOf","NgIf","AsyncPipe","TranslatePipe","i8","EventBlockerDirective","count","filePath","fileExtension","totalDigits","Error","getRandomUniqueDigits","allDigits","Array","from","i","shuffledDigits","sort","Math","random","selectedDigits","map","digit","EmptyError","source","config","hasConfig","_hasValue","_value","subscribe","next","value","complete","defaultValue","Injectable","isDevMode","Component","ChangeDetectionStrategy","Optional","Inject","ViewChild","Input","HostBinding","Output","HostListener","NgModule","HAMMER_LOADER","takeUntil","first","merge","fromEvent","ImageCropperComponent_img_2_Template","_r5","ɵɵgetCurrentView","ImageCropperComponent_img_2_Template_img_load_0_listener","imageLoadedInView","ImageCropperComponent_img_2_Template_img_mousedown_0_listener","ctx_r6","startMove","moveTypes","Drag","ImageCropperComponent_img_2_Template_img_touchstart_0_listener","ImageCropperComponent_img_2_Template_img_error_0_listener","ctx_r8","loadImageError","ɵɵstyleProp","imageVisible","safeTransformStyle","disabled","allowMoveImage","safeImgDataUrl","ɵɵattribute","imageAltText","ImageCropperComponent_div_4_ng_container_2_Template","_r11","ɵɵelementContainerStart","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_1_listener","Resize","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_1_listener","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_5_listener","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_5_listener","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_9_listener","ctx_r15","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_9_listener","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_13_listener","ctx_r17","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_13_listener","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_17_listener","ctx_r19","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_17_listener","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_18_listener","ctx_r21","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_18_listener","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_19_listener","ctx_r23","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_19_listener","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_20_listener","ctx_r25","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_20_listener","ctx_r26","ɵɵelementContainerEnd","ImageCropperComponent_div_4_Template","_r28","ImageCropperComponent_div_4_Template_div_keydown_0_listener","ctx_r27","keyboardAccess","ImageCropperComponent_div_4_Template_div_mousedown_1_listener","ctx_r29","Move","ImageCropperComponent_div_4_Template_div_touchstart_1_listener","ctx_r30","cropper","y1","x1","x2","y2","alignImage","marginLeft","roundCropper","cropperFrameAriaLabel","hideResizeSquares","CropperSettings","format","output","maintainAspectRatio","aspectRatio","resetCropOnAspectRatioChange","resizeToWidth","resizeToHeight","cropperMinWidth","cropperMinHeight","cropperMaxHeight","cropperMaxWidth","cropperStaticWidth","cropperStaticHeight","canvasRotation","initialStepSize","onlyScaleDown","imageQuality","autoCrop","backgroundColor","containWithinAspectRatio","cropperScaledMinWidth","cropperScaledMinHeight","cropperScaledMaxWidth","cropperScaledMaxHeight","stepSize","setOptions","options","Object","keys","filter","k","forEach","validateOptions","setOptionsFromChanges","changes","currentValue","MoveTypes","getPositionForKey","getInvertedPositionForKey","getEventForKey","clientX","clientY","resizeCanvas","canvas","width","height","width_source","height_source","round","ratio_w","ratio_h","ratio_w_half","ceil","ratio_h_half","getContext","img","getImageData","img2","createImageData","data","data2","j","center_y","weight","weights","weights_alpha","gx_r","gx_g","gx_b","gx_a","xx_start","floor","yy_start","xx_stop","yy_stop","min","yy","dy","abs","center_x","w0","xx","dx","w","sqrt","pos_x","putImageData","percentage","percent","totalValue","CropService","crop","loadedImage","settings","maxSize","imagePosition","getImagePosition","cropCanvas","document","createElement","fillStyle","fillRect","scaleX","scaleY","flipV","translateH","translateV","getCanvasTranslate","transformedImage","transformed","setTransform","size","PI","drawImage","image","cropperPosition","offsetImagePosition","getOffsetImagePosition","resizeRatio","getResizeRatio","cropToBlob","base64","toDataURL","getQuality","toBlob","objectUrl","URL","createObjectURL","translateUnit","ratio","getRatio","out","max","exifTransform","offsetX","offsetY","original","ratioWidth","ratioHeight","ratios","push","ɵfac","CropService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn","ngDevMode","CropperPositionService","resetCropperPosition","sourceImage","nativeElement","cropperWidth","cropperHeight","cropperHeightWithAspectRatio","cropperWidthWithAspectRatio","move","moveStart","diffX","getClientX","diffY","getClientY","resize","moveX","moveY","position","newWidth","newHeight","checkAspectRatio","overflowX","overflowY","overflowX1","overflowX2","overflowY1","overflowY2","touches","CropperPositionService_Factory","testAutoOrientationImageURL","supportsAutomaticRotation","Image","supported","src","getTransformationsFromExifData","exifRotationOrArrayBuffer","getExifRotation","flip","arrayBuffer","view","DataView","getUint16","byteLength","offset","marker","getUint32","little","tags","LoadImageService","autoRotateSupported","loadImageFile","cropperSettings","checkImageTypeAndLoadImageFromArrayBuffer","imageType","isValidImageType","loadImageFromArrayBuffer","test","loadImageFromURL","url","fetch","buffer","loadBase64Image","imageBase64","base64ToArrayBuffer","replace","binaryString","atob","len","bytes","Uint8Array","charCodeAt","_ref","Blob","originalImage","isSvg","originalImageSize","getSvgImageSize","originalObjectUrl","originalArrayBuffer","e","_x","_x2","apply","arguments","transformImageFromArrayBuffer","parser","DOMParser","doc","parseFromString","text","svgElement","querySelector","widthAttr","getAttribute","heightAttr","viewBoxAttr","viewBox","split","forceTransform","_this5","autoRotate","naturalWidth","naturalHeight","transformLoadedImage","_this6","originalSize","transformedSize","getTransformedSize","loadImageFromObjectUrl","minWidthToContain","minHeightToContain","LoadImageService_Factory","cropService","cropperPositionService","loadImageService","sanitizer","cd","zone","hammerLoader","setImageMaxSizeRetries","resizedWhileHidden","hidden","imageCropped","startCropImage","imageLoaded","cropperReady","loadImageFailed","transformChange","reset","ngOnChanges","onChangesUpdateSettings","onChangesInputImage","then","setLoadedImage","catch","err","setMaxSize","setCropperScaledMinSize","setCropperScaledMaxSize","aspectRatioIsCorrect","checkCropperPosition","doAutoCrop","setCssTransform","onResize","isValidImageChangedEvent","imageChangedEvent","imageURL","imageFile","bypassSecurityTrustStyle","ngOnInit","activatePinchGesture","active","bypassSecurityTrustResourceUrl","markForCheck","checkImageMaxSizeRecursively","sourceImageLoaded","offsetWidth","oldMaxSize","resizeCropperPosition","_this7","Hammer","window","hammer","wrapper","set","enable","on","onPinch","bind","pinchStop","startPinch","warn","changeKeyboardStepSize","keyboardMoveCropper","keyboardWhiteList","includes","moveType","shiftKey","altKey","moveEvent","preventDefault","stopPropagation","handleMouseMove","handleMouseUp","Pinch","initMouseMove","pipe","run","sourceImageStyle","getComputedStyle","parseFloat","setCropperScaledMinWidth","setCropperScaledMinHeight","maintainSize","cropToBase64","_this8","currentCropAspectRatio","ImageCropperComponent_Factory","DomSanitizer","ChangeDetectorRef","NgZone","ɵcmp","ɵɵdefineComponent","viewQuery","ImageCropperComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","hostVars","hostBindings","ImageCropperComponent_HostBindings","ImageCropperComponent_resize_HostBindingHandler","ɵɵresolveWindow","ɵɵNgOnChangesFeature","dependencies","changeDetection","ImageCropperModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","imports","base64ToFile","byteString","ab","ArrayBuffer","ia"],"sourceRoot":"webpack:///","x_google_ignoreList":[5,6]}