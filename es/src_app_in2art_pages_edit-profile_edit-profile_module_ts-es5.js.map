{"version":3,"sources":["webpack:///src/app/in2art/pages/edit-profile/edit-profile-routing.module.ts","webpack:///src/app/in2art/pages/edit-profile/edit-profile.component.html","webpack:///src/app/in2art/pages/edit-profile/edit-profile.component.ts","webpack:///src/app/in2art/pages/edit-profile/edit-profile.module.ts"],"names":["routes","path","children","component","EditProfileComponent","EditProfileRoutingModule","RouterModule","main","fb","modalService","domSanitizer","files","validate","fotoModificada","mostrarFileRequired","newPage","form","group","id","photo","name","lastName","bio","email","username","phone","address","web","carregant","provider","getCurrentUser","user","controls","setValue","Utils","currentUser","profileArreglat","profile","forEach","e","idprofile","profile1","profile2","profile3","profile4","closeUploadFileModal","onDestroyPage","open","uploadFileModal","size","modalClass","backdropClass","hideCloseButton","centered","backdrop","animation","keyboard","closeOnOutsideClick","saved","imageCropper","croppedImage","close","removePhoto","touched","value","markAllAsTouched","valid","profileIncorrecte","console","log","formData","FormData","file","File","append","carregantSave","ps","postFormData","data","eh","hiHaError","toastDanger","refreshCurrentUser","toastSuccess","goTo","EditProfileModule","ImageCroperModule","CommonModule","SharedModule","FormsModule","ModalModule"],"mappings":"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","file":"src_app_in2art_pages_edit-profile_edit-profile_module_ts-es5.js","sourcesContent":["import { EditProfileComponent } from './edit-profile.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [{\r\n    path: '',\r\n    children: [\r\n        {\r\n            path: '',\r\n            component: EditProfileComponent\r\n        }\r\n    ]\r\n}];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class EditProfileRoutingModule { }\r\n","<div class=\"content\">\r\n    <div class=\"card\">\r\n        <div class=\"card-body\">\r\n\r\n            <form *ngIf=\"!carregant\" class=\"theme-form\" [formGroup]=\"form\">\r\n                <div class=\"divBotoFoto form-grup\">\r\n                    <button class=\"botoFoto\" (click)=\"openUploadFileModal()\" data-content=\"Change photo\">\r\n                        <img class=\"foto\" [src]=\"this.form.controls.photo.value\" alt=\"profile photo\">\r\n                    </button>\r\n                    <br>\r\n                    <button class=\"boto botoVermell botoPetit removePhoto\" *ngIf=\"this.form.controls.photo.value\" (click)=\"removePhoto()\" i18n=\"@@Remove photo\">Remove photo</button>\r\n                </div>\r\n\r\n                <!-- <input id=\"inputFile\" class=\"form-camp\" type=\"file\" multiple (input)=\"addFiles()\" [disabled]=\"processingFiles\"\r\n                    accept=\".JPG,.PNG,.GIF,.MP4,.AVI,.MP3,.WAV,.OGG\"> -->\r\n\r\n                    \r\n\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3 asterisc\" i18n=\"@@Name\">Name</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"name\">\r\n                    <app-missatge-error-form [control]=\"form.controls.name\" [nomText]=\"'name'\"></app-missatge-error-form>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Last name\">Last name</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"lastName\">\r\n                    <app-missatge-error-form [control]=\"form.controls.lastName\" [nomText]=\"'last name'\"></app-missatge-error-form>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Bio\">Bio</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" maxlength=\"3000\" formControlName=\"bio\">\r\n                    <app-missatge-error-form [control]=\"form.controls.bio\" [nomText]=\"'bio'\"></app-missatge-error-form>\r\n                </div>\r\n                <!-- <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-12 col-sm-3 asterisc\" i18n=\"@@Profile\">Profile</label>\r\n                    <div class=\"col-12 col-sm-9 animate-chk row no-gutters\">\r\n                        <label class=\"d-block checkbox-label col-12 col-sm-6 col-md-3\" for=\"checkbox1\">\r\n                            <input class=\"checkbox_animated\" id=\"checkbox1\" type=\"checkbox\" formControlName=\"profile1\" i18n=\"@@Artist\">Artist\r\n                        </label>\r\n                        <label class=\"d-block checkbox-label col-12 col-sm-6 col-md-3\" for=\"checkbox2\">\r\n                            <input class=\"checkbox_animated\" id=\"checkbox2\" type=\"checkbox\" formControlName=\"profile2\" i18n=\"@@Professional\">Professional\r\n                        </label>\r\n                        <label class=\"d-block checkbox-label col-12 col-sm-6 col-md-3\" for=\"checkbox3\">\r\n                            <input class=\"checkbox_animated\" id=\"checkbox3\" type=\"checkbox\" formControlName=\"profile3\" i18n=\"@@Collector\">Collector\r\n                        </label>\r\n                        <label class=\"d-block checkbox-label col-12 col-sm-6 col-md-3\" for=\"checkbox4\">\r\n                            <input class=\"checkbox_animated\" id=\"checkbox4\" type=\"checkbox\" formControlName=\"profile4\" i18n=\"@@Viewer\">Viewer\r\n                        </label>\r\n                    </div>\r\n                    <div *ngIf=\"profileIncorrecte()\" class=\"textErrorForm\" i18n=\"@@Profile is required\">Profile is required</div>\r\n                </div> -->\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Email\">Email</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" disabled formControlName=\"email\">\r\n                    <app-missatge-error-form [control]=\"form.controls.email\" [nomText]=\"'email'\"></app-missatge-error-form>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Username\">Username</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" disabled formControlName=\"username\">\r\n                    <app-missatge-error-form [control]=\"form.controls.username\" [nomText]=\"'username'\"></app-missatge-error-form>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Phone\">Phone</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"phone\">\r\n                    <app-missatge-error-form [control]=\"form.controls.phone\" [nomText]=\"'phone'\"></app-missatge-error-form>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Address\">Address</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"address\">\r\n                    <app-missatge-error-form [control]=\"form.controls.address\" [nomText]=\"'address'\"></app-missatge-error-form>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Website\">Website</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"web\">\r\n                    <app-missatge-error-form [control]=\"form.controls.web\" [nomText]=\"'website'\"></app-missatge-error-form>\r\n                </div>\r\n\r\n                <div style=\"text-align:center;\">\r\n                    <input class=\"boto botoPrincipal botoGran\" type=\"button\" value=\"Save\" (click)=\"submit()\" [disabled]=\"carregantSave\">\r\n                </div>\r\n            </form>\r\n            <div *ngIf=\"carregant\" class=\"carregant\">\r\n                <app-loading></app-loading>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>\r\n\r\n<!-- MODALS -->\r\n<modal id=\"uploadFileModal\" class=\"uploadFileModal\" #uploadFileModal>\r\n    <modal-header i18n=\"@@Upload Photo\">\r\n        Upload Photo\r\n    </modal-header>\r\n \r\n    <modal-content>\r\n        <app-image-croper #imageCropper></app-image-croper>\r\n    </modal-content>\r\n \r\n    <modal-footer>\r\n        <button class=\"boto botoPrincipal botoGran\" (click)=\"closeUploadFileModal(false)\" i18n=\"@@Close\">Close</button>\r\n        <button class=\"boto botoPrincipal botoGran\" (click)=\"closeUploadFileModal(true)\" i18n=\"@@Save\">Save</button>\r\n    </modal-footer>\r\n</modal>\r\n","import { MainService } from '../../services/main.service';\r\nimport { Utils } from '../../services/utils.service';\r\nimport * as $ from \"jquery\";\r\n\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Component, OnInit, SecurityContext, ViewChild } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ModalManager } from 'ngb-modal';\r\n\r\n@Component({\r\n    selector: 'app-edit-profile',\r\n    templateUrl: './edit-profile.component.html',\r\n    styleUrls: ['./edit-profile.component.scss']\r\n})\r\nexport class EditProfileComponent implements OnInit {\r\n\r\n    @ViewChild(\"uploadFileModal\") uploadFileModal;\r\n    @ViewChild(\"imageCropper\") imageCropper;\r\n    \r\n    public carregant;\r\n    public carregantSave;\r\n\r\n    public files = [];\r\n\r\n    public form: FormGroup;\r\n    public validate = false;\r\n    public fotoModificada = false;\r\n\r\n    \r\n    public mostrarFileRequired = false;\r\n\r\n    constructor(\r\n        public main: MainService,\r\n        private fb: FormBuilder,\r\n        private modalService: ModalManager,\r\n        public domSanitizer: DomSanitizer\r\n    ) {\r\n        main.newPage(this);\r\n        \r\n        this.form = this.fb.group({\r\n            id: [\"\"],\r\n            photo: [\"\"],\r\n            name: [\"\"],\r\n            lastName: [\"\"],\r\n            bio: [\"\"],\r\n            // profile1: [false],\r\n            // profile2: [false],\r\n            // profile3: [false],\r\n            // profile4: [false],\r\n            email: [\"\"],\r\n            username: [\"\"],\r\n            phone: [\"\"],\r\n            address: [\"\"],\r\n            web: [\"\"],\r\n        });\r\n    }\r\n\r\n    async ngOnInit() {\r\n        this.carregant = true;\r\n        let user: any = await this.main.provider.getCurrentUser();\r\n        this.carregant = false;\r\n\r\n        this.form.controls.photo.setValue(Utils.prependImagesUrl(this.main.currentUser?.photo));\r\n        this.form.controls.name.setValue(user?.name);\r\n        this.form.controls.lastName.setValue(user?.lastName);\r\n        this.form.controls.bio.setValue(user?.bio || \"\");\r\n        this.form.controls.email.setValue(user?.email || \"\");\r\n        this.form.controls.username.setValue(user?.username || \"\");\r\n        this.form.controls.phone.setValue(user?.phone || \"\");\r\n        this.form.controls.address.setValue(user?.address || \"\");\r\n        this.form.controls.web.setValue(user?.web || \"\");\r\n\r\n        let profileArreglat = [];\r\n        user.profile.forEach((e) => { profileArreglat[e.idprofile] = true });\r\n        \r\n        this.form.controls.profile1.setValue(profileArreglat[1]);\r\n        this.form.controls.profile2.setValue(profileArreglat[2]);\r\n        this.form.controls.profile3.setValue(profileArreglat[3]);\r\n        this.form.controls.profile4.setValue(profileArreglat[4]);\r\n    }\r\n    ngOnDestroy() {\r\n        this.closeUploadFileModal(false);\r\n        this.main.onDestroyPage();\r\n    }\r\n\r\n    openUploadFileModal() {\r\n        this.modalService.open(this.uploadFileModal, {\r\n            size: \"lg\",\r\n            modalClass: \"uploadFileModal\",\r\n            backdropClass: \"modal-backdrop\",\r\n            hideCloseButton: false,\r\n            centered: true,\r\n            backdrop: true,\r\n            animation: true,\r\n            keyboard: true,\r\n            closeOnOutsideClick: false,\r\n        });\r\n    }\r\n    closeUploadFileModal(saved) {\r\n        if (saved) {\r\n            this.form.controls.photo.setValue(this.imageCropper.croppedImage);\r\n            this.fotoModificada = true;\r\n        }\r\n        this.modalService.close(this.uploadFileModal);\r\n    }\r\n    removePhoto() {\r\n        this.form.controls.photo.setValue(null);\r\n        this.imageCropper.removePhoto();\r\n        this.fotoModificada = true;\r\n    }\r\n    \r\n    profileIncorrecte() {\r\n        return (\r\n            this.form.controls.profile1.touched ||\r\n            this.form.controls.profile2.touched ||\r\n            this.form.controls.profile3.touched ||\r\n            this.form.controls.profile4.touched\r\n        ) && !(\r\n            this.form.controls.profile1.value ||\r\n            this.form.controls.profile2.value ||\r\n            this.form.controls.profile3.value ||\r\n            this.form.controls.profile4.value\r\n        );\r\n    }\r\n    \r\n    \r\n    public submit() {\r\n        this.form.markAllAsTouched();\r\n\r\n        this.mostrarFileRequired = !Utils.objPle(this.files);\r\n\r\n        if (!this.form.valid || this.profileIncorrecte()) {\r\n            console.log(\"--- INVÀLID ---\");\r\n            console.log(this.form);\r\n            return;\r\n        }\r\n\r\n        const formData = new FormData();\r\n\r\n        if (this.fotoModificada) {\r\n\r\n            if (this.form.controls.photo.value) {\r\n                var file = new File([Utils.dataURLToBlob(this.form.controls.photo.value)], \"photo.png\");\r\n                formData.append(\"photo\", file, \"photo.png\");\r\n            }\r\n            else {\r\n                formData.append(\"photoDelete\", \"\");\r\n            }\r\n        }\r\n        formData.append(\"name\", this.form.controls.name.value);\r\n        formData.append(\"lastName\", this.form.controls.lastName.value);\r\n        formData.append(\"bio\", this.form.controls.bio.value);\r\n        formData.append(\"phone\", this.form.controls.phone.value);\r\n        formData.append(\"address\", this.form.controls.address.value);\r\n        formData.append(\"web\", this.form.controls.web.value);\r\n\r\n        if (this.form.controls.profile1.value) formData.append(\"profile[]\", \"1\");\r\n        if (this.form.controls.profile2.value) formData.append(\"profile[]\", \"2\");\r\n        if (this.form.controls.profile3.value) formData.append(\"profile[]\", \"3\");\r\n        if (this.form.controls.profile4.value) formData.append(\"profile[]\", \"4\");\r\n\r\n        this.carregantSave = true;\r\n\r\n        this.main.ps.postFormData(`/editProfile`, formData,\r\n            (data) => {\r\n                this.carregantSave = false;\r\n                // Error //\r\n                if (this.main.eh.hiHaError(data)) {\r\n                    this.main.toastDanger(\"Couldn't edit profile\");\r\n                    return;\r\n                }\r\n\r\n                this.main.refreshCurrentUser();\r\n\r\n                this.main.toastSuccess(\"Profile modified successfully\");\r\n                this.main.goTo(\"/profile\");\r\n            }\r\n        );\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SharedModule } from '../../../shared/shared.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { EditProfileComponent } from './edit-profile.component';\r\nimport { EditProfileRoutingModule } from './edit-profile-routing.module';\r\nimport { ImageCroperModule } from './../../components/_tools/image-croper/image.croper.module';\r\nimport { ModalModule } from 'ngb-modal';\r\n\r\n@NgModule({\r\n    declarations: [EditProfileComponent],\r\n    imports: [\r\n        EditProfileRoutingModule,\r\n        ImageCroperModule,\r\n        CommonModule,\r\n        SharedModule,\r\n        FormsModule,\r\n        ModalModule,\r\n    ]\r\n})\r\nexport class EditProfileModule { }\r\n"]}