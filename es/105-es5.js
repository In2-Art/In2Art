!function(){var t,e,n;function i(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkcuba=self.webpackChunkcuba||[]).push([[105],{105:function(r,c,s){"use strict";s.r(c),s.d(c,{NotificationsRoutingModule:function(){return E}});var l=s(2080),f=s(4762),d=function t(e,n){a(this,t),this.user=e,this.msgInfo=n},u=s(5366),p=s(2927),g=s(4596),m=s(1116),b=s(5641),v=s(4616);function h(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"div",9),u["\u0275\u0275element"](1,"app-loading"),u["\u0275\u0275elementEnd"]())}function y(t,e){1&t&&u["\u0275\u0275element"](0,"app-notification",13),2&t&&u["\u0275\u0275property"]("notification",e.$implicit)}function C(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"div",14),u["\u0275\u0275elementContainerStart"](2),u["\u0275\u0275i18n"](3,15),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275text"](4,"\xa0"),u["\u0275\u0275element"](5,"i",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function O(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"div",10),u["\u0275\u0275template"](1,y,1,1,"app-notification",11),u["\u0275\u0275template"](2,C,6,0,"div",12),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("hidden",!(1==n.tabActiu)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",n.userNotifications),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.userNotifications.length&&1!=n.carregantProfile)}}function P(t,e){1&t&&u["\u0275\u0275element"](0,"app-notification",18),2&t&&u["\u0275\u0275property"]("notification",e.$implicit)}function _(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"div",14),u["\u0275\u0275elementContainerStart"](2),u["\u0275\u0275i18n"](3,19),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275text"](4,"\xa0"),u["\u0275\u0275element"](5,"i",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function x(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"div",10),u["\u0275\u0275template"](1,P,1,1,"app-notification",17),u["\u0275\u0275template"](2,_,6,0,"div",12),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("hidden",!(2==n.tabActiu)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",n.systemNotifications),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.systemNotifications.length&&1!=n.carregantProfile)}}function M(t,e){1&t&&u["\u0275\u0275element"](0,"app-notification",18),2&t&&u["\u0275\u0275property"]("notification",e.$implicit)}function w(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"div",14),u["\u0275\u0275elementContainerStart"](2),u["\u0275\u0275i18n"](3,20),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275text"](4,"\xa0"),u["\u0275\u0275element"](5,"i",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function N(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"div",10),u["\u0275\u0275template"](1,M,1,1,"app-notification",17),u["\u0275\u0275template"](2,w,6,0,"div",12),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("hidden",!(3==n.tabActiu)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",n.shopNotifications),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.shopNotifications.length&&1!=n.carregantProfile)}}var k,T,S=[{path:"",children:[{path:"",component:(k=function(){function t(e,n){a(this,t),this.main=e,this.provider=n,this.tabActiu=1,this.num=0,this.userNotifications=[],this.systemNotifications=[],this.shopNotifications=[],e.newPage(this)}var e,n,i;return e=t,(n=[{key:"ngOnInit",value:function(){return(0,f.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.getUserNotifications();case 1:case"end":return t.stop()}},t,this)}))}},{key:"ngOnDestroy",value:function(){this.main.onDestroyPage()}},{key:"getUserNotifications",value:function(){return(0,f.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=0,t.next=3,this.main.provider.getAllUserNotification(this.main.currentUser.id).then(function(t){e=t});case 3:if(null==e){t.next=17;break}a=0;case 5:if(!(a<e.length)){t.next=17;break}if(t.t0=0!=e[a].isAlive,!t.t0){t.next=14;break}return t.next=10,this.main.provider.getUserById(e[a].from_user_notification);case 10:i=t.sent,o=new Date(e[a].date_notification),n={msgType:e[a].tipus_notification,user:i,msg:e[a].missatge_notification,date:o,isReviewed:e[a].isReviewed_notification,idNotification:e[a].id_notification},this.identifyTypeOfContent(n);case 14:a++,t.next=5;break;case 17:case"end":return t.stop()}},t,this)}))}},{key:"identifyTypeOfContent",value:function(t){var e={msgType:t.msgType,msg:t.msg,date:t.date,isReviewed:t.isReviewed,idNotification:t.idNotification};switch(t.msgType){case 1:this.userNotifications.push(new d(t.user,e)),this.num++;break;case 2:this.systemNotifications.push(new d(t.user,e)),this.num++;break;case 3:this.shopNotifications.push(new d(t.user,e)),this.num++;break;default:console.log("No valid notification number: "+t.msgType+" Object: "+t.user+" msg "+t.msg)}}}])&&o(e.prototype,n),i&&o(e,i),t}(),k.\u0275fac=function(t){return new(t||k)(u["\u0275\u0275directiveInject"](p.J),u["\u0275\u0275directiveInject"](g.H))},k.\u0275cmp=u["\u0275\u0275defineComponent"]({type:k,selectors:[["app-notifications"]],decls:13,vars:7,consts:function(){return[[1,"content"],[1,"card"],[1,"botonsTab","d-flex","flex-row"],[1,"botoTab",3,"click"],[1,"fas","fa-user"],["src","assets/in2art/logos/ma_blanca_text.svg",1,"logoTab"],[1,"fas","fa-shopping-bag"],["class","carregantProfile",4,"ngIf"],["class","tabNotifications",3,"hidden",4,"ngIf"],[1,"carregantProfile"],[1,"tabNotifications",3,"hidden"],["class","notification",3,"notification",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"notification",3,"notification"],[1,"noPublicacions"],"Ya lo has visto todo",[1,"fas","fa-check-circle"],[3,"notification",4,"ngFor","ngForOf"],[3,"notification"],"Ya lo has visto todo","Ya lo has visto todo"]},template:function(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"button",3),u["\u0275\u0275listener"]("click",function(){return e.tabActiu=1}),u["\u0275\u0275element"](4,"i",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"button",3),u["\u0275\u0275listener"]("click",function(){return e.tabActiu=2}),u["\u0275\u0275element"](6,"img",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"button",3),u["\u0275\u0275listener"]("click",function(){return e.tabActiu=3}),u["\u0275\u0275element"](8,"i",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](9,h,2,0,"div",7),u["\u0275\u0275template"](10,O,3,3,"div",8),u["\u0275\u0275template"](11,x,3,3,"div",8),u["\u0275\u0275template"](12,N,3,3,"div",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&t&&(u["\u0275\u0275advance"](3),u["\u0275\u0275attribute"]("data-open",1==e.tabActiu),u["\u0275\u0275advance"](2),u["\u0275\u0275attribute"]("data-open",2==e.tabActiu),u["\u0275\u0275advance"](2),u["\u0275\u0275attribute"]("data-open",3==e.tabActiu),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.carregantProfile),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.carregantProfile),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.carregantProfile),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.carregantProfile))},directives:[m.NgIf,b.N,m.NgForOf,v.c],styles:[".content[_ngcontent-%COMP%]{max-width:940px;padding:100px 0;border:none}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]{border-bottom:var(--border-card);border-radius:15px 15px 0 0}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;background-color:var(--color-fons-card);transition:background-color .3s}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[_ngcontent-%COMP%]   .logoTab[_ngcontent-%COMP%]{max-height:40px}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[data-open=true][_ngcontent-%COMP%]{background-color:var(--color-tab-obert)}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;transition:font-size .5s}.content[_ngcontent-%COMP%]   .noShopNotificationText[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .noSystemNotificationText[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .noUserNotificationText[_ngcontent-%COMP%]{padding-top:20px;text-align:center;font-size:30px;font-weight:700;color:grey}.content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:block;margin:40px auto;width:160px;filter:opacity(.1) drop-shadow(0 0 0 grey)}.content[_ngcontent-%COMP%]   .noPublicacions[_ngcontent-%COMP%]{text-align:center;color:var(--color-text);padding:1em;font-size:1.75em}@media only screen and (max-width:576px){.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]{border-radius:0}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),k)}]}],E=((T=function t(){a(this,t)}).\u0275fac=function(t){return new(t||T)},T.\u0275mod=u["\u0275\u0275defineNgModule"]({type:T}),T.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[l.Bz.forChild(S)],l.Bz]}),T)}}])}();