(self.webpackChunkcuba=self.webpackChunkcuba||[]).push([[692],{4692:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthModule:function(){return D}});var o=n(1116),r=n(8826),a=n(1041),i=n(4391),l=n(1073),c=n(4762),m=n(5366),s=n(1407),d=n(2080);let p=(()=>{class e{constructor(e,t,n){this.main=e,this.router=t,this.route=n,this.valid=null,e.newPage(this),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.route.params.subscribe(e=>this.paramsUrl=e)}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){this.res=yield this.main.provider.activarUser(this.paramsUrl.key),this.res&&this.main.toastSuccess(this.res.message||this.res.msg),this.main.goTo("login")})}ngOnDestroy(){this.main.onDestroyPage()}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](s.J),m["\u0275\u0275directiveInject"](d.F0),m["\u0275\u0275directiveInject"](d.gz))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-verify-account"]],decls:3,vars:0,consts:[[1,"content","content-m"],[1,"card"],[1,"card-body"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275element"](2,"div",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]())},styles:[".content[_ngcontent-%COMP%]{padding:100px 0;text-align:center}.content[_ngcontent-%COMP%]   .missatge[_ngcontent-%COMP%]{margin-bottom:40px;font-size:1.5rem}.content[_ngcontent-%COMP%]   .boto[_ngcontent-%COMP%]{font-size:1.2rem}"]}),e})();var u=n(5641);function f(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",5),m["\u0275\u0275elementStart"](1,"h3",6),m["\u0275\u0275i18n"](2,7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"button",8),m["\u0275\u0275listener"]("click",function(){return m["\u0275\u0275restoreView"](e),m["\u0275\u0275nextContext"]().enviarEmail()}),m["\u0275\u0275i18n"](4,9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function g(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",10),m["\u0275\u0275i18n"](2,11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](3,"app-loading"),m["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",12),m["\u0275\u0275i18nStart"](2,13),m["\u0275\u0275element"](3,"br"),m["\u0275\u0275element"](4,"br"),m["\u0275\u0275i18nEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](4),m["\u0275\u0275i18nExp"](e.email),m["\u0275\u0275i18nApply"](2)}}function v(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,g,4,0,"div",4),m["\u0275\u0275template"](2,h,5,1,"div",4),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",e.carregant),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!e.carregant&&e.res)}}let b=(()=>{class e{constructor(e){this.main=e,this.carregant=!1,e.newPage(this)}ngOnInit(){var e,t;return(0,c.mG)(this,void 0,void 0,function*(){(null===(e=this.main.currentUser)||void 0===e?void 0:e.email)&&(this.email=null===(t=this.main.currentUser)||void 0===t?void 0:t.email,this.enviarEmail())})}ngOnDestroy(){this.main.onDestroyPage()}enviarEmail(){return(0,c.mG)(this,void 0,void 0,function*(){this.carregant=!0,this.res=yield this.main.provider.recuperarPasswordEnviarEmail(this.email),this.carregant=!1,console.log(this.res),this.res||(this.main.toastDanger(this.main.t("Error sending email to")+" "+this.email),this.emailForm=this.email,this.email="")})}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](s.J))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-reset-password"]],decls:5,vars:2,consts:function(){let e,t,n,o;return e="Enviar correo electr\xF3nico",t="Intentar otra vez",n="Enviando correo electr\xF3nico...",o="Te hemos enviado un correo electr\xF3nico a" + "[\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd]" + " " + "\ufffd0\ufffd" + "" + "[\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd]" + " para restablecer tu contrase\xF1a",o=m["\u0275\u0275i18nPostprocess"](o),[[1,"content","content-m"],[1,"card"],[1,"card-body"],["class","form theme-form",4,"ngIf"],[4,"ngIf"],[1,"form","theme-form"],[1,"titol"],e,[1,"boto","botoPrincipal","botoGran",3,"click"],t,[1,"fs-4"],n,[1,"missatge"],o]},template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275template"](3,f,5,0,"div",3),m["\u0275\u0275template"](4,v,3,2,"div",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",!t.email),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.email))},directives:[o.NgIf,u.N],styles:[".content[_ngcontent-%COMP%]{padding:100px 0;text-align:center}.content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .titol[_ngcontent-%COMP%]{margin-bottom:1rem}.content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem}.content[_ngcontent-%COMP%]   .missatge[_ngcontent-%COMP%]{font-size:1.5rem}"]}),e})();function C(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",16),m["\u0275\u0275i18n"](1,17),m["\u0275\u0275elementEnd"]())}function P(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",16),m["\u0275\u0275i18n"](1,18),m["\u0275\u0275elementEnd"]())}let x=(()=>{class e{constructor(e,t,n,o){this.main=e,this.fb=t,this.router=n,this.route=o,e.newPage(this),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.route.params.subscribe(e=>this.paramsUrl=e),this.form=this.fb.group({password:["",a.kI.required],password2:["",a.kI.required]})}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){})}ngOnDestroy(){this.main.onDestroyPage()}submit(){return(0,c.mG)(this,void 0,void 0,function*(){if(this.form.markAllAsTouched(),!this.form.valid)return console.error("Error validacio form"),void console.log("loginForm: ",this.form);let e=this.form.controls.password.value,t=this.paramsUrl.key,n=yield this.main.provider.recuperarPasswordEnviarNouPassword(e,t);console.log("El servidor ha donat un codi correcte al canviar contrasenya",n),this.main.toastSuccess("Password changed successfully"),this.main.goTo("/profile")})}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](s.J),m["\u0275\u0275directiveInject"](a.qu),m["\u0275\u0275directiveInject"](d.F0),m["\u0275\u0275directiveInject"](d.gz))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-recover-password"]],decls:19,vars:3,consts:function(){let e,t,n,o,r;return e="Insertar una nueva contrase\xF1a",t="Contrase\xF1a",n="Repetir contrase\xF1a",o="La contrase\xF1a es obligatoria",r="\xA1Las contrase\xF1as no coinciden!",[[1,"content","content-m"],[1,"card"],[1,"card-body"],[1,"titol"],e,[1,"theme-form",3,"formGroup"],[1,"form-grup","row","no-gutters"],[1,"col-form-label","col-12","col-sm-3","asterisc"],t,["type","password","formControlName","password",1,"form-camp","col-12","col-sm-9"],["class","textErrorForm",4,"ngIf"],n,["type","password","formControlName","password2",1,"form-camp","col-12","col-sm-9"],[1,"mt-4","mb-4",2,"height","0"],[1,"divBotoSubmit"],["type","submit","value","Change password",1,"boto","botoPrincipal","botoGran",3,"click"],[1,"textErrorForm"],o,r]},template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"h2",3),m["\u0275\u0275i18n"](4,4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"form",5),m["\u0275\u0275elementStart"](6,"div",6),m["\u0275\u0275elementStart"](7,"label",7),m["\u0275\u0275i18n"](8,8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](9,"input",9),m["\u0275\u0275template"](10,C,2,0,"div",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",6),m["\u0275\u0275elementStart"](12,"label",7),m["\u0275\u0275i18n"](13,11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](14,"input",12),m["\u0275\u0275template"](15,P,2,0,"div",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](16,"hr",13),m["\u0275\u0275elementStart"](17,"div",14),m["\u0275\u0275elementStart"](18,"input",15),m["\u0275\u0275listener"]("click",function(){return t.submit()}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("formGroup",t.form),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.form.controls.password.touched&&(null==t.form.controls.password.errors?null:t.form.controls.password.errors.required)),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.form.controls.password2.touched&&t.form.controls.password.value!=t.form.controls.password2.value))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,o.NgIf],styles:[".content[_ngcontent-%COMP%]{padding:100px 0}.content[_ngcontent-%COMP%]   .titol[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.8rem;text-align:center}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{margin:auto}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%] > .form-camp[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoSubmit[_ngcontent-%COMP%]{text-align:center}"]}),e})();var E=n(3477);const S=["loginComponent"];function y(e,t){1&e&&m["\u0275\u0275element"](0,"app-login",null,2)}let w=(()=>{class e{constructor(e){this.main=e,e.newPage(this)}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){this.main.currentUser&&this.main.goTo("/home")})}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](s.J))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-login-page"]],viewQuery:function(e,t){if(1&e&&m["\u0275\u0275viewQuery"](S,5),2&e){let e;m["\u0275\u0275queryRefresh"](e=m["\u0275\u0275loadQuery"]())&&(t.loginComponent=e.first)}},decls:2,vars:1,consts:[[1,"content"],[4,"ngIf"],["loginComponent",""]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275template"](1,y,2,0,"app-login",1),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.main.currentUser))},directives:[o.NgIf,E.G],styles:[".content[_ngcontent-%COMP%]{padding-top:100px}"]}),e})(),O=(()=>{class e{constructor(e){this.main=e,e.newPage(this)}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){this.main.toastShow("Your account has been activated"),this.main.goTo("/interests")})}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](s.J))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-activate"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var _=n(8816);let M=(()=>{class e{constructor(){}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){_.c.sessionStorageRemove("currentUser"),_.c.removeCookie("currentUser"),location.href="/presentation"})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-logout"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var k=n(9628),I=n(5703),T=n(1027),N=n(4405);const z=["uploadFileModal"],F=["imageCropper"];function A(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",62),m["\u0275\u0275text"](1,"Passwords don't match!"),m["\u0275\u0275elementEnd"]())}function $(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",62),m["\u0275\u0275i18n"](1,63),m["\u0275\u0275elementEnd"]())}function U(e,t){if(1&e&&m["\u0275\u0275element"](0,"img",64),2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("src",e.form.controls.photo.value,m["\u0275\u0275sanitizeUrl"])}}const L=[{path:"",children:[{path:"",redirectTo:"login"},{path:"activate",component:O},{path:"verifyaccount/:key",component:p},{path:"resetpassword",component:b},{path:"recoverpassword/:key",component:x},{path:"login",component:w},{path:"logout",component:M},{path:"signup",component:(()=>{class e{constructor(e,t,n){this.main=e,this.fb=t,this.modalService=n,this.validate=!1,this.uploadFileModalObert=!1,this.avuiString=(new Date).toISOString().split("T")[0],e.newPage(this),this.form=this.fb.group({name:["",a.kI.required],lastName:[""],email:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.minLength(5)]],password:["",a.kI.required],password2:["",a.kI.required],profile1:[!1],profile2:[!1],profile3:[!1],profile4:[!1],photo:[""],data:["",a.kI.required],address:[""],phone:[""],terms:[!1,a.kI.requiredTrue]})}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){})}ngOnDestroy(){this.closeUploadFileModal(!1)}openUploadFileModal(){this.modalService.open(this.uploadFileModal,{size:"lg",modalClass:"uploadFileModal",backdropClass:"modal-backdrop",hideCloseButton:!1,centered:!0,backdrop:!0,animation:!0,keyboard:!0,closeOnOutsideClick:!1})}closeUploadFileModal(e){e&&this.form.controls.photo.setValue(this.imageCropper.croppedImage),this.modalService.close(this.uploadFileModal)}autocompletarUsername(){this.form.controls.name.valid&&this.form.controls.lastName.valid&&(this.form.controls.username.touched||this.form.controls.username.setValue((this.form.controls.name.value+this.form.controls.lastName.value).replaceAll(" ","").toLowerCase()))}usernameValid(){let e=k.k.map(e=>e.path);return e=e.filter(e=>!e.includes(":")&&""!=e),!e.includes(this.form.controls.username.value)}profileIncorrecte(){return(this.form.controls.profile1.touched||this.form.controls.profile2.touched||this.form.controls.profile3.touched||this.form.controls.profile4.touched)&&!(this.form.controls.profile1.value||this.form.controls.profile2.value||this.form.controls.profile3.value||this.form.controls.profile4.value)}corregirDataNaixement(e){e.valueAsDate>new Date&&(e.valueAsDate=new Date)}submit(){if(this.form.markAllAsTouched(),this.uploadFileModalObert=!0,!this.form.valid)return console.error("Error validacio form"),void console.log("loginForm: ",this.form);const e=new FormData;var t=new File([_.c.dataURLToBlob(this.imageCropper.croppedImage)],"photo.png");e.append("photo",t,"photo.png"),e.append("name",this.form.controls.name.value),e.append("lastName",this.form.controls.lastName.value),e.append("email",this.form.controls.email.value),e.append("username",this.form.controls.username.value),e.append("password",this.form.controls.password.value),e.append("data",this.form.controls.data.value),e.append("address",this.form.controls.address.value),e.append("phone",this.form.controls.phone.value),this.form.controls.profile1.value&&e.append("profile[]","1"),this.form.controls.profile2.value&&e.append("profile[]","2"),this.form.controls.profile3.value&&e.append("profile[]","3"),this.form.controls.profile4.value&&e.append("profile[]","4"),this.main.ps.postFormData("/register",e,e=>{this.main.eh.mostrarError(e)||(console.log("El servidor ha donat un codi correcte",e),this.main.toastSuccess("Email sent to "+this.form.controls.email.value),this.main.setParams({name:this.form.controls.name.value,lastName:this.form.controls.lastName.value,email:this.form.controls.email.value,username:this.form.controls.username.value,photo:this.imageCropper.croppedImage,lastId:e.lastId}),this.main.goTo("/welcome"))},e=>{console.error("Error: ",e),this.main.toastDanger("Error")})}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](s.J),m["\u0275\u0275directiveInject"](a.qu),m["\u0275\u0275directiveInject"](I.gk))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-signup"]],viewQuery:function(e,t){if(1&e&&(m["\u0275\u0275viewQuery"](z,5),m["\u0275\u0275viewQuery"](F,5)),2&e){let e;m["\u0275\u0275queryRefresh"](e=m["\u0275\u0275loadQuery"]())&&(t.uploadFileModal=e.first),m["\u0275\u0275queryRefresh"](e=m["\u0275\u0275loadQuery"]())&&(t.imageCropper=e.first)}},decls:103,vars:23,consts:function(){let e,t,n,o,r,a,i,l,c,m,s,d,p,u,f,g;return e="Nombre",t="Apellidos",n="Correo electr\xF3nico",o="Nombre de usuario",r="Contrase\xF1a",a="Repetir contrase\xF1a",i="Perfil",l="Foto",c="Fecha de nacimiento",m="Direcci\xF3n",s="N\xFAmero de tel\xE9fono",d="\xBFYa tienes una cuenta? " + "\ufffd#90\ufffd" + "\xA1Inicia sesi\xF3n!" + "\ufffd/#90\ufffd" + "",p="Subir foto",u="Cerrar",f="Guardar",g="El perfil es obligatorio",[[1,"content"],[1,"card","senseFons"],[1,"card-body"],[1,"logo"],["src","assets/in2art/logos/ma_blanca_text.svg","alt","in2art"],[1,"theme-form",3,"formGroup"],[1,"form-grup","row","no-gutters"],[1,"col-form-label","col-12","col-sm-3","asterisc"],e,["type","text","formControlName","name",1,"form-camp","col-12","col-sm-9",3,"blur"],[3,"control","nomText"],[1,"col-form-label","col-12","col-sm-3"],t,["type","text","formControlName","lastName",1,"form-camp","col-12","col-sm-9",3,"blur"],n,["type","text","formControlName","email",1,"form-camp","col-12","col-sm-9"],o,[1,"input-group","col-12","col-sm-9"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","formControlName","username",1,"form-camp"],r,["type","password","formControlName","password",1,"form-camp","col-12","col-sm-9"],a,["type","password","formControlName","password2",1,"form-camp","col-12","col-sm-9"],["class","textErrorForm",4,"ngIf"],i,[1,"col-12","col-sm-9","animate-chk","row","no-gutters"],["for","checkbox1",1,"d-block","checkbox-label","col-12","col-sm-6","col-md-3"],["id","checkbox1","type","checkbox","formControlName","profile1",1,"checkbox_animated"],["for","checkbox2",1,"d-block","checkbox-label","col-12","col-sm-6","col-md-3"],["id","checkbox2","type","checkbox","formControlName","profile2",1,"checkbox_animated"],["for","checkbox3",1,"d-block","checkbox-label","col-12","col-sm-6","col-md-3"],["id","checkbox3","type","checkbox","formControlName","profile3",1,"checkbox_animated"],["for","checkbox4",1,"d-block","checkbox-label","col-12","col-sm-6","col-md-3"],["id","checkbox4","type","checkbox","formControlName","profile4",1,"checkbox_animated"],l,["type","button","value","Select photo",1,"boto","botoPrincipal","botoGran","col-12","col-sm-9",3,"click"],["class","croppedImage shadow-4","alt","Profile photo",3,"src",4,"ngIf"],c,["type","date","formControlName","data",1,"form-camp","col-12","col-sm-9",3,"max","change"],m,["type","text","formControlName","address",1,"form-camp","col-12","col-sm-9"],s,["type","text","formControlName","phone",1,"form-camp","col-12","col-sm-9",3,"blur"],[1,"form-grup"],["for","privacy-policy",1,"d-block","checkbox-label","text-center",2,"padding","0.5rem"],["id","privacy-policy","type","checkbox","formControlName","terms",1,"checkbox_animated"],["href","/settings/about/privacy-policy","target","_blank",1,"link","boing"],[1,"text-center",3,"control","text"],[1,"mt-4","mb-4",2,"height","0"],[1,"align-center"],[1,"boto","botoPrincipal","botoGran",3,"click"],[1,"haveAccount"],d,[1,"boto","botoLink",3,"click"],["id","uploadFileModal",1,"uploadFileModal"],["uploadFileModal",""],p,["imageCropper",""],u,f,[1,"textErrorForm"],g,["alt","Profile photo",1,"croppedImage","shadow-4",3,"src"]]},template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275element"](4,"img",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"form",5),m["\u0275\u0275elementStart"](6,"div",6),m["\u0275\u0275elementStart"](7,"label",7),m["\u0275\u0275i18n"](8,8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"input",9),m["\u0275\u0275listener"]("blur",function(){return t.autocompletarUsername()}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](10,"app-missatge-error-form",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",6),m["\u0275\u0275elementStart"](12,"label",11),m["\u0275\u0275i18n"](13,12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"input",13),m["\u0275\u0275listener"]("blur",function(){return t.autocompletarUsername()}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](15,"app-missatge-error-form",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",6),m["\u0275\u0275elementStart"](17,"label",7),m["\u0275\u0275i18n"](18,14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](19,"input",15),m["\u0275\u0275element"](20,"app-missatge-error-form",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"div",6),m["\u0275\u0275elementStart"](22,"label",7),m["\u0275\u0275i18n"](23,16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"div",17),m["\u0275\u0275elementStart"](25,"div",18),m["\u0275\u0275elementStart"](26,"span",19),m["\u0275\u0275text"](27,"@"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](28,"input",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](29,"app-missatge-error-form",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"div",6),m["\u0275\u0275elementStart"](31,"label",7),m["\u0275\u0275i18n"](32,21),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](33,"input",22),m["\u0275\u0275element"](34,"app-missatge-error-form",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](35,"div",6),m["\u0275\u0275elementStart"](36,"label",7),m["\u0275\u0275i18n"](37,23),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](38,"input",24),m["\u0275\u0275template"](39,A,2,0,"div",25),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](40,"div",6),m["\u0275\u0275elementStart"](41,"label",7),m["\u0275\u0275i18n"](42,26),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](43,"div",27),m["\u0275\u0275elementStart"](44,"label",28),m["\u0275\u0275element"](45,"input",29),m["\u0275\u0275text"](46,"Artist "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](47,"label",30),m["\u0275\u0275element"](48,"input",31),m["\u0275\u0275text"](49,"Professional "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](50,"label",32),m["\u0275\u0275element"](51,"input",33),m["\u0275\u0275text"](52,"Collector "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](53,"label",34),m["\u0275\u0275element"](54,"input",35),m["\u0275\u0275text"](55,"Viewer "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](56,$,2,0,"div",25),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](57,"div",6),m["\u0275\u0275elementStart"](58,"label",11),m["\u0275\u0275i18n"](59,36),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](60,"input",37),m["\u0275\u0275listener"]("click",function(){return t.openUploadFileModal()}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](61,U,1,1,"img",38),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](62,"div",6),m["\u0275\u0275elementStart"](63,"label",7),m["\u0275\u0275i18n"](64,39),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](65,"input",40),m["\u0275\u0275listener"]("change",function(e){return t.corregirDataNaixement(e.target)}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](66,"app-missatge-error-form",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](67,"div",6),m["\u0275\u0275elementStart"](68,"label",11),m["\u0275\u0275i18n"](69,41),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](70,"input",42),m["\u0275\u0275element"](71,"app-missatge-error-form",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](72,"div",6),m["\u0275\u0275elementStart"](73,"label",11),m["\u0275\u0275i18n"](74,43),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](75,"input",44),m["\u0275\u0275listener"]("blur",function(e){return e.target.value=e.target.value.replaceAll(" ","")}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](76,"app-missatge-error-form",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](77,"div",45),m["\u0275\u0275elementStart"](78,"label",46),m["\u0275\u0275element"](79,"input",47),m["\u0275\u0275text"](80,"Agree to "),m["\u0275\u0275elementStart"](81,"a",48),m["\u0275\u0275text"](82,"Privacy Policy"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](83,"app-missatge-error-form",49),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](84,"hr",50),m["\u0275\u0275elementStart"](85,"div",51),m["\u0275\u0275elementStart"](86,"button",52),m["\u0275\u0275listener"]("click",function(){return t.submit()}),m["\u0275\u0275text"](87,"Sign up"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](88,"div",53),m["\u0275\u0275i18nStart"](89,54),m["\u0275\u0275elementStart"](90,"button",55),m["\u0275\u0275listener"]("click",function(){return t.main.goTo("/login")}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275i18nEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](91,"modal",56,57),m["\u0275\u0275elementStart"](93,"modal-header"),m["\u0275\u0275i18n"](94,58),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](95,"modal-content"),m["\u0275\u0275element"](96,"app-image-croper",null,59),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](98,"modal-footer"),m["\u0275\u0275elementStart"](99,"button",52),m["\u0275\u0275listener"]("click",function(){return t.closeUploadFileModal(!1)}),m["\u0275\u0275i18n"](100,60),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](101,"button",52),m["\u0275\u0275listener"]("click",function(){return t.closeUploadFileModal(!0)}),m["\u0275\u0275i18n"](102,61),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("formGroup",t.form),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("control",t.form.controls.name)("nomText","name"),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("control",t.form.controls.lastName)("nomText","last name"),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("control",t.form.controls.email)("nomText","email"),m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("control",t.form.controls.username)("nomText","username"),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("control",t.form.controls.password)("nomText","password"),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.form.controls.password2.touched&&t.form.controls.password.value!=t.form.controls.password2.value),m["\u0275\u0275advance"](17),m["\u0275\u0275property"]("ngIf",t.profileIncorrecte()),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.form.controls.photo.value),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("max",t.avuiString),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("control",t.form.controls.data)("nomText","birth date"),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("control",t.form.controls.address)("nomText","address"),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("control",t.form.controls.phone)("nomText","phone"),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("control",t.form.controls.terms)("text","You must agree before submitting"))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,T.T,o.NgIf,a.Wl,I.zS,I.Rb,I.Ef,N.r,I.YI],styles:[".content[_ngcontent-%COMP%]{max-width:940px;padding:100px 0}.content[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none}.content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-bottom:20px;height:100px;text-align:center}.content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;max-width:100%;height:100%}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:20px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{margin:auto}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%] > .form-camp[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%] > .input-group-prepend[_ngcontent-%COMP%]{width:40px;overflow:hidden;border-radius:20px 0 0 20px;border:var(--border-input);border-right:none}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%] > .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{color:gray;font-weight:700;cursor:default;background:transparent;border:none;padding:0 10px 0 11px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%] > .form-camp[_ngcontent-%COMP%]{width:calc(100% - 40px);padding:6px 12px;border-radius:0 20px 20px 0}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   img.croppedImage[_ngcontent-%COMP%]{width:auto;padding:0;margin:12px auto;border-radius:10000px}.content[_ngcontent-%COMP%]   .haveAccount[_ngcontent-%COMP%]{font-size:1rem;text-align:center}.content[_ngcontent-%COMP%]   .haveAccount[_ngcontent-%COMP%]   .botoLink[_ngcontent-%COMP%]{letter-spacing:1px}"]}),e})()}]}];let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[d.Bz.forChild(L)],d.Bz]}),e})();var G=n(355);let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[R,o.CommonModule,r.m,a.u5,i.A0,l.QG,I.zk,G.z]]}),e})()},3477:function(e,t,n){"use strict";n.d(t,{G:function(){return u}});var o=n(4762),r=n(8816),a=n(5366),i=n(1407),l=n(1041),c=n(1027),m=n(1116);const s=["uploadFileModal"],d=["imageCropper"];function p(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",23),a["\u0275\u0275elementStart"](1,"button",24),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().reenviarCorreu()}),a["\u0275\u0275i18n"](2,25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",e.carregantReenviarCorreu)}}let u=(()=>{class e{constructor(e,t){this.main=e,this.fb=t,this.notValidated=!1,this.carregantReenviarCorreu=!1,this.carregantLogin=!1,this.form=this.fb.group({email:[""],password:[""],saveLogin:[!1]}),this.form.controls.saveLogin.setValue(!0),e.debug&&(this.form.controls.email.setValue("remon@gmail.com"),this.form.controls.password.setValue("12345678"))}ngOnInit(){return(0,o.mG)(this,void 0,void 0,function*(){})}reenviarCorreu(){return(0,o.mG)(this,void 0,void 0,function*(){this.carregantReenviarCorreu=!0;let e=this.form.controls.email.value,t=yield this.main.provider.reenviarCorreuActivacio(e);this.main.eh.hiHaError(t)?this.main.toastDanger("Couldn't send email to "+e):(this.main.toastSuccess("Email sent to "+e),this.notValidated=!1),this.carregantReenviarCorreu=!1})}submit(){if(this.form.markAllAsTouched(),!this.form.valid)return console.error("Error validacio form"),void console.log("loginForm: ",this.form);let e={email:this.form.controls.email.value,password:this.form.controls.password.value};console.log("\xc8xit validacio form"),this.carregantLogin=!0,this.main.ps.post("/login",e,e=>{if(this.carregantLogin=!1,533!=e.code&&534!=e.code||this.main.toastDanger("Incorrect email or password"),303==e.code&&(this.main.toastDanger("Account still not validated"),this.notValidated=!0),302!=e.code)return void console.error("Ha donat un codi incorrecte",e);if(!e||!e.token)return;let t={token:e.token,id:e.user.iduser,email:e.user.email,emailVerified:!0};r.c.sessionStorageSet("currentUser",t),this.form.controls.saveLogin.value&&r.c.cookieStorageSet("currentUser",t,r.c.CADUCITAT_TOKEN_DIES),this.main.currentUser=t,this.main.refreshCurrentUser(),this.main.goToHome()},e=>{this.carregantLogin=!1,this.main.eh.peticioFallada(e),this.main.toastDanger("Unknown error")})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](i.J),a["\u0275\u0275directiveInject"](l.qu))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-login"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](s,5),a["\u0275\u0275viewQuery"](d,5)),2&e){let e;a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.uploadFileModal=e.first),a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.imageCropper=e.first)}},decls:30,vars:7,consts:function(){let e,t,n,o,r;return e="Correo electr\xF3nico",t="Contrase\xF1a",n="\xBFHas olvidado la contrasenya?",o="\xBFNo tienes una cuenta? " + "\ufffd#29\ufffd" + "\xA1Reg\xEDstrate!" + "\ufffd/#29\ufffd" + "",r="Reenviar correo de activaci\xF3n",[[1,"card","senseFons"],[1,"card-body"],[1,"logo"],["src","assets/in2art/logos/ma_blanca_text.svg","alt","in2art"],[1,"theme-form",3,"formGroup"],[1,"form-grup","row","no-gutters"],[1,"col-form-label","col-12","col-sm-3"],e,["type","text","formControlName","email",1,"form-camp","col-12","col-sm-9"],[3,"control","nomText"],t,["type","password","formControlName","password",1,"form-camp","col-12","col-sm-9"],[1,"form-grup"],["for","saveLogin",1,"d-block","checkbox-label",2,"text-align","center"],["id","saveLogin","type","checkbox","formControlName","saveLogin",1,"checkbox_animated"],[1,"mt-4","mb-4",2,"height","0"],["class","notValidated",4,"ngIf"],[1,"boto","botoPrincipal","botoGran",3,"disabled","click"],[1,"forgotPassword"],[1,"boto","botoLink",3,"click"],n,[1,"noAccount"],o,[1,"notValidated"],[1,"boto","botoLink",3,"disabled","click"],r]},template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275element"](3,"img",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"form",4),a["\u0275\u0275elementStart"](5,"div",5),a["\u0275\u0275elementStart"](6,"label",6),a["\u0275\u0275i18n"](7,7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"input",8),a["\u0275\u0275element"](9,"app-missatge-error-form",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",5),a["\u0275\u0275elementStart"](11,"label",6),a["\u0275\u0275i18n"](12,10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"input",11),a["\u0275\u0275element"](14,"app-missatge-error-form",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",12),a["\u0275\u0275elementStart"](16,"label",13),a["\u0275\u0275element"](17,"input",14),a["\u0275\u0275text"](18,"Save login info "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"hr",15),a["\u0275\u0275template"](20,p,3,1,"div",16),a["\u0275\u0275elementStart"](21,"div"),a["\u0275\u0275elementStart"](22,"button",17),a["\u0275\u0275listener"]("click",function(){return t.submit()}),a["\u0275\u0275text"](23,"Log in"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"div",18),a["\u0275\u0275elementStart"](25,"button",19),a["\u0275\u0275listener"]("click",function(){return t.main.goTo("resetpassword")}),a["\u0275\u0275i18n"](26,20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",21),a["\u0275\u0275i18nStart"](28,22),a["\u0275\u0275elementStart"](29,"button",19),a["\u0275\u0275listener"]("click",function(){return t.main.goTo("/signup")}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275i18nEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("formGroup",t.form),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("control",t.form.controls.email)("nomText","email"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("control",t.form.controls.password)("nomText","password"),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.notValidated),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",t.carregantLogin))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,c.T,l.Wl,m.NgIf],styles:[".card[_ngcontent-%COMP%]{max-width:940px;margin:auto;border:none;text-align:center}.card[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-bottom:20px;height:100px}.card[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;max-width:100%;height:100%}.card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:20px}.card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{text-align:left;margin:auto}.card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .form-camp[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px}.card[_ngcontent-%COMP%]   .forgotPassword[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .notValidated[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:20px}.card[_ngcontent-%COMP%]   .noAccount[_ngcontent-%COMP%]{font-size:1rem}.card[_ngcontent-%COMP%]   .noAccount[_ngcontent-%COMP%]   .botoLink[_ngcontent-%COMP%]{letter-spacing:1px}"]}),e})()}}]);