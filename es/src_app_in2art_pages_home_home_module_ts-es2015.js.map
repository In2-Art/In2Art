{"version":3,"sources":["src/app/in2art/pages/home/home-routing.module.ts","src/app/in2art/pages/home/home.component.ts","src/app/in2art/pages/home/home.component.html","src/app/in2art/pages/home/home.module.ts"],"names":[],"mappings":"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","file":"src_app_in2art_pages_home_home_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { HomeComponent } from './home.component';\r\n\r\nconst routes: Routes = [{\r\n    path: '',\r\n    children: [\r\n        {\r\n            path: '',\r\n            component: HomeComponent\r\n        }\r\n    ]\r\n}];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class HomeRoutingModule { }\r\n","import { Utils } from './../../services/utils.service';\r\n//  { Utils } from 'src/app/in2art/services/utils.service';\r\nimport { PublicacioComponent } from 'src/app/in2art/components/publicacio/publicacio.component';\r\nimport { MainService } from './../../services/main.service';\r\nimport { Component, OnInit, ViewChild, ViewChildren, QueryList, HostListener } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n\r\n@Component({\r\n    selector: 'app-home',\r\n    templateUrl: './home.component.html',\r\n    styleUrls: ['./home.component.scss']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n\r\n    @ViewChildren(\"publicacio\") publicacioComponents: QueryList<PublicacioComponent>;\r\n\r\n    public scroll = true;\r\n    public numPublicacions = 5;\r\n    public comptador: number = 0;\r\n\r\n    public publicacions: any = [];\r\n    public carregant;\r\n\r\n    public primerCop = true;\r\n    public encaraQueda = { yourTimeline: true, yourPreferences: true, otherContent: true };\r\n\r\n    constructor(public main: MainService,\r\n        private route: ActivatedRoute) {\r\n        main.newPage(this);\r\n    }\r\n\r\n    async ngOnInit() {\r\n        \r\n        if(!Utils.getToken()) {\r\n            this.main.router.navigate(['/auth/login']);\r\n            return;\r\n        }\r\n        // this.publicacions = await this.main.provider.getXPosts(1, 5);\r\n        \r\n        // Carregar posts per primer cop //\r\n        await this.carregarMes();\r\n\r\n    }\r\n    ngOnDestroy() { this.main.onDestroyPage(); }\r\n\r\n    async carregarMes() {\r\n        // MÃ¡s publicaciones!!! //\r\n        let novesPublicacions = null;\r\n\r\n        this.carregant = true;\r\n        novesPublicacions = await this.getMes();\r\n        this.carregant = false;\r\n\r\n        this.publicacions.push(...novesPublicacions);\r\n    }\r\n    async getMes() {\r\n        let novesPublicacions: any = [];\r\n        \r\n        // Your timeline\r\n\r\n        // if (this.encaraQueda.yourTimeline) {\r\n        //     novesPublicacions = await this.main.provider.getRandomPosts(15); this.primerCop = false;\r\n        //     novesPublicacions = null\r\n        //     if (novesPublicacions?.length) return novesPublicacions;\r\n        //     else this.encaraQueda.yourTimeline = false;\r\n        // }\r\n\r\n        // Your preferences //\r\n\r\n        // if (this.encaraQueda.yourPreferences) {\r\n        //     novesPublicacions = await this.main.provider.getRandomPosts(20);\r\n        //     novesPublicacions = null;\r\n        //     if (novesPublicacions?.length) return novesPublicacions;\r\n        //     else this.encaraQueda.yourPreferences = false;\r\n        // }\r\n\r\n        // // Other content //\r\n\r\n        // if (this.encaraQueda.otherContent) {\r\n        //     novesPublicacions = await this.main.provider.getRandomPosts(5);\r\n        //     novesPublicacions = null;\r\n        //     if (novesPublicacions?.length) return novesPublicacions;\r\n        //     else this.encaraQueda.otherContent = false;\r\n        // }\r\n\r\n        // if(this.comptador >= 4){\r\n        //     novesPublicacions = await this.main.provider.getRandomPosts(5);\r\n        // }\r\n\r\n        return novesPublicacions;\r\n\r\n    }\r\n\r\n\r\n    // Scroll //\r\n    @HostListener('window:scroll', ['$event'])\r\n    @HostListener('window:mousemove', ['$event'])\r\n    onWindowScroll() {\r\n        // if (!Utils.getToken()) return;\r\n\r\n        // Top //\r\n        if (window.scrollY == 0) { }\r\n\r\n        // Bottom //\r\n        let marge = 10;\r\n        if (window.innerHeight + window.scrollY + marge >= document.body.scrollHeight) {\r\n            // console.log(\"End of page\");\r\n            if (!this.carregant && this.scroll)\r\n                this.carregarMes();\r\n        }\r\n    }\r\n    \r\n}\r\n","<div class=\"content align-center\">\r\n    <app-publicacio #publicacio *ngFor=\"let p of publicacions\" [p]=\"p\"></app-publicacio>\r\n    <!-- *ngIf=\"!encaraQueda.yourTimeline && !encaraQueda.yourPreferences && !encaraQueda.otherContent\" -->\r\n    <div *ngIf=\"true\">\r\n        <div class=\"noPublicacions\"><i class=\"fas fa-check-circle\"></i>&nbsp;<ng-container i18n=\"@@You've seen it all\">You've seen it all</ng-container></div>\r\n        <button class=\"boto botoPrincipal botoGran reload\" (click)=\"main.goTo('/search')\" i18n=\"@@Go to Discover\">Go to Discover</button>\r\n    </div>\r\n    <button class=\"boto botoPrincipal fs-5\" *ngIf=\"!scroll && !carregant\" (click)=\"carregarMes()\"i18n=\"@@More posts\">More posts +</button>\r\n    <app-loading *ngIf=\"carregant\"></app-loading>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SharedModule } from '../../../shared/shared.module';\r\n\r\n\r\n\r\nimport { HomeComponent } from './home.component';\r\nimport { HomeRoutingModule } from './home-routing.module';\r\n\r\n@NgModule({\r\n    declarations: [HomeComponent,\r\n        \r\n\r\n    ],\r\n    imports: [\r\n        HomeRoutingModule,\r\n        \r\n        CommonModule,\r\n        SharedModule,\r\n    ],\r\n    exports: [\r\n    ]\r\n})\r\nexport class HomeModule { }\r\n"],"sourceRoot":"webpack:///"}