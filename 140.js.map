{"version":3,"file":"140.js","mappings":"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","sources":["./src/app/pages/post/components/post.component.ts","./src/app/pages/post/components/post.component.html","./src/app/pages/post/post-routing.module.ts","./src/app/pages/post/post.module.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { forkJoin, Observable, Subscription } from 'rxjs';\n\nimport { IPostFile, IPostFull, Post } from '@ApiClient/backend/Post/post';\n\nimport { getPostAction } from '@store/post/post.action';\nimport { selectIsLoadingPost, selectPost } from '@store/post/post.selectors';\nimport { AppStateInterface } from '@store/app/app-state.interface';\nimport { ToService } from '@ApiClient/helpers/observables';\nimport { IPostService } from '@ApiClient/services/post';\nimport { selectCurrentUserId } from '@store/auth/auth.selectors';\nimport { concatLatestFrom } from '@ngrx/effects';\n\n@Component({\n  selector: 'app-post-page',\n  templateUrl: './post.component.html',\n  styleUrl: './post.component.scss',\n})\nexport class PostPageComponent implements OnInit, OnDestroy {\n  postId!: string;\n  imageLinks: string[] = [];\n  postService: IPostService;\n  isCurrentUserPost: boolean = false;\n  post$: Observable<IPostFull | null> = this.store.select(selectPost);\n  postSubscription: Subscription = new Subscription();\n  isLoading$: Observable<boolean> = this.store.select(selectIsLoadingPost);\n\n  constructor(\n    private route: ActivatedRoute,\n    public store: Store<AppStateInterface>,\n  ) {\n    this.route.params.subscribe((params) => {\n      this.postId = params['id'];\n    });\n    this.postService = ToService<IPostService>(Post);\n  }\n\n  ngOnInit() {\n    this.store.dispatch(getPostAction({ postId: this.postId }));\n    this.postSubscription = this.post$\n      .pipe(concatLatestFrom(() => this.store.select(selectCurrentUserId)))\n      .subscribe(([post, currentUserId]) => {\n        if (post) {\n          void this.setUpImages(post.postFiles);\n          this.isCurrentUserPost = post.userCreatorId === currentUserId;\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    this.postSubscription.unsubscribe();\n  }\n\n  async setUpImages(postFiles: IPostFile[]) {\n    forkJoin(\n      postFiles.map((file) => {\n        return this.postService.getUrlPostFileThumbnail({\n          fileId: file.fileId,\n          userCreatorId: file.userCreatorId,\n          id: file.id,\n        });\n      }),\n    ).subscribe((urls: string[]) => {\n      this.imageLinks = urls;\n    });\n  }\n}\n","@if ((isLoading$ | async) === false) {\n  <article class=\"post-wrapper\">\n    <app-post-header [isCurrentUserPost]=\"isCurrentUserPost\" [post]=\"post$ | async\"></app-post-header>\n    <p-galleria [value]=\"imageLinks\" [showIndicators]=\"imageLinks.length > 1\" [showThumbnails]=\"false\">\n      <ng-template pTemplate=\"item\" let-item>\n        <video [src]=\"item\" style=\"width: 100%; display: block\"></video>\n      </ng-template>\n    </p-galleria>\n    <app-post-footer [post]=\"post$ | async\"></app-post-footer>\n  </article>\n} @else {\n  <div class=\"post-loader\">\n    <p-progressSpinner [style]=\"{ width: '200px', height: '200px' }\" strokeWidth=\"4\"></p-progressSpinner>\n  </div>\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LocalizeRouterModule } from '@gilsdav/ngx-translate-router';\n\nimport { PostPageComponent } from './components/post.component';\nimport { URLS } from '@enums/urls';\n\nconst routes: Routes = [\n  {\n    path: URLS.ID,\n    component: PostPageComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes), LocalizeRouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PostRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PostRoutingModule } from './post-routing.module';\nimport { PostPageComponent } from './components/post.component';\nimport { PostCardComponent } from '@components/post-card/post-card.component';\nimport { GalleriaModule } from 'primeng/galleria';\nimport { PostHeaderComponent } from '@components/post-header/post-header.component';\nimport { ProgressSpinnerModule } from 'primeng/progressspinner';\nimport { PostFooterComponent } from '@components/post-footer/post-footer.component';\n\n@NgModule({\n  declarations: [PostPageComponent],\n  imports: [\n    CommonModule,\n    PostRoutingModule,\n    PostCardComponent,\n    GalleriaModule,\n    PostHeaderComponent,\n    ProgressSpinnerModule,\n    PostFooterComponent,\n  ],\n})\nexport class PostModule {}\n"],"names":["ActivatedRoute","Store","forkJoin","Subscription","Post","getPostAction","selectIsLoadingPost","selectPost","ToService","selectCurrentUserId","concatLatestFrom","i0","ɵɵelement","ɵɵproperty","item_r1","ɵɵsanitizeUrl","ɵɵelementStart","ɵɵtemplate","PostPageComponent_Conditional_0_ng_template_4_Template","ɵɵelementEnd","ɵɵadvance","ctx_r1","isCurrentUserPost","ɵɵpipeBind1","post$","imageLinks","length","ɵɵstyleMap","ɵɵpureFunction0","_c0","PostPageComponent","constructor","route","store","select","postSubscription","isLoading$","params","subscribe","postId","postService","ngOnInit","dispatch","pipe","post","currentUserId","setUpImages","postFiles","userCreatorId","ngOnDestroy","unsubscribe","_this","_asyncToGenerator","map","file","getUrlPostFileThumbnail","fileId","id","urls","_","ɵɵdirectiveInject","i1","i2","_2","selectors","decls","vars","consts","template","PostPageComponent_Template","rf","ctx","PostPageComponent_Conditional_0_Template","PostPageComponent_Conditional_2_Template","ɵɵconditional","RouterModule","LocalizeRouterModule","URLS","routes","path","ID","component","PostRoutingModule","_3","forChild","imports","exports","CommonModule","PostCardComponent","GalleriaModule","PostHeaderComponent","ProgressSpinnerModule","PostFooterComponent","PostModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}