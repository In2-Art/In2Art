"use strict";(self.webpackChunkWebAppNew=self.webpackChunkWebAppNew||[]).push([[291],{8291:(N,u,_)=>{_.d(u,{r:()=>M});var s=_(1208),e=_(4650),d=_(6345),p=_(4006);let O=(()=>{class a{constructor(){this.autocomplete="off"}disableKeys(n){return document,8==n.keyCode||n.keyCode>=48&&n.keyCode<=57}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275dir=e.\u0275\u0275defineDirective({type:a,selectors:[["","onlyNumbers",""]],hostVars:1,hostBindings:function(n,t){1&n&&e.\u0275\u0275listener("keypress",function(i){return t.disableKeys(i)}),2&n&&e.\u0275\u0275hostProperty("autocomplete",t.autocomplete)}}),a})();var T=_(6188);const P=["input"];let M=(()=>{class a{constructor(n){this.mainService=n,this.imageChangedEvent="",this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={}}fileChangeEvent(n){this.imageChangedEvent=n,this.lastFileChangeEvent=n}imageCropped(n){if(this.croppedImage=n.base64,n.width<144||n.height<144)return this.mainService.toastWarning("La resoluci\xf3 de la imatge \xe9s massa petita. Si us plau, intenta de nou."),void(this.croppedImage=null);console.log(n,(0,s.Ll)(n.base64)),this.mainService.setCroppedImageBase64(n.base64)}imageLoaded(){this.showCropper=!0,console.log("Image loaded")}cropperReady(n){console.log("Cropper ready",n)}loadImageFailed(){if(this.lastFileChangeEvent&&this.lastFileChangeEvent.target.files.length>0){const n=this.lastFileChangeEvent.target.files[0].type;let t="Error en carregar la imatge.";"image/png"!==n&&"image/jpg"!==n&&"image/jpeg"!==n&&(t="Tipus d'arxiu inv\xe0lid. Si us plau, selecciona un arxiu PNG o JPG/JPEG."),console.log("Failed file type:",n),this.mainService.toastDanger(t)}else console.log("Load failed")}rotateLeft(){this.canvasRotation--,this.flipAfterRotate()}rotateRight(){this.canvasRotation++,this.flipAfterRotate()}flipAfterRotate(){this.transform={...this.transform,flipH:this.transform.flipV,flipV:this.transform.flipH}}flipHorizontal(){this.transform={...this.transform,flipH:!this.transform.flipH}}flipVertical(){this.transform={...this.transform,flipV:!this.transform.flipV}}zoomOut(){this.scale-=.1,this.transform={...this.transform,scale:this.scale}}zoomIn(){this.scale+=.1,this.transform={...this.transform,scale:this.scale}}toggleContainWithinAspectRatio(){this.containWithinAspectRatio=!this.containWithinAspectRatio}updateRotation(){this.transform={...this.transform,rotate:this.rotation}}removePhoto(){this.input.nativeElement.value="",this.fileChangeEvent(null),this.croppedImage=null,this.mainService.croppedImageBase64=null}mostrarBotons(){return!!this.input&&this.input.nativeElement.value}}return a.\u0275fac=function(n){return new(n||a)(e.\u0275\u0275directiveInject(d.J))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-image-croper"]],viewQuery:function(n,t){if(1&n&&e.\u0275\u0275viewQuery(P,5),2&n){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(t.input=o.first)}},decls:40,vars:55,consts:function(){let l,n,t,o,i,c,R,C,E,m,g;return l=$localize`:@@Choose Your Image:${"\ufffd0\ufffd"}:INTERPOLATION:`,n=$localize`:@@Rotate left:${"\ufffd0\ufffd"}:INTERPOLATION:`,t=$localize`:@@Rotate right:${"\ufffd0\ufffd"}:INTERPOLATION:`,o=$localize`:@@Flip horizontal:${"\ufffd0\ufffd"}:INTERPOLATION:`,i=$localize`:@@Flip vertical:${"\ufffd0\ufffd"}:INTERPOLATION:`,c=$localize`:@@Contain Fill Aspect Ratio: ${"\ufffd0\ufffd"}:INTERPOLATION: `,R=$localize`:@@Remove photo:${"\ufffd0\ufffd"}:INTERPOLATION:`,C=$localize`:@@Rotation:${"\ufffd0\ufffd"}:INTERPOLATION:`,E=$localize`:@@Rotation:Rotation`,m=$localize`:@@ZoomMinus:${"\ufffd0\ufffd"}:INTERPOLATION: -`,g=$localize`:@@ZoomPlus:${"\ufffd0\ufffd"}:INTERPOLATION: +`,[["format","png",3,"imageChangedEvent","maintainAspectRatio","containWithinAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","onlyScaleDown","roundCropper","canvasRotation","transform","alignImage","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"boto-showcase"],[1,"image-cropper-btn"],["type","file",1,"btn","inputImage",3,"change",6,"placeholder"],["input",""],["placeholder",l],[1,"text-center","my-2"],[1,"croppedImage","shadow-4",3,"src"],[1,"boto","botoSecundari","botoPetit",3,"click"],n,t,o,i,c,[1,"boto","botoVermell","botoPetit",3,"click"],R,["for","rotation",1,"col-form-label"],C,["placeholder",E,"type","text","onlyNumbers","",1,"btn","ml-2",3,"ngModel","ngModelChange","keyup"],m,g]},template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"image-cropper",0),e.\u0275\u0275listener("imageCropped",function(i){return t.imageCropped(i)})("imageLoaded",function(){return t.imageLoaded()})("cropperReady",function(i){return t.cropperReady(i)})("loadImageFailed",function(){return t.loadImageFailed()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"input",3,4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275i18nAttributes(6,5),e.\u0275\u0275listener("change",function(i){return t.fileChangeEvent(i)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275element(8,"img",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div")(10,"button",8),e.\u0275\u0275listener("click",function(){return t.rotateLeft()}),e.\u0275\u0275i18n(11,9),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",8),e.\u0275\u0275listener("click",function(){return t.rotateRight()}),e.\u0275\u0275i18n(14,10),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",8),e.\u0275\u0275listener("click",function(){return t.flipHorizontal()}),e.\u0275\u0275i18n(17,11),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",8),e.\u0275\u0275listener("click",function(){return t.flipVertical()}),e.\u0275\u0275i18n(20,12),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div")(23,"button",8),e.\u0275\u0275listener("click",function(){return t.toggleContainWithinAspectRatio()}),e.\u0275\u0275i18n(24,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",14),e.\u0275\u0275listener("click",function(){return t.removePhoto()}),e.\u0275\u0275i18n(26,15),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div")(29,"label",16),e.\u0275\u0275i18n(30,17),e.\u0275\u0275pipe(31,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"input",18),e.\u0275\u0275listener("ngModelChange",function(i){return t.rotation=i})("keyup",function(){return t.updateRotation()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div")(34,"button",8),e.\u0275\u0275listener("click",function(){return t.zoomOut()}),e.\u0275\u0275i18n(35,19),e.\u0275\u0275pipe(36,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"button",8),e.\u0275\u0275listener("click",function(){return t.zoomIn()}),e.\u0275\u0275i18n(38,20),e.\u0275\u0275pipe(39,"translate"),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275styleProp("display",t.showCropper?null:"none")("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275property("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("containWithinAspectRatio",t.containWithinAspectRatio)("aspectRatio",1)("resizeToWidth",256)("cropperMinWidth",128)("onlyScaleDown",!0)("roundCropper",!1)("canvasRotation",t.canvasRotation)("transform",t.transform)("alignImage","left"),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,37,"Choose Your Image")),e.\u0275\u0275i18nApply(6),e.\u0275\u0275advance(4),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275advance(1),e.\u0275\u0275property("src",t.croppedImage,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(12,39,"Rotate left")),e.\u0275\u0275i18nApply(11),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(15,41,"Rotate right")),e.\u0275\u0275i18nApply(14),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(18,43,"Flip horizontal")),e.\u0275\u0275i18nApply(17),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(21,45,"Flip vertical")),e.\u0275\u0275i18nApply(20),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.containWithinAspectRatio?"Fill Aspect Ratio":"Contain Within Aspect Ratio"),e.\u0275\u0275i18nApply(24),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(27,47,"Remove photo")),e.\u0275\u0275i18nApply(26),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(31,49,"Rotation")),e.\u0275\u0275i18nApply(30),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.rotation),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(36,51," Zoom ")),e.\u0275\u0275i18nApply(35),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(39,53,"Zoom ")),e.\u0275\u0275i18nApply(38))},dependencies:[p.Fj,p.JJ,p.On,O,s.ap,T.X$],styles:[".btn[_ngcontent-%COMP%]{border-radius:20px}input.btn[_ngcontent-%COMP%], input.btn[_ngcontent-%COMP%]:hover{color:var(--color-text)}.btn-showcase[_ngcontent-%COMP%]{text-align:center}input.btn[_ngcontent-%COMP%]{border-color:inherit}.inputImage[_ngcontent-%COMP%]{margin:10px}.croppedImage[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:36px;border-radius:10000px}[_nghost-%COMP%]     .overlay{outline:none!important}[_nghost-%COMP%]     .cropper{border-radius:10000px;outline-color:#2222224d!important}"]}),a})()}}]);