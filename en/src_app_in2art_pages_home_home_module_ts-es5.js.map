{"version":3,"sources":["webpack:///src/app/in2art/pages/home/home-routing.module.ts","webpack:///src/app/in2art/pages/home/home.component.html","webpack:///src/app/in2art/pages/home/home.component.ts","webpack:///src/app/in2art/pages/home/home.module.ts"],"names":["routes","path","children","component","HomeComponent","HomeRoutingModule","RouterModule","main","route","scroll","numPublicacions","comptador","publicacions","primerCop","encaraQueda","yourTimeline","yourPreferences","otherContent","newPage","Utils","router","navigate","carregarMes","onDestroyPage","novesPublicacions","carregant","getMes","push","window","scrollY","marge","innerHeight","document","body","scrollHeight","HomeModule","CommonModule","SharedModule"],"mappings":"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","file":"src_app_in2art_pages_home_home_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { HomeComponent } from './home.component';\r\n\r\nconst routes: Routes = [{\r\n    path: '',\r\n    children: [\r\n        {\r\n            path: '',\r\n            component: HomeComponent\r\n        }\r\n    ]\r\n}];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class HomeRoutingModule { }\r\n","<div class=\"content align-center\">\r\n    <app-publicacio #publicacio *ngFor=\"let p of publicacions\" [p]=\"p\"></app-publicacio>\r\n    <!-- *ngIf=\"!encaraQueda.yourTimeline && !encaraQueda.yourPreferences && !encaraQueda.otherContent\" -->\r\n    <div *ngIf=\"true\">\r\n        <div class=\"noPublicacions\"><i class=\"fas fa-check-circle\"></i>&nbsp;<ng-container i18n=\"@@You've seen it all\">You've seen it all</ng-container></div>\r\n        <button class=\"boto botoPrincipal botoGran reload\" (click)=\"main.goTo('/search')\" i18n=\"@@Go to Discover\">Go to Discover</button>\r\n    </div>\r\n    <button class=\"boto botoPrincipal fs-5\" *ngIf=\"!scroll && !carregant\" (click)=\"carregarMes()\"i18n=\"@@More posts\">More posts +</button>\r\n    <app-loading *ngIf=\"carregant\"></app-loading>\r\n</div>\r\n","import { Utils } from './../../services/utils.service';\r\n//  { Utils } from 'src/app/in2art/services/utils.service';\r\nimport { PublicacioComponent } from 'src/app/in2art/components/publicacio/publicacio.component';\r\nimport { MainService } from './../../services/main.service';\r\nimport { Component, OnInit, ViewChild, ViewChildren, QueryList, HostListener } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n\r\n@Component({\r\n    selector: 'app-home',\r\n    templateUrl: './home.component.html',\r\n    styleUrls: ['./home.component.scss']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n\r\n    @ViewChildren(\"publicacio\") publicacioComponents: QueryList<PublicacioComponent>;\r\n\r\n    public scroll = true;\r\n    public numPublicacions = 5;\r\n    public comptador: number = 0;\r\n\r\n    public publicacions: any = [];\r\n    public carregant;\r\n\r\n    public primerCop = true;\r\n    public encaraQueda = { yourTimeline: true, yourPreferences: true, otherContent: true };\r\n\r\n    constructor(public main: MainService,\r\n        private route: ActivatedRoute) {\r\n        main.newPage(this);\r\n    }\r\n\r\n    async ngOnInit() {\r\n        \r\n        if(!Utils.getToken()) {\r\n            this.main.router.navigate(['/auth/login']);\r\n            return;\r\n        }\r\n        // this.publicacions = await this.main.provider.getXPosts(1, 5);\r\n        \r\n        // Carregar posts per primer cop //\r\n        await this.carregarMes();\r\n\r\n    }\r\n    ngOnDestroy() { this.main.onDestroyPage(); }\r\n\r\n    async carregarMes() {\r\n        // MÃ¡s publicaciones!!! //\r\n        let novesPublicacions = null;\r\n\r\n        this.carregant = true;\r\n        novesPublicacions = await this.getMes();\r\n        this.carregant = false;\r\n\r\n        this.publicacions.push(...novesPublicacions);\r\n    }\r\n    async getMes() {\r\n        let novesPublicacions: any = [];\r\n        \r\n        // Your timeline\r\n\r\n        // if (this.encaraQueda.yourTimeline) {\r\n        //     novesPublicacions = await this.main.provider.getRandomPosts(15); this.primerCop = false;\r\n        //     novesPublicacions = null\r\n        //     if (novesPublicacions?.length) return novesPublicacions;\r\n        //     else this.encaraQueda.yourTimeline = false;\r\n        // }\r\n\r\n        // Your preferences //\r\n\r\n        // if (this.encaraQueda.yourPreferences) {\r\n        //     novesPublicacions = await this.main.provider.getRandomPosts(20);\r\n        //     novesPublicacions = null;\r\n        //     if (novesPublicacions?.length) return novesPublicacions;\r\n        //     else this.encaraQueda.yourPreferences = false;\r\n        // }\r\n\r\n        // // Other content //\r\n\r\n        // if (this.encaraQueda.otherContent) {\r\n        //     novesPublicacions = await this.main.provider.getRandomPosts(5);\r\n        //     novesPublicacions = null;\r\n        //     if (novesPublicacions?.length) return novesPublicacions;\r\n        //     else this.encaraQueda.otherContent = false;\r\n        // }\r\n\r\n        // if(this.comptador >= 4){\r\n        //     novesPublicacions = await this.main.provider.getRandomPosts(5);\r\n        // }\r\n\r\n        return novesPublicacions;\r\n\r\n    }\r\n\r\n\r\n    // Scroll //\r\n    @HostListener('window:scroll', ['$event'])\r\n    @HostListener('window:mousemove', ['$event'])\r\n    onWindowScroll() {\r\n        // if (!Utils.getToken()) return;\r\n\r\n        // Top //\r\n        if (window.scrollY == 0) { }\r\n\r\n        // Bottom //\r\n        let marge = 10;\r\n        if (window.innerHeight + window.scrollY + marge >= document.body.scrollHeight) {\r\n            // console.log(\"End of page\");\r\n            if (!this.carregant && this.scroll)\r\n                this.carregarMes();\r\n        }\r\n    }\r\n    \r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SharedModule } from '../../../shared/shared.module';\r\n\r\n\r\n\r\nimport { HomeComponent } from './home.component';\r\nimport { HomeRoutingModule } from './home-routing.module';\r\n\r\n@NgModule({\r\n    declarations: [HomeComponent,\r\n        \r\n\r\n    ],\r\n    imports: [\r\n        HomeRoutingModule,\r\n        \r\n        CommonModule,\r\n        SharedModule,\r\n    ],\r\n    exports: [\r\n    ]\r\n})\r\nexport class HomeModule { }\r\n"]}