"use strict";(self.webpackChunkWebAppNew=self.webpackChunkWebAppNew||[]).push([[582],{5219:(G,g,i)=>{i.d(g,{T:()=>A});var P=i(5861),o=i(4650),c=i(6345),T=i(6895);function M(l,s){if(1&l&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,3),o.\u0275\u0275elementEnd()),2&l){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275i18nExp(n.text||n.nomText+" is required"),o.\u0275\u0275i18nApply(1)}}function C(l,s){if(1&l&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,4),o.\u0275\u0275elementEnd()),2&l){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275i18nExp(n.nomText)(n.control.errors.minlength.actualLength)(null==n.control.errors?null:n.control.errors.minlength.requiredLength),o.\u0275\u0275i18nApply(1)}}function F(l,s){if(1&l&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,5),o.\u0275\u0275elementEnd()),2&l){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275i18nExp(n.nomText)(n.control.errors.maxlength.actualLength)(null==n.control.errors?null:n.control.errors.maxlength.requiredLength),o.\u0275\u0275i18nApply(1)}}function e(l,s){if(1&l&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,6),o.\u0275\u0275elementEnd()),2&l){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275i18nExp(n.nomText),o.\u0275\u0275i18nApply(1)}}function S(l,s){if(1&l&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&l){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("",n.nomText," already exists")}}function E(l,s){if(1&l&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,7),o.\u0275\u0275elementEnd()),2&l){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275i18nExp(n.nomText),o.\u0275\u0275i18nApply(1)}}function N(l,s){if(1&l&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,M,2,1,"div",1),o.\u0275\u0275template(2,C,2,3,"div",1),o.\u0275\u0275template(3,F,2,3,"div",1),o.\u0275\u0275template(4,e,2,1,"div",1),o.\u0275\u0275template(5,S,2,1,"div",1),o.\u0275\u0275template(6,E,2,1,"div",1),o.\u0275\u0275elementEnd()),2&l){const n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.required),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.minlength),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.maxlength),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.email),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.notUnique),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.pattern)}}let A=(()=>{class l{constructor(n){this.main=n}ngOnInit(){var n=this;return(0,P.Z)(function*(){console.log("Control: ",n.control)})()}}return l.\u0275fac=function(n){return new(n||l)(o.\u0275\u0275directiveInject(c.J))},l.\u0275cmp=o.\u0275\u0275defineComponent({type:l,selectors:[["app-missatge-error-form"]],inputs:{control:"control",text:"text",nomText:"nomText"},decls:1,vars:1,consts:function(){let s,n,u,R,O;return s="" + "\ufffd0\ufffd" + "",n="" + "\ufffd0\ufffd" + " is too short (" + "\ufffd1\ufffd" + "/" + "\ufffd2\ufffd" + ")",u="" + "\ufffd0\ufffd" + " is too long (" + "\ufffd1\ufffd" + "/" + "\ufffd2\ufffd" + ")",R="" + "\ufffd0\ufffd" + " has a wrong format",O="" + "\ufffd0\ufffd" + " has a wrong format",[[4,"ngIf"],["class","textErrorForm",4,"ngIf"],[1,"textErrorForm"],s,n,u,R,O]},template:function(n,u){1&n&&o.\u0275\u0275template(0,N,7,6,"div",0),2&n&&o.\u0275\u0275property("ngIf",null==u.control?null:u.control.touched)},dependencies:[T.NgIf]}),l})()},5582:(G,g,i)=>{i.r(g),i.d(g,{EditProfileModule:()=>U});var P=i(6895),o=i(1670),c=i(4006),T=i(5861),M=i(1274),C=i(999),F=i(5009),e=i(4650),S=i(6345),E=i(7753),N=i(1481),A=i(8291),l=i(6362),s=i(5219);const n=["uploadFileModal"],u=["imageCropper"];function R(_,m){if(1&_){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.removePhoto())}),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd()}}function O(_,m){if(1&_){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",12)(1,"div",13)(2,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.openUploadFileModal())}),e.\u0275\u0275element(3,"img",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275template(5,R,2,0,"button",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",17)(7,"label",18),e.\u0275\u0275i18n(8,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"input",20)(10,"app-missatge-error-form",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",17)(12,"label",22),e.\u0275\u0275i18n(13,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",24)(15,"app-missatge-error-form",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",17)(17,"label",22),e.\u0275\u0275i18n(18,25),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",26)(20,"app-missatge-error-form",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",17)(22,"label",22),e.\u0275\u0275i18n(23,27),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",28)(25,"app-missatge-error-form",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",17)(27,"label",22),e.\u0275\u0275i18n(28,29),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"input",30)(30,"app-missatge-error-form",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",17)(32,"label",22),e.\u0275\u0275i18n(33,31),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",32)(35,"app-missatge-error-form",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",17)(37,"label",22),e.\u0275\u0275i18n(38,33),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"input",34)(40,"app-missatge-error-form",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",17)(42,"label",22),e.\u0275\u0275i18n(43,35),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(44,"input",36)(45,"app-missatge-error-form",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",37)(47,"input",38),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.submit())}),e.\u0275\u0275elementEnd()()()}if(2&_){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("src",t.form.controls.photo.value,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.form.controls.photo.value),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",t.form.controls.name.value)("nomText","name"),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",t.form.controls.lastName.value)("nomText","last name"),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",t.form.controls.bio.value)("nomText","bio"),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",t.form.controls.email.value)("nomText","email"),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",t.form.controls.username.value)("nomText","username"),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",t.form.controls.phone.value)("nomText","phone"),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",t.form.controls.address.value)("nomText","address"),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",t.form.controls.web.value)("nomText","website"),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.carregantSave)}}function f(_,m){1&_&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275element(1,"app-loading"),e.\u0275\u0275elementEnd())}let y=(()=>{class _{constructor(t,r,a,p){this.main=t,this.fb=r,this.modalService=a,this.domSanitizer=p,this.files=[],this.validate=!1,this.fotoModificada=!1,this.mostrarFileRequired=!1,t.newPage(this),this.form=this.fb.group({id:[""],photo:[""],name:[""],lastName:[""],bio:[""],email:[""],username:[""],phone:[""],address:[""],web:[""]})}ngOnInit(){var t=this;return(0,T.Z)(function*(){t.carregant=!0;let r=yield C.P.getLoginInfo().then(a=>a.result);t.carregant=!1,t.form.controls.photo.setValue(M.c.prependImagesUrl(t.main.currentUser?.photo)),t.form.controls.name.setValue(r?.name),t.form.controls.lastName.setValue(r?.lastName),t.form.controls.bio.setValue(r?.bio||""),t.form.controls.email.setValue(t.main.currentUser?.email||""),t.form.controls.username.setValue(t.main.currentUser?.username||""),t.form.controls.phone.setValue(r?.phone||""),t.form.controls.address.setValue(r?.address||""),t.form.controls.web.setValue(r?.web||""),t.form.controls.email.disable()})()}ngOnDestroy(){this.closeUploadFileModal(!1),this.main.onDestroyPage()}openUploadFileModal(){this.modalService.open(this.uploadFileModal,{size:"lg",modalClass:"uploadFileModal",backdropClass:"modal-backdrop",hideCloseButton:!1,centered:!0,backdrop:!0,animation:!0,keyboard:!0,closeOnOutsideClick:!1})}closeUploadFileModal(t){t&&(this.form.controls.photo.setValue(this.imageCropper.croppedImage),this.fotoModificada=!0),this.modalService.close(this.uploadFileModal)}removePhoto(){this.form.controls.photo.setValue(null),this.imageCropper.removePhoto(),this.fotoModificada=!0}profileIncorrecte(){return(this.form.controls.profile1.touched||this.form.controls.profile2.touched||this.form.controls.profile3.touched||this.form.controls.profile4.touched)&&!(this.form.controls.profile1.value||this.form.controls.profile2.value||this.form.controls.profile3.value||this.form.controls.profile4.value)}submit(){var t=this;return(0,T.Z)(function*(){t.form.markAllAsTouched(),t.mostrarFileRequired=!M.c.objPle(t.files);const r=new FormData;let a;if(t.fotoModificada){var p=t.imageCropper.croppedImage;a={dataBase64:p.substr(p.indexOf("base64,")+7),fileName:"userProfile",fileExt:t.main.getStringBetween(p,"data:image/",";base64,")},console.log(a)}r.append("name",t.form.controls.name.value),r.append("lastName",t.form.controls.lastName.value),r.append("bio",t.form.controls.bio.value),r.append("phone",t.form.controls.phone.value),r.append("address",t.form.controls.address.value),r.append("web",t.form.controls.web.value);let I=new F.Iw({});console.log("allNewInfo: ",I),t.carregantSave=!0})()}}return _.\u0275fac=function(t){return new(t||_)(e.\u0275\u0275directiveInject(S.J),e.\u0275\u0275directiveInject(c.qu),e.\u0275\u0275directiveInject(E.gk),e.\u0275\u0275directiveInject(N.H7))},_.\u0275cmp=e.\u0275\u0275defineComponent({type:_,selectors:[["app-edit-profile"]],viewQuery:function(t,r){if(1&t&&(e.\u0275\u0275viewQuery(n,5),e.\u0275\u0275viewQuery(u,5)),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(r.uploadFileModal=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(r.imageCropper=a.first)}},decls:17,vars:2,consts:function(){let m,t,r,a,p,v,I,x,L,$,D,b;return m=" Upload Photo ",t="Close",r="Save",a="Name",p="Last name",v="Bio",I="Email",x="Username",L="Phone",$="Address",D="Website",b="Remove photo",[[1,"content"],[1,"card"],[1,"card-body"],["class","theme-form",3,"formGroup",4,"ngIf"],["class","carregant",4,"ngIf"],["id","uploadFileModal",1,"uploadFileModal"],["uploadFileModal",""],m,["imageCropper",""],[1,"boto","botoPrincipal","botoGran",3,"click"],t,r,[1,"theme-form",3,"formGroup"],[1,"divBotoFoto","form-grup"],["data-content","Change photo",1,"botoFoto",3,"click"],["alt","profile photo",1,"foto",3,"src"],["class","boto botoVermell botoPetit removePhoto",3,"click",4,"ngIf"],[1,"form-grup","row","no-gutters"],[1,"col-form-label","col-sm-12","col-xl-3","asterisc"],a,["type","text","formControlName","name",1,"form-camp","col-sm-12","col-xl-9"],[3,"control","nomText"],[1,"col-form-label","col-sm-12","col-xl-3"],p,["type","text","formControlName","lastName",1,"form-camp","col-sm-12","col-xl-9"],v,["type","text","maxlength","3000","formControlName","bio",1,"form-camp","col-sm-12","col-xl-9"],I,["type","text","formControlName","email",1,"form-camp","col-sm-12","col-xl-9"],x,["type","text","formControlName","username",1,"form-camp","col-sm-12","col-xl-9"],L,["type","text","formControlName","phone",1,"form-camp","col-sm-12","col-xl-9"],$,["type","text","formControlName","address",1,"form-camp","col-sm-12","col-xl-9"],D,["type","text","formControlName","web",1,"form-camp","col-sm-12","col-xl-9"],[2,"text-align","center"],["type","button","value","Save",1,"boto","botoPrincipal","botoGran",3,"disabled","click"],[1,"boto","botoVermell","botoPetit","removePhoto",3,"click"],b,[1,"carregant"]]},template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),e.\u0275\u0275template(3,O,48,20,"form",3),e.\u0275\u0275template(4,f,2,0,"div",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"modal",5,6)(7,"modal-header"),e.\u0275\u0275i18n(8,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"modal-content"),e.\u0275\u0275element(10,"app-image-croper",null,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"modal-footer")(13,"button",9),e.\u0275\u0275listener("click",function(){return r.closeUploadFileModal(!1)}),e.\u0275\u0275i18n(14,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",9),e.\u0275\u0275listener("click",function(){return r.closeUploadFileModal(!0)}),e.\u0275\u0275i18n(16,11),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!r.carregant),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.carregant))},dependencies:[A.r,P.NgIf,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.sg,c.u,l.N,s.T,E.zS,E.YI,E.Ef,E.Rb],styles:[".content[_ngcontent-%COMP%]{max-width:940px;padding:100px 0;border:none}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:40px}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]{text-align:center}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover;padding:0;margin-bottom:10px;border:none;border-radius:10000px;overflow:hidden;position:relative}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]:after{content:attr(data-content);font-size:20px;line-height:150px;color:#fff;position:absolute;width:100%;height:100%;top:0;left:0;background-color:#0008;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);opacity:0;border-radius:10000px;transition:all .2s}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]:hover:after{opacity:1}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]   img.foto[_ngcontent-%COMP%]{width:150px;height:150px}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:0;padding:7px 0}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .form-camp[_ngcontent-%COMP%]{padding:6px 12px;border-width:1px;border-radius:20px}.carregant[_ngcontent-%COMP%]   app-loading[_ngcontent-%COMP%]{margin:100px auto}"]}),_})();var h=i(4270);const w=[{path:"",children:[{path:"",component:y}]}];let X=(()=>{class _{}return _.\u0275fac=function(t){return new(t||_)},_.\u0275mod=e.\u0275\u0275defineNgModule({type:_}),_.\u0275inj=e.\u0275\u0275defineInjector({imports:[h.Bz.forChild(w),h.Bz]}),_})();var z=i(9806);let U=(()=>{class _{}return _.\u0275fac=function(t){return new(t||_)},_.\u0275mod=e.\u0275\u0275defineNgModule({type:_}),_.\u0275inj=e.\u0275\u0275defineInjector({imports:[X,z.z,P.CommonModule,o.m,c.u5,E.zk]}),_})()}}]);