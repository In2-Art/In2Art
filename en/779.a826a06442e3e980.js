"use strict";(self.webpackChunkWebAppNew=self.webpackChunkWebAppNew||[]).push([[779],{2474:(L,U,p)=>{p.d(U,{SO:()=>v,Vb:()=>R});var l=p(5861),T=p(2503),g=p(3563),s=p(9802),B=p(6077),e=p(4596);class M{constructor({profile:c,id:u,name:h}){this.id=new g.r(u.toString()),this.name=h,this.profile=c?c instanceof e.Fe?c:0===Object.keys(c).length?null:new e.Fe(c):null}}class x{constructor({isVerified:c,verifiedAt:u,artist:h}){this.isVerified=c,this.verifiedAt=u,this.artist=h instanceof M?h:0===Object.keys(h).length?null:new M(h)}}var y=p(7801),w=p(4434),C=p(9858);class P extends T.X{constructor({languageId:c,title:u,description:h}){super(),this.languageId=new g.r(c.toString()),this.title=u,this.description=h}check(){let c=new Map;return this.languageId.isOk()||c.set("languageId","languageId is not valid"),this.title&&this.title.length>P.MaxTitleLength&&c.set("title",`title length must be less than ${P.MaxTitleLength}`),this.description&&this.description.length>P.MaxDescriptionLength&&c.set("description",`description length must be less than ${P.MaxDescriptionLength}`),c}static get MaxTitleLength(){return 150}static get MaxDescriptionLength(){return 1050}}class R{constructor({postTimelapseId:c,artworkId:u,post:h,community:_,createdAt:O}){this.postTimelapseId=new g.r(c),this.artworkId=u?new g.r(u):null,this.post=h instanceof f?h:new f(h),this.community=_?_ instanceof e.Fe?_:new e.Fe(_):e.Fe.UnkonwnUser,this.createdAt=O?new Date(O):null}get isArtwork(){return null!=this.artworkId}toString(){return this.postTimelapseId.toString()}}class f{constructor({postId:c,languages:u,isDraft:h,artworkRelatedId:_,patreonMinLevelId:O,files:N,artists:A}){let I;this.postId=new g.r(c),this.languages=new Map,this.isDraft=h,this.artworkRelatedId=_?new g.r(_):null,this.patreonMinLevelId=O?new g.r(O):null,this.files=N?N.map(S=>new B.D(S)):null,this.artists=A?A.map(S=>new x(S)):[],u&&u.forEach(S=>{let b=new P(S);I=b.languageId.value,I||(I=""),this.languages.set(I,b)})}getLanguage(c){var u=this;return(0,l.Z)(function*(){let h,_,O=yield C.S.getLanguageIds(c);for(let N=0;N<O.length&&!h;N++)_=O[N].value,_&&(h=u.languages.get(_));return h})()}}class v extends T.X{constructor({id:c,languages:u,isDraft:h,artworkRelatedId:_,patreonMinLevelId:O,fileIds:N,files:A,artistIds:I,artworkId:S}){super(),this.id=c?new g.r(c.toString()):null,this.languages=u?u.map(b=>b instanceof P?b:new P(b)):null,this.isDraft=h,this.artworkRelatedId=_?new g.r(_.toString()):null,this.patreonMinLevelId=O?new g.r(O.toString()):null,this.fileIds=N?N.map(b=>new g.r(b.toString())):null,this.files=A?A.map(b=>b instanceof s._?b:new s._(b)):null,this.artistIds=I?I.map(b=>new g.r(b.toString())):[],this.artworkId=S?new g.r(S.toString()):null}check(){let c=new Map;return this.id&&!this.id.isOk()&&c.set("id","id is not valid"),this.languages&&(0==this.languages.length?c.set("languages","languages is empty"):this.languages.some(u=>!u.isOk())&&c.set("languages","languages is not valid")),this.artworkRelatedId&&!this.artworkRelatedId.isOk()&&c.set("artworkRelatedId","artworkRelatedId is not valid"),this.patreonMinLevelId&&!this.patreonMinLevelId.isOk()&&c.set("patreonMinLevelId","patreonMinLevelId is not valid"),this.fileIds&&this.fileIds.length>0&&this.fileIds.some(u=>!u.isOk())&&c.set("fileIds","fileIds is not valid"),this.files&&this.files.length>0&&this.files.some(u=>!u.isOk())&&c.set("files","files is not valid"),this.artistIds&&this.artistIds.some(u=>!u.isOk())&&c.set("artistIds","artistIds is not valid"),c}static get urlRel(){return"posts"}static getNewInstance(c){return new R(c)}static getNewInstanceArray(c){return c.map(v.getNewInstance)}static take(c=5){return(0,l.Z)(function*(){return yield y.V0.get(w.y.join(v.urlRel,"take",c),!0,v.getNewInstanceArray)})()}}},6362:(L,U,p)=>{p.d(U,{N:()=>B});var l=p(5861),T=p(4650),g=p(9696),s=p(1572);let B=(()=>{class e{constructor(x){this.main=x,this.freq=3}ngOnInit(){return(0,l.Z)(function*(){})()}timeout(){}}return e.\u0275fac=function(x){return new(x||e)(T.\u0275\u0275directiveInject(g.J))},e.\u0275cmp=T.\u0275\u0275defineComponent({type:e,selectors:[["app-loading"]],decls:1,vars:0,template:function(x,y){1&x&&T.\u0275\u0275element(0,"mat-spinner")},dependencies:[s.Ou],styles:["[_nghost-%COMP%]     mat-spinner{margin:20px auto}[_nghost-%COMP%]     mat-spinner circle{stroke:#cacaca}.logo[_ngcontent-%COMP%]{width:100px;animation:girar 1s linear infinite normal}@keyframes girar{to{transform:rotate(360deg)}}"]}),e})()},2779:(L,U,p)=>{p.d(U,{u:()=>yt});var l=p(5861),T=p(1274),g=p(8259),s=p(8879),B=p(2474),e=p(4650),M=p(9696),x=p(6272),y=p(6895),w=p(4434),C=p(7801),P=p(2503),R=p(3563),f=p(4857),v=p(4365);class a extends v.m{static get urlRel(){return"rateSection"}static get TechnicalOpinion(){return"TechnicalOpinion"}static get ArtistCareer(){return"ArtistCareer"}static get PersonalOpinion(){return"PersonalOpinion"}static get HistoricalImportance(){return"HistoricalImportance"}static get StateOfConservation(){return"StateOfConservation"}static getNewInstance(n){return new a(n)}static getNewInstanceArray(n){return n.map(t=>a.getNewInstance(t))}static getTechnicalOpinion(){return(0,l.Z)(function*(){let n=yield a.getByName(a.TechnicalOpinion).then(t=>t.result);if(!n)throw new f.B;return n})()}static getTechnicalOpinionId(){return(0,l.Z)(function*(){return a.getTechnicalOpinion().then(n=>n.id)})()}static getArtistCareer(){return(0,l.Z)(function*(){let n=yield a.getByName(a.ArtistCareer).then(t=>t.result);if(!n)throw new f.B;return n})()}static getArtistCareerId(){return(0,l.Z)(function*(){return a.getArtistCareer().then(n=>n.id)})()}static getPersonalOpinion(){return(0,l.Z)(function*(){let n=yield a.getByName(a.PersonalOpinion).then(t=>t.result);if(!n)throw new f.B;return n})()}static getPersonalOpinionId(){return(0,l.Z)(function*(){return a.getPersonalOpinion().then(n=>n.id)})()}static getHistoricalImportance(){return(0,l.Z)(function*(){let n=yield a.getByName(a.HistoricalImportance).then(t=>t.result);if(!n)throw new f.B;return n})()}static getHistoricalImportanceId(){return(0,l.Z)(function*(){return a.getHistoricalImportance().then(n=>n.id)})()}static getStateOfConservation(){return(0,l.Z)(function*(){let n=yield a.getByName(a.StateOfConservation).then(t=>t.result);if(!n)throw new f.B;return n})()}static getStateOfConservationId(){return(0,l.Z)(function*(){return a.getStateOfConservation().then(n=>n.id)})()}static getAll(){return(0,l.Z)(function*(){return v.r.getAll(a.urlRel,a.getNewInstanceArray)})()}static getByName(n){return(0,l.Z)(function*(){return v.r.getByName(a.urlRel,n,a.getNewInstance)})()}static getIdByName(n){return(0,l.Z)(function*(){return a.getByName(n).then(t=>{let i=t.result?.id;return i||null})})()}static getById(n){return(0,l.Z)(function*(){return v.r.getById(a.urlRel,n,a.getNewInstance)})()}static update(n,t){return(0,l.Z)(function*(){return t instanceof a||(t=new a(t)),v.r.update(a.urlRel,n,t,a.getNewInstance)})()}static delete(n){return(0,l.Z)(function*(){return v.r.delete(a.urlRel,n,a.getNewInstance)})()}}var c=p(6892);class u extends P.X{constructor({postTimelapseId:n,rateSectionTypeId:t,value:i}){super(),this.postTimelapseId=new R.r(n.toString()),this.rateSectionTypeId=t instanceof Promise?null:new R.r(t.toString()),this._rateSectionTypeId=t instanceof Promise?t:null,this.value=i}check(){let n=new Map;return null==this.postTimelapseId?n.set("postTimelapseId","postTimelapseId is null"):this.postTimelapseId.isOk()||n.set("postTimelapseId","postTimelapseId is not ok"),null==this._rateSectionTypeId&&(null==this.rateSectionTypeId?n.set("rateSectionTypeId","rateSectionTypeId is null"):this.rateSectionTypeId.isOk()||n.set("rateSectionTypeId","rateSectionTypeId is not ok")),null==this.value?n.set("value","value is null"):(this.value<u.Min||this.value>u.Max)&&n.set("value","value is not in range"),n}static get Min(){return 0}static get Max(){return 100}static get urlRel(){return"ratesSections"}static get DaysToWait(){return 30}static getNewInstance(n){return new u(n)}static canRate(n){let i,o,d,t=new Date;return n?(i=t.getTime()-new Date(n).getTime(),o=Math.ceil(i/864e5),d=o>u.DaysToWait):d=!0,d}static getById(n){return(0,l.Z)(function*(){return yield C.V0.get(w.y.join(u.urlRel,n),!0,C.bX)})()}static getAverageByTimelapseId(n,t){return(0,l.Z)(function*(){return yield C.V0.get(w.y.join(u.urlRel,"average",n,t),!0,C.bX)})()}static post(n){return(0,l.Z)(function*(){return n instanceof u||(n=new u(n)),yield C.V0.post(u.urlRel,n,!0,c.t.getNewInstance)})()}static put(n){return(0,l.Z)(function*(){return n instanceof u||(n=new u(n)),yield C.V0.put(u.urlRel,n,!0,C.bX)})()}static deleteAll(n){return(0,l.Z)(function*(){return yield C.V0.delete(w.y.join(u.urlRel,n),!0)})()}static delete(n){return(0,l.Z)(function*(){return yield C.V0.delete(w.y.join(u.urlRel,n),!0)})()}}class h{constructor(n){let t,i,o;this.data=new Map;for(let d in n){t=n[d],i=new Map;for(let m in t)o=t[m],i.set(m,o);this.data.set(d,i)}}get TechnicalOpinion(){return this.getByName(a.TechnicalOpinion)}get ArtistCareer(){return this.getByName(a.ArtistCareer)}get PersonalOpinion(){return this.getByName(a.PersonalOpinion)}get HistoricalImportance(){return this.getByName(a.HistoricalImportance)}get StateOfConservation(){return this.getByName(a.StateOfConservation)}getPostDic(n){let i,t=new Map;return n instanceof R.r?n=n.toString():n instanceof B.Vb&&(n=n.postTimelapseId.toString()),i=this.TechnicalOpinion.get(n)?this.TechnicalOpinion.get(n):null,t.set(a.TechnicalOpinion,i),i=this.ArtistCareer.get(n)?this.ArtistCareer.get(n):null,t.set(a.ArtistCareer,i),i=this.PersonalOpinion.get(n)?this.PersonalOpinion.get(n):null,t.set(a.PersonalOpinion,i),i=this.HistoricalImportance.get(n)?this.HistoricalImportance.get(n):null,t.set(a.HistoricalImportance,i),i=this.StateOfConservation.get(n)?this.StateOfConservation.get(n):null,t.set(a.StateOfConservation,i),t}isRated(n,...t){let i=this.getPostDic(n),o=new Map;0==t.length&&(t=Array.from(i.keys()));for(let d of t)o.set(d,null!=i.get(d));return o}getRatesByUser(n,...t){var i=this;return(0,l.Z)(function*(){let m,o=i.getPostDic(n),d=new Map,E=yield _.getByTimelapseId(n.toString()).then(V=>200==V.status?V.result:null);if(E){0==t.length&&(t=Array.from(o.keys()));for(let V of t)m=E.sections.get(V),m||(m=null),m&&u.canRate(E.sections.get(V)?.createdAt)&&(m=null),d.set(V,m?.value)}return d})()}getByName(n){let t=this.data.get(n);if(!t)throw new Error(`${n} not found`);return t}static getNewInstance(n){return new h(n)}}class _ extends P.X{constructor(n){super(),this.postTimelapseId=new R.r(n.toString())}check(){let n=new Map;return null==this.postTimelapseId?n.set("postTimelapseId","postTimelapseId is null"):this.postTimelapseId.isOk()||n.set("postTimelapseId","postTimelapseId is not ok"),n}static get urlRel(){return"rates"}static getNewInstance(n){return new _(n)}static getRates(){return(0,l.Z)(function*(){return yield C.V0.getFile("rates.json",{},!1,h.getNewInstance)})()}static getById(n){return(0,l.Z)(function*(){return yield C.V0.get(w.y.join(_.urlRel,n),!0,C.bX)})()}static getByTimelapseId(n){return(0,l.Z)(function*(){return yield C.V0.get(w.y.join(_.urlRel,"postTimelapse",n),!0,O.getNewInstance)})()}static post(n){return(0,l.Z)(function*(){return n instanceof _||(n=new _(n)),yield C.V0.post(_.urlRel,n,!0,C.bX)})()}static delete(n){return(0,l.Z)(function*(){return yield C.V0.delete(w.y.join(_.urlRel,n),!0)})()}}class O{constructor({sections:n,postTimelapseId:t}){this.sections=new Map;for(let i of n)this.sections.set(i.rateSectionType.name,i);this.postTimelapseId=new R.r(t)}static getNewInstance(n){return new O(n)}}class I{static getRates(){return(0,l.Z)(function*(){return new Promise(n=>{_.getRates().then(t=>{n(t)})})})()}static getRateGlobalJSON(){return(0,l.Z)(function*(){return _.getRates()})()}static getAllArrTypes(){return(0,l.Z)(function*(){return a.getAll().then(t=>t.result).catch(t=>{throw t})})()}static getUserRated(n,t){return(0,l.Z)(function*(){let o,i=yield new h(n);return yield i.getRatesByUser(t).then(d=>{o=d}).catch(d=>{throw d}),o||null})()}static votar(n,t,i){return(0,l.Z)(function*(){let o=new u({postTimelapseId:n.toString(),rateSectionTypeId:a.getIdByName(t),value:i});if(o.check().size>0)throw new Error("Error al crear el RateSection");return yield u.post(o).then(m=>m).catch(m=>{throw m})})()}}var $=p(2839);const Z=["barra"];function G(r,n){if(1&r&&e.\u0275\u0275element(0,"app-foto-perfil",6),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("left",t.section.barValue||0,"%")("transform","translateX("+-t.section.barValue+"%)")("opacity",null===t.section.valueUser?0:1),e.\u0275\u0275property("user",t.main.apiHelpers.currentUser)}}function F(r,n){if(1&r&&e.\u0275\u0275element(0,"app-foto-perfil",6),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("left",t.valorRatingUsuari||0,"%")("transform","translateX("+-t.valorRatingUsuari+"%)")("opacity",null===t.valorRatingUsuari?0:1),e.\u0275\u0275property("user",t.main.currentUser)}}let z=(()=>{class r{constructor(t){this.main=t,this.modificat=!0,this.hasVotat=!1,this.carregant=!1,this.valorRating=0,this.valorRatingUsuari=null}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.actValoracio(t.section)})()}input(t){this.section.setBarValue(parseInt(t.target.value)),this.section.setValueUser(this.section.barValue),this.section.setChanged(!0)}actValoracio(t){var i=this;return(0,l.Z)(function*(){null==t?.valueUser?(i.valorRating=0,i.valorRatingUsuari=null,i.hasVotat=!1):(i.valorRating=t?.valueUser||0,i.valorRatingUsuari=t?.valueUser||0,i.hasVotat=!0)})()}setRating(t){this.valorRating=t,this.hasVotat=!0}getRateTypeId(t){return this.rateTypes[t]?.id}submit(t){var i=this;return(0,l.Z)(function*(){!i.section.isChanged()||i.section.isHasVoted()||(i.section.setLoading(!0),i.section.valueUser=i.section.barValue,i.section.setHasVoted(!0),yield t(),i.actValoracio(i.section),i.section.setLoading(!1))})()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(M.J))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-barra-rating"]],viewQuery:function(t,i){if(1&t&&e.\u0275\u0275viewQuery(Z,5),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.barra=o.first)}},inputs:{idPostTimeLapseID:"idPostTimeLapseID",section:"section"},decls:11,vars:7,consts:[[1,"barraRating"],[1,"fons"],["type","range","min","0","max","100","step","0",1,"barra",3,"value","disabled","input","click"],["barra",""],[3,"user","left","transform","opacity",4,"ngIf"],[1,"textValorRating"],[3,"user"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"input",2,3),e.\u0275\u0275listener("input",function(d){return i.input(d)})("click",function(d){return i.input(d)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4," <<<<<<< HEAD "),e.\u0275\u0275template(5,G,1,7,"app-foto-perfil",4),e.\u0275\u0275text(6,"\n======= "),e.\u0275\u0275template(7,F,1,7,"app-foto-perfil",4),e.\u0275\u0275text(8,"\n>>>>>>> parent of 8d43eb4 (Commit with cache) "),e.\u0275\u0275elementStart(9,"span",5),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("opacity",i.section.isChanged()||i.section.isHasVoted()?null:0),e.\u0275\u0275propertyInterpolate("value",i.section.barValue),e.\u0275\u0275property("disabled",i.section.changed&&i.section.hasVoted),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.section.changed&&i.section.hasVoted),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.carregant||i.hasVotat),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",i.section.valueUser||"0"," /100"))},dependencies:[y.NgIf,$.d],styles:['@charset "UTF-8";.barraRating[_ngcontent-%COMP%]{position:relative}.barraRating[_ngcontent-%COMP%]   .fons[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px;border-radius:10000px;height:30px;width:auto;padding:3px;border:2px solid var(--color-text)}.barraRating[_ngcontent-%COMP%]   .fons[_ngcontent-%COMP%]   input.barra[_ngcontent-%COMP%]{background-color:transparent;margin:auto;-webkit-appearance:none;position:relative;overflow:hidden;width:100%;height:100%;cursor:pointer;border-radius:10000px;transition:opacity .2s ease}.barraRating[_ngcontent-%COMP%]   .fons[_ngcontent-%COMP%]   input.barra[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:default}.barraRating[_ngcontent-%COMP%]   .fons[_ngcontent-%COMP%]   app-foto-perfil[_ngcontent-%COMP%]{position:absolute;top:0;border-radius:10000px;width:26px;height:26px;transition:.5s opacity}.barraRating[_ngcontent-%COMP%]   .fons[_ngcontent-%COMP%]   .textValorRating[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none;position:absolute;right:0;top:50%;transform:translateY(-50%);margin-right:14px;font-weight:700;font-size:16px;color:#ddd;mix-blend-mode:exclusion}.barra[_ngcontent-%COMP%]::-webkit-slider-runnable-track{background:transparent}.barra[_ngcontent-%COMP%]::-webkit-slider-thumb{background:var(--color-text);box-shadow:-10010px 0 0 10000px var(--color-text);width:20px;height:20px;border:none;border-radius:10000px;background-size:cover;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;-webkit-appearance:none}.barra[_ngcontent-%COMP%]::-moz-range-track{height:30px;background:transparent}.barra[_ngcontent-%COMP%]::-moz-range-thumb{background:var(--color-text);box-shadow:-10010px 0 0 10000px var(--color-text);height:20px;width:20px;border:none;border-radius:10000px;background-size:cover;-moz-transition:all .2s ease-in-out;transition:all .2s ease-in-out;box-sizing:border-box}.barra[_ngcontent-%COMP%]::-ms-fill-lower{background:var(--color-text)}.barra[_ngcontent-%COMP%]::-ms-thumb{background:var(--color-text);box-shadow:-10015px 0 0 10000px var(--color-text);height:33px;width:33px;border:none;border-radius:10000px;background-size:cover;-ms-transition:all .2s ease-in-out;transition:all .2s ease-in-out;box-sizing:border-box}.barra[_ngcontent-%COMP%]::-ms-ticks-after{display:none}.barra[_ngcontent-%COMP%]::-ms-ticks-before{display:none}.barra[_ngcontent-%COMP%]::-ms-track{color:transparent;height:30px;border:none}.barra[_ngcontent-%COMP%]::-ms-tooltip{display:none}']}),r})();const H=["barraRating"];function j(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"div",5)(1,"h5",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"app-barra-rating",7,8),e.\u0275\u0275elementEnd()),2&r){const t=n.$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.key),e.\u0275\u0275advance(1),e.\u0275\u0275property("idPostTimeLapseID",i.idPostTimeLapseID)("section",t.value)}}function X(r,n){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3,"\n>>>>>>> parent of 8d43eb4 (Commit with cache)\n"),e.\u0275\u0275elementEnd()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",t.deshabilitarBotoVotar())}}let Q=(()=>{class r{constructor(t){this.main=t,this.sections=new Map,this.carregant=!1,this.ratesJSON=new Map}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.valoracio={sections:[],barres:yield t.getRating(),ratingGlobal:yield t.setGlobalMedianRating()},yield t.prepareSections(t.idPostTimeLapseID).then(i=>{t.valoracio.sections=i}),t.newPrepareSections()})()}prepareValoracio(){var t=this;return(0,l.Z)(function*(){t.valoracio.sections=yield t.prepareSections(t.idPostTimeLapseID),yield t.setGlobalMedianRating(),yield t.getRating()})()}getRating(){return(0,l.Z)(function*(){})()}setGlobalMedianRating(){var t=this;return(0,l.Z)(function*(){return yield t.getArtworkGlobalRating(t.idPostTimeLapseID).then(i=>(t.globalRating=i,i))})()}mostrarBotoVotar(){if(!this.barresRating)return!1;let t=this.barresRating.toArray();for(let i=0;i<t.length;i++)if(t[i].modificat&&!t[i].hasVotat)return!0}deshabilitarBotoVotar(){if(!this.barresRating)return!1;let t=this.barresRating.toArray();for(let i=0;i<t.length;i++)return!!t[i].section.isLoaded()}submit(){var t=this;return(0,l.Z)(function*(){let i=t.barresRating.toArray();for(let o=0;o<i.length;o++)yield i[o].submit((0,l.Z)(function*(){yield t.getUserRatingValue(t.idPostTimeLapseID,t.valoracio.section)}))})()}prepareSections(t){var i=this;return(0,l.Z)(function*(){let E,o=[],d=[],m=[];return yield I.getRateGlobalJSON().then(D=>{m=JSON.parse(D)}),["ArtistCareer","HistoricalImportance","PersonalOpinion","StateOfConservation","TechnicalOpinion"].forEach(function(){var D=(0,l.Z)(function*(k){d.push(m[k][t]?{sectionId:yield i.getAllTypeRates(k),sectionName:k,valueGlobal:m[k][t],valueUser:yield i.getUserRatingValue(t,(void 0)[k]?.id)}:{sectionId:yield i.getAllTypeRates(k),sectionName:k,valueGlobal:void 0,valueUser:void 0})});return function(k){return D.apply(this,arguments)}}()),E=d.length<5,o.idPostTimeLapseID=t,o.section=d,o.isCompleted=E,d})()}newPrepareSections(){return(0,l.Z)(function*(){yield I.getRateGlobalJSON(),console.log({})})()}getArtworkGlobalRating(t){return(0,l.Z)(function*(){let i=[];yield I.getRateGlobalJSON().then(m=>{i=JSON.parse(m)});let o=[];o.push(null!=i.ArtistCareer[t]?Math.trunc(i.ArtistCareer[t]):0),o.push(null!=i.HistoricalImportance[t]?Math.trunc(i.HistoricalImportance[t]):0),o.push(null!=i.PersonalOpinion[t]?Math.trunc(i.PersonalOpinion[t]):0),o.push(null!=i.StateOfConservation[t]?Math.trunc(i.StateOfConservation[t]):0),o.push(null!=i.TechnicalOpinion[t]?Math.trunc(i.TechnicalOpinion[t]):0);let d=0;for(let m=0;m<o.length;m++)null!=o[m]&&(d+=o[m]);return d/o.length})()}getUserRatingValue(t,i){return(0,l.Z)(function*(){})()}getBarraGlobalRating(t){return(0,l.Z)(function*(){let i=new Map;yield(yield I.getRateGlobalJSON()).result;let o=[];return o.push(null!=i.ArtistCareer[t]?Math.trunc(i.ArtistCareer[t]):0),o.push(null!=i.HistoricalImportance[t]?Math.trunc(i.HistoricalImportance[t]):0),o.push(null!=i.PersonalOpinion[t]?Math.trunc(i.PersonalOpinion[t]):0),o.push(null!=i.StateOfConservation[t]?Math.trunc(i.StateOfConservation[t]):0),o.push(null!=i.TechnicalOpinion[t]?Math.trunc(i.TechnicalOpinion[t]):0),o})()}getAllTypeRates(t){return(0,l.Z)(function*(){return null==t?[]:void 0})()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(M.J))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-rating"]],viewQuery:function(t,i){if(1&t&&e.\u0275\u0275viewQuery(H,5),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.barresRating=o)}},inputs:{idPostTimeLapseID:"idPostTimeLapseID"},decls:8,vars:4,consts:function(){let n,t;return n="Vote",t="Vote",[["class","criteri row no-gutters",4,"ngFor","ngForOf"],[1,"botoVotar"],[1,"boto","botoPrincipal","botoPetit",3,"click"],n,["class","botoVotar",4,"ngIf"],[1,"criteri","row","no-gutters"],[1,"textCriteri","col-12","col-md-3"],[1,"col-12","col-md-9",3,"idPostTimeLapseID","section"],["barraRating",""],[1,"boto","botoPrincipal","botoPetit",3,"disabled","click"],t]},template:function(t,i){1&t&&(e.\u0275\u0275template(0,j,5,3,"div",0),e.\u0275\u0275pipe(1,"keyvalue"),e.\u0275\u0275text(2," <<<<<<< HEAD\n"),e.\u0275\u0275elementStart(3,"div",1)(4,"button",2),e.\u0275\u0275listener("click",function(){return i.submit()}),e.\u0275\u0275i18n(5,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(6,"\n=======\n"),e.\u0275\u0275template(7,X,4,1,"div",4),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(1,2,i.sections)),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",i.mostrarBotoVotar()))},dependencies:[y.NgForOf,y.NgIf,z,y.KeyValuePipe],styles:["*[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.criteri[_ngcontent-%COMP%]   .textCriteri[_ngcontent-%COMP%]{margin:auto;padding:0 15px}.botoVotar[_ngcontent-%COMP%]{text-align:center;margin:10px 20px 20px}"]}),r})();var J=p(7273),W=p(6362);const K=["commentsComponent"],Y=["ratingComponent"],q=["post"],tt=["swiper"],et=["moreModal"];function nt(r,n){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"img",32),e.\u0275\u0275listener("error",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(o.url="assets/in2art/imatges/noImageBig.png")}),e.\u0275\u0275elementEnd()}if(2&r){const t=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("src",i.prepareLink(t.path)||t.url,e.\u0275\u0275sanitizeUrl)("alt",i.alt)}}function it(r,n){1&r&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275template(1,nt,1,2,"img",31),e.\u0275\u0275elementEnd()),2&r&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!0))}function ot(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,it,2,1,"div",29),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.p.post.files)}}function rt(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate((null==t.ratingComponent||null==t.ratingComponent.globalRating?null:t.ratingComponent.globalRating.toFixed(0))||"~")}}function at(r,n){1&r&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate("~"))}function st(r,n){if(1&r&&e.\u0275\u0275element(0,"app-user-info",34),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("user",t.p.community)}}function lt(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"p",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(null==t.p?null:t.p.title)}}function ct(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"p",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.p.dateMaco)}}function ut(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"p",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("Unknown",t.p.dateMaco,"")}}function pt(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"p",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",t.p.author,"",t.p.dateMaco,"")}}function dt(r,n){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275listener("click",function(){const d=e.\u0275\u0275restoreView(t).$implicit,m=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(m.main.goToMedium(d.text))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&r){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.text)}}function gt(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"div",37),e.\u0275\u0275template(1,dt,2,1,"button",38),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.p.mediums)}}function mt(r,n){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",42),e.\u0275\u0275listener("click",function(){const d=e.\u0275\u0275restoreView(t).$implicit,m=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(m.main.goToMovement(d.text))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&r){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.text)}}function ft(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"div",40),e.\u0275\u0275template(1,mt,2,1,"button",41),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.p.movements)}}function _t(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"p",43),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.p.dimensions)}}function ht(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"p",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.p.technique)}}function vt(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"p",45),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.p.priceCurrency)}}function Ct(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"p",46),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(null==t.p?null:t.p.description)}}function Ot(r,n){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",49),e.\u0275\u0275listener("click",function(){const d=e.\u0275\u0275restoreView(t).$implicit,m=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(m.main.goToTag(d.text))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&r){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("#",t.text,"")}}function bt(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"div",47),e.\u0275\u0275template(1,Ot,2,1,"button",48),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.p.tags)}}function Pt(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"div",50),e.\u0275\u0275element(1,"app-rating",51,52),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("idPostTimeLapseID",t.p.postTimelapseId)}}function It(r,n){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",3,4),e.\u0275\u0275template(2,ot,2,1,"div",5),e.\u0275\u0275elementStart(3,"div",6),e.\u0275\u0275listener("dblclick",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.main.logDebug(o))}),e.\u0275\u0275elementStart(4,"div",7)(5,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.botoView_click())}),e.\u0275\u0275element(6,"img",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.openMoreModal())}),e.\u0275\u0275element(8,"img",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",12)(10,"button",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.botoRating_click())}),e.\u0275\u0275elementStart(11,"div",14),e.\u0275\u0275i18n(12,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,rt,2,1,"div",16),e.\u0275\u0275template(14,at,2,1,"div",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",17)(16,"div"),e.\u0275\u0275template(17,st,1,1,"app-user-info",18),e.\u0275\u0275template(18,lt,2,1,"p",19),e.\u0275\u0275template(19,ct,2,1,"p",20),e.\u0275\u0275template(20,ut,2,1,"p",20),e.\u0275\u0275template(21,pt,2,2,"p",20),e.\u0275\u0275template(22,gt,2,1,"div",21),e.\u0275\u0275template(23,ft,2,1,"div",22),e.\u0275\u0275template(24,_t,2,1,"p",23),e.\u0275\u0275template(25,ht,2,1,"p",24),e.\u0275\u0275template(26,vt,2,1,"p",25),e.\u0275\u0275template(27,Ct,2,1,"p",26),e.\u0275\u0275template(28,bt,2,1,"div",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,Pt,3,1,"div",28),e.\u0275\u0275elementEnd()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("preview",t.preview)("active",t.active),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!=(null==t.p?null:t.p.post.files)),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",0!=(null==t.ratingComponent?null:t.ratingComponent.globalRating)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==(null==t.ratingComponent?null:t.ratingComponent.globalRating)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.selfUser(null==t.p?null:t.p.community.nickname)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.p?null:t.p.title),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1==t.p.authorType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",2==t.p.authorType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",3==t.p.authorType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.p.mediums),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.p.movements),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.p.dimensions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.p.technique),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.p.priceCurrency),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.p?null:t.p.description),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.p.tags),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.preview)}}function Mt(r,n){1&r&&(e.\u0275\u0275elementStart(0,"div",53),e.\u0275\u0275element(1,"app-loading"),e.\u0275\u0275elementEnd())}function xt(r,n){1&r&&(e.\u0275\u0275elementStart(0,"div",54),e.\u0275\u0275i18n(1,55),e.\u0275\u0275elementEnd())}s.ZP.use([s.W_,s.tl,s.LW,s.eZ]);let yt=(()=>{class r{constructor(t,i){this.main=t,this.route=i,this.preview=!1,this.active=!1,this.viewPostEnviat=!1,this.preparedP="http://192.168.1.136:1339/311c6497-8afb-4a18-b98a-564ff71fe4a2.jpg",this.alt="",this.autoplay=!0,this.viewOpen=!1,this.ratingOpen=!1,this.commentOpen=!1,this.loadingShared=!1,this.swipeContentPublicacioConfig={autoHeight:!0,resistanceRatio:.666,grabCursor:!1,scrollbar:{draggable:!0},threshold:10}}ngOnInit(){var t=this;return(0,l.Z)(function*(){if(!t.p)return;yield t.p.post.getLanguage(t.main.getLocale()).then(d=>{null!=d&&(null!=d.title&&(t.p.title=d.title),null!=d.description&&(t.p.description=d.description))}),t.alt=`${t.p.title||(t.p.esObra?"Artwork":"Post")} from ${t.p.author}. ${t.p.description}`,!t.p.dateMaco&&t.p.date&&(t.p.dateMaco=new Date(t.p.date).toLocaleDateString(t.main.getLocale(),{dateStyle:"long"})),1!=t.p.authorType&&""!=t.p.dateMaco&&(t.p.dateMaco=`, (${t.p.dateMaco})`),g("video").prop("muted",!0),t.marcarPostActiu(),t.reproduirVideoPostActiu();let o=t;g(window).scroll(function(){o.marcarPostActiu()}),t.route.snapshot.queryParams.comment&&t.openDivComment()})()}prepareLink(t){return T.c.prependImagesUrl(t)}isArtwork(t){return!!t.artist}selfUser(t){return t==this.main.apiHelpers.currentUser.nickname}openDivComment(){let t=setInterval(()=>{document.body.contains(document.querySelector(".divComment"))&&(clearInterval(t),this.botoComment_click(),this.findComment(this.route.snapshot.queryParams.comment))},350)}findComment(t){let i=setInterval(()=>{document.body.contains(document.getElementById(`comment-${t}`))&&(clearInterval(i),this.checkComment(t)&&(document.getElementById(`comment-${t}`).parentElement.parentElement.parentElement.style.display="block"),document.getElementById(`comment-${t}`).scrollIntoView({behavior:"smooth"}),document.getElementById(`comment-${t}`).style.background="#9929296e")},350)}checkComment(t){return"mainComment"!=document.getElementById(`comment-${t}`).parentNode.parentElement.className.split(" ")[0]}botoComment_click(){this.viewOpen=!1,this.commentOpen=!this.commentOpen,this.ratingOpen=!1,this.actView(),this.actComment(),this.actRating()}botoView_click(){this.viewOpen=!this.viewOpen,this.commentOpen=!1,this.ratingOpen=!1,this.actView(),this.actComment(),this.actRating()}botoRating_click(){this.viewOpen=!1,this.commentOpen=!1,this.ratingOpen=!this.ratingOpen,this.actView(),this.actComment(),this.actRating()}actComment(){let t=g(this.post.nativeElement).find(".botoComment"),i=g(this.post.nativeElement).find(".divComment");t.attr("data-open",this.commentOpen),this.commentOpen?i.slideDown(300):i.slideUp(300)}actView(){let t=g(this.post.nativeElement).find(".botoView"),i=g(this.post.nativeElement).find(".divInfo");t.attr("data-open",this.viewOpen),this.viewOpen?i.slideDown(300):i.slideUp(300)}actRating(){let t=g(this.post.nativeElement).find(".botoRating"),i=g(this.post.nativeElement).find(".divRating");t.attr("data-open",this.ratingOpen),this.ratingOpen?i.slideDown(300):i.slideUp(300)}marcarPostActiu(){let t=g("swiper.swipeContentPublicacio:in-viewport").first();if(!t.length)return;this.swiperActiu=t[0].swiper;let i=t.parents(".post");this.active=i[0]==this.post?.nativeElement,this.active&&this.reproduirVideoPostActiu()}reproduirVideoPostActiu(){var t=this;return(0,l.Z)(function*(){let i=g(".post.active .swipeContentPublicacio .swiper-slide.swiper-slide-active video").first();i.length&&(yield i[0].play()),t.pausaAltresVideos(i)})()}reproduirVideoAquestSlide(t){var i=this;return(0,l.Z)(function*(){if(i.autoplay){let o=g(t.slides).filter(".swiper-slide.swiper-slide-active").find("video").first();o.length&&(yield o[0].play()),i.pausaAltresVideos(o)}})()}video_click(t){g(t).prop("paused")?this.autoplay||(this.autoplay=!0):this.autoplay=!this.autoplay,this.playPauseVideo(t),this.pausaAltresVideos(t)}playPauseVideo(t){g(t).trigger(g(t).prop("paused")?"play":"pause")}pausaAltresVideos(t){g(".post .swiper-slide video").not(t).trigger("pause")}openMoreModal(){let t={accio:()=>{this.main.notInMyBeta()},img:"assets/in2art/icones/view-collection.svg",text:this.main.t("View collection"),class:"view"},i={accio:()=>{this.main.notInMyBeta()},img:"assets/in2art/icones/save.svg",text:this.main.t("Save"),class:"save"},o={img:"assets/in2art/icones/share.svg",text:this.main.t("Share"),class:"share"},d={accio:()=>{this.main.copy(this.main.urlBase+"/post/"+this.p.idPost)},img:"assets/in2art/icones/link.svg",text:this.main.t("Copy URL"),class:"copy"},m={accio:()=>{this.main.notInMyBeta()},img:"assets/in2art/icones/report.svg",text:this.main.t("Report"),class:"report"},E=[t,i,o];window.isSecureContext&&E.push(d),this.main.currentUser.username!=this.p.user.username&&E.push(m)}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(M.J),e.\u0275\u0275directiveInject(x.gz))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-publicacio"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(K,5),e.\u0275\u0275viewQuery(Y,5),e.\u0275\u0275viewQuery(q,5),e.\u0275\u0275viewQuery(tt,5),e.\u0275\u0275viewQuery(et,5)),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.commentsComponent=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.ratingComponent=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.post=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.swiper=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.moreModal=o.first)}},inputs:{postId:"postId",p:"p",idObra:"idObra",preview:"preview"},decls:3,vars:3,consts:function(){let n,t;return n="Vote",t=" Post/Artwork not found\n",[["class","post",3,"preview","active",4,"ngIf"],["class","carregant",4,"ngIf"],["class","p-4 fs-2 align-center",4,"ngIf"],[1,"post"],["post",""],[4,"ngIf"],[1,"botons","row","no-gutters",3,"dblclick"],[1,"col-5","col-sm-3","row","no-gutters",2,"height","100%"],[1,"col-5","col-sm-5","boto","botoView",3,"click"],["src","assets/in2art/icones/View.svg","alt","View"],[1,"col-5","col-sm-5","boto","botoMore",3,"click"],["src","assets/in2art/icones/More.svg","alt","More"],[1,"col-4","col-sm-7","divBotoRating"],[1,"botoRating","boto","botoPrincipal",3,"click"],[1,"text"],n,["class","puntuacio",4,"ngIf"],[1,"divInfo",2,"display","none"],[3,"user",4,"ngIf"],["class","title",4,"ngIf"],["class","authorAndDate",4,"ngIf"],["class","divMediums",4,"ngIf"],["class","divMovements",4,"ngIf"],["class","dimensions",4,"ngIf"],["class","technique",4,"ngIf"],["class","price",4,"ngIf"],["class","description",4,"ngIf"],["class","divTags",4,"ngIf"],["class","divRating nodrag noselect","style","display: none;",4,"ngIf"],["class","filesImage",4,"ngFor","ngForOf"],[1,"filesImage"],["class","media-content",3,"src","alt","error",4,"ngIf"],[1,"media-content",3,"src","alt","error"],[1,"puntuacio"],[3,"user"],[1,"title"],[1,"authorAndDate"],[1,"divMediums"],["class","boto botoSecundari botoMedium",3,"click",4,"ngFor","ngForOf"],[1,"boto","botoSecundari","botoMedium",3,"click"],[1,"divMovements"],["class","boto botoSecundari botoMovement",3,"click",4,"ngFor","ngForOf"],[1,"boto","botoSecundari","botoMovement",3,"click"],[1,"dimensions"],[1,"technique"],[1,"price"],[1,"description"],[1,"divTags"],["class","boto botoTag",3,"click",4,"ngFor","ngForOf"],[1,"boto","botoTag",3,"click"],[1,"divRating","nodrag","noselect",2,"display","none"],[3,"idPostTimeLapseID"],["ratingComponent",""],[1,"carregant"],[1,"p-4","fs-2","align-center"],t]},template:function(t,i){1&t&&(e.\u0275\u0275template(0,It,30,20,"div",0),e.\u0275\u0275template(1,Mt,2,0,"div",1),e.\u0275\u0275template(2,xt,2,0,"div",2)),2&t&&(e.\u0275\u0275property("ngIf",i.p&&0!=i.p.post.files),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",void 0===i.p),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null===i.p))},dependencies:[y.NgForOf,y.NgIf,Q,J.M,W.N],styles:['@charset "UTF-8";  .post.preview .botoComment,   .post.preview .botoMore,   .post.preview .botoRating,   .post.preview app-user-info .boto.usuari,   .post.preview .botoMedium,   .post.preview .botoMovement,   .post.preview .botoTag{pointer-events:none}.post[_ngcontent-%COMP%]{background-color:var(--color-fons-card);border:var(--border-card);box-shadow:0 19px 38px #0000004d,0 15px 12px #00000038;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;border-radius:0;margin:0 auto;overflow:hidden;text-align:left}.post[_ngcontent-%COMP%]   .filesImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:cover;margin-left:auto;margin-right:auto;display:block}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]{height:50px;border-top:var(--border-card)}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoView[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoComment[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoMore[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divRating[_ngcontent-%COMP%]{border:none;background:none;height:100%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoView[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoComment[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoMore[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divRating[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{pointer-events:none;height:80%;width:45%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoView[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotateX(0);transition:transform .3s linear}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoView[data-open=true][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotateX(180deg)}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoMore[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divBotoRating[_ngcontent-%COMP%]   button.botoRating[_ngcontent-%COMP%]{display:inline-flex;border-radius:50px;padding:0;margin-top:9px;margin-left:15px;font-size:1rem}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divBotoRating[_ngcontent-%COMP%]   button.botoRating[_ngcontent-%COMP%]   div.text[_ngcontent-%COMP%]{font-size:inherit;margin:auto 3px auto 9px}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divBotoRating[_ngcontent-%COMP%]   button.botoRating[_ngcontent-%COMP%]   div.puntuacio[_ngcontent-%COMP%]{overflow:hidden;font-size:inherit;background-color:var(--color-fons-card);color:var(--color-text);border-radius:20px;margin:4px;height:24px;width:38px}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   div.botonsSlider[_ngcontent-%COMP%]{height:100%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   div.botonsSlider[_ngcontent-%COMP%]   .botoSlider[_ngcontent-%COMP%]{border:none;background:none;height:100%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   div.botonsSlider[_ngcontent-%COMP%]   .botoSlider[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{pointer-events:none;height:50%;width:70%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   div.botonsSlider[_ngcontent-%COMP%]   .botoSlider[_ngcontent-%COMP%]:disabled{opacity:0}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]{padding:20px;text-align:left}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   app-user-info[_ngcontent-%COMP%]{display:flex;width:-moz-fit-content;width:fit-content;background:var(--color-fons-card-2);border:var(--border-card);border-radius:50px;margin:0px auto 1rem 0;transition:all .2s}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:30px}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .authorAndDate[_ngcontent-%COMP%]{font-size:20px}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMediums[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMovements[_ngcontent-%COMP%]{margin-bottom:1rem}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMediums[_ngcontent-%COMP%]   .botoMedium[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMediums[_ngcontent-%COMP%]   .botoMovement[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMovements[_ngcontent-%COMP%]   .botoMedium[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMovements[_ngcontent-%COMP%]   .botoMovement[_ngcontent-%COMP%]{margin:0 10px 5px 0}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:700;color:#b20}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{white-space:pre-line;color:gray;font-size:17px}[_nghost-%COMP%]     .post swiper .media-content{width:100%;max-height:80vh;object-fit:contain;display:block;margin:auto}[_nghost-%COMP%]     .post swiper .swiper-scrollbar{width:100%;left:0;bottom:0;height:3px;border-radius:10px;background:rgba(0,0,0,.1333333333)}[_nghost-%COMP%]     .post swiper .swiper-scrollbar .swiper-scrollbar-drag{border-radius:10px;background:var(--color-text)}']}),r})()},7273:(L,U,p)=>{p.d(U,{M:()=>R});var l=p(5861),T=p(1274),g=p(3769),s=p(4650),B=p(9696),e=p(6895),M=p(2839);function x(f,v){if(1&f){const a=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",2),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(a);const u=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(u.checkIfUserIsPublic(u.user.nickname))}),s.\u0275\u0275element(1,"app-foto-perfil",3),s.\u0275\u0275elementStart(2,"div",4)(3,"div",5),s.\u0275\u0275text(4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(5,"div",6),s.\u0275\u0275text(6),s.\u0275\u0275elementEnd()()()}if(2&f){const a=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("user",a.user),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate2("",a.user.name," ",a.user.lastName,""),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1("@",a.user.nickname,"")}}function y(f,v){1&f&&(s.\u0275\u0275elementStart(0,"div",7),s.\u0275\u0275i18n(1,8),s.\u0275\u0275elementEnd())}function w(f,v){if(1&f&&(s.\u0275\u0275elementStart(0,"div",6),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&f){const a=s.\u0275\u0275nextContext(2);s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1("@",a.user.nickname,"")}}function C(f,v){if(1&f){const a=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",2),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(a);const u=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(u.checkIfUserIsPublic(u.user.nickname))}),s.\u0275\u0275element(1,"app-foto-perfil",3),s.\u0275\u0275elementStart(2,"div",4)(3,"div",5),s.\u0275\u0275text(4),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(5,w,2,1,"div",9),s.\u0275\u0275elementEnd()()}if(2&f){const a=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("user",a.user),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate2("",a.user.name," ",a.user.lastName,""),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",!(null!=a.user&&a.user.anonNickname))}}function P(f,v){1&f&&(s.\u0275\u0275elementStart(0,"div",7),s.\u0275\u0275i18n(1,10),s.\u0275\u0275elementEnd())}let R=(()=>{class f{constructor(a){this.main=a,this.utils=T.c,this.isAnonUser=!1,this.anonUser={name:"Anonymous",lastName:"",anonNickname:"Anonymous",photo:"assets/in2art/imatges/profileDefaultSolidGray.png"}}ngOnInit(){var a=this;return(0,l.Z)(function*(){"Anonymous"!=a.user?.username&&a.user?.profile?(a.id&&(a.user=yield g.J.getUserById(a.id)),a.username&&(a.user=yield g.J.getUserByNickname(a.username)),a.user&&(a.user=yield g.J.getUserById(a.user.userProfileId))):(null==a.user||null==a.user)&&(a.isAnonUser=!0,a.user=a.anonUser)})()}checkIfUserIsPublic(a){this.isNicknameValid(a)?this.main.goTo(a):this.main.toastDanger("User is not public!")}isNicknameValid(a){return a.toLowerCase(),!("anonymous"==a||"unknown"==a)}}return f.\u0275fac=function(a){return new(a||f)(s.\u0275\u0275directiveInject(B.J))},f.\u0275cmp=s.\u0275\u0275defineComponent({type:f,selectors:[["app-user-info"]],inputs:{id:"id",username:"username",user:"user"},decls:4,vars:4,consts:function(){let v,a;return v="Loading...",a="Loading...",[["class","boto botoGeneric usuari",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],[1,"boto","botoGeneric","usuari",3,"click"],[3,"user"],[1,"textosUsuari"],[1,"nom"],[1,"username"],[1,"loading"],v,["class","username",4,"ngIf"],a]},template:function(a,c){1&a&&(s.\u0275\u0275template(0,x,7,4,"button",0),s.\u0275\u0275template(1,y,2,0,"div",1),s.\u0275\u0275template(2,C,6,4,"button",0),s.\u0275\u0275template(3,P,2,0,"div",1)),2&a&&(s.\u0275\u0275property("ngIf",!c.anonUser),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",!c.user),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",c.anonUser),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",!c.user))},dependencies:[e.NgIf,M.d],styles:[".usuari[_ngcontent-%COMP%]{background-color:transparent;height:6rem;padding:1rem;border-radius:inherit;display:inline-flex}.usuari[_ngcontent-%COMP%]   app-foto-perfil[_ngcontent-%COMP%]{height:100%}.usuari[_ngcontent-%COMP%]   .textosUsuari[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}.usuari[_ngcontent-%COMP%]   .textosUsuari[_ngcontent-%COMP%]   .nom[_ngcontent-%COMP%]{font-size:1.4rem}.usuari[_ngcontent-%COMP%]   .textosUsuari[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:1rem;color:gray}.loading[_ngcontent-%COMP%]{line-height:6rem;font-size:1.2rem;padding:0 20px;font-weight:700;animation:loadingText 1s ease infinite alternate}@keyframes loadingText{0%{color:var(--color-text)}to{color:gray}}@media only screen and (max-width: 576px){.textosUsuari[_ngcontent-%COMP%]   .nom[_ngcontent-%COMP%]{font-size:4vw}.textosUsuari[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:2vw}}"]}),f})()}}]);