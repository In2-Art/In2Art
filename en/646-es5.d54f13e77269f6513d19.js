!function(){var e,t,o,n,r,a,l,i,c,m,d,s;function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(self.webpackChunkcuba=self.webpackChunkcuba||[]).push([[646],{4646:function(b,h,g){"use strict";g.r(h),g.d(h,{EditProfileModule:function(){return G}});var v=g(1116),C=g(9616),x=g(1041),P=g(4762),M=g(8816),y=g(5366),O=g(2927),S=g(5703),_=g(9624),w=g(4405),E=g(1027),k=g(5641),F=["uploadFileModal"],z=["imageCropper"];function N(e,t){if(1&e){var o=y["\u0275\u0275getCurrentView"]();y["\u0275\u0275elementStart"](0,"button",39),y["\u0275\u0275listener"]("click",function(){return y["\u0275\u0275restoreView"](o),y["\u0275\u0275nextContext"](2).removePhoto()}),y["\u0275\u0275i18n"](1,40),y["\u0275\u0275elementEnd"]()}}function I(e,t){if(1&e){var o=y["\u0275\u0275getCurrentView"]();y["\u0275\u0275elementStart"](0,"form",12),y["\u0275\u0275elementStart"](1,"div",13),y["\u0275\u0275elementStart"](2,"button",14),y["\u0275\u0275listener"]("click",function(){return y["\u0275\u0275restoreView"](o),y["\u0275\u0275nextContext"]().openUploadFileModal()}),y["\u0275\u0275element"](3,"img",15),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](4,"br"),y["\u0275\u0275template"](5,N,2,0,"button",16),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](6,"div",17),y["\u0275\u0275elementStart"](7,"label",18),y["\u0275\u0275i18n"](8,19),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](9,"input",20),y["\u0275\u0275element"](10,"app-missatge-error-form",21),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](11,"div",17),y["\u0275\u0275elementStart"](12,"label",22),y["\u0275\u0275i18n"](13,23),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](14,"input",24),y["\u0275\u0275element"](15,"app-missatge-error-form",21),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](16,"div",17),y["\u0275\u0275elementStart"](17,"label",22),y["\u0275\u0275i18n"](18,25),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](19,"input",26),y["\u0275\u0275element"](20,"app-missatge-error-form",21),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](21,"div",17),y["\u0275\u0275elementStart"](22,"label",22),y["\u0275\u0275i18n"](23,27),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](24,"input",28),y["\u0275\u0275element"](25,"app-missatge-error-form",21),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](26,"div",17),y["\u0275\u0275elementStart"](27,"label",22),y["\u0275\u0275i18n"](28,29),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](29,"input",30),y["\u0275\u0275element"](30,"app-missatge-error-form",21),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](31,"div",17),y["\u0275\u0275elementStart"](32,"label",22),y["\u0275\u0275i18n"](33,31),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](34,"input",32),y["\u0275\u0275element"](35,"app-missatge-error-form",21),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](36,"div",17),y["\u0275\u0275elementStart"](37,"label",22),y["\u0275\u0275i18n"](38,33),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](39,"input",34),y["\u0275\u0275element"](40,"app-missatge-error-form",21),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](41,"div",17),y["\u0275\u0275elementStart"](42,"label",22),y["\u0275\u0275i18n"](43,35),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](44,"input",36),y["\u0275\u0275element"](45,"app-missatge-error-form",21),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](46,"div",37),y["\u0275\u0275elementStart"](47,"input",38),y["\u0275\u0275listener"]("click",function(){return y["\u0275\u0275restoreView"](o),y["\u0275\u0275nextContext"]().submit()}),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"]()}if(2&e){var n=y["\u0275\u0275nextContext"]();y["\u0275\u0275property"]("formGroup",n.form),y["\u0275\u0275advance"](3),y["\u0275\u0275property"]("src",n.form.controls.photo.value,y["\u0275\u0275sanitizeUrl"]),y["\u0275\u0275advance"](2),y["\u0275\u0275property"]("ngIf",n.form.controls.photo.value),y["\u0275\u0275advance"](5),y["\u0275\u0275property"]("control",n.form.controls.name)("nomText","name"),y["\u0275\u0275advance"](5),y["\u0275\u0275property"]("control",n.form.controls.lastName)("nomText","last name"),y["\u0275\u0275advance"](5),y["\u0275\u0275property"]("control",n.form.controls.bio)("nomText","bio"),y["\u0275\u0275advance"](5),y["\u0275\u0275property"]("control",n.form.controls.email)("nomText","email"),y["\u0275\u0275advance"](5),y["\u0275\u0275property"]("control",n.form.controls.username)("nomText","username"),y["\u0275\u0275advance"](5),y["\u0275\u0275property"]("control",n.form.controls.phone)("nomText","phone"),y["\u0275\u0275advance"](5),y["\u0275\u0275property"]("control",n.form.controls.address)("nomText","address"),y["\u0275\u0275advance"](5),y["\u0275\u0275property"]("control",n.form.controls.web)("nomText","website"),y["\u0275\u0275advance"](2),y["\u0275\u0275property"]("disabled",n.carregantSave)}}function V(e,t){1&e&&(y["\u0275\u0275elementStart"](0,"div",41),y["\u0275\u0275element"](1,"app-loading"),y["\u0275\u0275elementEnd"]())}var U,j=function(){var b=function(){function e(t,o,n,r){p(this,e),this.main=t,this.fb=o,this.modalService=n,this.domSanitizer=r,this.files=[],this.validate=!1,this.fotoModificada=!1,this.mostrarFileRequired=!1,t.newPage(this),this.form=this.fb.group({id:[""],photo:[""],name:[""],lastName:[""],bio:[""],email:[""],username:[""],phone:[""],address:[""],web:[""]})}var t,o,n;return t=e,(o=[{key:"ngOnInit",value:function(){var e,t,o;return(0,P.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.carregant=!0,n.next=3,this.main.provider.getCurrentUser();case 3:r=n.sent,this.carregant=!1,this.form.controls.photo.setValue(M.c.prependImagesUrl(null===(e=this.main.currentUser)||void 0===e?void 0:e.photo)),this.form.controls.name.setValue(null==r?void 0:r.name),this.form.controls.lastName.setValue(null==r?void 0:r.lastName),this.form.controls.bio.setValue((null==r?void 0:r.bio)||""),this.form.controls.email.setValue((null===(t=this.main.currentUser)||void 0===t?void 0:t.email)||""),this.form.controls.username.setValue((null===(o=this.main.currentUser)||void 0===o?void 0:o.username)||""),this.form.controls.phone.setValue((null==r?void 0:r.phone)||""),this.form.controls.address.setValue((null==r?void 0:r.address)||""),this.form.controls.web.setValue((null==r?void 0:r.web)||"");case 5:case"end":return n.stop()}},n,this)}))}},{key:"ngOnDestroy",value:function(){this.closeUploadFileModal(!1),this.main.onDestroyPage()}},{key:"openUploadFileModal",value:function(){this.modalService.open(this.uploadFileModal,{size:"lg",modalClass:"uploadFileModal",backdropClass:"modal-backdrop",hideCloseButton:!1,centered:!0,backdrop:!0,animation:!0,keyboard:!0,closeOnOutsideClick:!1})}},{key:"closeUploadFileModal",value:function(e){e&&(this.form.controls.photo.setValue(this.imageCropper.croppedImage),this.fotoModificada=!0),this.modalService.close(this.uploadFileModal)}},{key:"removePhoto",value:function(){this.form.controls.photo.setValue(null),this.imageCropper.removePhoto(),this.fotoModificada=!0}},{key:"profileIncorrecte",value:function(){return(this.form.controls.profile1.touched||this.form.controls.profile2.touched||this.form.controls.profile3.touched||this.form.controls.profile4.touched)&&!(this.form.controls.profile1.value||this.form.controls.profile2.value||this.form.controls.profile3.value||this.form.controls.profile4.value)}},{key:"submit",value:function(){var e=this;if(this.form.markAllAsTouched(),this.mostrarFileRequired=!M.c.objPle(this.files),new FormData,this.fotoModificada){var t=this.imageCropper.croppedImage,o={base64:t.substr(t.indexOf("base64,")+7),fileName:"userProfile",fileExt:this.main.getStringBetween(t,"data:image/",";base64,")};console.log(o),this.main.provider.sendNewProfilePhoto(o).then(function(t){200==t.status&&(e.main.refreshCurrentUser(),e.main.toastSuccess("Profile modified successfully"),e.main.goTo("/profile"))})}this.carregantSave=!0}}])&&u(t.prototype,o),n&&u(t,n),e}();return b.\u0275fac=function(e){return new(e||b)(y["\u0275\u0275directiveInject"](O.J),y["\u0275\u0275directiveInject"](x.qu),y["\u0275\u0275directiveInject"](S.gk),y["\u0275\u0275directiveInject"](_.H7))},b.\u0275cmp=y["\u0275\u0275defineComponent"]({type:b,selectors:[["app-edit-profile"]],viewQuery:function(e,t){var o;(1&e&&(y["\u0275\u0275viewQuery"](F,5),y["\u0275\u0275viewQuery"](z,5)),2&e)&&(y["\u0275\u0275queryRefresh"](o=y["\u0275\u0275loadQuery"]())&&(t.uploadFileModal=o.first),y["\u0275\u0275queryRefresh"](o=y["\u0275\u0275loadQuery"]())&&(t.imageCropper=o.first))},decls:17,vars:2,consts:function(){return[[1,"content"],[1,"card"],[1,"card-body"],["class","theme-form",3,"formGroup",4,"ngIf"],["class","carregant",4,"ngIf"],["id","uploadFileModal",1,"uploadFileModal"],["uploadFileModal",""]," Upload Photo ",["imageCropper",""],[1,"boto","botoPrincipal","botoGran",3,"click"],"Close","Save",[1,"theme-form",3,"formGroup"],[1,"divBotoFoto","form-grup"],["data-content","Change photo",1,"botoFoto",3,"click"],["alt","profile photo",1,"foto",3,"src"],["class","boto botoVermell botoPetit removePhoto",3,"click",4,"ngIf"],[1,"form-grup","row","no-gutters"],[1,"col-form-label","col-sm-12","col-xl-3","asterisc"],"Name",["type","text","disabled","","formControlName","name",1,"form-camp","col-sm-12","col-xl-9"],[3,"control","nomText"],[1,"col-form-label","col-sm-12","col-xl-3"],"Last name",["type","text","disabled","","formControlName","lastName",1,"form-camp","col-sm-12","col-xl-9"],"Bio",["type","text","maxlength","3000","disabled","","formControlName","bio",1,"form-camp","col-sm-12","col-xl-9"],"Email",["type","text","disabled","","formControlName","email",1,"form-camp","col-sm-12","col-xl-9"],"Username",["type","text","disabled","","formControlName","username",1,"form-camp","col-sm-12","col-xl-9"],"Phone",["type","text","disabled","","formControlName","phone",1,"form-camp","col-sm-12","col-xl-9"],"Address",["type","text","disabled","","formControlName","address",1,"form-camp","col-sm-12","col-xl-9"],"Website",["type","text","disabled","","formControlName","web",1,"form-camp","col-sm-12","col-xl-9"],[2,"text-align","center"],["type","button","value","Save",1,"boto","botoPrincipal","botoGran",3,"disabled","click"],[1,"boto","botoVermell","botoPetit","removePhoto",3,"click"],"Remove photo",[1,"carregant"]]},template:function(e,t){1&e&&(y["\u0275\u0275elementStart"](0,"div",0),y["\u0275\u0275elementStart"](1,"div",1),y["\u0275\u0275elementStart"](2,"div",2),y["\u0275\u0275template"](3,I,48,20,"form",3),y["\u0275\u0275template"](4,V,2,0,"div",4),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](5,"modal",5,6),y["\u0275\u0275elementStart"](7,"modal-header"),y["\u0275\u0275i18n"](8,7),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](9,"modal-content"),y["\u0275\u0275element"](10,"app-image-croper",null,8),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](12,"modal-footer"),y["\u0275\u0275elementStart"](13,"button",9),y["\u0275\u0275listener"]("click",function(){return t.closeUploadFileModal(!1)}),y["\u0275\u0275i18n"](14,10),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](15,"button",9),y["\u0275\u0275listener"]("click",function(){return t.closeUploadFileModal(!0)}),y["\u0275\u0275i18n"](16,11),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"]()),2&e&&(y["\u0275\u0275advance"](3),y["\u0275\u0275property"]("ngIf",!t.carregant),y["\u0275\u0275advance"](1),y["\u0275\u0275property"]("ngIf",t.carregant))},directives:[v.NgIf,S.zS,S.Rb,S.Ef,w.r,S.YI,x._Y,x.JL,x.sg,x.Fj,x.JJ,x.u,E.T,x.nD,k.N],styles:[".content[_ngcontent-%COMP%]{max-width:940px;padding:100px 0;border:none}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:40px}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]{text-align:center}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]{width:150px;height:150px;-o-object-fit:cover;object-fit:cover;padding:0;margin-bottom:10px;border:none;border-radius:10000px;overflow:hidden;position:relative}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]:after{content:attr(data-content);font-size:20px;line-height:150px;color:#fff;position:absolute;width:100%;height:100%;top:0;left:0;background-color:#0008;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);opacity:0;border-radius:10000px;transition:all .2s}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]:hover:after{opacity:1}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]   img.foto[_ngcontent-%COMP%]{width:150px;height:150px}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:0;padding:7px 0}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .form-camp[_ngcontent-%COMP%]{padding:6px 12px;border-width:1px;border-radius:20px}.carregant[_ngcontent-%COMP%]   app-loading[_ngcontent-%COMP%]{margin:100px auto}"]}),b}(),T=g(2080),B=[{path:"",children:[{path:"",component:j}]}],$=function(){var e=function e(){p(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=y["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=y["\u0275\u0275defineInjector"]({imports:[[T.Bz.forChild(B)],T.Bz]}),e}(),R=g(355),G=((U=function e(){p(this,e)}).\u0275fac=function(e){return new(e||U)},U.\u0275mod=y["\u0275\u0275defineNgModule"]({type:U}),U.\u0275inj=y["\u0275\u0275defineInjector"]({imports:[[$,R.z,v.CommonModule,C.m,x.u5,S.zk]]}),U)}}])}();