{"version":3,"sources":["webpack:///src/app/in2art/classes/errorObject.ts","webpack:///src/app/in2art/components/_tools/contents-ordenables/contents-ordenables.component.ts","webpack:///src/app/in2art/components/_tools/contents-ordenables/contents-ordenables.component.html","webpack:///src/app/in2art/pages/new/artwork/new-artwork.component.html","webpack:///src/app/in2art/pages/new/artwork/new-artwork.component.ts","webpack:///src/app/in2art/pages/new/new-routing.module.ts","webpack:///src/app/in2art/pages/new/new.module.ts","webpack:///src/app/in2art/pages/new/post/new-post.component.html","webpack:///src/app/in2art/pages/new/post/new-post.component.ts","webpack:///src/app/in2art/services/DTOs/ArtworkDTO.ts","webpack:///src/app/in2art/services/DTOs/checks.ts","webpack:///src/app/in2art/services/DTOs/FileDTO.ts","webpack:///src/app/in2art/services/DTOs/JsonHelper.ts","webpack:///src/app/in2art/services/DTOs/PostDTO.ts","webpack:///src/app/in2art/services/DTOs/Random.ts"],"names":["ErrorObject","type","message","ContentsOrdenablesComponent","items","i","splice","map","e","item","dataset","index","blob","getType","toArray","ext","split","NewArtworkComponent","main","fb","domSanitizer","modalService","processingFiles","files","validate","mediumItemsIndexat","movementItemsIndexat","mediums","movements","carregantBotoPublicar","mostrarFileRequired","newPage","form","group","inputFiles","title","Validators","author","authorType","date","otherMediums","otherMovements","dimensions","technique","price","currency","description","tags","major18","closePreviewModal","onDestroyPage","itemsProcessed","length","file","Utils","bypassSecurityTrustUrl","contentsOrdenables","push","val","camp","includes","controls","value","filter","join","setValue","prop","trigger","open","previewModal","size","modalClass","backdropClass","hideCloseButton","centered","backdrop","animation","keyboard","closeOnOutsideClick","close","preview","markAllAsTouched","acdcDatepicker","touched","corregirTags","valid","isValid","console","log","dateMaco","getTextAny","getTextSegle","priceCurrency","toFixed","content","getItemsOrdered","self","currentUser","user","openPreviewModal","formData","FormData","forEach","c","append","File","changingThisBreaksApplicationSecurity","JSON","stringify","getObjData","base64AllInfo","base64Info","substr","indexOf","arrayArtsits","getSelfArtsitID","postData","languageId","isDraft","patreonMinLevelId","artworkRelatedId","dataBase64","fileName","fileExt","getStringBetween","get","artistIds","artworkData","post","artrworkErrors","ArtworkDTO","check","provider","postArtwork","then","res","toastSuccess","addFiles","focusInputAuthor","submit","publicar","routes","path","children","redirectTo","component","NewPostComponent","NewRoutingModule","RouterModule","NewModule","CommonModule","SharedModule","FormsModule","NgSelectModule","DragulaModule","ModalModule","esObra","text","ps","postFormData","data","eh","hiHaError","toastDanger","errors","id","postId","others","material","perservation","location","afterChrist","artistTypeId","dateFormatTypeId","isVisible","Checks","PostDTO","OthersLength","TechniqueLength","DimensionsLength","MaterialLength","PerservationLength","LocationLength","email","password","checkEmail","checkPassword","String","toLowerCase","match","MIN_PASSWORD_LENGTH","MAX_PASSWORD_LENGTH","name","nickname","trim","Date","isNaN","getTime","phone","base64","regexExp","test","sha512","FileDTO","tokenRecovery","generateToken","Random","LengthTokenRecovery","concat","JsonHelper","strToJSONUnescape","replace","undefined","strToJSONEscape","obj","fileIds","MAX_TITLE_LENGTH","MAX_DESCRIPTION_LENGTH","f","CHAR_LIST","result","characters","charactersLength","charAt","Math","floor","random","str","isOk","maxExcluded","arr","Integer","filterMethod","pos","Position","Value"],"mappings":"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","file":"src_app_in2art_pages_new_new_module_ts-es5.js","sourcesContent":["export class ErrorObject {\r\n\r\n    type: string;\r\n    message: string;\r\n\r\n    constructor(type: string, message: string) {\r\n        this.type = type;\r\n        this.message = message;\r\n    }\r\n\r\n}","// import { Utils } from './../../services/utils.service';\r\nimport * as $ from \"jquery\";\r\n\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-contents-ordenables',\r\n    templateUrl: './contents-ordenables.component.html',\r\n    styleUrls: ['./contents-ordenables.component.scss']\r\n})\r\nexport class ContentsOrdenablesComponent implements OnInit {\r\n\r\n    public items;\r\n\r\n    constructor() {\r\n        this.items = [];\r\n    }\r\n\r\n    async ngOnInit() {\r\n    }\r\n\r\n    eliminarPos(i) {\r\n        this.items.splice(i, 1);\r\n    }\r\n\r\n    getItemsOrdered() {\r\n        return $(\".item:visible\").map((i, e) => {\r\n            let item = this.items[e.dataset.index];\r\n            return {\r\n                blob: item.blob,\r\n                type: this.getType(item)\r\n            };\r\n        }).toArray();\r\n    }\r\n    getType(item) {\r\n        let ext = item.type.split(\"/\")[1];\r\n\r\n        if (ext == \"jpg\" || ext == \"jpeg\" || ext == \"png\" || ext == \"gif\") return 1;\r\n        if (ext == \"mp4\" || ext == \"avi\") return 2;\r\n        if (ext == \"mp3\" || ext == \"mpeg\" || ext == \"wav\" || ext == \"ogg\") return 3;\r\n    }\r\n}\r\n","<div class=\"items\" dragula=\"FILES\">\r\n    <div class=\"item\" *ngFor=\"let item of items; let i=index\" [hidden]=\"!item\" [attr.data-index]=\"i\">\r\n        <div *ngIf=\"item\">\r\n            <img *ngIf=\"getType(item)==1\" class=\"file\" [src]=\"item.blob\" [alt]=\"item.name\">\r\n            <video *ngIf=\"getType(item)==2\" class=\"file\"><source [src]=\"item.blob\"></video>\r\n            <audio *ngIf=\"getType(item)==3\" class=\"file\" controls><source [src]=\"item.blob\" [type]=\"item.type\" i18n=\"@@Your browser does not support the audio element\">Your browser does not support the audio element</audio>\r\n            <div class=\"text\">{{item.name}}</div>\r\n            <div class=\"botons\">\r\n                <button class=\"boto\" (click)=\"eliminarPos(i)\"><i class=\"fas fa-times\"></i></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","<div class=\"content\">\r\n    <div class=\"card\">\r\n        <div class=\"card-body\">\r\n\r\n            <!-- PER UNA FUTURA VERSIO (GO TO NEW POST) -->\r\n            <!-- <div class=\"content-top row no-gutters\">\r\n                <div class=\"col-sm-3 col-12\"></div>\r\n                <div class=\"col-sm-6 col-12 order-2 order-sm-1 titol\" i18n=\"@@New artwork\">New artwork</div>\r\n                <button class=\"col-sm-3 col-12 order-1 order-sm-2 boto botoSecundari anarAPost\" (click)=\"main.goTo('new/post')\" i18n=\"@@Go to new post\">\r\n                    Go to new post <i class=\"fas fa-chevron-right\"></i></button>\r\n            </div> -->\r\n\r\n            <p class=\"notaEnGris\" i18n=\"@@This is only for finished artworks\">This is only for finished artworks that will be rated. Please don't upload other type of content.</p>\r\n            \r\n            <form class=\"theme-form\" [formGroup]=\"form\">\r\n\r\n                <!-- <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3 asterisc\">Files</label>\r\n                    <input class=\"col-sm-12 col-xl-9\" id=\"inputFiles\" type=\"file\" multiple required>\r\n                    <div *ngIf=\"mostrarFileRequired\" class=\"textErrorForm\">File is required</div>\r\n                </div> -->\r\n\r\n                <input class=\"form-camp inputFile\" type=\"file\" multiple (input)=\"addFiles()\" [disabled]=\"processingFiles\"\r\n                    accept=\".JPG,.PNG,.GIF,.MP4,.AVI,.MP3,.WAV,.OGG\"><!-- ,.PDF -->\r\n                \r\n                <div class=\"divContentsOrdenables clearfix\" [style.display]=\"contentsOrdenables.items.length ? 'block' : 'none'\">\r\n                    <p class=\"notaEnGris dragToOrder\" i18n=\"@@Drag to order\">Drag to order</p>\r\n                    <app-contents-ordenables #contentsOrdenables></app-contents-ordenables>\r\n                </div>\r\n\r\n                <p class=\"notaEnGris\" i18n=\"@@You can upload:\">You can upload: photos (.JPG, .PNG, .GIF) and videos (.MP4, .AVI) </p><!-- and audio (.MP3, .WAV, .OGG) and text (.PDF) -->\r\n\r\n\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3 asterisc\" i18n=\"@@Title\">Title</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"title\">\r\n                    <div *ngIf=\"form.controls.title.touched && form.controls.title.errors?.required\"\r\n                        class=\"textErrorForm\" i18n=\"@@Title is required\">Title is required</div>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3 asterisc\" i18n=\"@@Author\">Author</label>\r\n                    <div class=\"col-sm-12 col-xl-9 m-checkbox-inline\">\r\n                        \r\n                        <div class=\"grupCadaRadio\" style=\"min-width:20%\">\r\n                            <div class=\"radio radio-primary\">\r\n                                <input id=\"at_myself\" type=\"radio\" value=\"1\" name=\"authorType\" formControlName=\"authorType\">\r\n                                <label for=\"at_myself\" i18n=\"@@Myself\">Myself</label>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"grupCadaRadio\" style=\"min-width:20%\">\r\n                            <div class=\"radio radio-primary\">\r\n                                <input id=\"at_unknown\" type=\"radio\" value=\"2\" name=\"authorType\" formControlName=\"authorType\">\r\n                                <label for=\"at_unknown\" i18n=\"@@Unknown\">Unknown Author</label>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"grupCadaRadio\" style=\"min-width:60%\">\r\n                            <div class=\"radio radio-primary\">\r\n                                <input id=\"at_authorName\" type=\"radio\" value=\"3\" name=\"authorType\" formControlName=\"authorType\" (input)=\"focusInputAuthor()\">\r\n                                <label for=\"at_authorName\" style=\"padding-left:0;\"></label>\r\n                            </div>\r\n                            <input id=\"author\" type=\"text\" class=\"form-camp\" formControlName=\"author\" (focus)=\"focusInputAuthor()\">\r\n                        </div>\r\n\r\n                    </div>\r\n                    <app-missatge-error-form [control]=\"form.controls.authorType\" [nomText]=\"'author'\"></app-missatge-error-form>\r\n                    <div *ngIf=\"form.controls.authorType.value==3 && form.controls.author.value==''\"\r\n                        class=\"textErrorForm\" i18n=\"@@Author is required\">Author is required</div>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3 asterisc\" i18n=\"@@Date\">Date</label>\r\n                    <app-acdc-datepicker #acdcDatepicker class=\"col-sm-12 col-xl-9\"></app-acdc-datepicker>\r\n                    <div *ngIf=\"acdcDatepicker.touched && !acdcDatepicker.isValid()\"\r\n                        class=\"textErrorForm\" i18n=\"@@Date is required\">Date is required</div>\r\n                </div>\r\n                <!-- MOVEMENT I MEDIUM PER UNA FUTURA VERSIO! -->\r\n                <!-- <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\">\r\n                        <span (click)=\"tooltipMedium.show()\" mat-raised-button matTooltip=\"{{main.t('mediumDefinition')}}\" #tooltipMedium=\"matTooltip\"\r\n                            class=\"asterisc\" i18n=\"@@Medium\">Medium</span>\r\n                        <i class=\"far fa-question-circle ml-1\"></i>\r\n                    </label>\r\n                    <ng-select [ngClass]=\"othersSeleccionat(mediums)? 'col-sm-6 col-xl-5' : 'col-sm-12 col-xl-9'\"\r\n                        [items]=\"mediumItemsPromise | async\" bindLabel=\"nom_categoria\" bindValue=\"id_categoria\"\r\n                        [(ngModel)]=\"mediums\" [ngModelOptions]=\"{standalone:true}\" [multiple]=\"true\"></ng-select> -->\r\n                    <!-- <div class=\"hidden-xs col-xl-1\" *ngIf=\"othersSeleccionat(mediums)\"></div> -->\r\n                    <!-- <input class=\"form-camp col-sm-6 col-xl-4\" [style.display]=\"othersSeleccionat(mediums)? 'block' : 'none'\" type=\"text\" formControlName=\"otherMediums\">\r\n                    <div *ngIf=\"(form.controls.mediums.touched && mediums.length == 0) || (othersSeleccionat(mediums) && form.controls.otherMediums.touched && form.controls.otherMediums.value == '')\"\r\n                        class=\"textErrorForm\" i18n=\"@@Mediums are required\">Mediums are required</div>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\">\r\n                        <span (click)=\"tooltipMovement.show()\" mat-raised-button matTooltip=\"{{main.t('movementDefinition')}}\" #tooltipMovement=\"matTooltip\"\r\n                            class=\"asterisc\" i18n=\"@@Movement\">Movement</span>\r\n                        <i class=\"far fa-question-circle ml-1\"></i>\r\n                    </label>\r\n                    <ng-select [ngClass]=\"othersSeleccionat(movements)? 'col-sm-6 col-xl-5' : 'col-sm-12 col-xl-9'\"\r\n                        [items]=\"movementItemsPromise | async\" bindLabel=\"nom_estil\" bindValue=\"id_estil\"\r\n                        [(ngModel)]=\"movements\" [ngModelOptions]=\"{standalone:true}\" [multiple]=\"true\"></ng-select> -->\r\n                    <!-- <div class=\"hidden-xs col-xl-1\" *ngIf=\"othersSeleccionat(movements)\"></div> -->\r\n                    <!-- <input class=\"form-camp col-sm-6 col-xl-4\" [style.display]=\"othersSeleccionat(movements)? 'block' : 'none'\" type=\"text\" formControlName=\"otherMovements\">\r\n                    <div *ngIf=\"(form.controls.movements.touched && movements.length == 0) || (othersSeleccionat(movements) && form.controls.otherMovements.touched && form.controls.otherMovements.value == '')\"\r\n                        class=\"textErrorForm\" i18n=\"@@Movements are required\">Movements are required</div>\r\n                </div> -->\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Dimensions\">Dimensions (width, height, depth)</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"dimensions\">\r\n                </div>\r\n                <!-- <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Technique\">Technique</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"technique\">\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Price\">Price</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"number\" min=\"0\" step=\"any\" formControlName=\"price\">\r\n                </div> -->\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Description\">Description</label>\r\n                    <textarea class=\"form-camp col-sm-12 col-xl-9\" maxlength=\"3000\" formControlName=\"description\"></textarea>\r\n                </div>\r\n\r\n                <!-- TAGS PER UNA FUTURA VERSIO! -->\r\n\r\n                <!-- <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Tags\">Tags</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"tags\" (blur)=\"corregirTags()\">\r\n                </div> -->\r\n\r\n                <!-- MAJOR DE 18 ANYS PER UNA FUTURA VERSIO! -->\r\n\r\n                <!-- <div class=\"form-grup\">\r\n                    <label class=\"d-block checkbox-label\" for=\"major18\" style=\"text-align:center;\">\r\n                        <input class=\"checkbox_animated\" id=\"major18\" type=\"checkbox\" formControlName=\"major18\" i18n=\"@@The content uploaded is only for 18\">The content uploaded is only for 18+\r\n                    </label>\r\n                </div> -->\r\n                \r\n                <div style=\"text-align:center;\">\r\n                    <input class=\"boto botoPrincipal botoGran\" type=\"button\" value=\"Save\" (click)=\"submit()\" [disabled]=\"!contentsOrdenables.items.length\">\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n<modal id=\"previewModal\" #previewModal>\r\n    <modal-content>\r\n        <app-publicacio *ngIf=\"preview\" [p]=\"preview\" [preview]=\"true\"></app-publicacio>\r\n    </modal-content>\r\n    <modal-footer>\r\n        <div class=\"botons\">\r\n            <button class=\"boto botoPrincipal botoGran back\" (click)=\"closePreviewModal()\" i18n=\"@@Back\">Back</button>\r\n            <button class=\"boto botoPrincipal botoGran post\" (click)=\"publicar()\" [disabled]=\"carregantBotoPublicar\" i18n=\"@@Post\">Post</button>\r\n        </div>\r\n    </modal-footer>\r\n</modal>\r\n","import { MainService } from '../../../services/main.service';\r\nimport { Utils } from '../../../services/utils.service';\r\nimport * as $ from \"jquery\";\r\n\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ModalManager } from 'ngb-modal';\r\nimport { ArtworkDTO } from 'src/app/in2art/services/DTOs/ArtworkDTO';\r\nimport { Checks } from 'src/app/in2art/services/DTOs/checks';\r\nimport { PostDTO } from 'src/app/in2art/services/DTOs/PostDTO';\r\n\r\n@Component({\r\n    selector: 'app-new-artwork',\r\n    templateUrl: './new-artwork.component.html',\r\n    styleUrls: ['./new-artwork.component.scss']\r\n})\r\nexport class NewArtworkComponent implements OnInit {\r\n\r\n    @ViewChild(\"contentsOrdenables\") contentsOrdenables;\r\n    @ViewChild(\"previewModal\") previewModal;\r\n\r\n    @ViewChild(\"acdcDatepicker\") acdcDatepicker;\r\n    \r\n    public processingFiles = false;\r\n\r\n    public files = [];\r\n\r\n    public form: FormGroup;\r\n    public validate = false;\r\n    public mediumItemsPromise;\r\n    public movementItemsPromise;\r\n    public mediumItems;\r\n    public movementItems;\r\n    public mediumItemsIndexat = [];\r\n    public movementItemsIndexat = [];\r\n    public mediums = [];\r\n    public movements = [];\r\n    public base64Info: string;\r\n\r\n    public preview;\r\n\r\n    public carregantBotoPublicar = false;\r\n    \r\n    public mostrarFileRequired = false;\r\n\r\n    constructor(\r\n        public main: MainService,\r\n        private fb: FormBuilder,\r\n        public domSanitizer: DomSanitizer,\r\n        private modalService: ModalManager,\r\n    ) {\r\n        main.newPage(this);\r\n        \r\n        this.form = this.fb.group({\r\n            inputFiles: [\"\"],// Posem aixo només per tenir l'alerta si esta buit //\r\n            title: [\"\", Validators.required],\r\n            author: [\"\"],\r\n            authorType: [\"\", Validators.required],\r\n            date: [\"\"],\r\n            mediums: [\"\"],\r\n            otherMediums: [\"\"],\r\n            movements: [\"\"],\r\n            otherMovements: [\"\"],\r\n            dimensions: [\"\"],\r\n            technique: [\"\"],\r\n            price: [\"\"],\r\n            currency: [\"\"],\r\n            description: [\"\"],\r\n            tags: [\"\"],\r\n            major18: [false],\r\n        });\r\n\r\n        // TEST\r\n        // this.form.controls.title.setValue(\"Titol\");\r\n        // this.form.controls.author.setValue(\"Leo\");\r\n        // this.form.controls.authorType.setValue(\"3\");\r\n        // this.form.controls.date.setValue(\"29 Nov\");\r\n        // this.form.controls.dimensions.setValue(\"22m\");\r\n        // this.form.controls.technique.setValue(\"fresco\");\r\n        // this.form.controls.price.setValue(\"213.5\");\r\n        // this.form.controls.description.setValue(\"Descripció molt molt molt molt molt molt molt molt llarga\");\r\n        // this.form.controls.tags.setValue(\"covid,joke,landscape,photo\");\r\n    }\r\n\r\n    async ngOnInit() {\r\n        //Per ara no obtenim Movements i Mediums del servidor\r\n        // this.mediumItemsPromise = this.main.provider.getMediumsOther();\r\n        // this.movementItemsPromise = this.main.provider.getMovementsOther();\r\n    }\r\n    ngOnDestroy() {\r\n        this.closePreviewModal();\r\n        this.main.onDestroyPage();\r\n    }\r\n\r\n    async addFiles() {\r\n        this.processingFiles = true;\r\n        let itemsProcessed = 0;\r\n        let files = $(\".inputFile\")[0].files;\r\n        for (let i = 0; i < files.length; i++) {\r\n            let file = files[i];\r\n            if (file) {\r\n                file.blob = this.domSanitizer.bypassSecurityTrustUrl(<string>await Utils.blobToBase64(file));\r\n                this.contentsOrdenables.items.push(file);\r\n                itemsProcessed++;\r\n                if (itemsProcessed == files.length) {\r\n                    $(\".inputFile\").val(\"\");\r\n                    this.processingFiles = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public othersSeleccionat(camp) {\r\n        return camp.includes(-1) || camp.includes(\"-1\");\r\n    }\r\n\r\n    corregirTags() {\r\n        let tags = this.form.controls.tags.value;\r\n        tags = tags\r\n            .split(/[\\s,]+/)\r\n            .map(e => Utils.parseTag(e))\r\n            .filter(e => e.length)\r\n            .join(\", \");\r\n        this.form.controls.tags.setValue(tags);\r\n    }\r\n\r\n    // HTML //\r\n    public focusInputAuthor() {\r\n        $('#at_authorName').prop('checked', true);\r\n        $('#author').trigger(\"focus\");\r\n        this.form.controls.authorType.setValue(\"3\");\r\n    }\r\n\r\n    async openPreviewModal() {\r\n        this.modalService.open(this.previewModal, {\r\n            size: \"xl\",\r\n            modalClass: \"previewModal\",\r\n            backdropClass: \"modal-backdrop\",\r\n            hideCloseButton: true,\r\n            centered: true,\r\n            backdrop: true,\r\n            animation: true,\r\n            keyboard: true,\r\n            closeOnOutsideClick: false,\r\n        });\r\n    }\r\n    async closePreviewModal() {\r\n        try { this.modalService.close(this.previewModal); } catch { };\r\n        await Utils.wait(0.5);\r\n        this.preview = null;\r\n    }\r\n    \r\n    /**\r\n     * Mostra una preview de l'Artwork de com es mostrara dins de la web\r\n     */\r\n    public submit() {\r\n        this.form.markAllAsTouched();\r\n        this.acdcDatepicker.touched = true;\r\n\r\n        this.form.controls.mediums.setValue(this.mediums);\r\n        this.form.controls.movements.setValue(this.movements);\r\n\r\n        this.mostrarFileRequired = !Utils.objPle(this.files);\r\n\r\n        this.corregirTags();\r\n\r\n        if (!Utils.objPle(this.files) || !this.form.valid || !this.acdcDatepicker.isValid()) {\r\n            console.log(\"--- INVÀLID ---\");\r\n            console.log(this.form);\r\n            return;\r\n        }\r\n\r\n        let dateMaco = \"\";\r\n        if (this.acdcDatepicker.type == \"y\")\r\n            dateMaco = this.acdcDatepicker.getTextAny();\r\n        if (this.acdcDatepicker.type == \"c\")\r\n            dateMaco = this.acdcDatepicker.getTextSegle().split(\" (\")[0];\r\n        \r\n        let priceCurrency = this.form.controls.price.value;\r\n        if (priceCurrency) priceCurrency = priceCurrency.toFixed(2) + \"€\";\r\n\r\n        // this.preview = {\r\n        //     content: this.contentsOrdenables.getItemsOrdered(),\r\n        //     title: this.form.controls.title.value,\r\n        //     authorType: this.form.controls.authorType.value,\r\n        //     author: this.form.controls.author.value,\r\n        //     // date: this.acdcDatepicker.getData(),\r\n        //     dateMaco: dateMaco,\r\n        //     mediums: this.form.controls.mediums.value,\r\n        //     otherMediums: this.form.controls.otherMediums.value,\r\n        //     movements: this.form.controls.movements.value,\r\n        //     otherMovements: this.form.controls.otherMovements.value,\r\n        //     dimensions: this.form.controls.dimensions.value,\r\n        //     technique: this.form.controls.technique.value,\r\n        //     price: this.form.controls.price.value,\r\n        //     currency: this.form.controls.currency.value,\r\n        //     priceCurrency: priceCurrency,\r\n        //     description: this.form.controls.description.value,\r\n        //     tags: this.form.controls.tags.value,\r\n        //     major18: this.form.controls.major18.value,\r\n        //     esObra: true,\r\n        // };\r\n\r\n        this.preview = {\r\n             content: this.contentsOrdenables.getItemsOrdered(),\r\n             title: this.form.controls.title.value,\r\n             author: this.form.controls.author.value,\r\n             dateMaco: dateMaco,\r\n             dimensions: this.form.controls.dimensions.value,\r\n             description: this.form.controls.description.value,\r\n             self: this.main.currentUser\r\n        };\r\n        \r\n        console.log(\"Info from preview: \", this.preview);\r\n        \r\n    \r\n        console.log(\"--- VÀLID ---\");\r\n        \r\n        \r\n        //Preview de Mediums i Movements per una versio futura\r\n\r\n        // this.mediumItems.forEach((e) => {\r\n        //     this.mediumItemsIndexat[e.id_categoria] = e.nom_categoria;\r\n        // })\r\n        // this.movementItems.forEach((e) => {\r\n        //     this.movementItemsIndexat[e.id_estil] = e.nom_estil;\r\n        // })\r\n\r\n        // this.preview.mediums = this.mediums.map((e) => {\r\n        //     return { id: e, text: this.mediumItemsIndexat[e] };\r\n        // });\r\n        // this.preview.movements = this.movements.map((e) => {\r\n        //     return { id: e, text: this.movementItemsIndexat[e] };\r\n        // });\r\n\r\n        //Preview de Tags per una futura versio\r\n\r\n        // this.preview.tags = this.preview.tags.split(\", \").filter(e => e).map(e => { return { text: e } });\r\n\r\n        // Només servirà per la preview //\r\n        this.preview.user = this.main.currentUser;\r\n\r\n        this.openPreviewModal();\r\n    }\r\n    \r\n    /**\r\n     * Un cop s'ha comprovat que la preview s'executa la funcio per poder pujar la artwork al servidor\r\n     */\r\n    async publicar() {\r\n        this.carregantBotoPublicar = true;\r\n        \r\n        const formData = new FormData();\r\n\r\n        this.preview.content.forEach((c, i) => {\r\n            formData.append(`content[${i}][type]`, c.type);\r\n            formData.append(`content[${i}][order]`, i);\r\n            formData.append(`content[${i}][text]`, \"\");\r\n            var file = new File([Utils.dataURLToBlob(c.blob.changingThisBreaksApplicationSecurity)], \"photo.png\");\r\n            formData.append(`content[${i}][file]`, file, \"photo.png\");\r\n        });\r\n\r\n        // TODO: No hauries d'estar llegint preview aqui MAI!!! preview es només per la preview!!!\r\n        // has d'enviar les dades directament des del formulari!!!!\r\n\r\n        formData.append(\"title\", this.preview.title);\r\n        formData.append(\"authorType\", this.preview.authorType);\r\n        formData.append(\"author\", this.preview.author);\r\n        formData.append(\"date\", JSON.stringify(this.acdcDatepicker.getObjData()));\r\n        formData.append(\"dimensions\", this.preview.dimensions);\r\n        formData.append(\"technique\", this.preview.technique);\r\n        formData.append(\"price\", this.preview.price);\r\n        formData.append(\"currency\", this.preview.currency);\r\n        formData.append(\"description\", this.preview.description);\r\n\r\n        //Llegir tots els mediums i movements que tenim a la base de dades i comprovar que el usuari ha escollit els que tenim a la base de dades\r\n\r\n        // this.preview.mediums.forEach((e) => {\r\n        //     if (e.id != -1)\r\n        //         formData.append(\"medium[]\", e.id);\r\n        //     else\r\n        //         formData.append(\"medium_other[]\", this.preview.otherMediums);\r\n        // });\r\n        // this.preview.movements.forEach((e) => {\r\n        //     if (e.id != -1)\r\n        //         formData.append(\"movement[]\", e.id);\r\n        //     else\r\n        //         formData.append(\"movement_other[]\", this.preview.otherMovements);\r\n        // });\r\n        // this.preview.tags.forEach((e) => { formData.append(\"tags[]\", e.text); });\r\n        // formData.append(\"major18\", this.preview.major18 ? \"1\" : \"0\");\r\n\r\n        // Obtenim el blob de la imatge (nomes esta pensat per una imatge per ara)\r\n\r\n        //Nomes pensad per una imatge per ara\r\n        let base64AllInfo = this.preview.content[0].blob.changingThisBreaksApplicationSecurity;\r\n        this.base64Info = base64AllInfo.substr(base64AllInfo.indexOf('base64,') + 7)\r\n\r\n        let arrayArtsits = [];\r\n\r\n        arrayArtsits.push(await this.main.getSelfArtsitID());\r\n\r\n        let postData = {\r\n            languageId: null,\r\n            description: this.preview.description,\r\n            isDraft: false,\r\n            patreonMinLevelId: null,\r\n            artworkRelatedId: null,\r\n            files:[ \r\n                { //Per el moment com sera nomes una imatge, nomes tindra un element\r\n                    dataBase64: this.base64Info,\r\n                    fileName: \"artwork\",\r\n                    fileExt: this.main.getStringBetween(base64AllInfo, \"data:image/\", \";base64,\")\r\n                }   \r\n            ],\r\n            title: this.preview.title,\r\n            date: formData.get(\"date\"),\r\n            dimensions: this.preview.dimensions,\r\n            artistIds: arrayArtsits,\r\n        }\r\n        console.log(\"Post data: \", postData);\r\n        \r\n\r\n        let artworkData = {post: postData};\r\n        let artrworkErrors = new ArtworkDTO(artworkData).check();\r\n\r\n        if(artrworkErrors.length > 0){\r\n            console.log(\"Errors: \", artrworkErrors);\r\n            this.carregantBotoPublicar = false;\r\n            return;\r\n        }else{\r\n            this.main.provider.postArtwork(artworkData).then((res) => {\r\n                this.main.toastSuccess(\"Artwork published!\");\r\n                this.preview.close();\r\n            });\r\n        }\r\n\r\n        //Enviar dades del artwork al servidor\r\n\r\n        // this.main.ps.postFormData(\"/artwork/post\", formData,\r\n        //     async (data) => {\r\n        //         this.carregantBotoPublicar = false;\r\n        //         if (this.main.eh.hiHaError(data)) {\r\n        //             console.log(\"Resposta crear artwork\", data);\r\n                    \r\n        //             this.main.toastDanger(\"Couldn't create artwork\");\r\n        //             return;\r\n        //         }\r\n\r\n        //         console.log(\"El servidor ha donat un codi correcte\", data);\r\n\r\n        //         this.closePreviewModal();\r\n\r\n        //         this.main.toastSuccess(\"Artwork created successfully\");\r\n\r\n        //         await Utils.wait(0.1);\r\n        //         // this.main.goToPost(data.postId);\r\n        //     },\r\n        //     () => {\r\n        //         this.carregantBotoPublicar = false;\r\n        //         this.main.toastDanger(\"Couldn't create post\");\r\n        //     }\r\n        // );\r\n\r\n    }\r\n\r\n}\r\n","import { NewArtworkComponent } from './artwork/new-artwork.component';\r\nimport { NewPostComponent } from './post/new-post.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [{\r\n    path: '',\r\n    children: [\r\n        {\r\n            path: '',\r\n            redirectTo: 'artwork'\r\n        },\r\n        {\r\n            path: 'artwork',\r\n            component: NewArtworkComponent\r\n        },\r\n        {\r\n            path: 'post',\r\n            component: NewPostComponent\r\n        },\r\n    ]\r\n}];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class NewRoutingModule { }\r\n","import { DragulaModule } from 'ng2-dragula';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SharedModule } from '../../../shared/shared.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgSelectModule } from '@ng-select/ng-select';\r\nimport { NewArtworkComponent } from './artwork/new-artwork.component';\r\nimport { NewPostComponent } from './post/new-post.component';\r\nimport { NewRoutingModule } from './new-routing.module';\r\nimport { ContentsOrdenablesComponent } from '../../components/_tools/contents-ordenables/contents-ordenables.component';\r\nimport { ModalModule } from 'ngb-modal';\r\n\r\n@NgModule({\r\n    declarations: [NewArtworkComponent, NewPostComponent, ContentsOrdenablesComponent],\r\n    imports: [\r\n        NewRoutingModule,\r\n        CommonModule,\r\n        SharedModule,\r\n        FormsModule,\r\n        NgSelectModule,\r\n        DragulaModule,\r\n        ModalModule\r\n    ]\r\n})\r\nexport class NewModule { }\r\n","<div class=\"content\">\r\n    <div class=\"card\">\r\n        <div class=\"card-body\">\r\n\r\n            <div class=\"content-top row no-gutters\">\r\n                <div class=\"col-sm-3 col-12\"></div>\r\n                <div class=\"col-sm-6 col-12 order-2 order-sm-1 titol\" i18n=\"@@New post\">New post</div>\r\n                <button class=\"col-sm-3 col-12 order-1 order-sm-2 boto botoSecundari anarAArtwork\" (click)=\"main.goTo('new/artwork')\" i18n=\"@@Go to new artwork\">\r\n                    Go to new artwork <i class=\"fas fa-chevron-right\"></i></button>\r\n            </div>\r\n            \r\n            <form class=\"theme-form\" [formGroup]=\"form\">\r\n\r\n                <input class=\"form-camp inputFile\" type=\"file\" multiple (input)=\"addFiles()\" [disabled]=\"processingFiles\"\r\n                    accept=\".JPG,.PNG,.GIF,.MP4,.AVI,.MP3,.WAV,.OGG\"><!-- ,.PDF -->\r\n                \r\n                <div class=\"divContentsOrdenables clearfix\" [style.display]=\"contentsOrdenables.items.length ? 'block' : 'none'\">\r\n                    <p class=\"notaEnGris dragToOrder\" i18n=\"@@Drag to order\">Drag to order</p>\r\n                    <app-contents-ordenables #contentsOrdenables></app-contents-ordenables>\r\n                </div>\r\n\r\n                <p class=\"notaEnGris\" i18n=\"@@You can upload\">You can upload: photos (.JPG, .PNG, .GIF) and videos (.MP4, .AVI) </p><!-- and audio (.MP3, .WAV, .OGG) and text (.PDF) -->\r\n\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Description\">Description</label>\r\n                    <textarea class=\"form-camp col-sm-12 col-xl-9\" maxlength=\"3000\" formControlName=\"description\"></textarea>\r\n                </div>\r\n                <div class=\"form-grup row no-gutters\">\r\n                    <label class=\"col-form-label col-sm-12 col-xl-3\" i18n=\"@@Tags\">Tags</label>\r\n                    <input class=\"form-camp col-sm-12 col-xl-9\" type=\"text\" formControlName=\"tags\" (blur)=\"corregirTags()\">\r\n                </div>\r\n                <div class=\"form-grup\">\r\n                    <label class=\"d-block checkbox-label\" for=\"major18\" style=\"text-align:center;\">\r\n                        <input class=\"checkbox_animated\" id=\"major18\" type=\"checkbox\" formControlName=\"major18\" i18n=\"@@The content uploaded is only for 18\">The content uploaded is only for 18+\r\n                    </label>\r\n                </div>\r\n                \r\n                <div style=\"text-align:center;\">\r\n                    <input class=\"boto botoPrincipal botoGran\" type=\"button\" value=\"Save\" (click)=\"submit()\" [disabled]=\"!contentsOrdenables.items.length\">\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n<modal id=\"previewModal\" #previewModal>\r\n    <modal-content>\r\n        <app-publicacio *ngIf=\"preview\" [p]=\"preview\" [preview]=\"true\"></app-publicacio>\r\n    </modal-content>\r\n    <modal-footer>\r\n        <div class=\"botons\">\r\n            <button class=\"boto botoPrincipal botoGran back\" (click)=\"closePreviewModal()\" i18n=\"@@Back\">Back</button>\r\n            <button class=\"boto botoPrincipal botoGran post\" (click)=\"publicar()\" [disabled]=\"carregantBotoPublicar\" i18n=\"@@Post\">Post</button>\r\n        </div>\r\n    </modal-footer>\r\n</modal>\r\n","import { MainService } from '../../../services/main.service';\r\nimport { Utils } from '../../../services/utils.service';\r\nimport * as $ from \"jquery\";\r\n\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ModalManager } from 'ngb-modal';\r\n\r\n@Component({\r\n    selector: 'app-new-post',\r\n    templateUrl: './new-post.component.html',\r\n    styleUrls: ['./new-post.component.scss']\r\n})\r\nexport class NewPostComponent implements OnInit {\r\n\r\n    @ViewChild(\"contentsOrdenables\") contentsOrdenables;\r\n    @ViewChild(\"previewModal\") previewModal;\r\n    \r\n    public processingFiles = false;\r\n\r\n    public files = [];\r\n\r\n    public form: FormGroup;\r\n    public validate = false;\r\n\r\n    public preview;\r\n\r\n    public carregantBotoPublicar = false;\r\n    \r\n    public mostrarFileRequired = false;\r\n\r\n    constructor(\r\n        public main: MainService,\r\n        private fb: FormBuilder,\r\n        public domSanitizer: DomSanitizer,\r\n        private modalService: ModalManager,\r\n    ) {\r\n        main.newPage(this);\r\n        \r\n        this.form = this.fb.group({\r\n            inputFiles: [\"\"],// Posem aixo només per tenir l'alerta si esta buit //\r\n            description: [\"\"],\r\n            tags: [\"\"],\r\n            major18: [false],\r\n        });\r\n\r\n        // TEST\r\n        // this.form.controls.description.setValue(\"Descripció molt molt molt molt molt molt molt molt llarga\")\r\n        // this.form.controls.tags.setValue(\"covid,joke,landscape,photo\")\r\n    }\r\n\r\n    async ngOnInit() {\r\n    }\r\n    ngOnDestroy() {\r\n        this.closePreviewModal();\r\n        this.main.onDestroyPage();\r\n    }\r\n\r\n    async addFiles() {\r\n        this.processingFiles = true;\r\n        let itemsProcessed = 0;\r\n        let files = $(\".inputFile\")[0].files;\r\n        for (let i = 0; i < files.length; i++) {\r\n            let file = files[i];\r\n            if (file) {\r\n                file.blob = this.domSanitizer.bypassSecurityTrustUrl(<string>await Utils.blobToBase64(file));\r\n                this.contentsOrdenables.items.push(file);\r\n                itemsProcessed++;\r\n                if (itemsProcessed == files.length) {\r\n                    $(\".inputFile\").val(\"\");\r\n                    this.processingFiles = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    corregirTags() {\r\n        let tags = this.form.controls.tags.value;\r\n        tags = tags\r\n            .split(/[\\s,]+/)\r\n            .map(e => Utils.parseTag(e))\r\n            .filter(e => e.length)\r\n            .join(\", \");\r\n        this.form.controls.tags.setValue(tags);\r\n    }\r\n    \r\n    async openPreviewModal() {\r\n        this.modalService.open(this.previewModal, {\r\n            size: \"xl\",\r\n            modalClass: \"previewModal\",\r\n            backdropClass: \"modal-backdrop\",\r\n            hideCloseButton: true,\r\n            centered: true,\r\n            backdrop: true,\r\n            animation: true,\r\n            keyboard: true,\r\n            closeOnOutsideClick: false,\r\n        });\r\n    }\r\n    async closePreviewModal() {\r\n        try { this.modalService.close(this.previewModal); } catch { };\r\n        await Utils.wait(0.5);\r\n        this.preview = null;\r\n    }\r\n    \r\n\r\n    public submit() {\r\n        this.form.markAllAsTouched();\r\n\r\n        this.mostrarFileRequired = !Utils.objPle(this.files);\r\n\r\n        this.corregirTags();\r\n\r\n        if (!Utils.objPle(this.files) || !this.form.valid) {\r\n            console.log(\"--- INVÀLID ---\");\r\n            console.log(this.form);\r\n            return;\r\n        }\r\n        this.preview = {\r\n            content: this.contentsOrdenables.getItemsOrdered(),\r\n            description: this.form.controls.description.value,\r\n            tags: this.form.controls.tags.value,\r\n            major18: this.form.controls.major18.value,\r\n            esObra: false,\r\n        };\r\n        \r\n        console.log(this.form);\r\n    \r\n        console.log(\"--- VÀLID ---\");\r\n\r\n        this.preview.tags = this.preview.tags.split(\", \").filter(e => e).map(e => { return { text: e } });\r\n\r\n        // Només servirà per la preview //\r\n        this.preview[\"user\"] = this.main.currentUser;\r\n        \r\n        this.openPreviewModal();\r\n    }\r\n    \r\n    publicar() {\r\n        this.carregantBotoPublicar = true;\r\n\r\n        const formData = new FormData();\r\n\r\n        this.preview.content.forEach((c, i) => {\r\n            formData.append(`content[${i}][type]`, c.type);\r\n            formData.append(`content[${i}][order]`, i);\r\n            formData.append(`content[${i}][text]`, \"\");\r\n            var file = new File([Utils.dataURLToBlob(c.blob.changingThisBreaksApplicationSecurity)], \"photo.png\");\r\n            formData.append(`content[${i}][file]`, file, \"photo.png\");\r\n        });\r\n\r\n        formData.append(\"text_post\", this.preview.description);\r\n        this.preview.tags.forEach((e) => { formData.append(\"tags[]\", e.text); });\r\n        formData.append(\"major18\", this.preview.major18 ? \"1\" : \"0\");\r\n\r\n        Utils.showFormData(formData);\r\n\r\n        this.main.ps.postFormData(\"/post/add\", formData,\r\n            async (data) => {\r\n                this.carregantBotoPublicar = false;\r\n                if (this.main.eh.hiHaError(data)) {\r\n                    console.log(\"Resposta crear post\", data);\r\n                    this.main.toastDanger(\"Couldn't create post\");\r\n                    return;\r\n                }\r\n\r\n                console.log(\"El servidor ha donat un codi correcte\", data);\r\n\r\n                this.closePreviewModal();\r\n\r\n                this.main.toastSuccess(\"Post created successfully\");\r\n\r\n                await Utils.wait(0.1);\r\n                // this.main.goToPost(data.lastId);\r\n            },\r\n            () => {\r\n                this.carregantBotoPublicar = false;\r\n                this.main.toastDanger(\"Couldn't create post\");\r\n            }\r\n        );\r\n\r\n    }\r\n}\r\n","import { ErrorObject } from '../../classes/errorObject';\r\nimport { Checks } from './checks';\r\nimport { PostDTO } from './PostDTO';\r\n\r\nexport class ArtworkDTO {\r\n\r\n    id: string;\r\n    postId: string;\r\n    post: any[];\r\n    others: any;\r\n    technique: any;\r\n    dimensions: any;\r\n    material: any;\r\n    perservation: any;\r\n    location: any;\r\n    price: any;\r\n    afterChrist: any;\r\n    artistTypeId: string;\r\n    dateFormatTypeId: string ;\r\n    languageId: string;\r\n    isVisible: boolean;\r\n\r\n\r\n    errors: ErrorObject[] = [];\r\n    postDTO: PostDTO;\r\n\r\n    constructor(data){\r\n\r\n        this.id = data.id;\r\n        this.postId = data.postId;\r\n        this.post = data.post;\r\n        this.others = data.others;\r\n        this.technique = data.technique;\r\n        this.dimensions = data.dimensions;\r\n        this.material = data.material;\r\n        this.perservation = data.perservation;\r\n        this.location = data.location;\r\n        this.price = data.price;\r\n        this.afterChrist = data.afterChrist;\r\n        this.artistTypeId = data.artistTypeId;\r\n        this.dateFormatTypeId = data.dateFormatTypeId;\r\n        this.languageId = data.languageId;\r\n        this.isVisible = data.isVisible;\r\n\r\n    }\r\n\r\n    check(){\r\n\r\n        if(this.id && !Checks.checkID(this.id)){\r\n            this.errors.push(new ErrorObject(\"id\", \"id no valido\"));\r\n        }\r\n\r\n        if(this.postId && !Checks.checkID(this.postId)){\r\n            this.errors.push(new ErrorObject(\"postId\", \"postId no valido\"));\r\n        }\r\n\r\n        if(!this.post){\r\n            this.errors.push(new ErrorObject(\"post\", \"falta el post\"));\r\n        }\r\n\r\n        if(this.post){\r\n            if(new PostDTO(this.post).check().length > 0)\r\n                this.errors.push(new ErrorObject(\"post Array\", \"Error dins del array post\"));\r\n        }\r\n\r\n        if(this.others && this.others.length > ArtworkDTO.OthersLength){\r\n            this.errors.push(new ErrorObject(\"others\", \"others no valido\"));\r\n        }\r\n\r\n        if(this.technique && this.technique.length > ArtworkDTO.TechniqueLength){\r\n            this.errors.push(new ErrorObject(\"technique\", \"technique no valido\"));\r\n        }\r\n\r\n        if(this.dimensions && this.dimensions.length > ArtworkDTO.DimensionsLength){\r\n            this.errors.push(new ErrorObject(\"dimensions\", \"dimensions no valido\"));\r\n        }\r\n\r\n        if(this.material && this.material.length > ArtworkDTO.MaterialLength){\r\n            this.errors.push(new ErrorObject(\"material\", \"material no valido\"));\r\n        }\r\n\r\n        if(this.perservation && this.perservation.length > ArtworkDTO.PerservationLength){\r\n            this.errors.push(new ErrorObject(\"perservation\", \"perservation no valido\"));\r\n        }\r\n\r\n        if(this.location && this.location.length > ArtworkDTO.LocationLength){\r\n            this.errors.push(new ErrorObject(\"location\", \"location no valido\"));\r\n        }\r\n\r\n        //Per ara no hi es poden posar preus a les artworks\r\n\r\n        // if(this.price && !Checks.checkPrice(this.price)){\r\n        //     this.errors.push(new ErrorObject(\"price\", \"price no valido\"));\r\n        // }\r\n\r\n        // if(this.afterChrist && !Checks.checkDate(this.afterChrist)){\r\n        //     this.errors.push(new ErrorObject(\"afterChrist\", \"afterChrist no valido\"));\r\n        // }\r\n\r\n        if(this.artistTypeId && !Checks.checkID(this.artistTypeId)){\r\n            this.errors.push(new ErrorObject(\"artistTypeId\", \"artistTypeId no valido\"));\r\n        }\r\n\r\n        if(this.dateFormatTypeId && !Checks.checkID(this.dateFormatTypeId)){\r\n            this.errors.push(new ErrorObject(\"dateFormatTypeId\", \"dateFormatTypeId no valido\"));\r\n        }\r\n\r\n        if(this.languageId && !Checks.checkID(this.languageId)){\r\n            this.errors.push(new ErrorObject(\"languageId\", \"languageId no valido\"));\r\n        }\r\n\r\n        return this.errors;\r\n\r\n    }\r\n\r\n    static get DateLength() {\r\n        return 350;\r\n    }\r\n    static get OthersLength() {\r\n        return 350;\r\n    }\r\n    static get TechniqueLength() {\r\n        return 150;\r\n    }\r\n    static get DimensionsLength() {\r\n        return 100;\r\n    }\r\n    static get MaterialLength() {\r\n        return 150;\r\n    }\r\n    static get PerservationLength() {\r\n        return 150;\r\n    }\r\n    static get LocationLength() {\r\n        return 350;\r\n    }\r\n\r\n\r\n}","import { sha512 } from 'js-sha512'\r\nimport {ProviderService} from '../../services/provider.service';;\r\n\r\nexport class Checks {\r\n\r\n\r\n    static MIN_PASSWORD_LENGTH: Number = 6;\r\n    static MAX_PASSWORD_LENGTH: Number = 100;\r\n\r\n    static checkCredentials(email, password){\r\n        return this.checkEmail(email) && this.checkPassword(password);\r\n    }\r\n\r\n    static checkBoolean(value){\r\n        return value == true || value == false;\r\n    }\r\n\r\n    static checkEmail(email){\r\n        return String(email)\r\n        .toLowerCase()\r\n        .match(\r\n            /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/ \r\n        );\r\n    }\r\n\r\n    static checkPassword(password){\r\n        return password && password.length >= this.MIN_PASSWORD_LENGTH && password.length <= this.MAX_PASSWORD_LENGTH;\r\n    }\r\n\r\n    static checkName(name){\r\n        return String(name).match(/^[a-zA-Z0-9_]{3,50}$/);\r\n    }\r\n\r\n    static checkNickname(nickname){\r\n        nickname = String(nickname).trim();\r\n        return nickname.length>0;\r\n    }\r\n\r\n    static checkData(data){\r\n        let date = new Date(data);\r\n        return date instanceof Date && !isNaN(date.getTime());\r\n    }\r\n\r\n    static checkPhone(phone){\r\n        return String(phone).match(/^\\d{9}$/);\r\n    }\r\n\r\n    static checkBase64(base64){\r\n        return String(base64).match(/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/);\r\n    }\r\n\r\n    static checkID(id){\r\n        const regexExp = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/gi;\r\n        return regexExp.test(id);\r\n    }\r\n\r\n    static EncryptPassword(password){\r\n        return sha512(password);\r\n    }\r\n\r\n}","import { ErrorObject} from \"../../classes/errorObject\";\r\nimport {Checks} from \"./checks\";\r\nimport { Random } from \"./Random\";\r\n\r\nexport class FileDTO {\r\n\r\n        file: any;\r\n        tokenRecovery: string;\r\n\r\n\r\n     constructor(data){\r\n        this.file = data.file;\r\n        this.tokenRecovery = data.tokenRecovery;\r\n        if(!this.tokenRecovery){\r\n            this.generateToken();\r\n        }\r\n     }\r\n     \r\n    generateToken(){\r\n        this.tokenRecovery = Random.String(FileDTO.LengthTokenRecovery);\r\n    }\r\n\r\n    static Checks(files){\r\n        let errors = [];\r\n        for(let i=0; i<files.length; i++){\r\n            errors.concat(FileDTO.Checks(files[i]));\r\n        }\r\n        return errors;\r\n    }\r\n\r\n    static Check(file){\r\n        let errors: ErrorObject[] = [];\r\n        if(file) {\r\n\r\n            if(!file.dataBase64){\r\n                errors.push(new ErrorObject(\"dataBase64\", \"dataBase64 no valido\"));\r\n            }\r\n\r\n            if(file.dataBase64 && !Checks.checkBase64(file.dataBase64)){\r\n                errors.push(new ErrorObject(\"dataBase64\", \"dataBase64 no valido\"));\r\n            }\r\n\r\n            if(!file.fileName || file.fileName.length == 0){\r\n                file.fileName=\"\";\r\n            }\r\n\r\n            if(!file.fileExt || file.fileExt.length == 0){\r\n                errors.push(new ErrorObject(\"fileExt\", \"falta la extensió de l'arxiu\"));\r\n            }\r\n        }\r\n        return errors;\r\n    }\r\n\r\n    static get LengthTokenRecovery() {\r\n        return 50;\r\n    }\r\n\r\n}","\r\nexport class JsonHelper{\r\n\r\n    static Escape(strToJSONEscape){\r\n        return strToJSONEscape? strToJSONEscape.replace(/\\\\n/g, \"\\\\n\")\r\n                        .replace(/\\\\'/g, \"\\\\'\")\r\n                        .replace(/\\\\\"/g, '\\\\\"')\r\n                        .replace(/\\\\&/g, \"\\\\&\")\r\n                        .replace(/\\\\r/g, \"\\\\r\")\r\n                        .replace(/\\\\t/g, \"\\\\t\")\r\n                        .replace(/\\\\b/g, \"\\\\b\")\r\n                        .replace(/\\\\f/g, \"\\\\f\"):undefined;\r\n    }\r\n\r\n    Unescape(strToJSONUnescape){\r\n        return strToJSONUnescape? strToJSONUnescape.replace(\"\\\\n\", /\\\\n/g)\r\n                        .replace(\"\\\\'\", /\\\\'/g)\r\n                        .replace('\\\\\"', /\\\\\"/g)\r\n                        .replace(\"\\\\&\", /\\\\&/g)\r\n                        .replace(\"\\\\r\", /\\\\r/g)\r\n                        .replace(\"\\\\t\", /\\\\t/g)\r\n                        .replace(\"\\\\b\", /\\\\b/g)\r\n                        .replace(\"\\\\f\", /\\\\f/g):undefined;\r\n    }   \r\n\r\n\r\n    \r\n\r\n}","import {ErrorObject} from '../../classes/errorObject';\r\nimport {Checks} from './Checks';\r\nimport { FileDTO } from './FileDTO';\r\nimport { JsonHelper } from './JsonHelper';\r\n\r\nexport class PostDTO {\r\n\r\n    id: string;\r\n    languageId: string;\r\n    title: string;\r\n    description: string;\r\n    isDraft: boolean;\r\n    artworkRelatedId: string;\r\n    patreonMinLevelId: string;\r\n    fileIds: []; \r\n    files: [];\r\n    \r\n    jsonHelper: JsonHelper;\r\n    \r\n    errors: ErrorObject[] = [];\r\n\r\n    constructor(obj){\r\n\r\n        this.id = obj.id;\r\n        this.languageId = obj.languageId;\r\n        this.title = obj.title;\r\n        this.description = obj.description;\r\n        this.isDraft = obj.isDraft;\r\n        this.artworkRelatedId = obj.artworkRelatedId;\r\n        this.patreonMinLevelId = obj.patreonMinLevelId;\r\n        this.fileIds = obj.fileIds;\r\n        this.files = obj.files;\r\n\r\n    }\r\n\r\n\r\n    check(): ErrorObject[] {\r\n\r\n        if (this.id && !Checks.checkID(this.id))\r\n            this.errors.push(new ErrorObject(\"id\",\"ID no és valid\"));\r\n        \r\n        if (this.languageId && !Checks.checkID(this.languageId))\r\n            this.errors.push(new ErrorObject(\"LanguageID\",\"languageId no és valid\"));\r\n        \r\n        if (this.patreonMinLevelId && !Checks.checkID(this.patreonMinLevelId))\r\n            this.errors.push(new ErrorObject(\"patreonMinLevelID\", \"patreonMinLevelId no és valid\"));\r\n        \r\n        if (this.artworkRelatedId && !Checks.checkID(this.artworkRelatedId))\r\n            this.errors.push(new ErrorObject(\"ArtworkRelatedID\", \"ArtworkRelatedId no és valid\"));\r\n\r\n        if(this.title && JsonHelper.Escape(this.title).length >PostDTO.MAX_TITLE_LENGTH)\r\n            this.errors.push(new ErrorObject(\"Title\", \"Títol massa llarg\"));\r\n        if(this.description && JsonHelper.Escape(this.description).length>PostDTO.MAX_DESCRIPTION_LENGTH)\r\n            this.errors.push(new ErrorObject(\"Description\", \"Descripció massa llarga\")); \r\n        if(!this.fileIds && !this.files)\r\n            this.errors.push(new ErrorObject(\"fileIDs\", \"No hi ha cap fitxer\"));\r\n        if(this.fileIds && this.fileIds.length==0 && (!this.files||this.files.length == 0))\r\n            this.errors.push(new ErrorObject(\"fileIDs\", \"No hi ha cap fitxer\"));\r\n        if(this.fileIds && this.fileIds.filter(f=>!Checks.checkID(f)).length>0)\r\n            this.errors.push(new ErrorObject(\"fileIDs\", \"Algun fitxer no és valid, només UUIDs!\"));\r\n        if(this.files){\r\n            this.errors.concat(FileDTO.Checks(this.files));\r\n        } \r\n\r\n        return this.errors;\r\n\r\n    }\r\n\r\n    static get MAX_TITLE_LENGTH() {\r\n        return 150;\r\n    }\r\n    static get MAX_DESCRIPTION_LENGTH() {\r\n        return 1050;\r\n    }\r\n\r\n}","\r\nconst CHAR_LIST = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\nexport class Random {\r\n\r\n    static String(length){\r\n        let result = '';\r\n        let characters = '';\r\n        let charactersLength = characters.length;\r\n        for(let i = 0; i < length; i++){\r\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static CheckStringCharList(str){\r\n        let isOk = true;\r\n        for(let i=0; isOk && i<str.length; i++){\r\n            isOk = CHAR_LIST.indexOf(str.charAt(i))>=0;\r\n        }\r\n        return isOk;\r\n    }\r\n    static Integer(maxExcluded){\r\n        return Math.floor(Math.random() * maxExcluded);\r\n    }\r\n    \r\n    static Position(arr){\r\n        return arr != undefined ? Random.Integer(arr.length) : undefined;\r\n    }\r\n\r\n    static Value(arr, filterMethod){\r\n        let pos;\r\n        if(arr){\r\n            do {\r\n                pos = Random.Position(arr);\r\n            } while (filterMethod && !filterMethod(arr[pos]));\r\n        }\r\n        return arr != undefined ? Random.Integer(arr.length) : undefined;\r\n    }\r\n\r\n    static async ValueAsync(arr, filterMethod){\r\n        return Random.Value(await arr, filterMethod);\r\n    }\r\n    \r\n\r\n}"]}