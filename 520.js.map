{"version":3,"file":"520.js","mappings":"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","sources":["./src/app/shared/components/set-user-image/set-user-image.component.ts","./src/app/shared/components/set-user-image/set-user-image.component.html","./src/app/shared/utils/generate-image-path.ts","./node_modules/rxjs/dist/esm/internal/lastValueFrom.js"],"sourcesContent":["import { Component, ElementRef, Input, ViewChild } from '@angular/core';\nimport { RippleModule } from 'primeng/ripple';\nimport { ButtonModule } from 'primeng/button';\nimport { FileUploadModule } from 'primeng/fileupload';\nimport { lastValueFrom, Observable } from 'rxjs';\nimport { selectCurrentUserNickname, selectIsLoadingAuth } from '@store/auth/auth.selectors';\nimport { generateImagePath } from '@utils/generate-image-path';\nimport { Store } from '@ngrx/store';\nimport { AppStateInterface } from '@store/app/app-state.interface';\nimport { HttpClient } from '@angular/common/http';\nimport { MessageService } from 'primeng/api';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\nimport { readFileAsBase64 } from '@utils/read-file-as-base-64';\nimport { updateUserImageAction } from '@store/auth/auth.actions';\nimport { URLS } from '@enums/urls';\nimport { CommonModule } from '@angular/common';\nimport { ContainerComponent } from '../container/container.component';\nimport { ImageComponent } from '@ApiClient/components/image/image.component';\nimport { ImageCropperComponent } from '../image-cropper/image-cropper.component';\nimport { RouterLink } from '@angular/router';\nimport { EventBlockerModule } from '../../directives/event-blocker.module';\nimport { SvgFileDragComponent } from '../svg/file-drag/svg-file-drag.component';\n\nexport enum PAGE {\n  WELCOME_PHOTO = 'welcome-photo',\n  SET_PHOTO = 'set-photo',\n}\n\n@Component({\n  selector: 'app-set-user-image',\n  standalone: true,\n  imports: [\n    RippleModule,\n    ButtonModule,\n    CommonModule,\n    ContainerComponent,\n    FileUploadModule,\n    ImageComponent,\n    ImageCropperComponent,\n    TranslateModule,\n    RouterLink,\n    EventBlockerModule,\n    SvgFileDragComponent,\n  ],\n  templateUrl: 'set-user-image.component.html',\n  styleUrls: ['set-user-image.component.scss'],\n})\nexport class SetUserImageComponent {\n  @Input() page: PAGE = PAGE.SET_PHOTO;\n  @ViewChild('fileInput') fileInput!: ElementRef;\n\n  protected readonly URLS = URLS;\n  isDragover: boolean = false;\n  isUploadMode: boolean = true;\n  userNickname$: Observable<string | null> = this.store.select(selectCurrentUserNickname);\n  isLoading$: Observable<boolean> = this.store.select(selectIsLoadingAuth);\n  noImagePath: string = 'assets/images/no-user.webp';\n  imagePaths: string[] = generateImagePath(8, 'assets/images/welcome-photo/photo-profile', 'webp');\n\n  selectedPath: string | null = null;\n  fileToCropper: File | null = null;\n  croppedFile: string | null = null;\n  isRefreshed: boolean = false;\n\n  constructor(\n    private store: Store<AppStateInterface>,\n    private http: HttpClient,\n    private toast: MessageService,\n    private translate: TranslateService,\n  ) {}\n\n  onImageClick(imagePath: string): void {\n    this.selectedPath = imagePath;\n  }\n\n  clickFileInput() {\n    this.fileToCropper = null;\n    this.fileInput.nativeElement.click();\n  }\n\n  changeMode() {\n    this.fileToCropper = null;\n    this.croppedFile = null;\n    this.selectedPath = null;\n    this.isUploadMode = !this.isUploadMode;\n  }\n\n  async confirm(): Promise<void> {\n    try {\n      if (this.selectedPath && !this.croppedFile) {\n        const res = await lastValueFrom(this.http.get(this.selectedPath, { responseType: 'blob' }));\n        const base64String = await readFileAsBase64(res as File);\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: base64String, fileExt: 'webp' } }));\n      } else if (!this.selectedPath && this.croppedFile) {\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: this.croppedFile, fileExt: 'png' } }));\n      }\n    } catch (error) {\n      console.error('Error during conformation', error);\n    }\n  }\n\n  refresh() {\n    this.isRefreshed = true;\n    setTimeout(() => {\n      this.isRefreshed = false;\n      this.imagePaths = generateImagePath(8, 'assets/images/welcome-photo/photo-profile', 'webp');\n      this.selectedPath = null;\n    }, 1000);\n  }\n\n  async storeFile($event: Event) {\n    this.isDragover = false;\n    this.fileToCropper = ($event as DragEvent).dataTransfer\n      ? ($event as DragEvent).dataTransfer?.files.item(0) ?? null\n      : ($event.target as HTMLInputElement).files?.item(0) ?? null;\n    this.selectedPath = null;\n  }\n\n  async onSelectFileUpload(event: Event): Promise<void> {\n    const target = event.target as HTMLInputElement;\n    const fileList: FileList | null = target.files;\n    if (fileList && fileList.length > 0) {\n      const file = fileList[0];\n      if (!file.type.startsWith('image/')) {\n        this.showErrorMessage('ERROR.WRONG_TYPE');\n      } else {\n        this.fileToCropper = file;\n        this.selectedPath = null;\n      }\n    }\n  }\n\n  async onSelectCroppedFile(file: string) {\n    this.croppedFile = file;\n  }\n\n  private showErrorMessage(key: string): void {\n    this.toast.add({\n      severity: 'error',\n      summary: this.translate.instant('ERROR.TITLE'),\n      detail: this.translate.instant(key),\n    });\n  }\n\n  protected readonly PAGE = PAGE;\n}\n","<app-container [width]=\"850\" [isLoading]=\"isLoading$ | async\">\n  <div class=\"flex w-full flex-column gap-6 align-items-center relative justify-content-center\">\n    <!-- Title and Content -->\n    <div class=\"text-center\">\n      <ng-content></ng-content>\n    </div>\n\n    <!-- File drag or upload -->\n    <div class=\"flex justify-content-center w-full\" *ngIf=\"isUploadMode\">\n      <input type=\"file\" accept=\"image/*\" #fileInput style=\"display: none\" (change)=\"onSelectFileUpload($event)\" />\n      <div *ngIf=\"!fileToCropper\" class=\"w-full flex justify-content-center\">\n        <button\n          (dragend)=\"isDragover = false\"\n          (dragover)=\"isDragover = true\"\n          (dragenter)=\"isDragover = true\"\n          (dragleave)=\"isDragover = false\"\n          (mouseleave)=\"isDragover = false\"\n          (drop)=\"storeFile($event)\"\n          (click)=\"fileInput.click()\"\n          appEventBlocker\n          [ngClass]=\"{ isDragover: isDragover }\"\n          class=\"upload transition-duration-500\"\n        >\n          <app-svg-file-drag></app-svg-file-drag>\n          <span class=\"text-xl mg:text-2xl\">{{ 'IMAGE_CROPPER.DRAG_DROP' | translate }}</span>\n        </button>\n      </div>\n      <div *ngIf=\"fileToCropper\">\n        <app-image-cropper\n          (uploadFileOutside)=\"clickFileInput()\"\n          (croppedFile)=\"onSelectCroppedFile($event)\"\n          [fileInput]=\"fileToCropper\"\n        ></app-image-cropper>\n      </div>\n    </div>\n\n    <!--  Templates for choose  -->\n    <div class=\"photos relative\" *ngIf=\"!isUploadMode\">\n      <button class=\"absolute refresh-button\" (click)=\"refresh()\" [class.rotate]=\"isRefreshed\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 32 32\">\n          <path\n            d=\"M29.974 0c-1.12 0-2.026.908-2.026 2.026V6.75C25.664 3.984 23.032 0 15.788 0 7.084 0 0 7.082 0 15.788s7.084 15.788 15.788 15.788a15.77 15.77 0 0 0 15.004-10.864 2.062 2.062 0 1 0-3.92-1.29 11.65 11.65 0 0 1-11.084 8.028c-6.432 0-11.664-5.232-11.664-11.664s5.232-11.64 11.664-11.64c4.554 0 7.084 2.834 9.148 5.806h-5.094a2.026 2.026 0 1 0 0 4.052h10.132A2.021 2.021 0 0 0 32 11.982V2.026A2.027 2.027 0 0 0 29.974 0z\"\n          />\n        </svg>\n      </button>\n      <button\n        class=\"photo-button flex align-items-center m-0 p-0\"\n        (click)=\"onImageClick(path)\"\n        *ngFor=\"let path of imagePaths.slice(0, page === PAGE.SET_PHOTO ? 8 : 9)\"\n        [ngClass]=\"{ 'select-photo': selectedPath === path }\"\n      >\n        <img [src]=\"path\" alt=\"Profile photo\" width=\"180\" height=\"180\" />\n      </button>\n\n      <button\n        class=\"photo-button flex align-items-center m-0 p-0\"\n        (click)=\"onImageClick(noImagePath)\"\n        [ngClass]=\"{ 'select-photo': selectedPath === noImagePath }\"\n      >\n        <img [src]=\"noImagePath\" alt=\"No Image\" width=\"180\" height=\"180\" />\n      </button>\n    </div>\n\n    <!-- Control Buttons -->\n    <div class=\"flex w-full flex-column md:flex-row md:justify-content-center gap-3 flex-wrap mb-4\">\n      <button\n        class=\"w-full md:w-auto p-button-secondary\"\n        pRipple\n        pButton\n        [label]=\"isUploadMode ? ('BTN.AVATAR' | translate) : ('BTN.UPLOAD' | translate)\"\n        (click)=\"changeMode()\"\n      ></button>\n\n      <button\n        (click)=\"confirm()\"\n        pButton\n        pRipple\n        icon=\"pi pi-check\"\n        class=\"w-full md:w-auto\"\n        [label]=\"'BTN.CONFIRM' | translate\"\n        [disabled]=\"!croppedFile && !selectedPath\"\n      ></button>\n    </div>\n    <p-button\n      class=\"cancel-button\"\n      [rounded]=\"true\"\n      severity=\"secondary\"\n      [routerLink]=\"page === PAGE.SET_PHOTO ? [URLS.BACK, URLS.PROFILE, userNickname$ | async] : [URLS.BACK]\"\n      icon=\"pi pi-times\"\n    ></p-button>\n  </div>\n</app-container>\n","export function generateImagePath(count: number, filePath: string, fileExtension: string): string[] {\n  const totalDigits = 48;\n\n  if (count > totalDigits) {\n    throw new Error('Count should be less than or equal to totalDigits');\n  }\n\n  const getRandomUniqueDigits = (totalDigits: number, count: number): number[] => {\n    const allDigits = Array.from({ length: totalDigits }, (_, i) => i + 1);\n    const shuffledDigits = allDigits.sort(() => Math.random() - 0.5);\n    return shuffledDigits.slice(0, count);\n  };\n\n  const selectedDigits = getRandomUniqueDigits(totalDigits, count);\n\n  return selectedDigits.map((digit) => `${filePath}${digit}.${fileExtension}`);\n}\n","import { EmptyError } from './util/EmptyError';\nexport function lastValueFrom(source, config) {\n    const hasConfig = typeof config === 'object';\n    return new Promise((resolve, reject) => {\n        let _hasValue = false;\n        let _value;\n        source.subscribe({\n            next: (value) => {\n                _value = value;\n                _hasValue = true;\n            },\n            error: reject,\n            complete: () => {\n                if (_hasValue) {\n                    resolve(_value);\n                }\n                else if (hasConfig) {\n                    resolve(config.defaultValue);\n                }\n                else {\n                    reject(new EmptyError());\n                }\n            },\n        });\n    });\n}\n"],"names":["ElementRef","RippleModule","ButtonModule","FileUploadModule","lastValueFrom","selectCurrentUserNickname","selectIsLoadingAuth","generateImagePath","Store","HttpClient","MessageService","TranslateModule","TranslateService","readFileAsBase64","updateUserImageAction","URLS","CommonModule","ContainerComponent","ImageCropperComponent","RouterLink","EventBlockerModule","SvgFileDragComponent","i0","ɵɵelementStart","ɵɵlistener","SetUserImageComponent_div_5_div_3_Template_button_dragend_1_listener","ɵɵrestoreView","_r6","ctx_r5","ɵɵnextContext","ɵɵresetView","isDragover","SetUserImageComponent_div_5_div_3_Template_button_dragover_1_listener","ctx_r7","SetUserImageComponent_div_5_div_3_Template_button_dragenter_1_listener","ctx_r8","SetUserImageComponent_div_5_div_3_Template_button_dragleave_1_listener","ctx_r9","SetUserImageComponent_div_5_div_3_Template_button_mouseleave_1_listener","ctx_r10","SetUserImageComponent_div_5_div_3_Template_button_drop_1_listener","$event","ctx_r11","storeFile","SetUserImageComponent_div_5_div_3_Template_button_click_1_listener","_r2","ɵɵreference","click","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","_c1","ctx_r3","ɵɵtextInterpolate","ɵɵpipeBind1","SetUserImageComponent_div_5_div_4_Template_app_image_cropper_uploadFileOutside_1_listener","_r14","ctx_r13","clickFileInput","SetUserImageComponent_div_5_div_4_Template_app_image_cropper_croppedFile_1_listener","ctx_r15","onSelectCroppedFile","ctx_r4","fileToCropper","SetUserImageComponent_div_5_Template_input_change_1_listener","_r17","ctx_r16","onSelectFileUpload","ɵɵtemplate","SetUserImageComponent_div_5_div_3_Template","SetUserImageComponent_div_5_div_4_Template","ctx_r0","ɵɵnamespaceHTML","SetUserImageComponent_div_6_button_4_Template_button_click_0_listener","restoredCtx","_r21","path_r19","$implicit","ctx_r20","onImageClick","_c2","ctx_r18","selectedPath","ɵɵsanitizeUrl","SetUserImageComponent_div_6_Template_button_click_1_listener","_r23","ctx_r22","refresh","ɵɵnamespaceSVG","SetUserImageComponent_div_6_button_4_Template","SetUserImageComponent_div_6_Template_button_click_5_listener","ctx_r24","noImagePath","ɵɵclassProp","ctx_r1","isRefreshed","imagePaths","slice","page","PAGE","SET_PHOTO","SetUserImageComponent","constructor","store","http","toast","translate","isUploadMode","userNickname$","select","isLoading$","croppedFile","imagePath","fileInput","nativeElement","changeMode","confirm","_this","_asyncToGenerator","res","get","responseType","base64String","dispatch","photo","dataBase64","fileExt","error","console","setTimeout","_this2","dataTransfer","files","item","target","event","_this3","fileList","length","file","type","startsWith","showErrorMessage","_this4","key","add","severity","summary","instant","detail","_","ɵɵdirectiveInject","i1","i2","i3","i4","_2","selectors","viewQuery","SetUserImageComponent_Query","rf","ctx","ɵɵprojection","SetUserImageComponent_div_5_Template","SetUserImageComponent_div_6_Template","SetUserImageComponent_Template_button_click_8_listener","SetUserImageComponent_Template_button_click_11_listener","ɵɵpureFunction3","_c3","BACK","PROFILE","_c4","i5","Ripple","i6","ButtonDirective","Button","i7","NgClass","NgForOf","NgIf","AsyncPipe","TranslatePipe","i8","EventBlockerDirective","styles","count","filePath","fileExtension","totalDigits","Error","getRandomUniqueDigits","allDigits","Array","from","i","shuffledDigits","sort","Math","random","selectedDigits","map","digit","EmptyError","source","config","hasConfig","Promise","resolve","reject","_hasValue","_value","subscribe","next","value","complete","defaultValue"],"sourceRoot":"webpack:///","x_google_ignoreList":[3]}