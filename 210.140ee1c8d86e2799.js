"use strict";(self.webpackChunkWebAppNew=self.webpackChunkWebAppNew||[]).push([[210],{5219:(G,T,s)=>{s.d(T,{T:()=>E});var M=s(5861),o=s(4650),p=s(6345),f=s(6895),S=s(6188);function P(a,_){if(1&a&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,3),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275elementEnd()),2&a){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275i18nExp(n.text||n.nomText)(o.\u0275\u0275pipeBind1(2,2,"is required")),o.\u0275\u0275i18nApply(1)}}function h(a,_){if(1&a&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,4),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275elementEnd()),2&a){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275i18nExp(n.nomText)(o.\u0275\u0275pipeBind1(2,4,"is short"))(n.control.errors.minlength.actualLength)(null==n.control.errors?null:n.control.errors.minlength.requiredLength),o.\u0275\u0275i18nApply(1)}}function O(a,_){if(1&a&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,5),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275elementEnd()),2&a){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275i18nExp(n.nomText)(o.\u0275\u0275pipeBind1(2,4,"is long"))(n.control.errors.maxlength.actualLength)(null==n.control.errors?null:n.control.errors.maxlength.requiredLength),o.\u0275\u0275i18nApply(1)}}function A(a,_){if(1&a&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,6),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275elementEnd()),2&a){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275i18nExp(n.nomText)(o.\u0275\u0275pipeBind1(2,2,"has a wrong format")),o.\u0275\u0275i18nApply(1)}}function x(a,_){if(1&a&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275elementEnd()),2&a){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate2("",n.nomText," ",o.\u0275\u0275pipeBind1(2,2,"already exists"),"")}}function C(a,_){if(1&a&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275i18n(1,7),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275elementEnd()),2&a){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275i18nExp(n.nomText)(o.\u0275\u0275pipeBind1(2,2,"has a wrong format")),o.\u0275\u0275i18nApply(1)}}function D(a,_){1&a&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275elementEnd()),2&a&&(o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(2,1,"Passwords dont match!")))}function e(a,_){if(1&a&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275elementEnd()),2&a){const n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate2("",n.nomText,"",o.\u0275\u0275pipeBind1(2,2,"is incorrect"),"")}}function L(a,_){if(1&a&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,P,3,4,"div",1),o.\u0275\u0275template(2,h,3,6,"div",1),o.\u0275\u0275template(3,O,3,6,"div",1),o.\u0275\u0275template(4,A,3,4,"div",1),o.\u0275\u0275template(5,x,3,4,"div",1),o.\u0275\u0275template(6,C,3,4,"div",1),o.\u0275\u0275template(7,D,3,3,"div",1),o.\u0275\u0275template(8,e,3,4,"div",1),o.\u0275\u0275elementEnd()),2&a){const n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.required),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.minlength),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.maxlength),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.email),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.notUnique),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.pattern),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.mismatch),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.incorrect)}}let E=(()=>{class a{constructor(n){this.main=n}ngOnInit(){var n=this;return(0,M.Z)(function*(){console.log("Control: ",n.control)})()}}return a.\u0275fac=function(n){return new(n||a)(o.\u0275\u0275directiveInject(p.J))},a.\u0275cmp=o.\u0275\u0275defineComponent({type:a,selectors:[["app-missatge-error-form"]],inputs:{control:"control",text:"text",nomText:"nomText"},decls:1,vars:1,consts:function(){let _,n,g,v,N;return _=$localize`:@@is required:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,n=$localize`:@@is too short:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: (${"\ufffd2\ufffd"}:INTERPOLATION_2:/${"\ufffd3\ufffd"}:INTERPOLATION_3:)`,g=$localize`:@@is too long:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: (${"\ufffd2\ufffd"}:INTERPOLATION_2:/${"\ufffd3\ufffd"}:INTERPOLATION_3:)`,v=$localize`:@@has a wrong format:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,N=$localize`:@@has a wrong format:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,[[4,"ngIf"],["class","textErrorForm",4,"ngIf"],[1,"textErrorForm"],_,n,g,v,N]},template:function(n,g){1&n&&o.\u0275\u0275template(0,L,9,8,"div",0),2&n&&o.\u0275\u0275property("ngIf",null==g.control?null:g.control.touched)},dependencies:[f.NgIf,S.X$]}),a})()},8210:(G,T,s)=>{s.r(T),s.d(T,{EditProfileModule:()=>K});var M=s(6895),o=s(1670),p=s(4006),f=s(5861),S=s(1274),P=s(5009),h=s(6114),O=s(872),A=s(4004),x=s(7873);let C=(()=>{class i{static getDefaultPhotoDataUrl(){return`data:image/${this.FILE_EXT};base64,${this.BASE64}`}}return i.FILE_NAME="profilePicture",i.FILE_EXT="png",i.BASE64="iVBORw0KGgoAAAANSUhEUgAAAZEAAAGRCAMAAACT/35lAAABfVBMVEWutLevtbiwtbiwtrmxt7mxt7qyt7qyuLqyuLuzuLuzubuzuby0uby0ury1ury1ur21u721u762u763vL63vL+3vb+3vcC4vcC5vcC5vsC5vsG5v8G5v8K6v8K7v8K7wMK7wMO7wcO8wcS9wcS9wsS9wsW+w8W+w8a/w8a/xMbAxcfBxcjBxsjCxsjCx8nDx8nDx8rDyMrEyMrEycrEycvFycvFyczFyszGyszGy8zHy8zHy83Hy87HzM7IzM7Jzc7Jzc/JzdDKztDLztDLz9DLz9HLz9LM0NLN0NLN0dLN0dPO0dPO0dTO0tTP0tTP09TP09XQ09XR1NbR1dbS1dfT1tjT19jU19jU19nV2NnV2NrV2drW2drW2dvX2dvX2tzX29zY29zZ29zZ293Z3N3Z3N7a3d7b3d7b3d/b3t/b3uDc3+Dd3+Dd3+Hd4OHd4OLe4OLe4eLf4eLf4ePf4uPg4uPg4uTg4+Th4+Th4+Xi5OXi5ebj5ebk5uf////4mfgmAAAAAWJLR0R+P7hBcwAADIdJREFUeNrt3XtfE9cWxvE1xFgRLEKhNCIihqblIpUq1FNyaA4NGqgNxgAiVDBKESVguQhD2Ou9nz/sTQmQy1z22vv5vYNZ30/mticzxEivCCOACIIIRBBEIIIgAhEEEQQRiCCIQARBBCIIIhBBEEEQgQiCCEQQRCCCIAIRBBEEEYggiEAEQQQiCCIQQRBBEIEIgghEEEQggiACEYwAIggiEEEQgQiCCEQQRBBEIOJHam9jZX42O5NOpx9ks/lna+9KEAmJYv3J/4Z7muhkkc7+H39ZPoRIgG38MhJz6Jxa+lNLJYj435vp/kaqNKc7uXQMER/3VKvJdqq2SCK7CxFfKtz9jGrLuZVzIeJx26lWqqfI0JKCiHetDjhUd63pQ4h4c/T4tYO86cJoESL1e2SbybucgTcQqatSupG8zRnYgEjtv4+5FvI+Z2AbIrW13En+FEm6EKm+nQHyr6YcRKrdYWWi5GuJLYhU01on+V1kSkGk4h9I2qEA6i5CpLK2eiiYolmIVFIuQoHV70Lk3D3WGAVZ6zpEzu7ddQq2hixEzur5RQq8UQWRU5t1KIT6XIicUorCqWMbImWP6YMUVk3rEDlZ6WsKr+gLiHza0S0Ks8gSRD7OjVG4OQsQ+Qiki8LOWYTIv44hNyn8nGcQ+Rukl3QosgqRP097+0mPousQYWbmMdKlpncQYeafSZ86XIhwnnQqrqwXWY9oJUL3bRc5bCXNemy3iOrTDYQaXlktkiT9anEtFllxNBShfntF9ptIy2atFUnoCUINry0VmSFdiykrRbaj2orQpJUiffqCkLNhoUiWdK5LWSeyH9VahKatE/lObxCK7lomsuZoLkLf2SWiukj7ClaJzOoPQl02iRxfESBCcxaJTEkAoTZljYj7mQgRylojMiEDhJpLloi4USEiNGOJyKQUEPpcWSFSahQjQk+sEMnIAaF2ZYGIahEkQosWiCxIAqGEBSJ9okRo03iRoiNL5EfjRf4jC4QulgwXUZeFiVDecJEFaSBBH9sDFxkQJ+LsGi3iRsSJ0EOjRWblgdA1o0W+FihCWwaLHDVIFJk2WCQvEYRuGSwyKFLEeW+siIqKFAl0lSRYkVcyQQJ9vDFYkUmhIp8bK3JLqAgVDRU5jkgVeWSoyIpUEBo0VGRKrMhVQ0X6xYrQvpkizXJFFo0U2ZULQj8ZKbIoWCRhpMiUYJEWI0WGBYvQkYki1ySLrJkockGySM5AkR3JIDRhoMiqaJEhA0XyokV6DBRJixZpMVBkVLSIo8wT+Va0CO2YJ9ItW2TdPJEvZIs8N0+kUbbIvHkijmyRrHEiR7JBaMo4kX3hIinjRHaEi0wYJ7IlXGTcOJFN4SI/GCeyIVzknnEir4WL3MVeC3stHNktO7Lj7BdXiLhCxF0U3GkMslnzRHA3HitWWLHCqq4skW9ki/xhnsg90SAmPh30s2iRwF4yEKDIE9EiJj5liiexdRN5J1okaaCIikgWMfEfPRyTLPLKRJHbkkVcE0Uk/4HEzH9PPxUs8rWRIpLfwjFhpIjkN9U8NVNE8Nuc9swUSePArpnIc7EiA4aKlMQutc8YKsK9UkU2TRWR+gbmZjZVpCBUZNhYEalv8s8ZKyL1axf75orIfH9QL5sr4oo8/31osIi0zxx/yOQvi/GvAkG+YpNFDgXuth4YLSLw/q+zY7bIvDiRPjZbRF2SJvLEcBEeEwYSLZku8laYyH02XUTaB982zReZx3FdMxF1RZLIggUior4M06ZsECkJOgF+zDaIcErOcq6yQ+RQzFLiNNshwuNCQJpKtoi4F2WIzLAtIkIeE7qq7BEpiXhMPs/2iPAjCWuHyiYR1am/yArbJMIvtAcZYrtEeEj3dZFd20R2Nb9MnGLbRHhGa5BOZZ8Ix3V+AOV3tlBkS+NPH6fYRhF+iH2WZiJK1/2Ws852ivDeZdxh1EuEn2kJkmB7Rfi+jguHBzaLKP3+UO28ZJtFeE+7+/KzbLcI/67Z6xtH2XYRzmkFclNBRKuHhdoPGSLMd/R5+GSbIcLMSpd/8EZeMkSYmflIj2+TNCwzRP7M7dLhQuQpQ+QfkvBfmO0sMET+1X5H2CBzDJGPfyXhHkuceYbIJ5XCXC25sMwQOdHxt6GBXFpjiJS7LkmGBNK6yRApXzaUF9n0vGeInNZSCM/V3VEMkdPb/DLok6yMXgPQToSPg73veKXAEDmvRw0BPuRwyBA5vzdB3VKJpBVDpKLT4FQg51xdmxpuu54izAX/v+beMKkYIlX8TNI+H0163+i54dqKMBf9XFm8mNV1szUWYZ5v82uHNe4yRGradWV9eVR7oKjxNustwuymPL+tkljTeot1F2F2M02eerzSfHv1F2E+enDVq3tYw+vab60EEWa1nPDi8bjUvoBtlSHCzG/H63uI3umfVyI2VIwIs1oervko3z1zKGUzBYkws1odq/6X4tzI7AjaRlkizMxr6b4q/gffOTbvyto+eSLMrApTg23n3h2+FB+fP5C3cSJFPpwTF7Lj/Z3ljixOa/zu1NM/hG6XXJG/LiCLhcXco3R6IpmcTGeycysbe0r0BokXMS6IQARBBCLIOhH37cvlucfTk8mRwf54PN4bi8U6Wls7YrFYbzwe7x/8Pjk5/Xhu+eVbFyJ+tvsi/zA5nLjWXMWTQ07ztcRw8mG+sAsRD38RhfzPI31tdT7B5bT1fZ/OF1yI1GWxmk0mWr1d043eGEk/xTp71an12XvdPv5xIdo9OruuIFIZxkZu7EYg7xNy2m9nVo8hcuZuavG/PQE+GE9E1NAz8cyFSNlTqafJGyF9vN1pH8ltQ+Sj38bCaBuFXNvowhFEmJl5Ix13SIucWHJVWS7i5ocaSasah/KutSLvcwmHNMy5kdm1UGQ7E9eS46/9V2rTKpGdKQGfsep8sGOJiKvpzqrc7ivrGi+ilm9HSFANiTllssjmeCOJq3G8aKiImouT0GI5ZZ7ITqqRBHc5WTRLZKnPIeE5fUvGiKjcl2REbZmSCSJuppmMqTF1IF2keC9CRhUZLUoW2R5xyLicgU2pIlsmevhu4p9I0VSPDyZvpYlsDRnsQUTkDG1LEjlMNpDxOSP7UkRUJkpWFE2XRIjMXSVras4q7UUKX5FVfVXQW+RwzCHbur2nr4jKXSILi2aUpiK/XydL6yzoKOLeccjanDuudiJLV8jqmub1EnFHyPoG3mskstgMEKLL87qIHA5B40ODB1qIrOAH8s/PZCl8kYA+gyCmMRWyyLseIHxcVzFUkfkoCE5cwj8JT+T4DuZfrjvHIYnsXMfwT7khvB2KyGoTRn9any2HIJLFOdZZN7rSQYscf4epn3O1WApUZDeGkZ97MNkNUGSjBQOv4HbwemAiz3EVUtmVyVJAInMNGHaFx/dsICIZTLryUv6LqLsYczWNKJ9FFM56qz0LVr6KKCxOVd03ykcR1Y8BV1+i5JtIqQ/jraXeI59ESr0Ybm3dLPkiohIYba3dOvZBRA1isLX3rfJeBOuFdTWkvBb5EUOtr1GPRX7CSOttwlORWQy0/mY8FFnBCq4HOYueibzFeognRV97JHLQhmF6U8ueJyIKl+qe1VXyQmQYg/TwssQDkV8xxkBPuM4VWY9gip6ecBXqFHFbMURv+/ygPhEsUXleoi6RKQzQ+9J1iKzhWt2PQ8nLmkVUB8bnR22lWkXGMTx/ul+jSAH7LL/2W89rEinhdpZ/N7jcWkRGMTj/GqlBpICx+dlK1SKqE1Pzs3ZVrcg0huZvD6oU2cOyoc9Fd6oTwaKI7w1WJfICA/O/36oRuYZ5+V+nqlxkHuMKonzFIqod0wqiNlWpSA7DCqbZCkUUVnIDqrlUmcgMRhVUDysSUXhvVmBdPq5EBEeRAMtWIoJbjKGebp0UWcKYgmzxfJE4phRkveeKbGBIwfbqPBH8JTfghs4RObqAGQVbg3u2CP4CGniPzha5iQkF3fUzRbYwoOB7c5YIXiQQQsmzRK5iPsHXpE4XwVNzofTb6SJ4GD6U7p8u8gWmE0Ytp4oUMZxwen2aCP51GFKTp4ngu20aXCT+W+QA/6kKKWevvAiemwutufIiOPcNrR/Ki3RjMmEVKytSwmEkvAOJW05kBYMJr6VyIpOYS3j9VE4Er4UPsXg5EXxRL8SayojgwB5qhydFXmEqYbZ6UgQPYIda9qQIrthDbeykCE619DjZIqwf6lHLSRG8diPUnBMiJQxFj9Nfwhq7Jm18KrKKmYTb8qcic5hJuOU+FcEbzkIuXev32ZHP/R+iP5v9z+bpXwAAAABJRU5ErkJggg==",i})();var D=s(4506),e=s(4650),L=s(6345),E=s(7753),a=s(1481),_=s(9653),n=s(8291),g=s(6362),v=s(5219),N=s(6188);const R=["uploadFileModal"],k=["imageCropper"];function B(i,c){if(1&i&&e.\u0275\u0275element(0,"video",39),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("src",t.form.controls.photo.value,e.\u0275\u0275sanitizeUrl)}}function $(i,c){if(1&i&&e.\u0275\u0275template(0,B,1,1,"video",38),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",!t.mostrarComoImagen)}}function z(i,c){if(1&i&&e.\u0275\u0275element(0,"img",40),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",t.form.controls.photo.value,e.\u0275\u0275sanitizeUrl)}}function w(i,c){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.removePhoto())}),e.\u0275\u0275i18n(1,42),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,"Remove photo")),e.\u0275\u0275i18nApply(1))}function U(i,c){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",14)(1,"div",15)(2,"button",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.openUploadFileModal())}),e.\u0275\u0275template(3,$,1,1,"ng-template",null,17,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,z,1,1,"img",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275template(7,w,3,3,"button",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",20)(9,"label",21),e.\u0275\u0275i18n(10,22),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",23)(13,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",20)(15,"label",25),e.\u0275\u0275i18n(16,26),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"input",27)(19,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",20)(21,"label",25),e.\u0275\u0275i18n(22,28),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",29)(25,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",20)(27,"label",25),e.\u0275\u0275i18n(28,30),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"input",31)(31,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",20)(33,"label",25),e.\u0275\u0275i18n(34,32),e.\u0275\u0275pipe(35,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(36,"textarea",33)(37,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",34)(39,"button",35),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancelEditProfile())}),e.\u0275\u0275i18n(40,36),e.\u0275\u0275pipe(41,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"input",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.submit())}),e.\u0275\u0275pipe(43,"translate"),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275reference(4),r=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",r.form),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",r.mostrarComoImagen)("ngIfElse",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.form.controls.photo.value),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(11,24,"Name")),e.\u0275\u0275i18nApply(10),e.\u0275\u0275advance(2),e.\u0275\u0275property("control",r.form.controls.name.value)("nomText","name"),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(17,26,"Email")),e.\u0275\u0275i18nApply(16),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("disabled",!!r.inputDeshabilitado||null),e.\u0275\u0275advance(1),e.\u0275\u0275property("control",r.form.controls.email.value)("nomText","email"),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(23,28,"Username")),e.\u0275\u0275i18nApply(22),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("disabled",!!r.inputDeshabilitado||null),e.\u0275\u0275advance(1),e.\u0275\u0275property("control",r.form.controls.username.value)("nomText","username"),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(29,30,"Website")),e.\u0275\u0275i18nApply(28),e.\u0275\u0275advance(2),e.\u0275\u0275property("control",r.form.controls.web.value)("nomText","website"),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(35,32,"Biography")),e.\u0275\u0275i18nApply(34),e.\u0275\u0275advance(2),e.\u0275\u0275property("control",r.form.controls.bio.value)("nomText","bio"),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(41,34,"Cancel")),e.\u0275\u0275i18nApply(40),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind1(43,36,"Save")),e.\u0275\u0275property("disabled",!r.isFormDataChanged()&&!r.fotoModificada)}}function V(i,c){1&i&&(e.\u0275\u0275elementStart(0,"div",43),e.\u0275\u0275element(1,"app-loading"),e.\u0275\u0275elementEnd())}let X=(()=>{class i{constructor(t,r,l,m,d){this.main=t,this.fb=r,this.modalService=l,this.domSanitizer=m,this.store=d,this.files=[],this.validate=!1,this.fotoModificada=!1,this.mostrarComoImagen=!1,this.inputDeshabilitado=!0,this.mostrarFileRequired=!1,t.newPage(this),this.form=this.fb.group({id:[""],photo:[""],name:[""],lastName:[""],bio:[""],email:[""],username:[""],phone:[""],address:[""],web:[""]}),this.$user=this.store.select(x.dy).pipe((0,A.U)(u=>u.user)),this.$user.subscribe(u=>{this.ownUser=u})}ngOnInit(){var t=this;return(0,f.Z)(function*(){console.log("Own user: ",t.ownUser.userId);let r=t.ownUser.userId;t.carregant=!0;try{const l=yield P.Iw.getById(r),m=yield D.G.getAll(),d=t.ownUser;console.log("Usuari edit-profile:",l.data),console.log("log user: ",d),console.log("Photo: ",O.pz.getUrlImageThumbnail({pictureId:d.photo,id:d.userId})),t.form.controls.photo.setValue(O.pz.getUrlImageThumbnail({pictureId:d.photo,id:d.userId})),t.form.controls.name.setValue((l.data.name||"").trim()),t.form.controls.bio.setValue((l.data.languages[0].biography||"").trim()),t.form.controls.email.setValue(m._data.items[0].email||""),t.form.controls.username.setValue((d.nickname||"").trim()),t.form.controls.web.setValue((l.data.languages[0].website||"").trim())}catch(l){console.error("Error al obtenir les dades del usuari:",l)}finally{t.carregant=!1}t.originalFormData=t.form.value})()}ngOnDestroy(){this.closeUploadFileModal(!1),this.main.onDestroyPage()}isFormDataChanged(){const t=this.trimFormValues(this.form.value);return JSON.stringify(this.originalFormData)!==JSON.stringify(t)}trimFormValues(t){const r=JSON.parse(JSON.stringify(t));return Object.keys(r).forEach(l=>{"string"==typeof r[l]&&(r[l]=r[l].trim())}),r}cancelEditProfile(){var t=this;return(0,f.Z)(function*(){t.main.goToProfile()})()}openUploadFileModal(){this.modalService.open(this.uploadFileModal,{size:"lg",modalClass:"uploadFileModal",backdropClass:"modal-backdrop",hideCloseButton:!1,centered:!0,backdrop:!0,animation:!0,keyboard:!0,closeOnOutsideClick:!1})}closeUploadFileModal(t){t&&(this.form.controls.photo.setValue(this.imageCropper.croppedImage),this.fotoModificada=!0),this.modalService.close(this.uploadFileModal)}removePhoto(){this.form.controls.photo.setValue(C.getDefaultPhotoDataUrl()),this.imageCropper.removePhoto(),this.fotoModificada=!0,this.mostrarComoImagen=!0,console.log(C.getDefaultPhotoDataUrl())}uploadPhoto(){var t=this;return(0,f.Z)(function*(){t.fotoModificada=!0,t.fotoModificada&&(console.log("foto modificada"),t.form.controls.photo.setValue(t.imageCropper.croppedImage),t.mostrarComoImagen=!0,t.modalService.close(t.uploadFileModal),console.log(t.form.controls.photo.value))})()}submit(){var t=this;return(0,f.Z)(function*(){if(t.form.markAllAsTouched(),t.mostrarFileRequired=!S.c.objPle(t.files),t.fotoModificada=!0,!t.form.valid)return console.log("--- INV\xc0LID ---"),void console.log("Form error!: ",t.form);const r=new FormData;let l;if(t.fotoModificada){var m=t.form.controls.photo.value||t.imageCropper.croppedImage;m&&m.includes("base64,")?(l={dataBase64:m.substr(m.indexOf("base64,")+7),fileName:"userProfile",fileExt:t.main.getStringBetween(m,"data:image/",";base64,")},console.log(l)):(console.log("La foto no ha estat modificada o blobStr no cont\xe9 informaci\xf3 v\xe0lida"),l=null)}r.append("name",t.form.controls.name.value),r.append("lastName",t.form.controls.lastName.value),r.append("bio",t.form.controls.bio.value),r.append("web",t.form.controls.web.value);let d=new P.Iw({photo:l||null,name:t.form.controls.name.value||null,nickname:t.form.controls.username.value||null,languages:[{biography:t.form.controls.bio.value||null,website:t.form.controls.web.value||null,langCode:"es-ca"}]});console.log("allNewInfo: ",d);try{yield P.Iw.put(d).then(function(){var u=(0,f.Z)(function*(I){I.IsOk?(console.log("OK. Message:",I),yield h.Pe.newCurrentUser(),t.main.goToProfile(),t.main.toastSuccess("Les dades s'han modificat correctament"),t.form.markAsPristine(),t.mostrarComoImagen=!1):(console.error("Error. Message:",I),t.main.toastDanger("No s'ha pogut canviar les teves dades"))});return function(I){return u.apply(this,arguments)}}())}catch(u){console.error("Error:",u)}t.carregantSave=!0})()}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(L.J),e.\u0275\u0275directiveInject(p.qu),e.\u0275\u0275directiveInject(E.gk),e.\u0275\u0275directiveInject(a.H7),e.\u0275\u0275directiveInject(_.yh))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-edit-profile"]],viewQuery:function(t,r){if(1&t&&(e.\u0275\u0275viewQuery(R,5),e.\u0275\u0275viewQuery(k,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(r.uploadFileModal=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(r.imageCropper=l.first)}},decls:21,vars:3,consts:function(){let c,t,r,l,m,d,u,I,y;return c=$localize`:@@Close:Cancela`,t=$localize`:@@Save:Confirma`,r=$localize`:@@Name:${"\ufffd0\ufffd"}:INTERPOLATION:`,l=$localize`:@@Email:${"\ufffd0\ufffd"}:INTERPOLATION:`,m=$localize`:@@Username:${"\ufffd0\ufffd"}:INTERPOLATION:`,d=$localize`:@@Website:${"\ufffd0\ufffd"}:INTERPOLATION:`,u=$localize`:@@Bio:${"\ufffd0\ufffd"}:INTERPOLATION:`,I=$localize`:@@Close:${"\ufffd0\ufffd"}:INTERPOLATION:`,y=$localize`:@@Remove photo:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[1,"content"],[1,"card"],[1,"card-body"],["class","theme-form",3,"formGroup",4,"ngIf"],["class","carregant",4,"ngIf"],["id","uploadFileModal",1,"uploadFileModal"],["uploadFileModal",""],["id","label"],["imageCropper",""],["id","buttons"],[1,"boto","botoPrincipal","botoGran",3,"click"],c,[1,"boto","botoPrincipal","botoGran",3,"disabled","click"],t,[1,"theme-form",3,"formGroup"],[1,"divBotoFoto","form-grup"],["data-content","Change photo",1,"botoFoto",3,"click"],["videoBlock",""],["class","foto","alt","profile_img",3,"src",4,"ngIf","ngIfElse"],["class","boto botoVermell botoPetit removePhoto",3,"click",4,"ngIf"],[1,"form-grup","row","no-gutters"],[1,"col-form-label","col-sm-12","col-xl-3","asterisc"],r,["type","text","formControlName","name",1,"form-camp","col-sm-12","col-xl-9"],[3,"control","nomText"],[1,"col-form-label","col-sm-12","col-xl-3"],l,["type","text","formControlName","email",1,"form-camp","col-sm-12","col-xl-9"],m,["type","text","formControlName","username",1,"form-camp","col-sm-12","col-xl-9"],d,["type","text","formControlName","web",1,"form-camp","col-sm-12","col-xl-9"],u,["maxlength","3000","formControlName","bio",1,"form-camp","col-sm-12","col-xl-9"],[2,"text-align","center"],["id","cancel",1,"boto","botoPrincipal","botoGran",3,"click"],I,["type","button",1,"boto","botoPrincipal","botoGran",3,"value","disabled","click"],["class","foto",3,"src",4,"ngIf"],[1,"foto",3,"src"],["alt","profile_img",1,"foto",3,"src"],[1,"boto","botoVermell","botoPetit","removePhoto",3,"click"],y,[1,"carregant"]]},template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),e.\u0275\u0275template(3,U,44,38,"form",3),e.\u0275\u0275template(4,V,2,0,"div",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"modal",5,6),e.\u0275\u0275element(7,"modal-header"),e.\u0275\u0275elementStart(8,"modal-content")(9,"div",7)(10,"b")(11,"label"),e.\u0275\u0275text(12,"Elige una foto:"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(13,"app-image-croper",null,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"modal-footer")(16,"div",9)(17,"button",10),e.\u0275\u0275listener("click",function(){return r.closeUploadFileModal(!1)}),e.\u0275\u0275i18n(18,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",12),e.\u0275\u0275listener("click",function(){return r.uploadPhoto()}),e.\u0275\u0275i18n(20,13),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!r.carregant),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.carregant),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",!r.main.getCroppedImageBase64()))},dependencies:[n.r,M.NgIf,p._Y,p.Fj,p.JJ,p.JL,p.nD,p.sg,p.u,g.N,v.T,E.zS,E.YI,E.Ef,E.Rb,N.X$],styles:[".content[_ngcontent-%COMP%]{max-width:940px;padding:100px 0;border:none}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:40px}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]{text-align:center}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover;padding:0;margin-bottom:10px;border:none;border-radius:10000px;overflow:hidden;position:relative}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]:after{content:attr(data-content);font-size:20px;line-height:150px;color:#fff;position:absolute;width:100%;height:100%;top:0;left:0;background-color:#0008;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);opacity:0;border-radius:10000px;transition:all .2s}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]:hover:after{opacity:1}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]{width:inherit;border-radius:160px;max-width:100%;max-height:100%;object-fit:cover;border:50px;pointer-events:none}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:0;padding:7px 0}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .form-camp[_ngcontent-%COMP%]{padding:6px 12px;border-width:1px;border-radius:20px}.content[_ngcontent-%COMP%]   #cancel[_ngcontent-%COMP%]{margin-right:10px}.carregant[_ngcontent-%COMP%]   app-loading[_ngcontent-%COMP%]{margin:100px auto}  .uploadFileModal .modal-header{background-color:#292828;border-bottom:none}  .uploadFileModal .modal-header button{border:none;background-color:#292828}  .uploadFileModal .modal-content{background-color:#292828;border:3px solid white;padding:30px}  .uploadFileModal .modal-content #label{display:flex;justify-content:center;width:100%}  .uploadFileModal .modal-content #label label{font-size:25px;font-family:Roboto,sans-serif}  .uploadFileModal .modal-footer{margin:30px}  .uploadFileModal .modal-footer button{font-weight:700}  .uploadFileModal .modal-footer button:first-child{background-color:#292828;color:#fff;font-weight:700}@media (max-width: 667px){  .uploadFileModal .modal-footer{display:flex;justify-content:space-around}}@media (max-width: 500px){  .uploadFileModal .modal-footer{display:flex}  .uploadFileModal .modal-footer button{width:100%;margin:10px}}@media (max-width: 400px){  .uploadFileModal .modal-footer{width:auto;display:flex;justify-content:center;align-items:center}  .uploadFileModal .modal-footer button{width:100%;margin:10px}}"]}),i})();var b=s(8252);const Q=[{path:"",children:[{path:"",component:X}]}];let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[b.Bz.forChild(Q),b.Bz]}),i})();var W=s(9806);let K=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[J,W.z,M.CommonModule,o.m,p.u5,E.zk]}),i})()}}]);