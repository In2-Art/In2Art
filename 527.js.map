{"version":3,"file":"527.js","mappings":"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","sources":["./src/app/pages/set-photo/components/set-photo.component.ts","./src/app/pages/set-photo/components/set-photo.component.html","./src/app/pages/set-photo/set-photo-routing.module.ts","./src/app/pages/set-photo/set-photo.module.ts"],"sourcesContent":["import { Component, ViewChild } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { lastValueFrom, Observable } from 'rxjs';\nimport { FileSelectEvent, FileUpload } from 'primeng/fileupload';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { MessageService } from 'primeng/api';\n\nimport { generateImagePath } from '@utils/generate-image-path';\nimport { AppStateInterface } from '@store/app/app-state.interface';\nimport { updateUserImageAction } from '@store/auth/auth.actions';\nimport {\n  selectCurrentUserId,\n  selectCurrentUserNickname,\n  selectCurrentUserPictureId,\n  selectIsLoadingAuth,\n} from '@store/auth/auth.selectors';\nimport { URLS } from '@enums/urls';\nimport { readFileAsBase64 } from '@utils/read-file-as-base-64';\n\n@Component({\n  selector: 'app-set-photo',\n  templateUrl: 'set-photo.component.html',\n  styleUrls: ['set-photo.component.scss'],\n})\nexport class SetPhotoComponent {\n  @ViewChild('fileUpload') fileUpload!: FileUpload;\n  protected readonly URLS = URLS;\n  pictureId$: Observable<string | null> = this.store.select(selectCurrentUserPictureId);\n  userId$: Observable<string | null> = this.store.select(selectCurrentUserId);\n  userNickname$: Observable<string | null> = this.store.select(selectCurrentUserNickname);\n\n  isLoading$: Observable<boolean> = this.store.select(selectIsLoadingAuth);\n  imagePaths: string[] = generateImagePath(8, 'assets/images/welcome-photo/photo-profile', 'webp');\n  selectedPath: string | null = null;\n  selectedFile: string | null = null;\n  fileToCropper: File | null = null;\n  croppedFile: string | null = null;\n  isRefreshed: boolean = false;\n  isDeleted: boolean = false;\n\n  constructor(\n    private store: Store<AppStateInterface>,\n    private http: HttpClient,\n    private toast: MessageService,\n    private translate: TranslateService,\n  ) {}\n\n  onImageClick(imagePath: string): void {\n    this.selectedPath = imagePath;\n  }\n\n  async confirm(): Promise<void> {\n    try {\n      if (this.selectedPath && !this.croppedFile) {\n        const res = await lastValueFrom(this.http.get(this.selectedPath, { responseType: 'blob' }));\n        const base64String = await readFileAsBase64(res as File);\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: base64String, fileExt: 'webp' } }));\n      } else if (!this.selectedPath && this.croppedFile) {\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: this.croppedFile, fileExt: 'png' } }));\n      }\n    } catch (error) {\n      console.error('Error during conformation', error);\n    }\n  }\n\n  refresh() {\n    this.onCancelHandler();\n    this.isRefreshed = true;\n    setTimeout(() => {\n      this.isRefreshed = false;\n      this.imagePaths = generateImagePath(8, 'assets/images/welcome-photo/photo-profile', 'webp');\n    }, 1000);\n  }\n\n  onCancelHandler() {\n    this.fileUpload.clear();\n    this.selectedPath = null;\n    this.fileToCropper = null;\n    this.croppedFile = null;\n    this.isDeleted = false;\n  }\n\n  deletePhoto() {\n    this.isDeleted = true;\n    this.selectedPath = 'assets/images/no-user.webp';\n  }\n\n  async onSelectFileUpload(event: FileSelectEvent): Promise<void> {\n    this.fileUpload.msgs = [];\n    if (event.files.length > 0) {\n      const file = event.files[0];\n      if (!file.type.startsWith('image/')) {\n        this.selectedFile = null;\n        this.showErrorMessage('ERROR.WRONG_TYPE');\n      } else {\n        this.fileToCropper = event.files[0];\n        this.selectedPath = null;\n      }\n    }\n  }\n\n  async onSelectCroppedFile(file: string) {\n    this.croppedFile = file;\n  }\n\n  private showErrorMessage(key: string): void {\n    this.toast.add({\n      severity: 'error',\n      summary: this.translate.instant('ERROR.TITLE'),\n      detail: this.translate.instant(key),\n    });\n  }\n}\n","<app-container [width]=\"700\" [isLoading]=\"isLoading$ | async\">\n  <div class=\"flex flex-column gap-5 align-items-center justify-content-center\">\n    <div class=\"text-center\">\n      <h2 class=\"text-3xl mb-3 font-bold\">\n        {{ 'SET_PHOTO_PAGE.TITLE_1' | translate }} <span class=\"last-word\">avatar</span> {{ 'SET_PHOTO_PAGE.TITLE_2' | translate }}.\n      </h2>\n      <span class=\"text-xl font-bold\">{{ 'SET_PHOTO_PAGE.CONTENT' | translate }}</span>\n    </div>\n    <div class=\"photos\" *ngIf=\"fileToCropper === null\">\n      <button\n        class=\"photo-button flex align-items-center m-0 p-0\"\n        (click)=\"onImageClick(path)\"\n        *ngFor=\"let path of imagePaths.slice(0, 4)\"\n        [ngClass]=\"{ 'select-photo': selectedPath === path }\"\n      >\n        <img [src]=\"path\" alt=\"Profile photo\" width=\"180\" height=\"180\" />\n      </button>\n      <div\n        [ngStyle]=\"{ 'background-color': selectedPath ? 'transparent' : 'white' }\"\n        class=\"current-user-wrapper flex align-items-center justify-content-center m-0 p-0 relative\"\n      >\n        <p-button\n          *ngIf=\"!isDeleted\"\n          (click)=\"deletePhoto()\"\n          class=\"delete-button\"\n          [rounded]=\"true\"\n          icon=\"pi pi-trash\"\n          severity=\"danger\"\n        ></p-button>\n        <div class=\"current-user-inner\">\n          <app-image\n            [width]=\"180\"\n            [height]=\"180\"\n            [folder]=\"'UserPictures'\"\n            defaultImageUrl=\"assets/videos/noUserVid.mp4\"\n            [idPicture]=\"isDeleted ? '' : (pictureId$ | async)\"\n            [userId]=\"isDeleted ? '' : (userId$ | async)\"\n          ></app-image>\n        </div>\n      </div>\n      <button\n        class=\"photo-button flex align-items-center m-0 p-0\"\n        (click)=\"onImageClick(path)\"\n        *ngFor=\"let path of imagePaths.slice(4, 8)\"\n        [ngClass]=\"{ 'select-photo': selectedPath === path }\"\n      >\n        <img [src]=\"path\" alt=\"Profile photo\" width=\"180\" height=\"180\" />\n      </button>\n    </div>\n\n    <div *ngIf=\"fileToCropper\">\n      <app-image-cropper (croppedFile)=\"onSelectCroppedFile($event)\" [fileInput]=\"fileToCropper\"></app-image-cropper>\n    </div>\n\n    <div class=\"flex flex-column md:flex-row md:justify-content-center gap-3 flex-wrap\">\n      <ng-container *ngIf=\"!croppedFile\">\n        <button [loading]=\"isRefreshed\" (click)=\"refresh()\" icon=\"pi pi-refresh\" pButton pRipple></button>\n      </ng-container>\n\n      <p-fileUpload\n        #fileUpload\n        [fileLimit]=\"1\"\n        [mode]=\"'basic'\"\n        (onSelect)=\"onSelectFileUpload($event)\"\n        [chooseLabel]=\"'BTN.UPLOAD' | translate\"\n        chooseIcon=\"pi-upload\"\n        name=\"chooseImage\"\n        accept=\"image/*\"\n        [maxFileSize]=\"1000000\"\n        [ngClass]=\"{ hidden: croppedFile !== null }\"\n      >\n      </p-fileUpload>\n\n      <button\n        [routerLink]=\"[URLS.BACK, URLS.PROFILE, userNickname$ | async]\"\n        [label]=\"'BTN.TO_PROFILE' | translate\"\n        icon=\"pi pi-user\"\n        pButton\n        pRipple\n      ></button>\n\n      <ng-container *ngIf=\"selectedPath || croppedFile\">\n        <button\n          class=\"p-button-danger\"\n          (click)=\"onCancelHandler()\"\n          pButton\n          pRipple\n          icon=\"pi pi-times\"\n          [label]=\"'BTN.CANCEL' | translate\"\n        ></button>\n      </ng-container>\n\n      <button\n        (click)=\"confirm()\"\n        class=\"p-button-success\"\n        pButton\n        pRipple\n        icon=\"pi pi-check\"\n        [label]=\"'BTN.CONFIRM' | translate\"\n        [disabled]=\"!croppedFile && !selectedPath\"\n      ></button>\n    </div>\n  </div>\n</app-container>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LocalizeRouterModule } from '@gilsdav/ngx-translate-router';\n\nimport { AuthGuard } from '@guards/auth.guard';\nimport { SetPhotoComponent } from './components/set-photo.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SetPhotoComponent,\n    canActivate: [AuthGuard],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes), LocalizeRouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SetPhotoRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SetPhotoComponent } from './components/set-photo.component';\nimport { SetPhotoRoutingModule } from './set-photo-routing.module';\nimport { ButtonModule } from 'primeng/button';\nimport { ContainerComponent } from '../../shared/components/container/container.component';\nimport { FileUploadModule } from 'primeng/fileupload';\nimport { RippleModule } from 'primeng/ripple';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ImageComponent } from '@ApiClient/components/image/image.component';\nimport { ImageCropperComponent } from '../../shared/components/image-cropper/image-cropper.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SetPhotoRoutingModule,\n    ButtonModule,\n    ContainerComponent,\n    FileUploadModule,\n    RippleModule,\n    TranslateModule,\n    ImageComponent,\n    ImageCropperComponent,\n  ],\n  declarations: [SetPhotoComponent],\n})\nexport class SetPhotoModule {}\n"],"names":["HttpClient","lastValueFrom","FileUpload","Store","TranslateService","MessageService","generateImagePath","updateUserImageAction","selectCurrentUserId","selectCurrentUserNickname","selectCurrentUserPictureId","selectIsLoadingAuth","URLS","readFileAsBase64","i0","ɵɵelementStart","ɵɵlistener","SetPhotoComponent_div_14_button_1_Template_button_click_0_listener","restoredCtx","ɵɵrestoreView","_r10","path_r8","$implicit","ctx_r9","ɵɵnextContext","ɵɵresetView","onImageClick","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction1","_c1","ctx_r5","selectedPath","ɵɵadvance","ɵɵsanitizeUrl","SetPhotoComponent_div_14_p_button_3_Template_p_button_click_0_listener","_r12","ctx_r11","deletePhoto","SetPhotoComponent_div_14_button_8_Template_button_click_0_listener","_r15","path_r13","ctx_r14","ctx_r7","ɵɵtemplate","SetPhotoComponent_div_14_button_1_Template","SetPhotoComponent_div_14_p_button_3_Template","SetPhotoComponent_div_14_button_8_Template","ctx_r0","imagePaths","slice","_c2","isDeleted","ɵɵpipeBind1","pictureId$","userId$","SetPhotoComponent_div_15_Template_app_image_cropper_croppedFile_1_listener","$event","_r17","ctx_r16","onSelectCroppedFile","ctx_r1","fileToCropper","ɵɵelementContainerStart","SetPhotoComponent_ng_container_17_Template_button_click_1_listener","_r19","ctx_r18","refresh","ɵɵelementContainerEnd","ctx_r2","isRefreshed","SetPhotoComponent_ng_container_24_Template_button_click_1_listener","_r21","ctx_r20","onCancelHandler","SetPhotoComponent","constructor","store","http","toast","translate","select","userNickname$","isLoading$","selectedFile","croppedFile","imagePath","confirm","_this","_asyncToGenerator","res","get","responseType","base64String","dispatch","photo","dataBase64","fileExt","error","console","setTimeout","fileUpload","clear","onSelectFileUpload","event","_this2","msgs","files","length","file","type","startsWith","showErrorMessage","_this3","key","add","severity","summary","instant","detail","_","ɵɵdirectiveInject","i1","i2","i3","i4","_2","selectors","viewQuery","SetPhotoComponent_Query","rf","ctx","ɵɵtext","SetPhotoComponent_div_14_Template","SetPhotoComponent_div_15_Template","SetPhotoComponent_ng_container_17_Template","SetPhotoComponent_Template_p_fileUpload_onSelect_18_listener","SetPhotoComponent_ng_container_24_Template","SetPhotoComponent_Template_button_click_25_listener","ɵɵtextInterpolate1","ɵɵtextInterpolate","_c3","ɵɵpureFunction3","_c4","BACK","PROFILE","RouterModule","LocalizeRouterModule","AuthGuard","routes","path","component","canActivate","SetPhotoRoutingModule","_3","forChild","imports","exports","CommonModule","ButtonModule","ContainerComponent","FileUploadModule","RippleModule","TranslateModule","ImageComponent","ImageCropperComponent","SetPhotoModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}