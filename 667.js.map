{"version":3,"file":"667.js","mappings":"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","sources":["./src/app/shared/components/set-user-image/set-user-image.component.ts","./src/app/shared/components/set-user-image/set-user-image.component.html","./src/app/shared/utils/generate-image-path.ts","./node_modules/rxjs/dist/esm/internal/lastValueFrom.js"],"sourcesContent":["import { Component, ElementRef, Input, ViewChild } from '@angular/core';\nimport { RippleModule } from 'primeng/ripple';\nimport { ButtonModule } from 'primeng/button';\nimport { FileUploadModule } from 'primeng/fileupload';\nimport { lastValueFrom, Observable } from 'rxjs';\nimport { selectCurrentUserNickname, selectIsLoadingAuth } from '@store/auth/auth.selectors';\nimport { generateImagePath } from '@utils/generate-image-path';\nimport { Store } from '@ngrx/store';\nimport { AppStateInterface } from '@store/app/app-state.interface';\nimport { HttpClient } from '@angular/common/http';\nimport { MessageService } from 'primeng/api';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\nimport { readFileAsBase64 } from '@utils/read-file-as-base-64';\nimport { updateUserImageAction } from '@store/auth/auth.actions';\nimport { URLS } from '@enums/urls';\nimport { CommonModule } from '@angular/common';\nimport { ContainerComponent } from '../container/container.component';\nimport { ImageComponent } from '@ApiClient/components/image/image.component';\nimport { ImageCropperComponent } from '../image-cropper/image-cropper.component';\nimport { RouterLink } from '@angular/router';\nimport { EventBlockerModule } from '../../directives/event-blocker.module';\nimport { SvgFileDragComponent } from '../svg/file-drag/svg-file-drag.component';\n\nexport enum PAGE {\n  WELCOME_PHOTO = 'welcome-photo',\n  SET_PHOTO = 'set-photo',\n}\n\n@Component({\n  selector: 'app-set-user-image',\n  standalone: true,\n  imports: [\n    RippleModule,\n    ButtonModule,\n    CommonModule,\n    ContainerComponent,\n    FileUploadModule,\n    ImageComponent,\n    ImageCropperComponent,\n    TranslateModule,\n    RouterLink,\n    EventBlockerModule,\n    SvgFileDragComponent,\n  ],\n  templateUrl: 'set-user-image.component.html',\n  styleUrls: ['set-user-image.component.scss'],\n})\nexport class SetUserImageComponent {\n  @Input() page: PAGE = PAGE.SET_PHOTO;\n  @ViewChild('fileInput') fileInput!: ElementRef;\n\n  protected readonly URLS = URLS;\n  isDragover: boolean = false;\n  isUploadMode: boolean = true;\n  userNickname$: Observable<string | null> = this.store.select(selectCurrentUserNickname);\n  isLoading$: Observable<boolean> = this.store.select(selectIsLoadingAuth);\n  noImagePath: string = 'assets/images/no-user.webp';\n  imagePaths: string[] = generateImagePath(8, 'assets/images/welcome-photo/photo-profile', 'webp');\n\n  selectedPath: string | null = null;\n  fileToCropper: File | null = null;\n  croppedFile: string | null = null;\n  isRefreshed: boolean = false;\n\n  constructor(\n    private store: Store<AppStateInterface>,\n    private http: HttpClient,\n    private toast: MessageService,\n    private translate: TranslateService,\n  ) {}\n\n  onImageClick(imagePath: string): void {\n    this.selectedPath = imagePath;\n  }\n\n  clickFileInput() {\n    this.fileToCropper = null;\n    this.fileInput.nativeElement.click();\n  }\n\n  changeMode() {\n    this.fileToCropper = null;\n    this.croppedFile = null;\n    this.selectedPath = null;\n    this.isUploadMode = !this.isUploadMode;\n  }\n\n  async confirm(): Promise<void> {\n    try {\n      if (this.selectedPath && !this.croppedFile) {\n        const res = await lastValueFrom(this.http.get(this.selectedPath, { responseType: 'blob' }));\n        const base64String = await readFileAsBase64(res as File);\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: base64String, fileExt: 'webp' } }));\n      } else if (!this.selectedPath && this.croppedFile) {\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: this.croppedFile, fileExt: 'png' } }));\n      }\n    } catch (error) {\n      console.error('Error during conformation', error);\n    }\n  }\n\n  refresh() {\n    this.isRefreshed = true;\n    setTimeout(() => {\n      this.isRefreshed = false;\n      this.imagePaths = generateImagePath(8, 'assets/images/welcome-photo/photo-profile', 'webp');\n      this.selectedPath = null;\n    }, 1000);\n  }\n\n  async storeFile($event: Event) {\n    this.isDragover = false;\n    this.fileToCropper = ($event as DragEvent).dataTransfer\n      ? ($event as DragEvent).dataTransfer?.files.item(0) ?? null\n      : ($event.target as HTMLInputElement).files?.item(0) ?? null;\n    this.selectedPath = null;\n  }\n\n  async onSelectFileUpload(event: Event): Promise<void> {\n    const target = event.target as HTMLInputElement;\n    const fileList: FileList | null = target.files;\n    if (fileList && fileList.length > 0) {\n      const file = fileList[0];\n      if (!file.type.startsWith('image/')) {\n        this.showErrorMessage('ERROR.WRONG_TYPE');\n      } else {\n        this.fileToCropper = file;\n        this.selectedPath = null;\n      }\n    }\n  }\n\n  async onSelectCroppedFile(file: string) {\n    this.croppedFile = file;\n  }\n\n  private showErrorMessage(key: string): void {\n    this.toast.add({\n      severity: 'error',\n      summary: this.translate.instant('ERROR.TITLE'),\n      detail: this.translate.instant(key),\n    });\n  }\n\n  protected readonly PAGE = PAGE;\n}\n","<app-container [width]=\"850\" [isLoading]=\"isLoading$ | async\">\n  <div class=\"flex w-full flex-column gap-6 align-items-center relative justify-content-center\">\n    <!-- Title and Content -->\n    <div class=\"text-center\">\n      <ng-content></ng-content>\n    </div>\n\n    <!-- File drag or upload -->\n    <div class=\"flex justify-content-center w-full\" *ngIf=\"isUploadMode\">\n      <input type=\"file\" accept=\"image/*\" #fileInput style=\"display: none\" (change)=\"onSelectFileUpload($event)\" />\n      <div *ngIf=\"!fileToCropper\" class=\"w-full flex justify-content-center\">\n        <button\n          (dragend)=\"isDragover = false\"\n          (dragover)=\"isDragover = true\"\n          (dragenter)=\"isDragover = true\"\n          (dragleave)=\"isDragover = false\"\n          (mouseleave)=\"isDragover = false\"\n          (drop)=\"storeFile($event)\"\n          (click)=\"fileInput.click()\"\n          appEventBlocker\n          [ngClass]=\"{ isDragover: isDragover }\"\n          class=\"upload transition-duration-500\"\n        >\n          <app-svg-file-drag></app-svg-file-drag>\n          <span class=\"text-xl mg:text-2xl\">{{ 'IMAGE_CROPPER.DRAG_DROP' | translate }}</span>\n        </button>\n      </div>\n      <div *ngIf=\"fileToCropper\">\n        <app-image-cropper\n          (uploadFileOutside)=\"clickFileInput()\"\n          (croppedFile)=\"onSelectCroppedFile($event)\"\n          [fileInput]=\"fileToCropper\"\n        ></app-image-cropper>\n      </div>\n    </div>\n\n    <!--  Templates for choose  -->\n    <div class=\"photos relative\" *ngIf=\"!isUploadMode\">\n      <button class=\"absolute refresh-button\" (click)=\"refresh()\" [class.rotate]=\"isRefreshed\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 32 32\">\n          <path\n            d=\"M29.974 0c-1.12 0-2.026.908-2.026 2.026V6.75C25.664 3.984 23.032 0 15.788 0 7.084 0 0 7.082 0 15.788s7.084 15.788 15.788 15.788a15.77 15.77 0 0 0 15.004-10.864 2.062 2.062 0 1 0-3.92-1.29 11.65 11.65 0 0 1-11.084 8.028c-6.432 0-11.664-5.232-11.664-11.664s5.232-11.64 11.664-11.64c4.554 0 7.084 2.834 9.148 5.806h-5.094a2.026 2.026 0 1 0 0 4.052h10.132A2.021 2.021 0 0 0 32 11.982V2.026A2.027 2.027 0 0 0 29.974 0z\"\n          />\n        </svg>\n      </button>\n      <button\n        class=\"photo-button flex align-items-center m-0 p-0\"\n        (click)=\"onImageClick(path)\"\n        *ngFor=\"let path of imagePaths.slice(0, page === PAGE.SET_PHOTO ? 8 : 9)\"\n        [ngClass]=\"{ 'select-photo': selectedPath === path }\"\n      >\n        <img [src]=\"path\" alt=\"Profile photo\" width=\"180\" height=\"180\" />\n      </button>\n\n      <button\n        class=\"photo-button flex align-items-center m-0 p-0\"\n        (click)=\"onImageClick(noImagePath)\"\n        [ngClass]=\"{ 'select-photo': selectedPath === noImagePath }\"\n      >\n        <img [src]=\"noImagePath\" alt=\"No Image\" width=\"180\" height=\"180\" />\n      </button>\n    </div>\n\n    <!-- Control Buttons -->\n    <div class=\"flex w-full flex-column md:flex-row md:justify-content-center gap-3 flex-wrap mb-4\">\n      <button\n        class=\"w-full md:w-auto p-button-secondary\"\n        pRipple\n        pButton\n        [label]=\"isUploadMode ? ('BTN.AVATAR' | translate) : ('BTN.UPLOAD' | translate)\"\n        (click)=\"changeMode()\"\n      ></button>\n\n      <button\n        (click)=\"confirm()\"\n        pButton\n        pRipple\n        icon=\"pi pi-check\"\n        class=\"w-full md:w-auto\"\n        [label]=\"'BTN.CONFIRM' | translate\"\n        [disabled]=\"!croppedFile && !selectedPath\"\n      ></button>\n    </div>\n    <p-button\n      class=\"cancel-button\"\n      [rounded]=\"true\"\n      severity=\"secondary\"\n      [routerLink]=\"page === PAGE.SET_PHOTO ? [URLS.BACK, URLS.PROFILE, userNickname$ | async] : [URLS.BACK]\"\n      icon=\"pi pi-times\"\n    ></p-button>\n  </div>\n</app-container>\n","export function generateImagePath(count: number, filePath: string, fileExtension: string): string[] {\n  const totalDigits = 48;\n\n  if (count > totalDigits) {\n    throw new Error('Count should be less than or equal to totalDigits');\n  }\n\n  const getRandomUniqueDigits = (totalDigits: number, count: number): number[] => {\n    const allDigits = Array.from({ length: totalDigits }, (_, i) => i + 1);\n    const shuffledDigits = allDigits.sort(() => Math.random() - 0.5);\n    return shuffledDigits.slice(0, count);\n  };\n\n  const selectedDigits = getRandomUniqueDigits(totalDigits, count);\n\n  return selectedDigits.map((digit) => `${filePath}${digit}.${fileExtension}`);\n}\n","import { EmptyError } from './util/EmptyError';\nexport function lastValueFrom(source, config) {\n    const hasConfig = typeof config === 'object';\n    return new Promise((resolve, reject) => {\n        let _hasValue = false;\n        let _value;\n        source.subscribe({\n            next: (value) => {\n                _value = value;\n                _hasValue = true;\n            },\n            error: reject,\n            complete: () => {\n                if (_hasValue) {\n                    resolve(_value);\n                }\n                else if (hasConfig) {\n                    resolve(config.defaultValue);\n                }\n                else {\n                    reject(new EmptyError());\n                }\n            },\n        });\n    });\n}\n"],"names":["ElementRef","RippleModule","ButtonModule","FileUploadModule","lastValueFrom","selectCurrentUserNickname","selectIsLoadingAuth","generateImagePath","Store","HttpClient","MessageService","TranslateModule","TranslateService","readFileAsBase64","updateUserImageAction","URLS","CommonModule","ContainerComponent","ImageCropperComponent","RouterLink","EventBlockerModule","SvgFileDragComponent","i0","ɵɵelementStart","ɵɵlistener","SetUserImageComponent_div_5_div_3_Template_button_dragend_1_listener","ɵɵrestoreView","_r3","ctx_r1","ɵɵnextContext","ɵɵresetView","isDragover","SetUserImageComponent_div_5_div_3_Template_button_dragover_1_listener","SetUserImageComponent_div_5_div_3_Template_button_dragenter_1_listener","SetUserImageComponent_div_5_div_3_Template_button_dragleave_1_listener","SetUserImageComponent_div_5_div_3_Template_button_mouseleave_1_listener","SetUserImageComponent_div_5_div_3_Template_button_drop_1_listener","$event","storeFile","SetUserImageComponent_div_5_div_3_Template_button_click_1_listener","fileInput_r4","ɵɵreference","click","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","_c4","ɵɵtextInterpolate","ɵɵpipeBind1","SetUserImageComponent_div_5_div_4_Template_app_image_cropper_uploadFileOutside_1_listener","_r5","clickFileInput","SetUserImageComponent_div_5_div_4_Template_app_image_cropper_croppedFile_1_listener","onSelectCroppedFile","fileToCropper","SetUserImageComponent_div_5_Template_input_change_1_listener","_r1","onSelectFileUpload","ɵɵtemplate","SetUserImageComponent_div_5_div_3_Template","SetUserImageComponent_div_5_div_4_Template","SetUserImageComponent_div_6_button_4_Template_button_click_0_listener","path_r8","_r7","$implicit","onImageClick","_c5","selectedPath","ɵɵsanitizeUrl","SetUserImageComponent_div_6_Template_button_click_1_listener","_r6","refresh","SetUserImageComponent_div_6_button_4_Template","SetUserImageComponent_div_6_Template_button_click_5_listener","noImagePath","ɵɵclassProp","isRefreshed","imagePaths","slice","page","PAGE","SET_PHOTO","SetUserImageComponent","constructor","store","http","toast","translate","isUploadMode","userNickname$","select","isLoading$","croppedFile","imagePath","fileInput","nativeElement","changeMode","confirm","_this","_asyncToGenerator","res","get","responseType","base64String","dispatch","photo","dataBase64","fileExt","error","console","setTimeout","_this2","dataTransfer","files","item","target","event","_this3","fileList","length","file","type","startsWith","showErrorMessage","_this4","key","add","severity","summary","instant","detail","_","ɵɵdirectiveInject","i1","i2","i3","i4","_2","selectors","viewQuery","SetUserImageComponent_Query","rf","ctx","ɵɵprojection","SetUserImageComponent_div_5_Template","SetUserImageComponent_div_6_Template","SetUserImageComponent_Template_button_click_8_listener","SetUserImageComponent_Template_button_click_11_listener","ɵɵpureFunction3","_c2","BACK","PROFILE","_c3","i5","Ripple","i6","ButtonDirective","Button","i7","NgClass","NgForOf","NgIf","AsyncPipe","TranslatePipe","i8","EventBlockerDirective","styles","count","filePath","fileExtension","totalDigits","Error","getRandomUniqueDigits","allDigits","Array","from","i","shuffledDigits","sort","Math","random","selectedDigits","map","digit","EmptyError","source","config","hasConfig","Promise","resolve","reject","_hasValue","_value","subscribe","next","value","complete","defaultValue"],"sourceRoot":"webpack:///","x_google_ignoreList":[3]}