{"version":3,"file":"704.js","mappings":"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","sources":["./src/app/pages/home/home-routing.module.ts","./src/app/pages/home/home.component.ts","./src/app/pages/home/home.component.html","./src/app/pages/home/home.module.ts","./src/app/pages/home/uniquepost/uniquepost.component.ts","./src/app/pages/home/uniquepost/uniquepost.component.html","./src/app/shared/directives/scroll-bottom.directive.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { HomeComponent } from './home.component';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LocalizeRouterModule } from '@gilsdav/ngx-translate-router';\nimport { UniquepostComponent } from './uniquepost/uniquepost.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomeComponent,\n  },\n  {\n    path: ':id',\n    component: UniquepostComponent,\n  },\n];\n@NgModule({\n  imports: [RouterModule.forChild(routes), LocalizeRouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomeRoutingModule {}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @ngrx/avoid-dispatching-multiple-actions-sequentially */\n/* eslint-disable @ngrx/prefer-selector-in-select */\nimport { Component, HostListener, OnDestroy, OnInit, Output, EventEmitter, Input } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { BehaviorSubject, Observable, Subscription, filter, finalize, of } from 'rxjs';\nimport { selectOnlyArtworkIds, selectPostIds } from '@store/feed/feed.selectors';\nimport * as fromPostActions from '@store/feed/feed.actions';\nimport * as fromRatingActions from '@store/feed/post/rating/rating.actions';\nimport { AppStateInterface } from '@store/app/app-state.interface';\nimport { ILoginInfo } from '@ApiClient/backend/Login/loginInfo';\nimport { selectUserLoginInfo } from '@store/profile/profile.selectors';\nimport { postsNumber } from '@store/feed/feedState.interface';\n\n@Component({\n  selector: 'app-home',\n  standalone: false,\n  templateUrl: './home.component.html',\n  styleUrl: './home.component.scss',\n})\nexport class HomeComponent implements OnInit, OnDestroy {\n  postIds$: Observable<string[]> = this.store.select(selectPostIds);\n  onlyArtworkIds$: Observable<(string | undefined)[]> = this.store.select(selectOnlyArtworkIds);\n\n  userLoginInfo$: Observable<ILoginInfo | null> = this.store.select(selectUserLoginInfo);\n  loadingMorePosts: boolean = false;\n  private subscription: Subscription = new Subscription();\n  postsLoadingCount: number = postsNumber;\n\n  @Output() scrollingFinished = new EventEmitter<void>();\n\n  constructor(private store: Store<AppStateInterface>) {\n    this.store.dispatch(fromPostActions.loadFeedPosts());\n  }\n\n  async ngOnInit() {\n    this.onlyArtworkIds$.subscribe((artworkIds) => {\n      const filteredArtworkIds = artworkIds.filter((id) => id !== undefined) as string[];\n      if (filteredArtworkIds.length >= 1) {\n        this.store.dispatch(fromRatingActions.initRating({ postsIds: filteredArtworkIds }));\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.store.dispatch(fromPostActions.cleanFeedPosts());\n  }\n\n  onScrollingFinished() {\n    this.scrollingFinished.emit();\n    this.loadMore();\n  }\n\n  loadMore() {\n    if (this.getMorePosts()) {\n      console.log('MorePosts on it!!');\n      this.store.dispatch(fromPostActions.loadMoreFeedPosts());\n      this.loadingMorePosts = false;\n    }\n  }\n\n  getMorePosts(): boolean {\n    if (this.loadingMorePosts) {\n      console.log('false');\n      return false;\n    } else {\n      console.log('true');\n      this.loadingMorePosts = true;\n      return true;\n    }\n  }\n}\n","<div class=\"content align-center\" id=\"homeContainer\" appScrollBottom (scrollingFinished)=\"onScrollingFinished()\">\n  <!--defer block with placeholder-->\n  @defer (on viewport) {\n    @for (postId of postIds$ | async; track postId) {\n      <app-post [postId]=\"postId\"></app-post>\n    }\n  } @placeholder {\n    <div>\n      @for (_ of [].constructor(4); track _) {\n        <div>Post skeleton</div>\n      }\n    </div>\n  } @error {\n    @for (_ of [].constructor(4); track _) {\n      <div>Post skeleton</div>\n    }\n  }\n</div>\n","import { NgModule } from '@angular/core';\nimport { HomeComponent } from './home.component';\nimport { CommonModule } from '@angular/common';\nimport { HomeRoutingModule } from './home-routing.module';\nimport { PostComponent } from '@modules/post/post.component';\nimport { DeferModule } from 'primeng/defer';\nimport { ScrollBottomDirective } from 'src/app/shared/directives/scroll-bottom.directive';\n\n@NgModule({\n  imports: [CommonModule, HomeRoutingModule, PostComponent, DeferModule, ScrollBottomDirective],\n  declarations: [HomeComponent],\n})\nexport class HomeModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PostComponent } from '@modules/post/post.component';\nimport { Store } from '@ngrx/store';\nimport { ActivatedRoute } from '@angular/router';\nimport * as fromPostActions from '@store/feed/feed.actions';\nimport * as fromRatingActions from '@store/feed/post/rating/rating.actions';\nimport { Observable } from 'rxjs';\nimport { selectOnlyArtworkIds } from '@store/feed/feed.selectors';\n\n@Component({\n  selector: 'app-uniquepost',\n  standalone: true,\n  imports: [CommonModule, PostComponent],\n  templateUrl: './uniquepost.component.html',\n  styleUrl: './uniquepost.component.scss',\n})\nexport class UniquepostComponent implements OnInit {\n  postId!: string;\n  onlyArtworkIds$: Observable<(string | undefined)[]> = this.store.select(selectOnlyArtworkIds);\n  constructor(\n    private route: ActivatedRoute,\n    public store: Store,\n  ) {\n    this.route.params.subscribe((params) => {\n      this.postId = params['id'];\n    });\n  }\n\n  ngOnInit(): void {\n    this.store.dispatch(fromPostActions.initUniqueFeedSoloPost({ postId: this.postId }));\n    this.onlyArtworkIds$.subscribe((artworkIds) => {\n      const filteredArtworkIds = artworkIds.filter((id) => id !== undefined) as string[];\n      if (filteredArtworkIds.length >= 1) {\n        this.store.dispatch(fromRatingActions.initRating({ postsIds: filteredArtworkIds }));\n      }\n    });\n  }\n}\n","<div class=\"content align-center\">\n    <app-post [postId]=\"postId\" [isUniquePost]=\"true\"></app-post>\n</div>\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Directive, Output, EventEmitter, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[appScrollBottom]',\n  standalone: true,\n})\nexport class ScrollBottomDirective {\n  @Output() scrollingFinished = new EventEmitter<void>();\n  emitted = false;\n\n  @HostListener('window:scroll', [])\n  onScroll(): void {\n    if (window.innerHeight + window.scrollY == document.body.offsetHeight && !this.emitted) {\n      this.emitted = true;\n      this.scrollingFinished.emit();\n    } else if (window.innerHeight + window.scrollY < document.body.offsetHeight) {\n      this.emitted = false;\n      console.log('emmited: ', this.emitted);\n    }\n  }\n}\n"],"names":["HomeComponent","RouterModule","LocalizeRouterModule","UniquepostComponent","routes","path","component","HomeRoutingModule","_","_2","_3","forChild","imports","i1","i2","exports","EventEmitter","Store","Observable","Subscription","selectOnlyArtworkIds","selectPostIds","fromPostActions","fromRatingActions","selectUserLoginInfo","postsNumber","i0","ɵɵelement","ɵɵproperty","postId_r4","ɵɵrepeaterCreate","HomeComponent_Defer_1_For_1_Template","ɵɵrepeaterTrackByIdentity","ɵɵrepeater","ɵɵpipeBind1","ctx_r0","postIds$","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","HomeComponent_DeferPlaceholder_2_For_2_Template","ɵɵadvance","ɵɵpureFunction0","_c0","constructor","HomeComponent_DeferError_3_For_1_Template","store","select","onlyArtworkIds$","userLoginInfo$","loadingMorePosts","subscription","postsLoadingCount","scrollingFinished","dispatch","loadFeedPosts","ngOnInit","_this","_asyncToGenerator","subscribe","artworkIds","filteredArtworkIds","filter","id","undefined","length","initRating","postsIds","ngOnDestroy","unsubscribe","cleanFeedPosts","onScrollingFinished","emit","loadMore","getMorePosts","console","log","loadMoreFeedPosts","ɵɵdirectiveInject","selectors","outputs","decls","vars","consts","template","HomeComponent_Template","rf","ctx","ɵɵlistener","HomeComponent_Template_div_scrollingFinished_0_listener","ɵɵtemplate","HomeComponent_Defer_1_Template","HomeComponent_DeferPlaceholder_2_Template","HomeComponent_DeferError_3_Template","ɵɵdefer","HomeComponent_Defer_4_DepsFn","ɵɵdeferOnViewport","CommonModule","PostComponent","DeferModule","ScrollBottomDirective","HomeModule","declarations","ActivatedRoute","route","params","postId","initUniqueFeedSoloPost","standalone","features","ɵɵStandaloneFeature","UniquepostComponent_Template","styles","emitted","onScroll","window","innerHeight","scrollY","document","body","offsetHeight","hostBindings","ScrollBottomDirective_HostBindings","ɵɵresolveWindow"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}