{"version":3,"file":"740.js","mappings":"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","sources":["./src/app/pages/welcome-photo/components/welcome-photo.component.ts","./src/app/pages/welcome-photo/components/welcome-photo.component.html","./src/app/pages/welcome-photo/welcome-photo-routing.module.ts","./src/app/pages/welcome-photo/welcome-photo.module.ts"],"sourcesContent":["import { Component, ViewChild } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { lastValueFrom, Observable } from 'rxjs';\nimport { FileSelectEvent, FileUpload } from 'primeng/fileupload';\nimport { MessageService } from 'primeng/api';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { URLS } from '@enums/urls';\nimport { generateImagePath } from '@utils/generate-image-path';\nimport { Store } from '@ngrx/store';\nimport { AppStateInterface } from '@store/app/app-state.interface';\nimport { updateUserImageAction } from '@store/auth/auth.actions';\nimport { selectIsLoadingAuth } from '@store/auth/auth.selectors';\n\n@Component({\n  selector: 'app-welcome-photo',\n  templateUrl: './welcome-photo.component.html',\n  styleUrls: ['./welcome-photo.component.scss'],\n})\nexport class WelcomePhotoComponent {\n  @ViewChild('fileUpload') fileUpload!: FileUpload;\n\n  protected readonly URLS = URLS;\n  isLoading$: Observable<boolean> = this.store.select(selectIsLoadingAuth);\n  imagePaths: string[] = generateImagePath(9, 'assets/images/welcome-photo/photo-profile', 'webp');\n  selectedPath: string | null = null;\n  selectedFile: string | null = null;\n\n  constructor(\n    private store: Store<AppStateInterface>,\n    private http: HttpClient,\n    private toast: MessageService,\n    private translate: TranslateService,\n  ) {}\n\n  onImageClick(imagePath: string): void {\n    this.selectedPath = imagePath;\n  }\n\n  async confirm(): Promise<void> {\n    try {\n      if (this.selectedPath && !this.selectedFile) {\n        const res = await lastValueFrom(this.http.get(this.selectedPath, { responseType: 'blob' }));\n        const base64String = await this.readFileAsBase64(res as File);\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: base64String, fileExt: 'webp' } }));\n      } else if (!this.selectedPath && this.selectedFile) {\n        this.store.dispatch(updateUserImageAction({ photo: { dataBase64: this.selectedFile, fileExt: 'png' } }));\n      }\n    } catch (error) {\n      console.error('Error during conformation', error);\n    }\n  }\n\n  onCancelHandler() {\n    this.fileUpload.clear();\n    this.selectedPath = null;\n    this.selectedFile = null;\n  }\n\n  async onSelectHandler(event: FileSelectEvent): Promise<void> {\n    this.fileUpload.msgs = []; // clear messages to avoid the appearance of an error window whose styles cannot be changed\n    if (event.files.length > 0) {\n      const file = event.files[0];\n      if (!file.type.startsWith('image/')) {\n        this.selectedFile = null;\n        this.showErrorMessage('ERROR.WRONG_TYPE');\n      } else {\n        this.selectedFile = await this.readFileAsBase64(file);\n        this.selectedPath = null;\n      }\n    }\n  }\n\n  private async readFileAsBase64(file: File): Promise<string> {\n    return new Promise<string>((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.onload = () => {\n        const base64String = fileReader.result as string;\n        resolve(base64String);\n      };\n      fileReader.onerror = (error) => {\n        reject(error);\n      };\n      fileReader.readAsDataURL(file);\n    });\n  }\n\n  private showErrorMessage(key: string): void {\n    this.toast.add({\n      severity: 'error',\n      summary: this.translate.instant('ERROR.TITLE'),\n      detail: this.translate.instant(key),\n    });\n  }\n}\n","<app-container [width]=\"700\" [isLoading]=\"isLoading$ | async\">\n  <div class=\"flex flex-column gap-5 align-items-center justify-content-center\">\n    <div class=\"text-center\">\n      <h2 class=\"text-3xl mb-3 font-bold\">{{ 'WELCOME_PHOTO_PAGE.TITLE' | translate }} <span class=\"last-word\">avatar</span>.</h2>\n      <span class=\"text-xl font-bold\">{{ 'WELCOME_PHOTO_PAGE.CONTENT' | translate }}</span>\n    </div>\n    <div class=\"photos\" *ngIf=\"selectedFile === null\">\n      <button\n        class=\"photo-button flex align-items-center m-0 p-0\"\n        (click)=\"onImageClick(path)\"\n        *ngFor=\"let path of imagePaths\"\n        [ngClass]=\"{ 'select-photo': selectedPath === path }\"\n      >\n        <img [src]=\"path\" alt=\"Profile photo\" width=\"180\" height=\"180\" />\n      </button>\n    </div>\n    <img\n      *ngIf=\"selectedFile\"\n      class=\"uploaded-image m-0 p-0 flex align-items-center\"\n      [src]=\"selectedFile\"\n      alt=\"Uploaded Image\"\n      width=\"180\"\n      height=\"180\"\n    />\n    <div class=\"flex gap-2 w-full justify-content-center\">\n      <p-fileUpload\n        #fileUpload\n        [fileLimit]=\"1\"\n        [mode]=\"'basic'\"\n        (onSelect)=\"onSelectHandler($event)\"\n        [chooseLabel]=\"'BTN.UPLOAD' | translate\"\n        chooseIcon=\"pi-upload\"\n        name=\"chooseImage\"\n        accept=\"image/*\"\n        [maxFileSize]=\"1000000\"\n        [ngClass]=\"{ hidden: selectedFile !== null }\"\n      >\n      </p-fileUpload>\n\n      <button\n        (click)=\"confirm()\"\n        pButton\n        pRipple\n        icon=\"pi pi-check\"\n        [label]=\"'BTN.CONFIRM' | translate\"\n        [disabled]=\"!selectedFile && !selectedPath\"\n      ></button>\n\n      <ng-container *ngIf=\"selectedFile\">\n        <button (click)=\"onCancelHandler()\" pButton pRipple icon=\"pi pi-times\" [label]=\"'BTN.CANCEL' | translate\"></button>\n      </ng-container>\n\n      <button [routerLink]=\"[URLS.BACK]\" [label]=\"'BTN.SKIP' | translate\" pButton pRipple></button>\n    </div>\n  </div>\n</app-container>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LocalizeRouterModule } from '@gilsdav/ngx-translate-router';\n\nimport { WelcomePhotoComponent } from './components/welcome-photo.component';\nimport { AuthGuard } from '@guards/auth.guard';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: WelcomePhotoComponent,\n    canActivate: [AuthGuard],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes), LocalizeRouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class WelcomePhotoRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { WelcomePhotoComponent } from './components/welcome-photo.component';\nimport { ContainerComponent } from '../../shared/components/container/container.component';\nimport { WelcomePhotoRoutingModule } from './welcome-photo-routing.module';\nimport { ButtonModule } from 'primeng/button';\nimport { RippleModule } from 'primeng/ripple';\nimport { FileUploadModule } from 'primeng/fileupload';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ToastModule } from 'primeng/toast';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ContainerComponent,\n    WelcomePhotoRoutingModule,\n    ButtonModule,\n    RippleModule,\n    FileUploadModule,\n    TranslateModule,\n    ToastModule,\n  ],\n  declarations: [WelcomePhotoComponent],\n})\nexport class WelcomePhotoModule {}\n"],"names":["HttpClient","lastValueFrom","FileUpload","MessageService","TranslateService","URLS","generateImagePath","Store","updateUserImageAction","selectIsLoadingAuth","i0","ɵɵelementStart","ɵɵlistener","WelcomePhotoComponent_div_13_button_1_Template_button_click_0_listener","restoredCtx","ɵɵrestoreView","_r7","path_r5","$implicit","ctx_r6","ɵɵnextContext","ɵɵresetView","onImageClick","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction1","_c1","ctx_r4","selectedPath","ɵɵadvance","ɵɵsanitizeUrl","ɵɵtemplate","WelcomePhotoComponent_div_13_button_1_Template","ctx_r0","imagePaths","ctx_r1","selectedFile","ɵɵelementContainerStart","WelcomePhotoComponent_ng_container_21_Template_button_click_1_listener","_r9","ctx_r8","onCancelHandler","ɵɵelementContainerEnd","ɵɵpipeBind1","WelcomePhotoComponent","constructor","store","http","toast","translate","isLoading$","select","imagePath","confirm","_this","_asyncToGenerator","res","get","responseType","base64String","readFileAsBase64","dispatch","photo","dataBase64","fileExt","error","console","fileUpload","clear","onSelectHandler","event","_this2","msgs","files","length","file","type","startsWith","showErrorMessage","Promise","resolve","reject","fileReader","FileReader","onload","result","onerror","readAsDataURL","key","add","severity","summary","instant","detail","_","ɵɵdirectiveInject","i1","i2","i3","i4","_2","selectors","viewQuery","WelcomePhotoComponent_Query","rf","ctx","ɵɵtext","WelcomePhotoComponent_div_13_Template","WelcomePhotoComponent_img_14_Template","WelcomePhotoComponent_Template_p_fileUpload_onSelect_16_listener","$event","WelcomePhotoComponent_Template_button_click_19_listener","WelcomePhotoComponent_ng_container_21_Template","ɵɵtextInterpolate1","ɵɵtextInterpolate","_c2","_c3","BACK","RouterModule","LocalizeRouterModule","AuthGuard","routes","path","component","canActivate","WelcomePhotoRoutingModule","_3","forChild","imports","exports","CommonModule","ContainerComponent","ButtonModule","RippleModule","FileUploadModule","TranslateModule","ToastModule","WelcomePhotoModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}