{"version":3,"file":"621.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAA6C;AACE;AACU;AAC+D;AAChD;AAET;AAEJ;AACd;AAEgC;AAChC;AACV;AACU;AACR;;;;;;;;;;;;ICoC/Bc,4DAAA,iBAAiF;IAAzEA,wDAAA,mBAAAG,6DAAA;MAAAH,2DAAA,CAAAK,GAAA;MAAA,MAAAC,MAAA,GAAAN,2DAAA;MAAA,OAAAA,yDAAA,CAASM,MAAA,CAAAG,cAAA,EAAgB;IAAA,EAAC;IAChCT,4DAAA,eAAwB;IAAAA,oDAAA,GAA4B;;IAAAA,0DAAA,EAAO;IAC3DA,4DAAA,eAAwB;IAAAA,oDAAA,GAA4B;;IACtDA,0DADsD,EAAO,EACpD;;;IAFiBA,uDAAA,GAA4B;IAA5BA,+DAAA,CAAAA,yDAAA,mBAA4B;IAC5BA,uDAAA,GAA4B;IAA5BA,+DAAA,CAAAA,yDAAA,mBAA4B;;;;;IAQxDA,4DAFJ,cAAwE,cAClC,iBACuC;;IACvEA,4DAAA,cAA4B;IAC1BA,uDAAA,cAAoD;IACtDA,0DAAA,EAAM;;IACNA,4DAAA,WAAM;IAAAA,oDAAA,GAAiC;;IACzCA,0DADyC,EAAO,EACvC;IACTA,4DAAA,iBAAyE;;IACvEA,4DAAA,cAA4B;IAC1BA,uDAAA,eAAsD;IACxDA,0DAAA,EAAM;;IACNA,4DAAA,gBAAkB;IAAAA,oDAAA,IAAmC;;IAG3DA,0DAH2D,EAAO,EACrD,EACL,EACF;;;IAbkDA,uDAAA,GAAoB;IAApBA,wDAAA,eAAAA,6DAAA,IAAAkB,GAAA,EAAoB;IAIhElB,uDAAA,GAAiC;IAAjCA,+DAAA,CAAAA,yDAAA,wBAAiC;IAEWA,uDAAA,GAAoB;IAApBA,wDAAA,eAAAA,6DAAA,IAAAkB,GAAA,EAAoB;IAIpDlB,uDAAA,GAAmC;IAAnCA,+DAAA,CAAAA,yDAAA,2BAAmC;;;AD9CpD,IAAMmB,iBAAiB;EAAxB,MAAOA,iBAAiB;IAc5BC,eAAeA,CAAA;MACb,MAAMC,WAAW,GAAG,IAAI,CAACC,aAAa,CAACC,aAAa;MACpD,IAAI,CAACC,YAAY,GAAGH,WAAW,CAACI,YAAY,GAAGJ,WAAW,CAACK,YAAY;IACzE;IAEAC,YACUC,KAAqB,EACrBC,SAA2B,EAC3BC,kBAAsC;MAFtC,KAAAF,KAAK,GAALA,KAAK;MACL,KAAAC,SAAS,GAATA,SAAS;MACT,KAAAC,kBAAkB,GAAlBA,kBAAkB;MAnBnB,KAAAC,YAAY,GAAY,KAAK;MACtC,KAAAP,YAAY,GAAG,KAAK;MAGpB,KAAAQ,iBAAiB,GAAY,KAAK;MAClC,KAAAC,cAAc,GAAY,KAAK;MAC/B,KAAAC,OAAO,GAAuB,IAAI,CAACL,SAAS,CAACM,YAAY,CAACC,IAAI,CAC5DlD,+CAAS,CAAC;QAAEmD,IAAI,EAAE,IAAI,CAACR,SAAS,CAACS;MAAW,CAAE,CAAC,EAC/CvC,mDAAG,CAAEwC,KAAK,IAAKA,KAAK,CAACF,IAAI,CAAC,CAC3B;MA0DkB,KAAAxC,IAAI,GAAGA,6CAAI;MA9C5B,IAAI,CAAC2C,WAAW,GAAG/C,yEAAS,CAAeD,8DAAI,CAAC;IAClD;IAEMiD,QAAQA,CAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,sJAAA;QACZD,KAAI,CAACE,UAAU,EAAE;QACjBC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEJ,KAAI,CAACK,IAAI,CAAC;QAEjCL,KAAI,CAACZ,kBAAkB,CAACkB,OAAO,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAACC,SAAS,CAAEC,GAAG,IAAI;UACxER,KAAI,CAACT,cAAc,GAAGiB,GAAG,CAACC,OAAO;QACnC,CAAC,CAAC;MAAC;IACL;IAEAP,UAAUA,CAAA;MACR,IAAI,CAACQ,aAAa,GAAG,IAAI,CAACZ,WAAW,CAACa,uBAAuB,CAAC;QAC5DC,MAAM,EAAE,IAAI,CAACP,IAAI,EAAEQ,SAAS,CAAC,CAAC,CAAC,CAACD,MAAM;QACtCE,aAAa,EAAE,IAAI,CAACT,IAAI,EAAES,aAAa;QACvCC,EAAE,EAAE,IAAI,CAACV,IAAI,EAAEQ,SAAS,CAAC,CAAC,CAAC,CAACE;OAC7B,CAAC;IACJ;IAEMC,QAAQA,CAACD,EAAU;MAAA,IAAAE,MAAA;MAAA,OAAAhB,sJAAA;QACvBE,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;QACvB,MAAMa,MAAI,CAACC,IAAI,CAAC,GAAGlE,uDAAG,CAACmE,MAAM,IAAIF,MAAI,CAAC9B,SAAS,CAACS,WAAW,IAAIzC,6CAAI,CAACiE,IAAI,IAAIL,EAAE,EAAE,CAAC;MAAC;IACpF;IAEAhD,cAAcA,CAAA;MACZ,IAAI,CAACa,aAAa,CAACC,aAAa,CAACwC,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC;IAC/D;IAEMJ,IAAIA,CAACK,GAAW;MAAA,IAAAC,MAAA;MAAA,OAAAvB,sJAAA;QACpB,IAAI;UACF,MAAMwB,SAAS,CAACC,SAAS,CAACC,SAAS,CAACJ,GAAG,CAAC;UACxCC,MAAI,CAACtC,KAAK,CAAC0C,GAAG,CAAC;YACbC,QAAQ,EAAE,SAAS;YACnBC,OAAO,EAAEN,MAAI,CAACrC,SAAS,CAAC4C,OAAO,CAAC,eAAe,CAAC;YAChDC,MAAM,EAAER,MAAI,CAACrC,SAAS,CAAC4C,OAAO,CAAC,kBAAkB;WAClD,CAAC;SACH,CAAC,MAAM;UACNP,MAAI,CAACtC,KAAK,CAAC0C,GAAG,CAAC;YAAEC,QAAQ,EAAE,OAAO;YAAEC,OAAO,EAAE,OAAO;YAAEE,MAAM,EAAER,MAAI,CAACrC,SAAS,CAAC4C,OAAO,CAAC,gBAAgB;UAAC,CAAE,CAAC;;MAC1G;IACH;IAEAE,gBAAgBA,CAAA;MACd,IAAI,CAAC3C,iBAAiB,GAAG,CAAC,IAAI,CAACA,iBAAiB;IAClD;IAAC,QAAA4C,CAAA;uBApEUzD,iBAAiB,EAAAnB,+DAAA,CAAA8E,uDAAA,GAAA9E,+DAAA,CAAA+E,kEAAA,GAAA/E,+DAAA,CAAAgF,oEAAA;IAAA;IAAA,QAAAC,EAAA;YAAjB9D,iBAAiB;MAAA+D,SAAA;MAAAC,SAAA,WAAAC,wBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;;;;;UCtBxBrF,4DAHN,iBAA8B,aACH,aACoB,WAC8E;;UACrHA,uDAAA,mBAKa;UACfA,0DAAA,EAAI;UACJA,oDAAA,GACF;UAAAA,0DAAA,EAAM;UACNA,4DAAA,gBAAyD;UAA7BA,wDAAA,mBAAAuF,mDAAA;YAAAvF,2DAAA,CAAAwF,GAAA;YAAA,OAAAxF,yDAAA,CAASsF,GAAA,CAAAX,gBAAA,EAAkB;UAAA,EAAC;;UACtD3E,4DAAA,aAA2B;UACzBA,uDAAA,aAA2D;UAGjEA,0DAFI,EAAM,EACC,EACL;;UAEJA,4DADF,cAAwB,aACuC;;UAC3DA,uDAAA,iBAAsE;;UAE1EA,0DADE,EAAI,EACA;UAIAA,4DAHN,eAAyB,eACI,eACD,kBAC8B;;UAClDA,4DAAA,eAA4B;UAC1BA,uDAAA,eAAmD;UACrDA,0DAAA,EAAM;;UACNA,4DAAA,YAAM;UAAAA,oDAAA,IAAwB;UAChCA,0DADgC,EAAO,EAC9B;UACTA,4DAAA,kBAAoD;;UAClDA,4DAAA,eAA4B;UAC1BA,uDAAA,eAAgD;UAClDA,0DAAA,EAAM;;UACNA,4DAAA,YAAM;UAAAA,oDAAA,IAA8B;UAExCA,0DAFwC,EAAO,EACpC,EACL;UACNA,4DAAA,iBAAwD;UAA5BA,wDAAA,mBAAAyF,oDAAA;YAAAzF,2DAAA,CAAAwF,GAAA;YAAA,OAAAxF,yDAAA,CAASsF,GAAA,CAAA5B,QAAA,CAAA4B,GAAA,CAAAvC,IAAA,CAAAU,EAAA,CAAiB;UAAA,EAAC;;UACrDzD,4DAAA,eAA4B;UAC1BA,uDAAA,eAAgD;UAGtDA,0DAFI,EAAM,EACC,EACL;;UAEJA,4DADF,kBAAsC,gBACZ;UAAAA,oDAAA,IAA6B;UAAAA,0DAAA,EAAO;UAC5DA,4DAAA,YAAM;UACJA,oDAAA,IACF;UAAAA,0DAAA,EAAO;UACPA,wDAAA,KAAA2F,oCAAA,qBAAiF;UAMvF3F,0DAFI,EAAM,EACF,EACE;UAEVA,wDAAA,KAAA4F,iCAAA,oBAAwE;;;;UAxD3C5F,uDAAA,GAA+F;UAA/FA,wDAAA,eAAAA,6DAAA,KAAA8F,GAAA,EAAA9F,yDAAA,QAAAsF,GAAA,CAAApD,OAAA,GAAAoD,GAAA,CAAAzF,IAAA,CAAAkG,OAAA,EAAAT,GAAA,CAAAvC,IAAA,CAAAiD,WAAA,CAAAC,YAAA,kBAAAX,GAAA,CAAAvC,IAAA,CAAAiD,WAAA,CAAAC,YAAA,CAAAC,WAAA,EAA+F;UAIlHlG,uDAAA,GAA8C;UAC9CA,wDADA,eAAAmG,OAAA,GAAAb,GAAA,CAAAvC,IAAA,CAAAiD,WAAA,CAAAI,SAAA,cAAAD,OAAA,KAAAE,SAAA,GAAAF,OAAA,MAA8C,WAAAb,GAAA,CAAAvC,IAAA,CAAAS,aAAA,CACjB;UAGjCxD,uDAAA,EACF;UADEA,gEAAA,MAAAsF,GAAA,CAAAvC,IAAA,CAAAiD,WAAA,CAAAO,WAAA,kBAAAjB,GAAA,CAAAvC,IAAA,CAAAiD,WAAA,CAAAO,WAAA,CAAAC,IAAA,MACF;UAQGxG,uDAAA,GAAyD;UAAzDA,wDAAA,eAAAA,6DAAA,KAAA8F,GAAA,EAAA9F,yDAAA,SAAAsF,GAAA,CAAApD,OAAA,GAAAoD,GAAA,CAAAzF,IAAA,CAAAiE,IAAA,EAAAwB,GAAA,CAAAvC,IAAA,CAAAU,EAAA,EAAyD;UACnDzD,uDAAA,GAA6B;UAA7BA,wDAAA,QAAAA,yDAAA,SAAAsF,GAAA,CAAAlC,aAAA,GAAApD,2DAAA,CAA6B;UAU1BA,uDAAA,GAAwB;UAAxBA,+DAAA,CAAAsF,GAAA,CAAAvC,IAAA,CAAA2D,aAAA,CAAwB;UAMxB1G,uDAAA,GAA8B;UAA9BA,+DAAA,CAAAsF,GAAA,CAAAvC,IAAA,CAAA4D,SAAA,qBAAArB,GAAA,CAAAvC,IAAA,CAAA4D,SAAA,IAAAC,KAAA,CAA8B;UAUhB5G,uDAAA,GAA6B;UAA7BA,+DAAA,CAAAsF,GAAA,CAAAvC,IAAA,CAAA8D,SAAA,IAAAC,KAAA,CAA6B;UAEnD9G,uDAAA,GACF;UADEA,gEAAA,MAAAsF,GAAA,CAAAvC,IAAA,CAAA8D,SAAA,IAAAE,WAAA,MACF;UACoC/G,uDAAA,EAAkB;UAAlBA,wDAAA,SAAAsF,GAAA,CAAA9D,YAAA,CAAkB;UAQ/BxB,uDAAA,EAAyC;UAAzCA,wDAAA,SAAAsF,GAAA,CAAAtD,iBAAA,IAAAsD,GAAA,CAAArD,cAAA,CAAyC;;;qBDvC1D9C,0DAAY,EAAA6H,kDAAA,EAAAA,uDAAA,EAAE1H,iEAAe,EAAAyF,+DAAA,EAAEpF,uFAAc,EAAEG,wDAAU;MAAAsH,MAAA;MAAAC,eAAA;IAAA;;SAKxDlG,iBAAiB;AAAA","sources":["./src/app/shared/components/post-card/post-card.component.ts","./src/app/shared/components/post-card/post-card.component.html"],"sourcesContent":["import { Observable, startWith } from 'rxjs';\nimport { CommonModule } from '@angular/common';\nimport { BreakpointObserver } from '@angular/cdk/layout';\nimport { AfterViewInit, ChangeDetectionStrategy, Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\n\nimport { IPostFull, Post } from '@ApiClient/backend/Post/post';\nimport { IPostService } from '@ApiClient/services/post';\nimport { ToService } from '@ApiClient/helpers/observables';\nimport { Api } from '@ApiClient/backend/api';\n\nimport { ImageComponent } from '@ApiClient/components/image/image.component';\nimport { MessageService } from 'primeng/api';\nimport { URLS } from '@enums/urls';\nimport { RouterLink } from '@angular/router';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-post-card',\n  standalone: true,\n  imports: [CommonModule, TranslateModule, ImageComponent, RouterLink],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  templateUrl: './post-card.component.html',\n  styleUrl: './post-card.component.scss',\n})\nexport class PostCardComponent implements OnInit, AfterViewInit {\n  @ViewChild('textContainer') textContainer!: ElementRef;\n  @Input() post!: IPostFull;\n  @Input() isUniquePost: boolean = false;\n  showMoreText = false;\n  urlThumbnail$!: Observable<string>;\n  postService: IPostService;\n  showMoreOptionTab: boolean = false;\n  isMobileScreen: boolean = false;\n  locale$: Observable<string> = this.translate.onLangChange.pipe(\n    startWith({ lang: this.translate.currentLang }),\n    map((event) => event.lang),\n  );\n\n  ngAfterViewInit() {\n    const textElement = this.textContainer.nativeElement;\n    this.showMoreText = textElement.scrollHeight > textElement.clientHeight;\n  }\n\n  constructor(\n    private toast: MessageService,\n    private translate: TranslateService,\n    private breakpointObserver: BreakpointObserver\n  ) {\n    this.postService = ToService<IPostService>(Post);\n  }\n\n  async ngOnInit(): Promise<void> {\n    this.setUpImage();\n    console.log('Posts: ', this.post);\n\n    this.breakpointObserver.observe(['(max-width: 768px)']).subscribe((res) => {\n      this.isMobileScreen = res.matches;\n    });\n  }\n\n  setUpImage() {\n    this.urlThumbnail$ = this.postService.getUrlPostFileThumbnail({\n      fileId: this.post?.postFiles[0].fileId,\n      userCreatorId: this.post?.userCreatorId,\n      id: this.post?.postFiles[0].id,\n    });\n  }\n\n  async copyLink(id: string) {\n    console.log('copyLink');\n    await this.copy(`${Api.AppUrl}/${this.translate.currentLang}/${URLS.POST}/${id}`);\n  }\n\n  toggleShowMore() {\n    this.textContainer.nativeElement.classList.toggle('show-all');\n  }\n\n  async copy(msg: string) {\n    try {\n      await navigator.clipboard.writeText(msg);\n      this.toast.add({\n        severity: 'success',\n        summary: this.translate.instant('SUCCESS.TITLE'),\n        detail: this.translate.instant('SUCCESS.URL_COPY'),\n      });\n    } catch {\n      this.toast.add({ severity: 'error', summary: 'Error', detail: this.translate.instant('ERROR.URL_COPY') });\n    }\n  }\n\n  toggleMoreOption(): void {\n    this.showMoreOptionTab = !this.showMoreOptionTab;\n  }\n\n  protected readonly URLS = URLS;\n}\n","<article class=\"post-wrapper\">\n  <div class=\"post-header\">\n    <div class=\"flex gap-2 align-items-center\">\n      <a class=\"post-author\" [routerLink]=\"['/', locale$ | async, URLS.PROFILE, post.userCreator.userNickname?.nicknameUrl]\">\n        <app-image\n          folder=\"UserPictures\"\n          defaultImageUrl=\"assets/videos/noUserVid.mp4\"\n          [idPicture]=\"post.userCreator.pictureId ?? ''\"\n          [userId]=\"post.userCreatorId\"\n        ></app-image>\n      </a>\n      {{ post.userCreator.userProfile?.name }}\n    </div>\n    <button class=\"post-button\" (click)=\"toggleMoreOption()\">\n      <svg width=\"32\" height=\"6\">\n        <use href=\"assets/images/icons.svg#post-more-option\"></use>\n      </svg>\n    </button>\n  </div>\n  <div class=\"post-image\">\n    <a [routerLink]=\"['/', locale$ | async, URLS.POST, post.id]\">\n      <video [src]=\"urlThumbnail$ | async\" class=\"responsive-video\"></video>\n    </a>\n  </div>\n  <div class=\"post-footer\">\n    <div class=\"post-controls\">\n      <div class=\"flex gap-3\">\n        <button class=\"post-button post-button-hover gap-2\">\n          <svg width=\"24\" height=\"24\">\n            <use href=\"assets/images/icons.svg#comments\"></use>\n          </svg>\n          <span>{{ post.totalComments }}</span>\n        </button>\n        <button class=\"post-button post-button-hover gap-2\">\n          <svg width=\"22\" height=\"20\">\n            <use href=\"assets/images/icons.svg#likes\"></use>\n          </svg>\n          <span>{{ post.reactions[0]?.count }}</span>\n        </button>\n      </div>\n      <button class=\"post-button\" (click)=\"copyLink(post.id)\">\n        <svg width=\"28\" height=\"28\">\n          <use href=\"assets/images/icons.svg#share\"></use>\n        </svg>\n      </button>\n    </div>\n    <div class=\"post-text\" #textContainer>\n      <span class=\"font-bold\">{{ post.languages[0].title }}</span>\n      <span>\n        {{ post.languages[0].description }}\n      </span>\n      <button (click)=\"toggleShowMore()\" *ngIf=\"showMoreText\" class=\"more-text-button\">\n        <span class=\"more-text\">{{ 'BTN.MORE' | translate }}</span>\n        <span class=\"less-text\">{{ 'BTN.LESS' | translate }}</span>\n      </button>\n    </div>\n  </div>\n</article>\n\n<div class=\"moreOption-tab\" *ngIf=\"showMoreOptionTab && isMobileScreen\">\n  <div class=\"moreOption-tab-buttons\">\n    <button type=\"button\" class=\"moreOption-tab-button\" [routerLink]=\"['/']\">\n      <svg width=\"38\" height=\"38\">\n        <use href=\"assets/images/icons.svg#edit-post\"></use>\n      </svg>\n      <span>{{ 'BTN.EDIT_POST' | translate }}</span>\n    </button>\n    <button type=\"button\" class=\"moreOption-tab-button\" [routerLink]=\"['/']\">\n      <svg width=\"38\" height=\"38\">\n        <use href=\"assets/images/icons.svg#delete-post\"></use>\n      </svg>\n      <span id=\"delete\">{{ 'BTN.DELETE_POST' | translate }}</span>\n    </button>\n  </div>\n</div>\n"],"names":["startWith","CommonModule","BreakpointObserver","ElementRef","TranslateModule","TranslateService","Post","ToService","Api","ImageComponent","MessageService","URLS","RouterLink","map","i0","ɵɵelementStart","ɵɵlistener","PostCardComponent_button_37_Template_button_click_0_listener","ɵɵrestoreView","_r2","ctx_r2","ɵɵnextContext","ɵɵresetView","toggleShowMore","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵelement","ɵɵproperty","ɵɵpureFunction0","_c2","PostCardComponent","ngAfterViewInit","textElement","textContainer","nativeElement","showMoreText","scrollHeight","clientHeight","constructor","toast","translate","breakpointObserver","isUniquePost","showMoreOptionTab","isMobileScreen","locale$","onLangChange","pipe","lang","currentLang","event","postService","ngOnInit","_this","_asyncToGenerator","setUpImage","console","log","post","observe","subscribe","res","matches","urlThumbnail$","getUrlPostFileThumbnail","fileId","postFiles","userCreatorId","id","copyLink","_this2","copy","AppUrl","POST","classList","toggle","msg","_this3","navigator","clipboard","writeText","add","severity","summary","instant","detail","toggleMoreOption","_","ɵɵdirectiveInject","i1","i2","i3","_2","selectors","viewQuery","PostCardComponent_Query","rf","ctx","PostCardComponent_Template_button_click_7_listener","_r1","PostCardComponent_Template_button_click_28_listener","ɵɵtemplate","PostCardComponent_button_37_Template","PostCardComponent_div_38_Template","ɵɵpureFunction3","_c1","PROFILE","userCreator","userNickname","nicknameUrl","tmp_2_0","pictureId","undefined","ɵɵtextInterpolate1","userProfile","name","ɵɵsanitizeUrl","totalComments","reactions","count","languages","title","description","i4","NgIf","AsyncPipe","TranslatePipe","styles","changeDetection"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}