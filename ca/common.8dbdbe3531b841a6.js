"use strict";(self.webpackChunkWebAppNew=self.webpackChunkWebAppNew||[]).push([[592],{8291:(T,O,l)=>{l.d(O,{r:()=>P});var p=l(1208),e=l(4650),d=l(6345),s=l(4006);let u=(()=>{class _{constructor(){this.autocomplete="off"}disableKeys(o){return document,8==o.keyCode||o.keyCode>=48&&o.keyCode<=57}}return _.\u0275fac=function(o){return new(o||_)},_.\u0275dir=e.\u0275\u0275defineDirective({type:_,selectors:[["","onlyNumbers",""]],hostVars:1,hostBindings:function(o,t){1&o&&e.\u0275\u0275listener("keypress",function(i){return t.disableKeys(i)}),2&o&&e.\u0275\u0275hostProperty("autocomplete",t.autocomplete)}}),_})();const M=["input"];let P=(()=>{class _{constructor(o){this.mainService=o,this.imageChangedEvent="",this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={}}fileChangeEvent(o){this.imageChangedEvent=o,this.lastFileChangeEvent=o}imageCropped(o){if(this.croppedImage=o.base64,o.width<144||o.height<144)return this.mainService.toastWarning("La resoluci\xf3 de la imatge \xe9s massa petita. Si us plau, intenta de nou."),void(this.croppedImage=null);console.log(o,(0,p.Ll)(o.base64)),this.mainService.setCroppedImageBase64(o.base64)}imageLoaded(){this.showCropper=!0,console.log("Image loaded")}cropperReady(o){console.log("Cropper ready",o)}loadImageFailed(){if(this.lastFileChangeEvent&&this.lastFileChangeEvent.target.files.length>0){const o=this.lastFileChangeEvent.target.files[0].type;let t="Error en carregar la imatge.";"image/png"!==o&&"image/jpg"!==o&&"image/jpeg"!==o&&(t="Tipus d'arxiu inv\xe0lid. Si us plau, selecciona un arxiu PNG o JPG/JPEG."),console.log("Failed file type:",o),this.mainService.toastDanger(t)}else console.log("Load failed")}rotateLeft(){this.canvasRotation--,this.flipAfterRotate()}rotateRight(){this.canvasRotation++,this.flipAfterRotate()}flipAfterRotate(){this.transform={...this.transform,flipH:this.transform.flipV,flipV:this.transform.flipH}}flipHorizontal(){this.transform={...this.transform,flipH:!this.transform.flipH}}flipVertical(){this.transform={...this.transform,flipV:!this.transform.flipV}}zoomOut(){this.scale-=.1,this.transform={...this.transform,scale:this.scale}}zoomIn(){this.scale+=.1,this.transform={...this.transform,scale:this.scale}}toggleContainWithinAspectRatio(){this.containWithinAspectRatio=!this.containWithinAspectRatio}updateRotation(){this.transform={...this.transform,rotate:this.rotation}}removePhoto(){this.input.nativeElement.value="",this.fileChangeEvent(null),this.croppedImage=null,this.mainService.croppedImageBase64=null}mostrarBotons(){return!!this.input&&this.input.nativeElement.value}}return _.\u0275fac=function(o){return new(o||_)(e.\u0275\u0275directiveInject(d.J))},_.\u0275cmp=e.\u0275\u0275defineComponent({type:_,selectors:[["app-image-croper"]],viewQuery:function(o,t){if(1&o&&e.\u0275\u0275viewQuery(M,5),2&o){let n;e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(t.input=n.first)}},decls:30,vars:28,consts:function(){let a,o,t,n,i,C,m,R,c,g,E;return a="Tria la teva imatge",o="Gira a l'esquerre",t="Gira a la dreta",n="Gira horitzontalment",i="Gira verticalment",C=" {{containWithinAspectRatio?'Emplena la relaci\xF3 d'aspecte':'Contingues dins la relaci\xF3 d'aspecte'} ",m="Elimina foto",R="Rotaci\xF3",c="Rotaci\xF3",g="Zoom -",E="Zoom -",[["format","png",3,"imageChangedEvent","maintainAspectRatio","containWithinAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","onlyScaleDown","roundCropper","canvasRotation","transform","alignImage","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"boto-showcase"],[1,"image-cropper-btn"],["placeholder",a,"type","file",1,"btn","inputImage",3,"change"],["input",""],[1,"text-center","my-2"],[1,"croppedImage","shadow-4",3,"src"],[1,"boto","botoSecundari","botoPetit",3,"click"],o,t,n,i,C,[1,"boto","botoVermell","botoPetit",3,"click"],m,["for","rotation",1,"col-form-label"],R,["placeholder",c,"type","text","onlyNumbers","",1,"btn","ml-2",3,"ngModel","ngModelChange","keyup"],g,E]},template:function(o,t){1&o&&(e.\u0275\u0275elementStart(0,"image-cropper",0),e.\u0275\u0275listener("imageCropped",function(i){return t.imageCropped(i)})("imageLoaded",function(){return t.imageLoaded()})("cropperReady",function(i){return t.cropperReady(i)})("loadImageFailed",function(){return t.loadImageFailed()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"input",3,4),e.\u0275\u0275listener("change",function(i){return t.fileChangeEvent(i)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275element(6,"img",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div")(8,"button",7),e.\u0275\u0275listener("click",function(){return t.rotateLeft()}),e.\u0275\u0275i18n(9,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",7),e.\u0275\u0275listener("click",function(){return t.rotateRight()}),e.\u0275\u0275i18n(11,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",7),e.\u0275\u0275listener("click",function(){return t.flipHorizontal()}),e.\u0275\u0275i18n(13,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",7),e.\u0275\u0275listener("click",function(){return t.flipVertical()}),e.\u0275\u0275i18n(15,11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div")(17,"button",7),e.\u0275\u0275listener("click",function(){return t.toggleContainWithinAspectRatio()}),e.\u0275\u0275i18n(18,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",13),e.\u0275\u0275listener("click",function(){return t.removePhoto()}),e.\u0275\u0275i18n(20,14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div")(22,"label",15),e.\u0275\u0275i18n(23,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"input",17),e.\u0275\u0275listener("ngModelChange",function(i){return t.rotation=i})("keyup",function(){return t.updateRotation()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div")(26,"button",7),e.\u0275\u0275listener("click",function(){return t.zoomOut()}),e.\u0275\u0275i18n(27,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"button",7),e.\u0275\u0275listener("click",function(){return t.zoomIn()}),e.\u0275\u0275i18n(29,19),e.\u0275\u0275elementEnd()()()),2&o&&(e.\u0275\u0275styleProp("display",t.showCropper?null:"none")("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275property("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("containWithinAspectRatio",t.containWithinAspectRatio)("aspectRatio",1)("resizeToWidth",256)("cropperMinWidth",128)("onlyScaleDown",!0)("roundCropper",!1)("canvasRotation",t.canvasRotation)("transform",t.transform)("alignImage","left"),e.\u0275\u0275advance(5),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275advance(1),e.\u0275\u0275property("src",t.croppedImage,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275advance(9),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.containWithinAspectRatio?"Fill Aspect Ratio":"Contain Within Aspect Ratio"),e.\u0275\u0275i18nApply(18),e.\u0275\u0275advance(3),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngModel",t.rotation),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("display",t.mostrarBotons()?"block":"none"))},dependencies:[s.Fj,s.JJ,s.On,u,p.ap],styles:[".btn[_ngcontent-%COMP%]{border-radius:20px}input.btn[_ngcontent-%COMP%], input.btn[_ngcontent-%COMP%]:hover{color:var(--color-text)}.btn-showcase[_ngcontent-%COMP%]{text-align:center}input.btn[_ngcontent-%COMP%]{border-color:inherit}.inputImage[_ngcontent-%COMP%]{margin:10px}.croppedImage[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:36px;border-radius:10000px}[_nghost-%COMP%]     .overlay{outline:none!important}[_nghost-%COMP%]     .cropper{border-radius:10000px;outline-color:#2222224d!important}"]}),_})()}}]);