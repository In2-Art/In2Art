"use strict";(self.webpackChunkWebAppNew=self.webpackChunkWebAppNew||[]).push([[939],{4065:(D,E,r)=>{r.d(E,{i:()=>a});var d=r(5861),m=r(7801),l=r(4434),i=r(2503),u=r(3563),v=r(2474),t=r(6892);class b extends i.X{constructor(n){super(),this.postIds=n.map(c=>new u.r(c))}check(){let n=new Map;return this.postIds.some(c=>!c.isOk())&&n.set("postIds","postIds must be valid"),n}}class g extends i.X{constructor({others:n,technique:c,dimensions:f,material:h,perservation:x,location:O,languageId:y}){super(),this.others=n,this.technique=c,this.dimensions=f,this.material=h,this.perservation=x,this.location=O,this.languageId=y instanceof u.r?y:new u.r(y)}check(){let n=new Map;return this.languageId.isOk()||n.set("languageId","languageId is not valid"),this.others&&this.others.length>g.OthersLength&&n.set("others",`others length must be less than ${g.OthersLength}`),this.technique&&this.technique.length>g.TechniqueLength&&n.set("technique",`technique length must be less than ${g.TechniqueLength}`),this.dimensions&&this.dimensions.length>g.DimensionsLength&&n.set("dimensions",`dimensions length must be less than ${g.DimensionsLength}`),this.material&&this.material.length>g.MaterialLength&&n.set("material",`material length must be less than ${g.MaterialLength}`),this.perservation&&this.perservation.length>g.PerservationLength&&n.set("perservation",`perservation length must be less than ${g.PerservationLength}`),this.location&&this.location.length>g.LocationLength&&n.set("location",`location length must be less than ${g.LocationLength}`),n}static get DateLength(){return 350}static get OthersLength(){return 350}static get TechniqueLength(){return 150}static get DimensionsLength(){return 100}static get MaterialLength(){return 150}static get PerservationLength(){return 150}static get LocationLength(){return 350}}var w=r(4857),A=r(9858),U=r(4596);class C{constructor({post:n,price:c,afterChrist:f,artistTypeId:h,dateFormatType:x,date:O,languages:y,community:T,artworkId:N,id:S}){try{this.postTimelapse=new v.Vb(n),this.price=c,this.afterChrist=f,this.artistTypeId=new u.r(h),this.dateFormatTypeId=x?new u.r(x):null,this.date=O,this.languages=new Map,y.map(M=>new g(M)).forEach(M=>{if(!M.languageId||!M.languageId.value)throw new w.B;this.languages.set(M.languageId.value,M)}),this.community=T?new U.Fe(T):U.Fe.UnkonwnUser,this.artworkId=new u.r(N),this.id=new u.r(S)}catch{throw new w.B}}getLanguage(n){var c=this;return(0,d.Z)(function*(){let f,h,x=yield A.S.getLanguageIds(n);for(let O=0;O<x.length&&!f;O++)h=x[O].value,h&&(f=c.languages.get(h));return f})()}static getNewInstance(n){let c;if(c=new C(n),!c)throw new w.B;return c}static getNewInstanceArray(n){return n.map(C.getNewInstance)}}class a extends i.X{constructor({id:n,postId:c,post:f,price:h,afterChrist:x,artistTypeId:O,dateFormatTypeId:y,date:T,isDraft:N,languages:S}){super(),this.id=n?n instanceof u.r?n:new u.r(n.toString()):null,this.postId=c?c instanceof u.r?c:new u.r(c.toString()):null,this.post=f?f instanceof v.SO?f:new v.SO(f):null,this.price=h||null,this.afterChrist=x,this.artistTypeId=O instanceof u.r?O:new u.r(O.toString()),this.dateFormatTypeId=y?new u.r(y.toString()):null,this.date=T?T instanceof Date?T:new Date(T):null,this.isDraft=N,this.languages=S?S.map(M=>M instanceof g?M:new g(M)):[]}check(){let n=new Map;return this.id&&!this.id.isOk()&&n.set("id","id is not valid"),this.postId&&!this.postId.isOk()&&n.set("postId","postId is not valid"),this.post&&!this.post.isOk()&&n.set("post","post is not valid"),!this.postId&&!this.post&&(n.set("post","post is necessary or postId"),n.set("postId","postId is necessary or post")),this.price&&this.price<0&&n.set("price","price must be greater than 0"),this.artistTypeId&&!this.artistTypeId.isOk()&&n.set("artistTypeId","artistTypeId is not valid"),this.dateFormatTypeId&&!this.dateFormatTypeId.isOk()&&n.set("dateFormatTypeId","dateFormatTypeId is not valid"),this.dateFormatTypeId&&!this.date&&n.set("date","date is necessary"),this.languages&&0!==this.languages.length?this.languages.some(c=>!c.isOk())&&n.set("languages","languages must be valid"):n.set("languages","languages must have at least one language"),n}static get UrlRel(){return"Artworks"}static get UrlRelPost(){return l.y.join(a.UrlRel,"Post")}static get UrlRelPostRelated(){return l.y.join(a.UrlRel,"PostRelated")}static get UrlRelAll(){return l.y.join(a.UrlRel,"all")}static get UrlRelDraft(){return l.y.join(a.UrlRel,"isDraft")}static get UrlRelFilter(){return l.y.join(a.UrlRel,"filter")}static getAllDrafts(){return(0,d.Z)(function*(){return m.V0.get(l.y.join(a.UrlRelAll,"drafts"),!0,C.getNewInstanceArray)})()}static getAllByUserId(n){return(0,d.Z)(function*(){return m.V0.get(l.y.join(a.UrlRelAll,"user",n),!0,C.getNewInstanceArray)})()}static getAllByUserProfileId(n){return(0,d.Z)(function*(){return m.V0.get(l.y.join(a.UrlRelAll,"userProfile",n),!0,C.getNewInstanceArray)})()}static getAllByNickname(n){return(0,d.Z)(function*(){return m.V0.get(l.y.join(a.UrlRelAll,"nickname",n),!0,C.getNewInstanceArray)})()}static getAllPostRelatedById(n){return(0,d.Z)(function*(){return m.V0.get(l.y.join(a.UrlRelPostRelated,n),!0,C.getNewInstanceArray)})()}static getById(n){return(0,d.Z)(function*(){return yield m.V0.get(l.y.join(a.UrlRel,n),!0,C.getNewInstance)})()}static getByTimelapseId(n){return(0,d.Z)(function*(){return yield m.V0.get(l.y.join(a.UrlRel,"timelapse",n),!0,C.getNewInstance)})()}static post(n,c){return(0,d.Z)(function*(){return c instanceof a||(c=new a(c)),m.V0.post(l.y.join(a.UrlRel,n),c,!0,t.t.getNewInstance)})()}static put(n){return(0,d.Z)(function*(){if(n instanceof a||(n=new a(n)),!n.id||!n.id.value)throw new i.G(new Map([["id","id is required"]]));return m.V0.put(l.y.join(a.UrlRel,n.id),n,!0,t.t.getNewInstance)})()}static setDraft(n){return(0,d.Z)(function*(){return m.V0.patch(l.y.join(a.UrlRelDraft,n),null,!0,t.t.getNewInstance)})()}static deleteDraft(n){return(0,d.Z)(function*(){return m.V0.delete(l.y.join(a.UrlRelDraft,n),!0,t.t.getNewInstance)})()}static delete(n){return(0,d.Z)(function*(){return m.V0.delete(l.y.join(a.UrlRel,n),!0,t.t.getNewInstance)})()}static filterOnlyArtwork(n){return(0,d.Z)(function*(){let c=new b(n.map(h=>h?.toString()));if(c.check().size>0)throw new i.G(new Map([["postIds","FilterOnlyArtworkDTO is not valid"]]));return m.V0.post(l.y.join(a.UrlRelFilter,"onlyArtworks"),c,!0,t.t.getNewInstanceArray)})()}}},7555:(D,E,r)=>{r.d(E,{n:()=>i});var d=r(5861),m=r(4065),l=r(2474);class i{static takeArtworks(v){return(0,d.Z)(function*(){return l.SO.take(v)})()}static getUserArtowrks(v){return(0,d.Z)(function*(){return m.i.getAllByNickname(v)})()}static postArtwork(v,t){return(0,d.Z)(function*(){return m.i.post(v,t)})()}}},6362:(D,E,r)=>{r.d(E,{N:()=>u});var d=r(5861),m=r(4650),l=r(9696),i=r(1572);let u=(()=>{class v{constructor(b){this.main=b,this.freq=3}ngOnInit(){return(0,d.Z)(function*(){})()}timeout(){}}return v.\u0275fac=function(b){return new(b||v)(m.\u0275\u0275directiveInject(l.J))},v.\u0275cmp=m.\u0275\u0275defineComponent({type:v,selectors:[["app-loading"]],decls:1,vars:0,template:function(b,g){1&b&&m.\u0275\u0275element(0,"mat-spinner")},dependencies:[i.Ou],styles:["[_nghost-%COMP%]     mat-spinner{margin:20px auto}[_nghost-%COMP%]     mat-spinner circle{stroke:#cacaca}.logo[_ngcontent-%COMP%]{width:100px;animation:girar 1s linear infinite normal}@keyframes girar{to{transform:rotate(360deg)}}"]}),v})()},7493:(D,E,r)=>{r.d(E,{u:()=>tt});var d=r(5861),m=r(1274),l=r(8259),u=r(8879),t=(r(2474),r(4650)),b=r(9696),g=r(6272),w=r(6895),A=r(6362),U=r(7273),C=r(2870);const a=["commentsComponent"],P=["ratingComponent"],n=["post"],c=["swiper"],f=["moreModal"];function h(o,p){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"img",28),t.\u0275\u0275listener("error",function(){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275resetView(_.url="assets/in2art/imatges/noImageBig.png")}),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("src",s.prepareLink(e.path)||e.url,t.\u0275\u0275sanitizeUrl)("alt",s.alt)}}function x(o,p){1&o&&(t.\u0275\u0275elementStart(0,"div",26),t.\u0275\u0275template(1,h,1,2,"img",27),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!0))}function O(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,x,2,1,"div",25),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.p.post?null:e.p.post.files)}}function y(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"div",34),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate((null==e.ratingComponent||null==e.ratingComponent.globalRating?null:e.ratingComponent.globalRating.toFixed(0))||"~")}}function T(o,p){1&o&&(t.\u0275\u0275elementStart(0,"div",34),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate("~"))}function N(o,p){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",29)(1,"button",30),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(_.botoRating_click())}),t.\u0275\u0275elementStart(2,"div",31),t.\u0275\u0275i18n(3,32),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,y,2,1,"div",33),t.\u0275\u0275template(5,T,2,1,"div",33),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",0!=(null==e.ratingComponent?null:e.ratingComponent.globalRating)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0==(null==e.ratingComponent?null:e.ratingComponent.globalRating))}}function S(o,p){if(1&o&&t.\u0275\u0275element(0,"app-user-info",35),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("user",e.p.community)}}function M(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"p",36),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e.p?null:e.p.title)}}function V(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"p",37),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.p.dateMaco)}}function B(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"p",37),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("Unknown",e.p.dateMaco,"")}}function k(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"p",37),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2("",e.p.author,"",e.p.dateMaco,"")}}function $(o,p){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",40),t.\u0275\u0275listener("click",function(){const I=t.\u0275\u0275restoreView(e).$implicit,R=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(R.main.goToMedium(I.text))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=p.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.text)}}function F(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"div",38),t.\u0275\u0275template(1,$,2,1,"button",39),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.p.mediums)}}function W(o,p){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",43),t.\u0275\u0275listener("click",function(){const I=t.\u0275\u0275restoreView(e).$implicit,R=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(R.main.goToMovement(I.text))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=p.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.text)}}function j(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"div",41),t.\u0275\u0275template(1,W,2,1,"button",42),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.p.movements)}}function K(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"p",44),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.p.dimensions)}}function Z(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"p",45),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.p.technique)}}function z(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"p",46),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.p.priceCurrency)}}function G(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"p",47),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e.p?null:e.p.description)}}function X(o,p){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",50),t.\u0275\u0275listener("click",function(){const I=t.\u0275\u0275restoreView(e).$implicit,R=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(R.main.goToTag(I.text))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=p.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("#",e.text,"")}}function Q(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"div",48),t.\u0275\u0275template(1,X,2,1,"button",49),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.p.tags)}}function J(o,p){if(1&o&&(t.\u0275\u0275elementStart(0,"div",51),t.\u0275\u0275element(1,"app-rating",52,53),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("idPostTimeLapseID",e.p.postTimelapseId)}}function H(o,p){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",3,4),t.\u0275\u0275template(2,O,2,1,"div",5),t.\u0275\u0275elementStart(3,"div",6),t.\u0275\u0275listener("dblclick",function(){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.main.logDebug(_))}),t.\u0275\u0275elementStart(4,"div",7)(5,"button",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.botoView_click())}),t.\u0275\u0275element(6,"img",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",10),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.openMoreModal())}),t.\u0275\u0275element(8,"img",11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(9,N,6,2,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",13)(11,"div"),t.\u0275\u0275template(12,S,1,1,"app-user-info",14),t.\u0275\u0275template(13,M,2,1,"p",15),t.\u0275\u0275template(14,V,2,1,"p",16),t.\u0275\u0275template(15,B,2,1,"p",16),t.\u0275\u0275template(16,k,2,2,"p",16),t.\u0275\u0275template(17,F,2,1,"div",17),t.\u0275\u0275template(18,j,2,1,"div",18),t.\u0275\u0275template(19,K,2,1,"p",19),t.\u0275\u0275template(20,Z,2,1,"p",20),t.\u0275\u0275template(21,z,2,1,"p",21),t.\u0275\u0275template(22,G,2,1,"p",22),t.\u0275\u0275template(23,Q,2,1,"div",23),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(24,J,3,1,"div",24),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classProp("preview",e.preview)("active",e.active),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",0!=(null==e.p||null==e.p.post?null:e.p.post.files)),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",null!=e.p.artworkId),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.selfUser(null==e.p||null==e.p.community?null:e.p.community.nickname)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e.p?null:e.p.title),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",1==e.p.authorType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",2==e.p.authorType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",3==e.p.authorType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.p.mediums),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.p.movements),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.p.dimensions),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.p.technique),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.p.priceCurrency),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e.p?null:e.p.description),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.p.tags),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.preview||null!=e.p.artworkId)}}function Y(o,p){1&o&&(t.\u0275\u0275elementStart(0,"div",54),t.\u0275\u0275element(1,"app-loading"),t.\u0275\u0275elementEnd())}function q(o,p){1&o&&(t.\u0275\u0275elementStart(0,"div",55),t.\u0275\u0275i18n(1,56),t.\u0275\u0275elementEnd())}u.ZP.use([u.W_,u.tl,u.LW,u.eZ]);let tt=(()=>{class o{constructor(e,s){this.main=e,this.route=s,this.preview=!1,this.active=!1,this.viewPostEnviat=!1,this.preparedP="http://192.168.1.136:1339/311c6497-8afb-4a18-b98a-564ff71fe4a2.jpg",this.alt="",this.autoplay=!0,this.viewOpen=!1,this.ratingOpen=!1,this.commentOpen=!1,this.loadingShared=!1,this.swipeContentPublicacioConfig={autoHeight:!0,resistanceRatio:.666,grabCursor:!1,scrollbar:{draggable:!0},threshold:10}}ngOnInit(){var e=this;return(0,d.Z)(function*(){if(!e.p)return;yield e.p.post?.getLanguage(e.main.getLocale()).then(I=>{null!=I&&(null!=I.title&&(e.p.title=I.title),null!=I.description&&(e.p.description=I.description))}),e.alt=`${e.p.title||(e.p.esObra?"Artwork":"Post")} from ${e.p.author}. ${e.p.description}`,!e.p.dateMaco&&e.p.date&&(e.p.dateMaco=new Date(e.p.date).toLocaleDateString(e.main.getLocale(),{dateStyle:"long"})),1!=e.p.authorType&&""!=e.p.dateMaco&&(e.p.dateMaco=`, (${e.p.dateMaco})`),l("video").prop("muted",!0),e.marcarPostActiu(),e.reproduirVideoPostActiu();let _=e;l(window).scroll(function(){_.marcarPostActiu()}),e.route.snapshot.queryParams.comment&&e.openDivComment()})()}prepareLink(e){return m.c.prependImagesUrl(e)}isArtwork(e){return!!e.artist}selfUser(e){return e==this.main.apiHelpers.currentUser.nickname}openDivComment(){let e=setInterval(()=>{document.body.contains(document.querySelector(".divComment"))&&(clearInterval(e),this.botoComment_click(),this.findComment(this.route.snapshot.queryParams.comment))},350)}findComment(e){let s=setInterval(()=>{document.body.contains(document.getElementById(`comment-${e}`))&&(clearInterval(s),this.checkComment(e)&&(document.getElementById(`comment-${e}`).parentElement.parentElement.parentElement.style.display="block"),document.getElementById(`comment-${e}`).scrollIntoView({behavior:"smooth"}),document.getElementById(`comment-${e}`).style.background="#9929296e")},350)}checkComment(e){return"mainComment"!=document.getElementById(`comment-${e}`).parentNode.parentElement.className.split(" ")[0]}botoComment_click(){this.viewOpen=!1,this.commentOpen=!this.commentOpen,this.ratingOpen=!1,this.actView(),this.actComment(),this.actRating()}botoView_click(){this.viewOpen=!this.viewOpen,this.commentOpen=!1,this.ratingOpen=!1,this.actView(),this.actComment(),this.actRating()}botoRating_click(){this.viewOpen=!1,this.commentOpen=!1,this.ratingOpen=!this.ratingOpen,this.actView(),this.actComment(),this.actRating()}actComment(){let e=l(this.post.nativeElement).find(".botoComment"),s=l(this.post.nativeElement).find(".divComment");e.attr("data-open",this.commentOpen),this.commentOpen?s.slideDown(300):s.slideUp(300)}actView(){let e=l(this.post.nativeElement).find(".botoView"),s=l(this.post.nativeElement).find(".divInfo");e.attr("data-open",this.viewOpen),this.viewOpen?s.slideDown(300):s.slideUp(300)}actRating(){let e=l(this.post.nativeElement).find(".botoRating"),s=l(this.post.nativeElement).find(".divRating");e.attr("data-open",this.ratingOpen),this.ratingOpen?s.slideDown(300):s.slideUp(300)}marcarPostActiu(){let e=l("swiper.swipeContentPublicacio:in-viewport").first();if(!e.length)return;this.swiperActiu=e[0].swiper;let s=e.parents(".post");this.active=s[0]==this.post?.nativeElement,this.active&&this.reproduirVideoPostActiu()}reproduirVideoPostActiu(){var e=this;return(0,d.Z)(function*(){let s=l(".post.active .swipeContentPublicacio .swiper-slide.swiper-slide-active video").first();s.length&&(yield s[0].play()),e.pausaAltresVideos(s)})()}reproduirVideoAquestSlide(e){var s=this;return(0,d.Z)(function*(){if(s.autoplay){let _=l(e.slides).filter(".swiper-slide.swiper-slide-active").find("video").first();_.length&&(yield _[0].play()),s.pausaAltresVideos(_)}})()}video_click(e){l(e).prop("paused")?this.autoplay||(this.autoplay=!0):this.autoplay=!this.autoplay,this.playPauseVideo(e),this.pausaAltresVideos(e)}playPauseVideo(e){l(e).trigger(l(e).prop("paused")?"play":"pause")}pausaAltresVideos(e){l(".post .swiper-slide video").not(e).trigger("pause")}openMoreModal(){let e={accio:()=>{this.main.notInMyBeta()},img:"assets/in2art/icones/view-collection.svg",text:this.main.t("View collection"),class:"view"},s={accio:()=>{this.main.notInMyBeta()},img:"assets/in2art/icones/save.svg",text:this.main.t("Save"),class:"save"},_={img:"assets/in2art/icones/share.svg",text:this.main.t("Share"),class:"share"},I={accio:()=>{this.main.copy(this.main.urlBase+"/post/"+this.p.idPost)},img:"assets/in2art/icones/link.svg",text:this.main.t("Copy URL"),class:"copy"},R={accio:()=>{this.main.notInMyBeta()},img:"assets/in2art/icones/report.svg",text:this.main.t("Report"),class:"report"},L=[e,s,_];window.isSecureContext&&L.push(I),this.main.currentUser.username!=this.p.user.username&&L.push(R)}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(b.J),t.\u0275\u0275directiveInject(g.gz))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-publicacio"]],viewQuery:function(e,s){if(1&e&&(t.\u0275\u0275viewQuery(a,5),t.\u0275\u0275viewQuery(P,5),t.\u0275\u0275viewQuery(n,5),t.\u0275\u0275viewQuery(c,5),t.\u0275\u0275viewQuery(f,5)),2&e){let _;t.\u0275\u0275queryRefresh(_=t.\u0275\u0275loadQuery())&&(s.commentsComponent=_.first),t.\u0275\u0275queryRefresh(_=t.\u0275\u0275loadQuery())&&(s.ratingComponent=_.first),t.\u0275\u0275queryRefresh(_=t.\u0275\u0275loadQuery())&&(s.post=_.first),t.\u0275\u0275queryRefresh(_=t.\u0275\u0275loadQuery())&&(s.swiper=_.first),t.\u0275\u0275queryRefresh(_=t.\u0275\u0275loadQuery())&&(s.moreModal=_.first)}},inputs:{postId:"postId",p:"p",idObra:"idObra",preview:"preview"},decls:3,vars:3,consts:function(){let p,e;return p="Vota",e="No s'ha trobat cap publicaci\xF3/obra d'art\n",[["class","post",3,"preview","active",4,"ngIf"],["class","carregant",4,"ngIf"],["class","p-4 fs-2 align-center",4,"ngIf"],[1,"post"],["post",""],[4,"ngIf"],[1,"botons","row","no-gutters",3,"dblclick"],[1,"col-5","col-sm-3","row","no-gutters",2,"height","100%"],[1,"col-5","col-sm-5","boto","botoView",3,"click"],["src","assets/in2art/icones/View.svg","alt","View"],[1,"col-5","col-sm-5","boto","botoMore",3,"click"],["src","assets/in2art/icones/More.svg","alt","More"],["class","col-4 col-sm-7 divBotoRating",4,"ngIf"],[1,"divInfo",2,"display","none"],[3,"user",4,"ngIf"],["class","title",4,"ngIf"],["class","authorAndDate",4,"ngIf"],["class","divMediums",4,"ngIf"],["class","divMovements",4,"ngIf"],["class","dimensions",4,"ngIf"],["class","technique",4,"ngIf"],["class","price",4,"ngIf"],["class","description",4,"ngIf"],["class","divTags",4,"ngIf"],["class","divRating nodrag noselect","style","display: none;",4,"ngIf"],["class","filesImage",4,"ngFor","ngForOf"],[1,"filesImage"],["class","media-content",3,"src","alt","error",4,"ngIf"],[1,"media-content",3,"src","alt","error"],[1,"col-4","col-sm-7","divBotoRating"],[1,"botoRating","boto","botoPrincipal",3,"click"],[1,"text"],p,["class","puntuacio",4,"ngIf"],[1,"puntuacio"],[3,"user"],[1,"title"],[1,"authorAndDate"],[1,"divMediums"],["class","boto botoSecundari botoMedium",3,"click",4,"ngFor","ngForOf"],[1,"boto","botoSecundari","botoMedium",3,"click"],[1,"divMovements"],["class","boto botoSecundari botoMovement",3,"click",4,"ngFor","ngForOf"],[1,"boto","botoSecundari","botoMovement",3,"click"],[1,"dimensions"],[1,"technique"],[1,"price"],[1,"description"],[1,"divTags"],["class","boto botoTag",3,"click",4,"ngFor","ngForOf"],[1,"boto","botoTag",3,"click"],[1,"divRating","nodrag","noselect",2,"display","none"],[3,"idPostTimeLapseID"],["ratingComponent",""],[1,"carregant"],[1,"p-4","fs-2","align-center"],e]},template:function(e,s){1&e&&(t.\u0275\u0275template(0,H,25,19,"div",0),t.\u0275\u0275template(1,Y,2,0,"div",1),t.\u0275\u0275template(2,q,2,0,"div",2)),2&e&&(t.\u0275\u0275property("ngIf",s.p&&0!=(null==s.p.post?null:s.p.post.files)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",void 0===s.p),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null===s.p))},dependencies:[w.NgForOf,w.NgIf,A.N,U.M,C.A],styles:['@charset "UTF-8";  .post.preview .botoComment,   .post.preview .botoMore,   .post.preview .botoRating,   .post.preview app-user-info .boto.usuari,   .post.preview .botoMedium,   .post.preview .botoMovement,   .post.preview .botoTag{pointer-events:none}.post[_ngcontent-%COMP%]{background-color:var(--color-fons-card);border:var(--border-card);box-shadow:0 19px 38px #0000004d,0 15px 12px #00000038;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;border-radius:0;margin:0 auto;overflow:hidden;text-align:left}.post[_ngcontent-%COMP%]   .filesImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:cover;margin-left:auto;margin-right:auto;display:block}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]{height:50px;border-top:var(--border-card)}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoView[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoComment[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoMore[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divRating[_ngcontent-%COMP%]{border:none;background:none;height:100%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoView[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoComment[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoMore[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divRating[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{pointer-events:none;height:80%;width:45%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoView[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotateX(0);transition:transform .3s linear}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoView[data-open=true][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotateX(180deg)}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   button.botoMore[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divBotoRating[_ngcontent-%COMP%]   button.botoRating[_ngcontent-%COMP%]{display:inline-flex;border-radius:50px;padding:0;margin-top:9px;margin-left:15px;font-size:1rem}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divBotoRating[_ngcontent-%COMP%]   button.botoRating[_ngcontent-%COMP%]   div.text[_ngcontent-%COMP%]{font-size:inherit;margin:auto 3px auto 9px}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   .divBotoRating[_ngcontent-%COMP%]   button.botoRating[_ngcontent-%COMP%]   div.puntuacio[_ngcontent-%COMP%]{overflow:hidden;font-size:inherit;background-color:var(--color-fons-card);color:var(--color-text);border-radius:20px;margin:4px;height:24px;width:38px}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   div.botonsSlider[_ngcontent-%COMP%]{height:100%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   div.botonsSlider[_ngcontent-%COMP%]   .botoSlider[_ngcontent-%COMP%]{border:none;background:none;height:100%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   div.botonsSlider[_ngcontent-%COMP%]   .botoSlider[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{pointer-events:none;height:50%;width:70%}.post[_ngcontent-%COMP%]   .botons[_ngcontent-%COMP%]   div.botonsSlider[_ngcontent-%COMP%]   .botoSlider[_ngcontent-%COMP%]:disabled{opacity:0}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]{padding:20px;text-align:left}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   app-user-info[_ngcontent-%COMP%]{display:flex;width:-moz-fit-content;width:fit-content;background:var(--color-fons-card-2);border:var(--border-card);border-radius:50px;margin:0px auto 1rem 0;transition:all .2s}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:30px}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .authorAndDate[_ngcontent-%COMP%]{font-size:20px}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMediums[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMovements[_ngcontent-%COMP%]{margin-bottom:1rem}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMediums[_ngcontent-%COMP%]   .botoMedium[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMediums[_ngcontent-%COMP%]   .botoMovement[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMovements[_ngcontent-%COMP%]   .botoMedium[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .divMovements[_ngcontent-%COMP%]   .botoMovement[_ngcontent-%COMP%]{margin:0 10px 5px 0}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:700;color:#b20}.post[_ngcontent-%COMP%]   .divInfo[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{white-space:pre-line;color:gray;font-size:17px}[_nghost-%COMP%]     .post swiper .media-content{width:100%;max-height:80vh;object-fit:contain;display:block;margin:auto}[_nghost-%COMP%]     .post swiper .swiper-scrollbar{width:100%;left:0;bottom:0;height:3px;border-radius:10px;background:rgba(0,0,0,.1333333333)}[_nghost-%COMP%]     .post swiper .swiper-scrollbar .swiper-scrollbar-drag{border-radius:10px;background:var(--color-text)}']}),o})()},7273:(D,E,r)=>{r.d(E,{M:()=>C});var d=r(5861),m=r(1274),l=r(3769),i=r(4650),u=r(9696),v=r(6895),t=r(2839);function b(a,P){if(1&a){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",2),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(n);const f=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(f.main.goTo(f.user.nickname))}),i.\u0275\u0275element(1,"app-foto-perfil",3),i.\u0275\u0275elementStart(2,"div",4)(3,"div",5),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()()()}if(2&a){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("user",n.user),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate2("",n.user.name," ",n.user.lastName,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("@",n.user.nickname,"")}}function g(a,P){1&a&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275i18n(1,8),i.\u0275\u0275elementEnd())}function w(a,P){if(1&a&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&a){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1("@",n.user.nickname,"")}}function A(a,P){if(1&a){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",2),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(n);const f=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(f.main.goTo(f.user.nickname))}),i.\u0275\u0275element(1,"app-foto-perfil",3),i.\u0275\u0275elementStart(2,"div",4)(3,"div",5),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,w,2,1,"div",9),i.\u0275\u0275elementEnd()()}if(2&a){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("user",n.user),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate2("",n.user.name," ",n.user.lastName,""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!(null!=n.user&&n.user.anonNickname))}}function U(a,P){1&a&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275i18n(1,10),i.\u0275\u0275elementEnd())}let C=(()=>{class a{constructor(n){this.main=n,this.utils=m.c,this.isAnonUser=!1,this.anonUser={name:"Anonymous",lastName:"",anonNickname:"Anonymous",photo:"assets/in2art/imatges/profileDefaultSolidGray.png"}}ngOnInit(){var n=this;return(0,d.Z)(function*(){"Anonymous"!=n.user?.username&&n.user?.profile?(n.id&&(n.user=yield l.J.getUserById(n.id)),n.username&&(n.user=yield l.J.getUserByNickname(n.username)),n.user&&(n.user=yield l.J.getUserById(n.user.userProfileId))):(null==n.user||null==n.user)&&(n.isAnonUser=!0,n.user=n.anonUser)})()}}return a.\u0275fac=function(n){return new(n||a)(i.\u0275\u0275directiveInject(u.J))},a.\u0275cmp=i.\u0275\u0275defineComponent({type:a,selectors:[["app-user-info"]],inputs:{id:"id",username:"username",user:"user"},decls:4,vars:4,consts:function(){let P,n;return P="Carregant...",n="Carregant...",[["class","boto botoGeneric usuari",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],[1,"boto","botoGeneric","usuari",3,"click"],[3,"user"],[1,"textosUsuari"],[1,"nom"],[1,"username"],[1,"loading"],P,["class","username",4,"ngIf"],n]},template:function(n,c){1&n&&(i.\u0275\u0275template(0,b,7,4,"button",0),i.\u0275\u0275template(1,g,2,0,"div",1),i.\u0275\u0275template(2,A,6,4,"button",0),i.\u0275\u0275template(3,U,2,0,"div",1)),2&n&&(i.\u0275\u0275property("ngIf",!c.anonUser),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!c.user),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.anonUser),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!c.user))},dependencies:[v.NgIf,t.d],styles:[".usuari[_ngcontent-%COMP%]{background-color:transparent;height:6rem;padding:1rem;border-radius:inherit;display:inline-flex}.usuari[_ngcontent-%COMP%]   app-foto-perfil[_ngcontent-%COMP%]{height:100%}.usuari[_ngcontent-%COMP%]   .textosUsuari[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}.usuari[_ngcontent-%COMP%]   .textosUsuari[_ngcontent-%COMP%]   .nom[_ngcontent-%COMP%]{font-size:1.4rem}.usuari[_ngcontent-%COMP%]   .textosUsuari[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:1rem;color:gray}.loading[_ngcontent-%COMP%]{line-height:6rem;font-size:1.2rem;padding:0 20px;font-weight:700;animation:loadingText 1s ease infinite alternate}@keyframes loadingText{0%{color:var(--color-text)}to{color:gray}}@media only screen and (max-width: 576px){.textosUsuari[_ngcontent-%COMP%]   .nom[_ngcontent-%COMP%]{font-size:4vw}.textosUsuari[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:2vw}}"]}),a})()}}]);