"use strict";(self.webpackChunkWebAppNew=self.webpackChunkWebAppNew||[]).push([[210],{5219:(b,M,a)=>{a.d(M,{T:()=>A});var F=a(5861),t=a(4650),_=a(6345),g=a(6895);function S(e,m){if(1&e&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275i18n(1,3),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275i18nExp(n.text||n.nomText+" is required"),t.\u0275\u0275i18nApply(1)}}function R(e,m){if(1&e&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275i18n(1,4),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275i18nExp(n.nomText)(n.control.errors.minlength.actualLength)(null==n.control.errors?null:n.control.errors.minlength.requiredLength),t.\u0275\u0275i18nApply(1)}}function v(e,m){if(1&e&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275i18n(1,5),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275i18nExp(n.nomText)(n.control.errors.maxlength.actualLength)(null==n.control.errors?null:n.control.errors.maxlength.requiredLength),t.\u0275\u0275i18nApply(1)}}function P(e,m){if(1&e&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275i18n(1,6),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275i18nExp(n.nomText),t.\u0275\u0275i18nApply(1)}}function h(e,m){if(1&e&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",n.nomText," already exists")}}function N(e,m){if(1&e&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275i18n(1,7),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275i18nExp(n.nomText),t.\u0275\u0275i18nApply(1)}}function C(e,m){if(1&e&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,S,2,1,"div",1),t.\u0275\u0275template(2,R,2,3,"div",1),t.\u0275\u0275template(3,v,2,3,"div",1),t.\u0275\u0275template(4,P,2,1,"div",1),t.\u0275\u0275template(5,h,2,1,"div",1),t.\u0275\u0275template(6,N,2,1,"div",1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.minlength),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.maxlength),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.email),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.notUnique),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.control.errors?null:n.control.errors.pattern)}}let A=(()=>{class e{constructor(n){this.main=n}ngOnInit(){var n=this;return(0,F.Z)(function*(){console.log("Control: ",n.control)})()}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275directiveInject(_.J))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["app-missatge-error-form"]],inputs:{control:"control",text:"text",nomText:"nomText"},decls:1,vars:1,consts:function(){let m,n,E,T,O;return m="{{text || nomText + \" \xE9s obligatori\"}}",n="" + "\ufffd0\ufffd" + " \xE9s massa curt (" + "\ufffd1\ufffd" + "/" + "\ufffd2\ufffd" + ")",E="" + "\ufffd0\ufffd" + " \xE9s massa llarg (" + "\ufffd1\ufffd" + "/" + "\ufffd2\ufffd" + ")",T="" + "\ufffd0\ufffd" + " t\xE9 un format incorrecte",O="" + "\ufffd0\ufffd" + " t\xE9 un format incorrecte",[[4,"ngIf"],["class","textErrorForm",4,"ngIf"],[1,"textErrorForm"],m,n,E,T,O]},template:function(n,E){1&n&&t.\u0275\u0275template(0,C,7,6,"div",0),2&n&&t.\u0275\u0275property("ngIf",null==E.control?null:E.control.touched)},dependencies:[g.NgIf]}),e})()},8210:(b,M,a)=>{a.r(M),a.d(M,{EditProfileModule:()=>W});var F=a(6895),t=a(1670),_=a(4006),g=a(5861),S=a(1274),R=a(5009),v=a(4756),P=a(872),h=a(4004),N=a(7873);let C=(()=>{class i{static getDefaultPhotoDataUrl(){return`data:image/${this.FILE_EXT};base64,${this.BASE64}`}}return i.FILE_NAME="profilePicture",i.FILE_EXT="png",i.BASE64="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",i})();var A=a(4506),e=a(4650),m=a(6345),n=a(7753),E=a(1481),T=a(9653),O=a(8291),I=a(6362),L=a(5219);const y=["uploadFileModal"],D=["imageCropper"];function G(i,s){if(1&i&&e.\u0275\u0275element(0,"video",37),2&i){const o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("src",o.form.controls.photo.value,e.\u0275\u0275sanitizeUrl)}}function k(i,s){if(1&i&&e.\u0275\u0275template(0,G,1,1,"video",36),2&i){const o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",!o.mostrarComoImagen)}}function z(i,s){if(1&i&&e.\u0275\u0275element(0,"img",38),2&i){const o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",o.form.controls.photo.value,e.\u0275\u0275sanitizeUrl)}}function w(i,s){if(1&i){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.removePhoto())}),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd()}}function U(i,s){if(1&i){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",14)(1,"div",15)(2,"button",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.openUploadFileModal())}),e.\u0275\u0275template(3,k,1,1,"ng-template",null,17,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,z,1,1,"img",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275template(7,w,2,0,"button",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",20)(9,"label",21),e.\u0275\u0275i18n(10,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",23)(12,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",20)(14,"label",25),e.\u0275\u0275i18n(15,26),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"input",27)(17,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",20)(19,"label",25),e.\u0275\u0275i18n(20,28),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"input",29)(22,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",20)(24,"label",25),e.\u0275\u0275i18n(25,30),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",31)(27,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",20)(29,"label",25),e.\u0275\u0275i18n(30,32),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(31,"textarea",33)(32,"app-missatge-error-form",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",34)(34,"input",35),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.submit())}),e.\u0275\u0275elementEnd()()()}if(2&i){const o=e.\u0275\u0275reference(4),r=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",r.form),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",r.mostrarComoImagen)("ngIfElse",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.form.controls.photo.value),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",r.form.controls.name.value)("nomText","name"),e.\u0275\u0275advance(4),e.\u0275\u0275attribute("disabled",!!r.inputDeshabilitado||null),e.\u0275\u0275advance(1),e.\u0275\u0275property("control",r.form.controls.email.value)("nomText","email"),e.\u0275\u0275advance(4),e.\u0275\u0275attribute("disabled",!!r.inputDeshabilitado||null),e.\u0275\u0275advance(1),e.\u0275\u0275property("control",r.form.controls.username.value)("nomText","username"),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",r.form.controls.web.value)("nomText","website"),e.\u0275\u0275advance(5),e.\u0275\u0275property("control",r.form.controls.bio.value)("nomText","bio"),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!r.isFormDataChanged()&&!r.fotoModificada)}}function B(i,s){1&i&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275element(1,"app-loading"),e.\u0275\u0275elementEnd())}let Q=(()=>{class i{constructor(o,r,l,d,c){this.main=o,this.fb=r,this.modalService=l,this.domSanitizer=d,this.store=c,this.files=[],this.validate=!1,this.fotoModificada=!1,this.mostrarComoImagen=!1,this.inputDeshabilitado=!0,this.mostrarFileRequired=!1,o.newPage(this),this.form=this.fb.group({id:[""],photo:[""],name:[""],lastName:[""],bio:[""],email:[""],username:[""],phone:[""],address:[""],web:[""]}),this.$user=this.store.select(N.dy).pipe((0,h.U)(u=>u.user)),this.$user.subscribe(u=>{this.ownUser=u})}ngOnInit(){var o=this;return(0,g.Z)(function*(){console.log("Own user: ",o.ownUser.userId);let r=o.ownUser.userId;o.carregant=!0;try{const l=yield R.Iw.getById(r),d=yield A.G.getAll(),c=o.ownUser;console.log("Usuari edit-profile:",l.data),console.log("log user: ",c),console.log("Photo: ",P.pz.getUrlImageThumbnail({pictureId:c.photo,id:c.userId})),o.form.controls.photo.setValue(P.pz.getUrlImageThumbnail({pictureId:c.photo,id:c.userId})),o.form.controls.name.setValue((l.data.name||"").trim()),o.form.controls.bio.setValue((l.data.languages[0].biography||"").trim()),o.form.controls.email.setValue(d._data.items[0].email||""),o.form.controls.username.setValue((c.nickname||"").trim()),o.form.controls.web.setValue((l.data.languages[0].website||"").trim())}catch(l){console.error("Error al obtenir les dades del usuari:",l)}finally{o.carregant=!1}o.originalFormData=o.form.value})()}ngOnDestroy(){this.closeUploadFileModal(!1),this.main.onDestroyPage()}isFormDataChanged(){const o=this.trimFormValues(this.form.value);return JSON.stringify(this.originalFormData)!==JSON.stringify(o)}trimFormValues(o){const r=JSON.parse(JSON.stringify(o));return Object.keys(r).forEach(l=>{"string"==typeof r[l]&&(r[l]=r[l].trim())}),r}openUploadFileModal(){this.modalService.open(this.uploadFileModal,{size:"lg",modalClass:"uploadFileModal",backdropClass:"modal-backdrop",hideCloseButton:!1,centered:!0,backdrop:!0,animation:!0,keyboard:!0,closeOnOutsideClick:!1})}closeUploadFileModal(o){o&&(this.form.controls.photo.setValue(this.imageCropper.croppedImage),this.fotoModificada=!0),this.modalService.close(this.uploadFileModal)}removePhoto(){this.form.controls.photo.setValue(C.getDefaultPhotoDataUrl()),this.imageCropper.removePhoto(),this.fotoModificada=!0,this.mostrarComoImagen=!0,console.log(C.getDefaultPhotoDataUrl())}uploadPhoto(){var o=this;return(0,g.Z)(function*(){o.fotoModificada=!0,o.fotoModificada&&(console.log("foto modificada"),o.form.controls.photo.setValue(o.imageCropper.croppedImage),o.mostrarComoImagen=!0,o.modalService.close(o.uploadFileModal),console.log(o.form.controls.photo.value))})()}submit(){var o=this;return(0,g.Z)(function*(){if(o.form.markAllAsTouched(),o.mostrarFileRequired=!S.c.objPle(o.files),o.fotoModificada=!0,!o.form.valid)return console.log("--- INV\xc0LID ---"),void console.log("Form error!: ",o.form);const r=new FormData;let l;if(o.fotoModificada){var d=o.form.controls.photo.value||o.imageCropper.croppedImage;d&&d.includes("base64,")?(l={dataBase64:d.substr(d.indexOf("base64,")+7),fileName:"userProfile",fileExt:o.main.getStringBetween(d,"data:image/",";base64,")},console.log(l)):(console.log("La foto no ha estat modificada o blobStr no cont\xe9 informaci\xf3 v\xe0lida"),l=null)}r.append("name",o.form.controls.name.value),r.append("lastName",o.form.controls.lastName.value),r.append("bio",o.form.controls.bio.value),r.append("web",o.form.controls.web.value);let c=new R.Iw({photo:l||null,name:o.form.controls.name.value||null,nickname:o.form.controls.username.value||null,languages:[{biography:o.form.controls.bio.value||null,website:o.form.controls.web.value||null,langCode:"es-ca"}]});console.log("allNewInfo: ",c);try{yield R.Iw.put(c).then(function(){var u=(0,g.Z)(function*(p){p.IsOk?(console.log("OK. Message:",p),yield v.Pe.newCurrentUser(),o.main.goToProfile(),o.main.toastSuccess("Les dades s'han modificat correctament"),o.form.markAsPristine(),o.mostrarComoImagen=!1):(console.error("Error. Message:",p),o.main.toastDanger("No s'ha pogut canviar les teves dades"))});return function(p){return u.apply(this,arguments)}}())}catch(u){console.error("Error:",u)}o.carregantSave=!0})()}}return i.\u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(m.J),e.\u0275\u0275directiveInject(_.qu),e.\u0275\u0275directiveInject(n.gk),e.\u0275\u0275directiveInject(E.H7),e.\u0275\u0275directiveInject(T.yh))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-edit-profile"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(y,5),e.\u0275\u0275viewQuery(D,5)),2&o){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(r.uploadFileModal=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(r.imageCropper=l.first)}},decls:21,vars:3,consts:function(){let s,o,r,l,d,c,u,p;return s="Tanca",o="Guarda",r="Nom",l="Correu electr\xF2nic",d="Nom d'usuari",c="P\xE0gina web",u="Biografia",p="Elimina foto",[[1,"content"],[1,"card"],[1,"card-body"],["class","theme-form",3,"formGroup",4,"ngIf"],["class","carregant",4,"ngIf"],["id","uploadFileModal",1,"uploadFileModal"],["uploadFileModal",""],["id","label"],["imageCropper",""],["id","buttons"],[1,"boto","botoPrincipal","botoGran",3,"click"],s,[1,"boto","botoPrincipal","botoGran",3,"disabled","click"],o,[1,"theme-form",3,"formGroup"],[1,"divBotoFoto","form-grup"],["data-content","Change photo",1,"botoFoto",3,"click"],["videoBlock",""],["class","foto","alt","profile_img",3,"src",4,"ngIf","ngIfElse"],["class","boto botoVermell botoPetit removePhoto",3,"click",4,"ngIf"],[1,"form-grup","row","no-gutters"],[1,"col-form-label","col-sm-12","col-xl-3","asterisc"],r,["type","text","formControlName","name",1,"form-camp","col-sm-12","col-xl-9"],[3,"control","nomText"],[1,"col-form-label","col-sm-12","col-xl-3"],l,["type","text","formControlName","email",1,"form-camp","col-sm-12","col-xl-9"],d,["type","text","formControlName","username",1,"form-camp","col-sm-12","col-xl-9"],c,["type","text","formControlName","web",1,"form-camp","col-sm-12","col-xl-9"],u,["maxlength","3000","formControlName","bio",1,"form-camp","col-sm-12","col-xl-9"],[2,"text-align","center"],["type","button","value","Save",1,"boto","botoPrincipal","botoGran",3,"disabled","click"],["class","foto",3,"src",4,"ngIf"],[1,"foto",3,"src"],["alt","profile_img",1,"foto",3,"src"],[1,"boto","botoVermell","botoPetit","removePhoto",3,"click"],p,[1,"carregant"]]},template:function(o,r){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),e.\u0275\u0275template(3,U,35,17,"form",3),e.\u0275\u0275template(4,B,2,0,"div",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"modal",5,6),e.\u0275\u0275element(7,"modal-header"),e.\u0275\u0275elementStart(8,"modal-content")(9,"div",7)(10,"b")(11,"label"),e.\u0275\u0275text(12,"Elige una foto:"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(13,"app-image-croper",null,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"modal-footer")(16,"div",9)(17,"button",10),e.\u0275\u0275listener("click",function(){return r.closeUploadFileModal(!1)}),e.\u0275\u0275i18n(18,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",12),e.\u0275\u0275listener("click",function(){return r.uploadPhoto()}),e.\u0275\u0275i18n(20,13),e.\u0275\u0275elementEnd()()()()),2&o&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!r.carregant),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.carregant),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",!r.main.getCroppedImageBase64()))},dependencies:[O.r,F.NgIf,_._Y,_.Fj,_.JJ,_.JL,_.nD,_.sg,_.u,I.N,L.T,n.zS,n.YI,n.Ef,n.Rb],styles:[".content[_ngcontent-%COMP%]{max-width:940px;padding:100px 0;border:none}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:40px}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]{text-align:center}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover;padding:0;margin-bottom:10px;border:none;border-radius:10000px;overflow:hidden;position:relative}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]:after{content:attr(data-content);font-size:20px;line-height:150px;color:#fff;position:absolute;width:100%;height:100%;top:0;left:0;background-color:#0008;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);opacity:0;border-radius:10000px;transition:all .2s}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]:hover:after{opacity:1}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .divBotoFoto[_ngcontent-%COMP%]   button.botoFoto[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]{width:inherit;border-radius:160px;max-width:100%;max-height:100%;object-fit:cover;border:50px;pointer-events:none}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:0;padding:7px 0}.content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grup[_ngcontent-%COMP%]   .form-camp[_ngcontent-%COMP%]{padding:6px 12px;border-width:1px;border-radius:20px}.carregant[_ngcontent-%COMP%]   app-loading[_ngcontent-%COMP%]{margin:100px auto}  .uploadFileModal .modal-header{background-color:#292828;border-bottom:none}  .uploadFileModal .modal-header button{border:none;background-color:#292828}  .uploadFileModal .modal-content{background-color:#292828;border:3px solid white;padding:30px}  .uploadFileModal .modal-content #label{display:flex;justify-content:center;width:100%}  .uploadFileModal .modal-content #label label{font-size:25px;font-family:Roboto,sans-serif}  .uploadFileModal .modal-footer{margin:30px}  .uploadFileModal .modal-footer button{font-weight:700}  .uploadFileModal .modal-footer button:first-child{background-color:#292828;color:#fff;font-weight:700}@media (max-width: 667px){  .uploadFileModal .modal-footer{display:flex;justify-content:space-around}}@media (max-width: 500px){  .uploadFileModal .modal-footer{display:flex}  .uploadFileModal .modal-footer button{width:100%;margin:10px}}@media (max-width: 400px){  .uploadFileModal .modal-footer{width:auto;display:flex;justify-content:center;align-items:center}  .uploadFileModal .modal-footer button{width:100%;margin:10px}}"]}),i})();var x=a(4270);const V=[{path:"",children:[{path:"",component:Q}]}];let X=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[x.Bz.forChild(V),x.Bz]}),i})();var J=a(9806);let W=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[X,J.z,F.CommonModule,t.m,_.u5,n.zk]}),i})()}}]);