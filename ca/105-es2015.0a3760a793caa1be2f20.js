(self.webpackChunkcuba=self.webpackChunkcuba||[]).push([[105],{105:function(t,n,e){"use strict";e.r(n),e.d(n,{NotificationsRoutingModule:function(){return _}});var i=e(2080),o=e(4762);class a{constructor(t,n){this.user=t,this.msgInfo=n}}var c=e(5366),r=e(1407),s=e(4596),l=e(1116),d=e(5641),f=e(4616);function p(t,n){1&t&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275element"](1,"app-loading"),c["\u0275\u0275elementEnd"]())}function g(t,n){1&t&&c["\u0275\u0275element"](0,"app-notification",13),2&t&&c["\u0275\u0275property"]("notification",n.$implicit)}function m(t,n){1&t&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div",14),c["\u0275\u0275elementContainerStart"](2),c["\u0275\u0275i18n"](3,15),c["\u0275\u0275elementContainerEnd"](),c["\u0275\u0275text"](4,"\xa0"),c["\u0275\u0275element"](5,"i",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())}function u(t,n){if(1&t&&(c["\u0275\u0275elementStart"](0,"div",10),c["\u0275\u0275template"](1,g,1,1,"app-notification",11),c["\u0275\u0275template"](2,m,6,0,"div",12),c["\u0275\u0275elementEnd"]()),2&t){const t=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",!(1==t.tabActiu)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.userNotifications),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.userNotifications.length&&1!=t.carregantProfile)}}function b(t,n){1&t&&c["\u0275\u0275element"](0,"app-notification",18),2&t&&c["\u0275\u0275property"]("notification",n.$implicit)}function v(t,n){1&t&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div",14),c["\u0275\u0275elementContainerStart"](2),c["\u0275\u0275i18n"](3,19),c["\u0275\u0275elementContainerEnd"](),c["\u0275\u0275text"](4,"\xa0"),c["\u0275\u0275element"](5,"i",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())}function h(t,n){if(1&t&&(c["\u0275\u0275elementStart"](0,"div",10),c["\u0275\u0275template"](1,b,1,1,"app-notification",17),c["\u0275\u0275template"](2,v,6,0,"div",12),c["\u0275\u0275elementEnd"]()),2&t){const t=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",!(2==t.tabActiu)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.systemNotifications),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.systemNotifications.length&&1!=t.carregantProfile)}}function C(t,n){1&t&&c["\u0275\u0275element"](0,"app-notification",18),2&t&&c["\u0275\u0275property"]("notification",n.$implicit)}function P(t,n){1&t&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div",14),c["\u0275\u0275elementContainerStart"](2),c["\u0275\u0275i18n"](3,20),c["\u0275\u0275elementContainerEnd"](),c["\u0275\u0275text"](4,"\xa0"),c["\u0275\u0275element"](5,"i",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())}function O(t,n){if(1&t&&(c["\u0275\u0275elementStart"](0,"div",10),c["\u0275\u0275template"](1,C,1,1,"app-notification",17),c["\u0275\u0275template"](2,P,6,0,"div",12),c["\u0275\u0275elementEnd"]()),2&t){const t=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",!(3==t.tabActiu)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.shopNotifications),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.shopNotifications.length&&1!=t.carregantProfile)}}const y=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t,n){this.main=t,this.provider=n,this.tabActiu=1,this.num=0,this.userNotifications=[],this.systemNotifications=[],this.shopNotifications=[],t.newPage(this)}ngOnInit(){return(0,o.mG)(this,void 0,void 0,function*(){this.getUserNotifications()})}ngOnDestroy(){this.main.onDestroyPage()}getUserNotifications(){return(0,o.mG)(this,void 0,void 0,function*(){let t,n,e,i,o=0;if(yield this.main.provider.getAllUserNotification(this.main.currentUser.idUser).then(n=>{t=n}),null!=t)for(o=0;o<t.length;o++)0!=t[o].isAlive&&(e=yield this.main.provider.getUserById(t[o].from_user_notification),i=new Date(t[o].date_notification),n={msgType:t[o].tipus_notification,user:e,msg:t[o].missatge_notification,date:i,isReviewed:t[o].isReviewed_notification,idNotification:t[o].id_notification},this.identifyTypeOfContent(n))})}identifyTypeOfContent(t){let n={msgType:t.msgType,msg:t.msg,date:t.date,isReviewed:t.isReviewed,idNotification:t.idNotification};switch(t.msgType){case 1:this.userNotifications.push(new a(t.user,n)),this.num++;break;case 2:this.systemNotifications.push(new a(t.user,n)),this.num++;break;case 3:this.shopNotifications.push(new a(t.user,n)),this.num++;break;default:console.log("No valid notification number: "+t.msgType+" Object: "+t.user+" msg "+t.msg)}}}return t.\u0275fac=function(n){return new(n||t)(c["\u0275\u0275directiveInject"](r.J),c["\u0275\u0275directiveInject"](s.H))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["app-notifications"]],decls:13,vars:7,consts:function(){let t,n,e;return t="Ja ho has vist tot",n="Ja ho has vist tot",e="Ja ho has vist tot",[[1,"content"],[1,"card"],[1,"botonsTab","d-flex","flex-row"],[1,"botoTab",3,"click"],[1,"fas","fa-user"],["src","assets/in2art/logos/ma_blanca_text.svg",1,"logoTab"],[1,"fas","fa-shopping-bag"],["class","carregantProfile",4,"ngIf"],["class","tabNotifications",3,"hidden",4,"ngIf"],[1,"carregantProfile"],[1,"tabNotifications",3,"hidden"],["class","notification",3,"notification",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"notification",3,"notification"],[1,"noPublicacions"],t,[1,"fas","fa-check-circle"],[3,"notification",4,"ngFor","ngForOf"],[3,"notification"],n,e]},template:function(t,n){1&t&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"button",3),c["\u0275\u0275listener"]("click",function(){return n.tabActiu=1}),c["\u0275\u0275element"](4,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"button",3),c["\u0275\u0275listener"]("click",function(){return n.tabActiu=2}),c["\u0275\u0275element"](6,"img",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"button",3),c["\u0275\u0275listener"]("click",function(){return n.tabActiu=3}),c["\u0275\u0275element"](8,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](9,p,2,0,"div",7),c["\u0275\u0275template"](10,u,3,3,"div",8),c["\u0275\u0275template"](11,h,3,3,"div",8),c["\u0275\u0275template"](12,O,3,3,"div",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&t&&(c["\u0275\u0275advance"](3),c["\u0275\u0275attribute"]("data-open",1==n.tabActiu),c["\u0275\u0275advance"](2),c["\u0275\u0275attribute"]("data-open",2==n.tabActiu),c["\u0275\u0275advance"](2),c["\u0275\u0275attribute"]("data-open",3==n.tabActiu),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",n.carregantProfile),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!n.carregantProfile),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!n.carregantProfile),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!n.carregantProfile))},directives:[l.NgIf,d.N,l.NgForOf,f.c],styles:[".content[_ngcontent-%COMP%]{max-width:940px;padding:100px 0;border:none}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]{border-bottom:var(--border-card);border-radius:15px 15px 0 0}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;background-color:var(--color-fons-card);transition:background-color .3s}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[_ngcontent-%COMP%]   .logoTab[_ngcontent-%COMP%]{max-height:40px}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[data-open=true][_ngcontent-%COMP%]{background-color:var(--color-tab-obert)}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;transition:font-size .5s}.content[_ngcontent-%COMP%]   .noShopNotificationText[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .noSystemNotificationText[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .noUserNotificationText[_ngcontent-%COMP%]{padding-top:20px;text-align:center;font-size:30px;font-weight:700;color:grey}.content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:block;margin:40px auto;width:160px;filter:opacity(.1) drop-shadow(0 0 0 grey)}.content[_ngcontent-%COMP%]   .noPublicacions[_ngcontent-%COMP%]{text-align:center;color:var(--color-text);padding:1em;font-size:1.75em}@media only screen and (max-width:576px){.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]{border-radius:0}.content[_ngcontent-%COMP%]   .botonsTab[_ngcontent-%COMP%]   .botoTab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),t})()}]}];let _=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=c["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[i.Bz.forChild(y)],i.Bz]}),t})()}}]);